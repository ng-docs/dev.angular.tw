{"id":"guide/control_flow","title":"內建控制流","contents":"<div class=\"content\">\n  <h1 id=\"built-in-control-flow\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d1irlmekz2jxdklcwd5qbfxk0\">內建控制流<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#built-in-control-flow\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"65faqopb72cvdblcgn6i19y6b\">Angular 範本支援\n<strong>控制流區塊</strong>，允許你有條件地顯示、隱藏和重複元素。</p>\n<div class=\"alert is-important\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9rk6xnmg9aleayhjgsn58dcgg\">Angular 內建的控制流功能處於 \n<a href=\"/guide/releases#developer-preview\">開發者預覽</a> 階段。可以嘗試使用，但在穩定之前可能會發生變化。</p>\n</div>\n<h2 id=\"if-block-conditionals\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c3ogrurtx61juk64vctb8jx0x\"><code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code> 區塊的條件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#if-block-conditionals\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7d7n9auog6wgnwa2uucftym7b\">當條件表示式為真時，\n<code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code> 區塊會有條件地顯示其內容：</p>\n<code-example language=\"html\">\n@if (a &gt; b) {\n  {{a}} is greater than {{b}}\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"599893gqqtz9i0b5k3eoqdk44\"><code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code> 區塊可能有一個或多個關聯的分支。在一個 \n<code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code> 區塊之後，你可以選擇性地指定任意數量的 \n<code>@else if</code> 區塊和一個 \n<code>@else</code> 區塊：</p>\n<code-example language=\"html\">\n@if (a &gt; b) {\n  {{a}} is greater than {{b}}\n} @else if (b &gt; a) {\n  {{a}} is less than {{b}}\n} @else {\n  {{a}} is equal to {{b}}\n}\n</code-example>\n<h3 id=\"referencing-the-conditional-expressions-result\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"etqc5zpidhkliqvpkeugkzn12\">引用條件表示式的結果<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#referencing-the-conditional-expressions-result\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6kkr26ciho8m9xgs3g6q2vvfp\">你可以建立對 \n<code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code> 區塊的條件表示式結果的引用，並在區塊的內容中使用該引用。</p>\n<code-example language=\"html\">\n@if (users$ | <a href=\"api/platform-browser/animations/async\" class=\"code-anchor\">async</a>; as users) {\n  {{ users.length }}\n}\n</code-example>\n<h2 id=\"for-block---repeaters\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ce725ea2nfqymny2cqzetri2f\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code> 區塊 - 重複器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#for-block---repeaters\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4tbrhb2agejvla98mfm6p7101\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code> 區塊為集合中的每個條目渲染其內容。</p>\n<code-example language=\"html\">\n@for (item of items; track item.id) {\n  {{ item.name }}\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"20bkwra0eyn714ive7r42bo2p\">集合可以是任何 JavaScript \n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols\">可迭代物件</a>，但標準 JavaScript \n<code>Array</code> 值提供效能優勢。</p>\n<h3 id=\"track-for-calculating-difference-of-two-collections\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bqsqhqco1usujpmgdeishbqzv\">用於計算兩個集合差異的 \n<code>track</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#track-for-calculating-difference-of-two-collections\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cojxtvfly0jji7gxzxccbdmo5\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code> 區塊需要一個 \n<code>track</code> 表示式。Angular 使用該表示式的值作為每個條目的唯一標識。這個標識允許框架在新增、刪除或重新排序條目後執行最小的 DOM 操作。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4f7l20dwstsopq2lko0kypfw6\">對於簡單情況，你可以使用 \n<code>track $index</code> 作為合理的預設值。</p>\n<h3 id=\"index-and-other-contextual-variables\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"42uih7qwo4uoe6qs6623d7ywt\"><code>$index</code> 和其他上下文變數<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#index-and-other-contextual-variables\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dvyevlmgc7th58a0dtcfbday2\">在 \n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code> 內容中，總是可以使用幾個隱式變數：</p>\n<table>\n<thead>\n<tr>\n<th data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"48xhyn8dc085o9pjaic3ud9sp\">變數</th>\n<th data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6ryq83o4vnwnm29aax9uihwua\">含義</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>$count</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bbswk058bbgt5fkl0rgqk1usv\">迭代集合中的條目數量</td>\n</tr>\n<tr>\n<td><code>$index</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6thwsy26mvrsk6aff8x5b630w\">當前行的索引</td>\n</tr>\n<tr>\n<td><code>$first</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bzxpfmqg58115vuixl0iandms\">當前行是否為第一行</td>\n</tr>\n<tr>\n<td><code>$last</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7582yd8etnavnfx5gy6d8vvwo\">當前行是否為最後一行</td>\n</tr>\n<tr>\n<td><code>$even</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4ybdbe6i3snxxk3s0pfumf39e\">當前行索引是否為偶數</td>\n</tr>\n<tr>\n<td><code>$odd</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3t5v8vymr8v16918kh34qmx8l\">當前行索引是否為奇數</td>\n</tr>\n</tbody>\n</table>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bpajs63shhhujw4d97myhrbel\">這些變數始終以這些名稱可用，但可以透過 \n<code>let</code> 段別名：</p>\n<code-example language=\"html\">\n@for (item of items; track item.id; let idx = $index, e = $even) {\n  Item #{{ idx }}: {{ item.name }}\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cgbyqzqyub8cuxlpevew99fi5\">當巢狀\n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>區塊時，使用別名非常有用，這樣你可以在更深的塊中引用這些變數值。</p>\n<h3 id=\"empty-block\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"39yjtuzcthttfuib8j9x68p3j\"><code>空</code>區塊<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#empty-block\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7sby5mxf37st6v2anbij9tdg6\">你可以選擇在\n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>區塊內容後立即包含一個\n<code>@empty</code>部分。當沒有專案時，\n<code>@empty</code>區塊的內容會顯示：</p>\n<code-example language=\"html\">\n@for (item of items; track item.name) {\n  &lt;li&gt; {{ item.name }}&lt;/li&gt;\n} @empty {\n  &lt;li&gt; There are no items.&lt;/li&gt;\n}\n</code-example>\n<h2 id=\"switch-block---selection\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7ackv8z51nzwtvcfiy250h41m\"><code><a href=\"api/core/switch\" class=\"code-anchor\">@switch</a></code>區塊 - 選擇<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#switch-block---selection\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1ofbni3d5ydz7iohyix2ci6s8\"><code>switch</code>的語法類似於\n<code>if</code>，受JavaScript\n<code>switch</code>語句啟發：</p>\n<code-example language=\"html\">\n@switch (condition) {\n  @case (caseA) {\n    Case A.\n  }\n  @case (caseB) {\n    Case B.\n  }\n  @default {\n    Default case.\n  }\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4vb1j3ocj0ey2yeoqb5y4g8ck\">條件表示式的值將使用\n<code>===</code>運算符與case表示式進行比較。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ckfbf3j5kbljady0wz8xfxqes\"><strong><code><a href=\"api/core/switch\" class=\"code-anchor\">@switch</a></code>沒有貫穿效應</strong>，因此不需要等效於\n<code>break</code>或\n<code>return</code>語句。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9h38f8wcps0thx7mcfbsc1q7h\"><code>@default</code>區塊是可選的，可以省略。如果沒有\n<code>@case</code>與表示式對應，並且沒有\n<code>@default</code>區塊，則什麼都不會顯示。</p>\n<h2 id=\"comparing-built-in-control-flow-to-ngif-ngswitch-and-ngfor\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5837z63pwv4h18mygwl06ste7\">將內建控制流與\n<code><a href=\"api/common/NgIf\" class=\"code-anchor\">NgIf</a></code>、\n<code><a href=\"api/common/NgSwitch\" class=\"code-anchor\">NgSwitch</a></code>和\n<code><a href=\"api/common/NgFor\" class=\"code-anchor\">NgFor</a></code>進行比較<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#comparing-built-in-control-flow-to-ngif-ngswitch-and-ngfor\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aw933ggl5lws8hoo8gwlqdntw\"><code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code>區塊取代了\n<code>*<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code>，用於表達UI的條件部分。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7oh535xoacg6yvumhfc5ml8ig\"><code><a href=\"api/core/switch\" class=\"code-anchor\">@switch</a></code>區塊取代了\n<code><a href=\"api/common/NgSwitch\" class=\"code-anchor\">ngSwitch</a></code>，具有重大優勢：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5sygw0uv92gqqr8tf79djzc1g\"><code><a href=\"api/core/switch\" class=\"code-anchor\">@switch</a></code>區塊不需要為條件表示式或每個條件範本提供容器元素。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"benw366drk571xf4jqwl701gm\"><code><a href=\"api/core/switch\" class=\"code-anchor\">@switch</a></code>區塊支援範本型別檢查，包括在每個分支中進行型別窄化。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f597xiqdkgrjltscpx9kcsjfm\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>區塊取代了迭代的\n<code>*<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code>，與其結構型指令\n<code><a href=\"api/common/NgFor\" class=\"code-anchor\">NgFor</a></code>前身相比有幾處不同：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"33gp5gwm9bgt1j3uzd7f68013\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>區塊需要一個追蹤表示式來唯一標識集合中的專案。雖然\n<code><a href=\"api/common/NgFor\" class=\"code-anchor\">NgFor</a></code>需要一個\n<code>trackBy</code>方法，但\n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>區塊透過接受一個\n<code>track</code>表示式簡化了追蹤。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8aoa3zxw8aot92odj2n7cz77b\">你可以使用\n<code>@empty</code>區塊指定在集合為空時顯示的內容。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8jz0visbjgbj994xo202owo32\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>區塊使用了一種最佳化演算法來確定在修改集合後需要的最小DOM操作數量。雖然\n<code><a href=\"api/common/NgFor\" class=\"code-anchor\">NgFor</a></code>允許開發人員提供自定義\n<code><a href=\"api/core/IterableDiffer\" class=\"code-anchor\">IterableDiffer</a></code>實現，但\n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>區塊不支援自定義差異。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2swxik0cols0cwnaan0e0aie4\"><code>track</code>設定取代了\n<code><a href=\"api/common/NgFor\" class=\"code-anchor\">NgFor</a></code>的\n<code>trackBy</code>函式概念。由於\n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>是內建的，我們可以提供比傳遞\n<code>trackBy</code>函式更好的體驗，並直接使用代表鍵的表示式。透過呼叫\n<code>trackBy</code>函式可以將\n<code>trackBy</code>遷移為\n<code>track</code>。</p>\n<code-example language=\"html\">\n@for (item of items; track itemId($index, item)) {\n  {{ item.name }}\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cembenuf03d2ibc56fpt74z3d\">在Angular應用程式中，沒有\n<code>trackBy</code>的不可變資料迴圈是效能錯誤的最常見原因。</p>\n\n  \n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - /guide/releases#developer-preview\n - api/common/NgFor\n - api/common/NgIf\n - api/common/NgSwitch\n - api/core/IterableDiffer\n - api/core/for\n - api/core/if\n - api/core/switch\n - api/platform-browser/animations/async\n - guide/control_flow#built-in-control-flow\n - guide/control_flow#comparing-built-in-control-flow-to-ngif-ngswitch-and-ngfor\n - guide/control_flow#empty-block\n - guide/control_flow#for-block---repeaters\n - guide/control_flow#if-block-conditionals\n - guide/control_flow#index-and-other-contextual-variables\n - guide/control_flow#referencing-the-conditional-expressions-result\n - guide/control_flow#switch-block---selection\n - guide/control_flow#track-for-calculating-difference-of-two-collections\n - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols\n-->"}