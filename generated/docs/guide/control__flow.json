{"id":"guide/control_flow","title":"内置控制流","contents":"<div class=\"content\">\n  <h1 id=\"built-in-control-flow\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d1irlmekz2jxdklcwd5qbfxk0\">内置控制流<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#built-in-control-flow\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"65faqopb72cvdblcgn6i19y6b\">Angular 模板支持\n<strong>控制流块</strong>，允许你有条件地显示、隐藏和重复元素。</p>\n<div class=\"alert is-important\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9rk6xnmg9aleayhjgsn58dcgg\">Angular 内置的控制流功能处于 \n<a href=\"/guide/releases#developer-preview\">开发者预览</a> 阶段。可以尝试使用，但在稳定之前可能会发生变化。</p>\n</div>\n<h2 id=\"if-block-conditionals\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c3ogrurtx61juk64vctb8jx0x\"><code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code> 块的条件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#if-block-conditionals\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7d7n9auog6wgnwa2uucftym7b\">当条件表达式为真时，\n<code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code> 块会有条件地显示其内容：</p>\n<code-example language=\"html\">\n@if (a &gt; b) {\n  {{a}} is greater than {{b}}\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"599893gqqtz9i0b5k3eoqdk44\"><code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code> 块可能有一个或多个关联的分支。在一个 \n<code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code> 块之后，你可以选择性地指定任意数量的 \n<code>@else if</code> 块和一个 \n<code>@else</code> 块：</p>\n<code-example language=\"html\">\n@if (a &gt; b) {\n  {{a}} is greater than {{b}}\n} @else if (b &gt; a) {\n  {{a}} is less than {{b}}\n} @else {\n  {{a}} is equal to {{b}}\n}\n</code-example>\n<h3 id=\"referencing-the-conditional-expressions-result\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"etqc5zpidhkliqvpkeugkzn12\">引用条件表达式的结果<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#referencing-the-conditional-expressions-result\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6kkr26ciho8m9xgs3g6q2vvfp\">你可以创建对 \n<code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code> 块的条件表达式结果的引用，并在块的内容中使用该引用。</p>\n<code-example language=\"html\">\n@if (users$ | <a href=\"api/platform-browser/animations/async\" class=\"code-anchor\">async</a>; as users) {\n  {{ users.length }}\n}\n</code-example>\n<h2 id=\"for-block---repeaters\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ce725ea2nfqymny2cqzetri2f\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code> 块 - 重复器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#for-block---repeaters\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4tbrhb2agejvla98mfm6p7101\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code> 块为集合中的每个条目渲染其内容。</p>\n<code-example language=\"html\">\n@for (item of items; track item.id) {\n  {{ item.name }}\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"20bkwra0eyn714ive7r42bo2p\">集合可以是任何 JavaScript \n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols\">可迭代对象</a>，但标准 JavaScript \n<code>Array</code> 值提供性能优势。</p>\n<h3 id=\"track-for-calculating-difference-of-two-collections\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bqsqhqco1usujpmgdeishbqzv\">用于计算两个集合差异的 \n<code>track</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#track-for-calculating-difference-of-two-collections\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cojxtvfly0jji7gxzxccbdmo5\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code> 块需要一个 \n<code>track</code> 表达式。Angular 使用该表达式的值作为每个条目的唯一标识。这个标识允许框架在添加、删除或重新排序条目后执行最小的 DOM 操作。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4f7l20dwstsopq2lko0kypfw6\">对于简单情况，你可以使用 \n<code>track $index</code> 作为合理的默认值。</p>\n<h3 id=\"index-and-other-contextual-variables\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"42uih7qwo4uoe6qs6623d7ywt\"><code>$index</code> 和其他上下文变量<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#index-and-other-contextual-variables\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dvyevlmgc7th58a0dtcfbday2\">在 \n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code> 内容中，总是可以使用几个隐式变量：</p>\n<table>\n<thead>\n<tr>\n<th data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"48xhyn8dc085o9pjaic3ud9sp\">变量</th>\n<th data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6ryq83o4vnwnm29aax9uihwua\">含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>$count</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bbswk058bbgt5fkl0rgqk1usv\">迭代集合中的条目数量</td>\n</tr>\n<tr>\n<td><code>$index</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6thwsy26mvrsk6aff8x5b630w\">当前行的索引</td>\n</tr>\n<tr>\n<td><code>$first</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bzxpfmqg58115vuixl0iandms\">当前行是否为第一行</td>\n</tr>\n<tr>\n<td><code>$last</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7582yd8etnavnfx5gy6d8vvwo\">当前行是否为最后一行</td>\n</tr>\n<tr>\n<td><code>$even</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4ybdbe6i3snxxk3s0pfumf39e\">当前行索引是否为偶数</td>\n</tr>\n<tr>\n<td><code>$odd</code></td>\n<td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3t5v8vymr8v16918kh34qmx8l\">当前行索引是否为奇数</td>\n</tr>\n</tbody>\n</table>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bpajs63shhhujw4d97myhrbel\">这些变量始终以这些名称可用，但可以通过 \n<code>let</code> 段别名：</p>\n<code-example language=\"html\">\n@for (item of items; track item.id; let idx = $index, e = $even) {\n  Item #{{ idx }}: {{ item.name }}\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cgbyqzqyub8cuxlpevew99fi5\">当嵌套\n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>块时，使用别名非常有用，这样你可以在更深的块中引用这些变量值。</p>\n<h3 id=\"empty-block\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"39yjtuzcthttfuib8j9x68p3j\"><code>空</code>块<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#empty-block\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7sby5mxf37st6v2anbij9tdg6\">你可以选择在\n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>块内容后立即包含一个\n<code>@empty</code>部分。当没有项目时，\n<code>@empty</code>块的内容会显示：</p>\n<code-example language=\"html\">\n@for (item of items; track item.name) {\n  &lt;li&gt; {{ item.name }}&lt;/li&gt;\n} @empty {\n  &lt;li&gt; There are no items.&lt;/li&gt;\n}\n</code-example>\n<h2 id=\"switch-block---selection\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7ackv8z51nzwtvcfiy250h41m\"><code><a href=\"api/core/switch\" class=\"code-anchor\">@switch</a></code>块 - 选择<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#switch-block---selection\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1ofbni3d5ydz7iohyix2ci6s8\"><code>switch</code>的语法类似于\n<code>if</code>，受JavaScript\n<code>switch</code>语句启发：</p>\n<code-example language=\"html\">\n@switch (condition) {\n  @case (caseA) {\n    Case A.\n  }\n  @case (caseB) {\n    Case B.\n  }\n  @default {\n    Default case.\n  }\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4vb1j3ocj0ey2yeoqb5y4g8ck\">条件表达式的值将使用\n<code>===</code>运算符与case表达式进行比较。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ckfbf3j5kbljady0wz8xfxqes\"><strong><code><a href=\"api/core/switch\" class=\"code-anchor\">@switch</a></code>没有贯穿效应</strong>，因此不需要等效于\n<code>break</code>或\n<code>return</code>语句。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9h38f8wcps0thx7mcfbsc1q7h\"><code>@default</code>块是可选的，可以省略。如果没有\n<code>@case</code>与表达式匹配，并且没有\n<code>@default</code>块，则什么都不会显示。</p>\n<h2 id=\"comparing-built-in-control-flow-to-ngif-ngswitch-and-ngfor\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5837z63pwv4h18mygwl06ste7\">将内置控制流与\n<code><a href=\"api/common/NgIf\" class=\"code-anchor\">NgIf</a></code>、\n<code><a href=\"api/common/NgSwitch\" class=\"code-anchor\">NgSwitch</a></code>和\n<code><a href=\"api/common/NgFor\" class=\"code-anchor\">NgFor</a></code>进行比较<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/control_flow#comparing-built-in-control-flow-to-ngif-ngswitch-and-ngfor\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aw933ggl5lws8hoo8gwlqdntw\"><code><a href=\"api/core/if\" class=\"code-anchor\">@if</a></code>块取代了\n<code>*<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code>，用于表达UI的条件部分。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7oh535xoacg6yvumhfc5ml8ig\"><code><a href=\"api/core/switch\" class=\"code-anchor\">@switch</a></code>块取代了\n<code><a href=\"api/common/NgSwitch\" class=\"code-anchor\">ngSwitch</a></code>，具有重大优势：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5sygw0uv92gqqr8tf79djzc1g\"><code><a href=\"api/core/switch\" class=\"code-anchor\">@switch</a></code>块不需要为条件表达式或每个条件模板提供容器元素。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"benw366drk571xf4jqwl701gm\"><code><a href=\"api/core/switch\" class=\"code-anchor\">@switch</a></code>块支持模板类型检查，包括在每个分支中进行类型窄化。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f597xiqdkgrjltscpx9kcsjfm\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>块取代了迭代的\n<code>*<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code>，与其结构型指令\n<code><a href=\"api/common/NgFor\" class=\"code-anchor\">NgFor</a></code>前身相比有几处不同：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"33gp5gwm9bgt1j3uzd7f68013\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>块需要一个追踪表达式来唯一标识集合中的项目。虽然\n<code><a href=\"api/common/NgFor\" class=\"code-anchor\">NgFor</a></code>需要一个\n<code>trackBy</code>方法，但\n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>块通过接受一个\n<code>track</code>表达式简化了追踪。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8aoa3zxw8aot92odj2n7cz77b\">你可以使用\n<code>@empty</code>块指定在集合为空时显示的内容。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8jz0visbjgbj994xo202owo32\"><code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>块使用了一种优化算法来确定在修改集合后需要的最小DOM操作数量。虽然\n<code><a href=\"api/common/NgFor\" class=\"code-anchor\">NgFor</a></code>允许开发人员提供自定义\n<code><a href=\"api/core/IterableDiffer\" class=\"code-anchor\">IterableDiffer</a></code>实现，但\n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>块不支持自定义差异。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2swxik0cols0cwnaan0e0aie4\"><code>track</code>设置取代了\n<code><a href=\"api/common/NgFor\" class=\"code-anchor\">NgFor</a></code>的\n<code>trackBy</code>函数概念。由于\n<code><a href=\"api/core/for\" class=\"code-anchor\">@for</a></code>是内置的，我们可以提供比传递\n<code>trackBy</code>函数更好的体验，并直接使用代表键的表达式。通过调用\n<code>trackBy</code>函数可以将\n<code>trackBy</code>迁移为\n<code>track</code>。</p>\n<code-example language=\"html\">\n@for (item of items; track itemId($index, item)) {\n  {{ item.name }}\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cembenuf03d2ibc56fpt74z3d\">在Angular应用程序中，没有\n<code>trackBy</code>的不可变数据循环是性能错误的最常见原因。</p>\n\n  \n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - /guide/releases#developer-preview\n - api/common/NgFor\n - api/common/NgIf\n - api/common/NgSwitch\n - api/core/IterableDiffer\n - api/core/for\n - api/core/if\n - api/core/switch\n - api/platform-browser/animations/async\n - guide/control_flow#built-in-control-flow\n - guide/control_flow#comparing-built-in-control-flow-to-ngif-ngswitch-and-ngfor\n - guide/control_flow#empty-block\n - guide/control_flow#for-block---repeaters\n - guide/control_flow#if-block-conditionals\n - guide/control_flow#index-and-other-contextual-variables\n - guide/control_flow#referencing-the-conditional-expressions-result\n - guide/control_flow#switch-block---selection\n - guide/control_flow#track-for-calculating-difference-of-two-collections\n - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols\n-->"}