{"id":"guide/dynamic-component-loader","title":"動態元件載入器","contents":"<div class=\"content\">\n  <h1 id=\"dynamic-component-loader\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9zoxyfamlath2gc3c5wf86wgw\">動態元件載入器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-component-loader#dynamic-component-loader\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4uv4naveyq5ggjflewklflc1d\">元件的範本不會永遠是固定的。應用可能會需要在執行期間載入一些新的元件。這本烹飪書為你展示如何動態新增元件。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ct1yz5makdynyw4lsfzfg8v9f\">到<live-example name=\"dynamic-component-loader\"></live-example>檢視本烹飪書的原始碼。</p>\n<p><a id=\"dynamic-loading\"></a></p>\n<h2 id=\"rendering-components-dynamically\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1x4yjf6ghdswarfi9b0qufy9r\">動態渲染元件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-component-loader#rendering-components-dynamically\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5r6nizyabb1j82ftapxgupykr\">下面的例子展示了如何建立動態廣告條。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6eixigw2kqcrpuq29g0t3cnzu\">英雄管理局正在計劃一個廣告活動，要在廣告條中顯示一系列不同的廣告。幾個不同的小組可能會頻繁加入新的廣告元件。再用只支援靜態元件結構的範本顯然是不現實的。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bfzu9qz23zbvtwwib1ej8da3y\">你需要一種新的元件載入方式，它不需要在廣告條元件的範本中引用固定的元件。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"997yynmfrtdpv7vi79tta5p5j\"><code><a href=\"api/common/NgComponentOutlet\" class=\"code-anchor\">NgComponentOutlet</a></code>指令可用於實例化元件並將其插入當前檢視中。該指令允許你提供應該渲染的元件類別，以及在初始化期間要使用的元件輸入。</p>\n<code-example header=\"src/app/ad-banner.component.ts\" path=\"dynamic-component-loader/src/app/ad-banner.component.ts\" region=\"component\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-ad-banner',\n  standalone: true,\n  imports: [<a href=\"api/common/NgComponentOutlet\" class=\"code-anchor\">NgComponentOutlet</a>, <a href=\"api/common/AsyncPipe\" class=\"code-anchor\">AsyncPipe</a>],\n  template: `\n    &lt;div class=\"ad-banner-example\"&gt;\n      &lt;h3&gt;Advertisements&lt;/h3&gt;\n      &lt;ng-container *<a href=\"api/common/NgComponentOutlet\" class=\"code-anchor\">ngComponentOutlet</a>=\"\n        currentAd.component;\n        inputs: currentAd.inputs;\n      \" /&gt;\n      &lt;button (click)=\"displayNextAd()\"&gt;Next&lt;/button&gt;\n    &lt;/div&gt;\n  `\n})\nexport class AdBannerComponent {\n  private adList = inject(AdService).getAds();\n\n  private currentAdIndex = 0;\n\n  get currentAd() {\n    return this.adList[this.currentAdIndex];\n  }\n\n  displayNextAd() {\n    this.currentAdIndex++;\n    // Reset the current ad index back to `0` when we reach the end of an array.\n    if (this.currentAdIndex === this.adList.length) {\n      this.currentAdIndex = 0;\n    }\n  }\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"as7pfg34ej5wqk3c2m5b9gb6s\"><code>AdBannerComponent</code>類別注入\n<code>AdService</code>服務並請求廣告清單。 『當前廣告』索引最初設定為\n<code>0</code>，表示應顯示第一個廣告。 當用戶點選『下一個』按鈕時，索引增加一。 一旦索引達到廣告陣列的長度，索引會重置為\n<code>0</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c315qcepzuv2mev7c1y8bxbw6\">在範本中，使用\n<code>currentAd</code>獲取器來檢索當前廣告。 如果值發生變化，Angular會捕獲並在UI中反映這些變化。</p>\n<h2 id=\"different-components-from-the-service\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"85dtn6s1iayh80er1kmfnyfdj\">服務中的不同元件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-component-loader#different-components-from-the-service\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7pixt0zkky6cx503kwxo7lay9\">從\n<code>AdService</code>服務回傳的元件並在\n<code>AdBannerComponent</code>範本中使用\n<code><a href=\"api/common/NgComponentOutlet\" class=\"code-anchor\">NgComponentOutlet</a></code>可以不同。 Angular會檢測元件類別是否發生變化，並相應更新UI。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"41q583lpq87vd0hwoqvkvutk0\">這裡有兩個範例元件和提供它們輸入的服務：</p>\n<code-tabs>\n    <code-pane header=\"hero-job-ad.component.ts\" path=\"dynamic-component-loader/src/app/hero-job-ad.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/Input\" class=\"code-anchor\">Input</a> } from '@angular/core';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  standalone: true,\n  template: `\n    &lt;div class=\"job-ad\"&gt;\n      &lt;h4&gt;{{ headline }}&lt;/h4&gt;\n      {{ body }}\n    &lt;/div&gt;\n  `,\n})\nexport class HeroJobAdComponent {\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() headline!: string;\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() body!: string;\n}\n\n\n</code-pane>\n    <code-pane header=\"hero-profile.component.ts\" path=\"dynamic-component-loader/src/app/hero-profile.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/Input\" class=\"code-anchor\">Input</a> } from '@angular/core';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  standalone: true,\n  template: `\n    &lt;div class=\"hero-profile\"&gt;\n      &lt;h3&gt;Featured Hero Profile&lt;/h3&gt;\n      &lt;h4&gt;{{ name }}&lt;/h4&gt;\n      &lt;p&gt;{{ bio }}&lt;/p&gt;\n      &lt;strong&gt;Hire this hero today!&lt;/strong&gt;\n    &lt;/div&gt;\n  `,\n})\nexport class HeroProfileComponent {\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() name!: string;\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() bio!: string;\n}\n\n\n</code-pane>\n    <code-pane header=\"ad.service.ts\" path=\"dynamic-component-loader/src/app/ad.service.ts\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>, <a href=\"api/core/Type\" class=\"code-anchor\">Type</a> } from '@angular/core';\nimport { HeroProfileComponent } from './hero-profile.component';\nimport { HeroJobAdComponent } from './hero-job-ad.component';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>({ providedIn: 'root' })\nexport class AdService {\n  getAds() {\n    return [\n      {\n        component: HeroProfileComponent,\n        inputs: { name: 'Dr. IQ', bio: 'Smart as they come' },\n      },\n      {\n        component: HeroProfileComponent,\n        inputs: { name: 'Bombasto', bio: 'Brave as they come' },\n      },\n      {\n        component: HeroJobAdComponent,\n        inputs: {\n          headline: 'Hiring for several positions',\n          body: 'Submit your resume today!',\n        },\n      },\n      {\n        component: HeroJobAdComponent,\n        inputs: {\n          headline: 'Openings in all departments',\n          body: 'Apply today',\n        },\n      },\n    ] as {component: <a href=\"api/core/Type\" class=\"code-anchor\">Type</a>&lt;any&gt;, inputs: Record&lt;string, unknown&gt;}[];\n  }\n}\n\n\n</code-pane>\n</code-tabs>\n<p><a id=\"final-ad-baner\"></a></p>\n<h2 id=\"final-ad-banner\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"31k4mr6yk7fhuwt27asegoa0h\">最終的廣告欄<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/dynamic-component-loader#final-ad-banner\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"277clzm5qby9b0mc4sck6pmvi\">最終的廣告欄是這樣的：</p>\n<div class=\"lightbox\">\n<img alt=\"Ads\" src=\"generated/images/guide/dynamic-component-loader/ads-example.gif\" width=\"480\" height=\"222\">\n</div>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2apv62xn281dx0iihkrpnii1y\">參閱<live-example name=\"dynamic-component-loader\"></live-example>.</p>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：Tue Apr 18 2023</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/elements\n - guide/example-apps-list\n-->\n<!-- links from this doc:\n - api/common/AsyncPipe\n - api/common/NgComponentOutlet\n - api/core/Component\n - api/core/Injectable\n - api/core/Input\n - api/core/Type\n - guide/dynamic-component-loader#different-components-from-the-service\n - guide/dynamic-component-loader#dynamic-component-loader\n - guide/dynamic-component-loader#final-ad-banner\n - guide/dynamic-component-loader#rendering-components-dynamically\n-->"}