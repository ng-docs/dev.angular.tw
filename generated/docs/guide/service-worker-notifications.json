{"id":"guide/service-worker-notifications","title":"Service Worker 通知","contents":"<div class=\"content\">\n  <h1 id=\"service-worker-notifications\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2u8ej2b5odfmacywnmaieurx\">Service Worker 通知<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#service-worker-notifications\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8n3fgpbcuttxdfewfe6hzext7\">推送通知是吸引使用者的一種引人注目的方式。透過 Service Worker 的強大功能，即使你的應用程式不在焦點上，也可以將通知傳送到裝置。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1dgan5411psr5pmwmukuffg4y\">Angular Service Worker 支援顯示推送通知和處理通知點選事件。</p>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c74werdf0qug6mieuezk1n5nn\">使用 Angular Service Worker 時，推送通知互動是使用 <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> 服務處理的。要了解有關所涉及的瀏覽器 API 的更多訊息，請參閱<a href=\"https://developer.mozilla.org/docs/Web/API/Push_API\">推送 API</a>和<a href=\"https://developer.mozilla.org/docs/Web/API/Notifications_API/Using_the_Notifications_API\">使用通知 API</a>。</p>\n</div>\n<h2 id=\"prerequisites\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e44b21uig1fakj5vcfuvz1bdu\">前提條件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a28dtgqoqhydp7mi3pnogtmbh\">我們建議你對以下內容有基本的瞭解：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c2rijcglaqp3k5gzb2q1thcdr\"><a href=\"guide/service-worker-getting-started\">Service Worker 快速上手</a>。</li>\n</ul>\n<h2 id=\"notification-payload\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2ybf21q7lftkui34yvk01dvmd\">通知負載<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#notification-payload\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6lv67ggornxp7ehn6et9zuomw\">透過推送具有有效負載的訊息來呼叫推送通知。請參閱 <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> 以獲得指導。</p>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5pc5ipqpf4bi4dq6f7sv1tep7\">在 Chrome 中，你可以在沒有後端的情況下測試推送通知。開啟 Devtools -&gt; Application -&gt; Service Workers 並使用 <code>Push</code> 輸入傳送 JSON 通知負載。</p>\n</div>\n<h2 id=\"notification-click-handling\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ct5cw2oc54wz7da93hr8jbqq0\">通知點選處理<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#notification-click-handling\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7jf3g8nu70r2m6niec0l9p2mo\"><code>notificationclick</code> 點選事件的預設行為是關閉通知並通知 <code><a href=\"api/service-worker/SwPush#notificationClicks\" class=\"code-anchor\">SwPush.notificationClicks</a></code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9kqbmnkfdelq5cgmc8fwx2k2y\">你可以透過向 <code>data</code> 物件新增 <code>onActionClick</code> 屬性並提供 <code>default</code> 條目來指定要在 <code>notificationclick</code> 上執行的附加操作。當單擊通知時沒有開啟的用戶端時，這尤其有用。</p>\n<code-example format=\"json\" language=\"json\">\n\n{\n  \"notification\": {\n    \"title\": \"New Notification!\",\n    \"data\": {\n      \"onActionClick\": {\n        \"default\": {\"operation\": \"openWindow\", \"url\": \"foo\"}\n      }\n    }\n  }\n}\n\n</code-example>\n<h3 id=\"operations\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"43ysvljbqsi9gnznk2qix8ai5\">操作<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#operations\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"62u3uylahxsgru8u22cbazp7c\">Angular Service Worker 支援以下操作：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"43ysvljbqsi9gnznk2qix8ai5\">操作</th>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3prlgfrx5eo2xqncnnob4crxu\">詳情</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><code>openWindow</code></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b78fdzbklfm5ferz4g7r6yzs2\">在指定的 URL 處開啟一個新標籤頁。</td>\n</tr>\n<tr>\n<td align=\"left\"><code>focusLastFocusedOrOpen</code></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2ghj48k4ycr4nifndk85wwk37\">將焦點放在最後一個已聚焦的用戶端上。如果沒有已開啟的用戶端，則在指定的 URL 處開啟一個新標籤頁。</td>\n</tr>\n<tr>\n<td align=\"left\"><code>navigateLastFocusedOrOpen</code></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8xf1ic7be4jf4yf75n2iwzcr2\">將焦點放在最後一個已聚焦的用戶端上，並將其導向到指定的 URL。如果沒有已開啟的用戶端，則在指定的 URL 處開啟一個新標籤頁。</td>\n</tr>\n<tr>\n<td align=\"left\"><code>sendRequest</code></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8boncr73a5g4zc4z0r96emd3p\">向指定的 URL 傳送簡單的 GET 請求。</td>\n</tr>\n</tbody>\n</table>\n<div class=\"alert is-important\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ag4ix4ty84szogvj2pulgom5h\">這些 URL 會被解析為相對於此 Service Worker 的註冊範圍的。<br>\n如果 <code>onActionClick</code> 項未定義 <code>url</code>，則使用 Service Worker 的註冊範圍。</p>\n</div>\n<h3 id=\"actions\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"en94m4p3a09fuw01gjhg0giy\">行動<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#actions\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5qzssaubky5od20arsr6wofnq\">操作提供了一種自定義使用者如何與通知互動的方法。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6n1810kuarf3yqdta7ld6rtg2\">使用 <code>actions</code> 屬性，你可以定義一組可用的操作。每個動作都表示為一個動作按鈕，使用者可以單擊該按鈕與通知進行互動。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a2v87a61xvgmz3k4mglarg6az\">此外，使用 <code>data</code> 物件上的 <code>onActionClick</code> 屬性，你可以將每個操作與單擊相應操作按鈕時要執行的操作聯絡起來：</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n{\n  \"notification\": {\n    \"title\": \"New Notification!\",\n    \"actions\": [\n      {\"action\": \"foo\", \"title\": \"Open new tab\"},\n      {\"action\": \"bar\", \"title\": \"Focus last\"},\n      {\"action\": \"baz\", \"title\": \"Navigate last\"},\n      {\"action\": \"qux\", \"title\": \"Send request in the background\"},\n      {\"action\": \"other\", \"title\": \"Just notify existing clients\"}\n    ],\n    \"data\": {\n      \"onActionClick\": {\n        \"default\": {\"operation\": \"openWindow\"},\n        \"foo\": {\"operation\": \"openWindow\", \"url\": \"/absolute/path\"},\n        \"bar\": {\"operation\": \"focusLastFocusedOrOpen\", \"url\": \"relative/path\"},\n        \"baz\": {\"operation\": \"navigateLastFocusedOrOpen\", \"url\": \"https://other.domain.com/\"},\n        \"qux\": {\"operation\": \"sendRequest\", \"url\": \"https://yet.another.domain.com/\"}\n      }\n    }\n  }\n}\n\n</code-example>\n<div class=\"alert is-important\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c5ebdnivg56va6jm59p3r4a19\">如果操作沒有相應的 <code>onActionClick</code> 條目，則通知將關閉並在現有用戶端上通知 <code><a href=\"api/service-worker/SwPush#notificationClicks\" class=\"code-anchor\">SwPush.notificationClicks</a></code>。</p>\n</div>\n<h2 id=\"more-on-angular-service-workers\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e9jl51v338pdg88lkv1cl8f1i\">關於 Angular Service Worker 的更多訊息<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#more-on-angular-service-workers\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1oolgylns9kaynftarwog49tq\">你可能還對下列內容感興趣：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c8h34vd4o8r9mh6u20crmuohp\"><a href=\"guide/service-worker-devops\">生產環境下的 Service Worker</a>。</li>\n</ul>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：Mon Feb 28 2022</div>\n</div>\n\n\n<!-- links to this doc:\n - api/service-worker/SwPush\n - guide/service-worker-communications\n - guide/service-worker-intro\n-->\n<!-- links from this doc:\n - api/service-worker/SwPush\n - api/service-worker/SwPush#notificationClicks\n - guide/service-worker-devops\n - guide/service-worker-getting-started\n - guide/service-worker-notifications#actions\n - guide/service-worker-notifications#more-on-angular-service-workers\n - guide/service-worker-notifications#notification-click-handling\n - guide/service-worker-notifications#notification-payload\n - guide/service-worker-notifications#operations\n - guide/service-worker-notifications#prerequisites\n - guide/service-worker-notifications#service-worker-notifications\n - https://developer.mozilla.org/docs/Web/API/Notifications_API/Using_the_Notifications_API\n - https://developer.mozilla.org/docs/Web/API/Push_API\n-->"}