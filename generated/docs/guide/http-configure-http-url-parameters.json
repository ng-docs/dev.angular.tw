{"id":"guide/http-configure-http-url-parameters","title":"HTTP - 配置 URL 参数","contents":"<div class=\"content\">\n  <h1 id=\"http---configure-url-parameters\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7la56d83g7gk5flqtyq3fzx3p\">HTTP - 配置 URL 参数<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/http-configure-http-url-parameters#http---configure-url-parameters\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cxd4i3lx7sd4eabdspnwloa47\">使用 <code><a href=\"api/common/http/HttpParams\" class=\"code-anchor\">HttpParams</a></code> 类和 <code>params</code> 选项在你的 <code><a href=\"api/common/http/HttpRequest\" class=\"code-anchor\">HttpRequest</a></code> 中添加 URL 查询字符串。</p>\n<h2 id=\"create-url-parameter-using-the-search-method\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"du7ml1y4dyick4yz8dldmffm4\">使用搜索方法创建 URL 参数<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/http-configure-http-url-parameters#create-url-parameter-using-the-search-method\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5f92xfpsd72uqynsrygijilwo\">下面的例子中，<code>searchHeroes()</code> 方法用于查询名字中包含搜索词的英雄。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dxod5hk6bh2u4rm6j3x00pfkx\">首先导入 <code><a href=\"api/common/http/HttpParams\" class=\"code-anchor\">HttpParams</a></code> 类。</p>\n<code-example hidecopy=\"\" language=\"typescript\">\n\nimport {<a href=\"api/common/http/HttpParams\" class=\"code-anchor\">HttpParams</a>} from \"@angular/common/<a href=\"api/common/http\" class=\"code-anchor\">http</a>\";\n\n</code-example>\n<code-example linenums=\"false\" path=\"http/src/app/heroes/heroes.service.ts\" region=\"searchHeroes\">\n/* GET heroes whose name contains search term */\nsearchHeroes(term: string): Observable&lt;Hero[]&gt; {\n  term = term.trim();\n\n  // Add safe, URL encoded search parameter if there is a search term\n  const options = term ?\n   { params: new <a href=\"api/common/http/HttpParams\" class=\"code-anchor\">HttpParams</a>().set('name', term) } : {};\n\n  return this.http.get&lt;Hero[]&gt;(this.heroesUrl, options)\n    .pipe(\n      catchError(this.handleError&lt;Hero[]&gt;('searchHeroes', []))\n    );\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7onoclxinsaog1febpf3l8wrx\">如果有搜索词，代码会用进行过 URL 编码的搜索参数来构造一个 options 对象。比如，如果搜索词是 \"cat\"，那么 GET 请求的 URL 就是 <code>api/heroes?name=cat</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4uzfa53t1dzjor4l1lvazty68\"><code><a href=\"api/common/http/HttpParams\" class=\"code-anchor\">HttpParams</a></code> 是不可变对象。如果需要更新选项，请保留 <code>.set()</code> 方法的返回值。</p>\n<h2 id=\"create-url-parameters-from-a-query\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1aey2n5zpc9xdxv61eud4rgpj\">从查询创建 URL 参数<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/http-configure-http-url-parameters#create-url-parameters-from-a-query\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"elugki3v9wt0ighf56asuuiqy\">你也可以使用 <code>fromString</code> 变量从查询字符串中直接创建 HTTP 参数：</p>\n<code-example hidecopy=\"\" language=\"typescript\">\n\nconst params = new <a href=\"api/common/http/HttpParams\" class=\"code-anchor\">HttpParams</a>({fromString: 'name=foo'});\n\n</code-example>\n<p><a id=\"intercepting-requests-and-responses\"></a></p>\n\n  <div class=\"reviewed\">最后复查时间：Tue Nov 08 2022</div>\n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - api/common/http\n - api/common/http/HttpParams\n - api/common/http/HttpRequest\n - guide/http-configure-http-url-parameters#create-url-parameter-using-the-search-method\n - guide/http-configure-http-url-parameters#create-url-parameters-from-a-query\n - guide/http-configure-http-url-parameters#http---configure-url-parameters\n-->"}