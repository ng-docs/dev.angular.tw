{"id":"guide/testing-code-coverage","title":"找出你要測試多少程式碼","contents":"<div class=\"content\">\n  <p><a id=\"code-coverage\"></a></p>\n<h1 id=\"find-out-how-much-code-youre-testing\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bzzyzrlgoh0dsi6ih4hbx3f0o\">找出你要測試多少程式碼<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing-code-coverage#find-out-how-much-code-youre-testing\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ezsj57y9jluw9zcsy6k2ep0z\">CLI 可以執行單元測試並建立程式碼覆蓋率報告。程式碼覆蓋率報告會向你展示程式碼庫中可能無法透過單元測試進行正確測試的任意部位。</p>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3jhe3g7pull8hzqtm08p46wf0\">如果你要試驗本指南中所講的應用，請<live-example name=\"testing\" nodownload=\"\">在瀏覽器中執行它</live-example>或<live-example name=\"testing\" downloadonly=\"\">下載並在本地執行它</live-example>。</p>\n</div>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6dy7h465zj8rug2v3othq93lu\">要生成覆蓋率報告，請在專案的根目錄下執行以下指令。</p>\n<code-example format=\"shell\" language=\"shell\">\n\nng test --no-watch --code-coverage\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8uo5e9vxp3954ga1pbdxr5a8\">測試完成後，該指令會在專案中建立一個 <code>/coverage</code> 目錄。開啟 <code>index.html</code> 檔案，可以檢視帶有原始碼和程式碼覆蓋率值的報表。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b6jvldm0dy9bky5ag0ew4wlmj\">如果要在每次測試時都建立程式碼覆蓋率報告，可以在 CLI 設定檔案 <code>angular.json</code> 中設定以下選項：</p>\n<code-example format=\"json\" language=\"json\">\n\n\"test\": {\n  \"options\": {\n    \"codeCoverage\": true\n  }\n}\n\n</code-example>\n<h2 id=\"code-coverage-enforcement\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5p4gxh94oylm1v29m7jeawnra\">程式碼覆蓋的實施<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing-code-coverage#code-coverage-enforcement\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e709mnkttbflj5f8ktfmy4t4u\">程式碼覆蓋率可以讓你估算出你的程式碼測試了多少。如果你的團隊確定要設定單元測試的最小覆蓋率，可以使用 Angular CLI 來強制實施這個最低要求。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"89vs4e963yshduqjy579j3z5z\">比如，假設你希望程式碼庫的程式碼覆蓋率至少達到 80％。要啟用此功能，請開啟 <a href=\"https://karma-runner.github.io\">Karma</a> 測試平台的設定檔案 <code>karma.conf.js</code>，並在 <code>coverageReporter:</code> 鍵下新增 <code>check</code> 屬性。</p>\n<code-example format=\"javascript\" language=\"javascript\">\n\ncoverageReporter: {\n  dir: require('path').join(__dirname, './coverage/&lt;project-name&gt;'),\n  subdir: '.',\n  reporters: [\n    { type: 'html' },\n    { type: 'text-summary' }\n  ],\n  check: {\n    global: {\n      statements: 80,\n      branches: 80,\n      functions: 80,\n      lines: 80\n    }\n  }\n}\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6wqojttmkfx54ynwth0bgrdwp\">在<a href=\"guide/testing#configuration\">測試指南</a>中可以瞭解更多關於建立和微調 Karma 設定的內容。</p>\n</div>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ctm3rt15daxll4pgu7o9zet8y\"><code>check</code> 屬性會讓該工具在專案中執行單元測試時強制要求至少 80％的程式碼覆蓋率。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7nh9zswmf31b3sitgbx2fk2ed\">在 <a href=\"https://github.com/karma-runner/karma-coverage/blob/master/docs/configuration.md\">Karma 覆蓋率文件</a>中閱讀有關覆蓋設定選項的更多訊息。</p>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：Tue Jan 17 2023</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/testing\n-->\n<!-- links from this doc:\n - guide/testing#configuration\n - guide/testing-code-coverage#code-coverage-enforcement\n - guide/testing-code-coverage#find-out-how-much-code-youre-testing\n - https://github.com/karma-runner/karma-coverage/blob/master/docs/configuration.md\n - https://karma-runner.github.io\n-->"}