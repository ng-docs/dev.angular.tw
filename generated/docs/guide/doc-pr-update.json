{"id":"guide/doc-pr-update","title":"更新文档 Pull Request","contents":"<div class=\"content\">\n  <h1 id=\"update-a-documentation-pull-request\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6ku8iv5eykxitu8ba0gogj66r\">更新文档 Pull Request<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/doc-pr-update#update-a-documentation-pull-request\"><i class=\"material-icons\">link</i></a></h1>\n<!-- markdownLint-disable MD001 -->\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ejzpsz5svkykd22991tnjp3ej\">本主题介绍如何响应测试失败和对你的 Pull Request 的反馈。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1r3tkixjn8r0nlix5aopp4hnp\">在你打开 Pull Request 后，它会被测试和审查。获得批准后，这些更改会合并到 <code>angular/angular</code> 中，并成为 Angular 文档的一部分。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4pavft76szgy3ejzz50mbz5zw\">虽然某些 Pull Request 会在你没有进一步操作的情况下获得批准，但大多数 Pull Request 都会收到需要你进行更改的反馈。</p>\n<h2 id=\"anatomy-of-a-pull-request\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cj0opykk9luak6i2bkaki1div\">Pull Request 的剖析<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/doc-pr-update#anatomy-of-a-pull-request\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3t2swe2bohmpwedxhm0lp0s77\">打开 Pull Request 后，Pull Request 页面会记录 Pull Request 中的活动，因为它被查看、更新和批准。这是 Pull Request 页面顶部的示例，后跟其包含的信息的描述。</p>\n<div class=\"lightbox\">\n<!-- Image source is found in angular/aio/src/assets/images/doc-contribute-images.sketch, in the sketch page that matches this topic's filename -->\n<img alt=\"Screenshot of github.com page showing a branch listing from a repo\" src=\"generated/images/guide/doc-pr-update/pull-request-heading.png\" width=\"722\" height=\"225\">\n</div>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2mexaizrckcaa0bn45bhrkcta\">Pull-request 选项卡上方是 Pull Request 的摘要，包括：</p>\n<ul>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1n92nf9o4ldobjmevnecpwzk5\">Pull Request 标题和索引</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8fuz5p5b0nqbtu39mvko229pp\">拉取请求的状态：打开或关闭</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b9cujkjripe4hvnplfmnnu46h\">具有更改的分支和要更新的分支的描述</p>\n</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"85t6ghg6v1v4p67v4y25qmwan\">这些选项卡包含 Pull Request 的不同方面。</p>\n<ul>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"23yhbakl3ketdp72gvqada0g8\"><strong>对话</strong></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"exuzhmd9l6t2ggemt689usib5\">对 Pull Request、系统消息以及自动测试和批准的摘要的所有注释和更改。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1a3khp1fut1j9o6zo5iup81p8\"><strong>提交</strong></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d8gp71ho0566yo0eb2yf4vbg2\">此 Pull Request 中包含的提交的日志。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d2j5bnx4v0uyi5ly24tdx2t05\"><strong>检查</strong></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2m1lzpimquk3mykrfph23kctv\">检查的结果在提交时运行。这与也在“<strong>对话”</strong>选项卡底部运行和汇总的自动测试不同。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c7vokcut08596x32p93m0dw0z\"><strong>文件已更改</strong></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2lyxbiy2vfwbtxs0m5g2ecotw\">此请求对代码所做的更改。在此选项卡中，你可以在其中找到对 Pull Request 中更改的特定注释。你也可以在此标签中回复这些评论。</p>\n</li>\n</ul>\n<h2 id=\"respond-to-a-comment\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6xutk8upjryjqz7pb5ss5rztz\">回复评论<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/doc-pr-update#respond-to-a-comment\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1i5hdo4jb22c8m17sbrq969fu\">如果你的 Pull Request 收到来自审阅者的评论，你可以用多种方式回复。</p>\n<ul>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"argv3lqls9r7v11swgdsxc292\">回复反馈。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4d4965i3fkob20rdqp9dlh4c0\">例如，你可以要求提供更多信息或回复解释。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"94n2kmd23nmvyt52zngiz31ze\">对审阅者建议的文档进行更改。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b9usy42c2n08d8l9ve3de7ad8\">如果你使用建议的更改更新工作分支，请解析注释。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e17zsun9zd0x5plyd0lrubps9\">对文档进行其他更改。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"jo9bu1zn2z2og3tggwyfeqsa\">在查看反馈后，你可能会看到更好的改进。通过你的改进来更新工作分支，并在评论中向审阅者解释你选择它的原因。</p>\n</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"26xazvdzrzo5p2cniamjtvsqr\">请记住，没有收到对审核注释的响应的 Pull Request 被认为是被放弃并关闭。有关被放弃的 Pull Request 的更多信息，请参阅<a href=\"guide/doc-pr-open#what-happens-to-abandoned-pull-requests\">被放弃的 Pull 请求会发生什么</a>。</p>\n<h3 id=\"update-a-file-in-the-pull-request\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ege61slkgsy21pgbdisang3jn\">更新 Pull Request 中的文件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/doc-pr-update#update-a-file-in-the-pull-request\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bgmf6paz1xtceh745tha3o6c5\">请按照此过程更改 Pull Request 中的文件或将新文件添加到 Pull 请求中。</p>\n<ol>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"57ccdfgsopdhsrql9k1esvsbs\">在你的 <code>git</code> 工作区的工作目录中，签出你的工作分支。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"670p61g04jwz9ktngrenw5w7v\">更新文档以响应你收到的反馈。用于<a href=\"guide/doc-editing\">修改文档主题</a>的过程也用于在有打开的 Pull Request 时更新文档。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3u95k1r0o5exlhb394dpyxssm\">如<a href=\"guide/doc-build-test\">测试文档更新中所述，在本地测试你的更新</a>。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"46z5kg4mgz75lxcyi6mhn1aah\">在你的更新经过测试后，提交你的更改并将新提交推送到 <code>origin</code> 服务器上存储库的工作分支。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4y6pbyoqrtgywwj0dhdzgnhs3\">在你更新 <code>origin</code> 服务器上的工作分支（你的 GitHub 帐户中 <code>angular/angular</code> 存储库的 fork）后，你的 Pull Request 会自动更新。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"23th9laoabo5hhcwauu5brznr\">在 Pull Request 更新后，会重新启动自动测试并通知审阅者。</p>\n</li>\n</ol>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"85vwy6azjh76sj1qicjbp0oa6\">根据需要重复此过程，以解决你从 Pull Request 审查中获得的反馈。</p>\n<h2 id=\"clean-up-the-branch\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9q84b50j50inkx2y2ybfr0zqd\">清理分支<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/doc-pr-update#clean-up-the-branch\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5hyl8jrdivf49xeeen8umqud0\">如果你添加了提交来解决审查反馈，可能会要求你清理工作分支。如果你所做的某些提交只解决了审阅者的反馈，它们可能会被压缩。压缩提交将在多个提交中所做的更改组合到一个提交中。</p>\n<!-- markdownLint-disable MD033 -->\n<h4 id=\"to-squash-commits-in-your-working-branch\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"84le81ntoalno0l98xhn8upo3\">在工作分支中压缩提交<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/doc-pr-update#to-squash-commits-in-your-working-branch\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bkn827sttq5avoz7hovn5g93p\">从本地计算机上的命令行工具执行这些步骤。</p>\n<ol>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1795tv8e52q2xq35o8luf8kna\">在你的<a href=\"guide/doc-prepare-to-edit#create-a-git-workspace-on-your-local-computer\">工作区</a>目录中的<a href=\"guide/doc-prepare-to-edit#doc-working-directory\">工作目录</a>中，签出你的工作分支。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8k3z3j7h62terziun8wpq44pr\">运行此命令以查看工作分支中的提交。</p>\n<code-example format=\"shell\" language=\"shell\">\n\ngit log --pretty=format:\"%h %as %an %Cblue%s %Cgreen%D\"\n\n</code-example>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cfragll1r1z981s59vu8rsnh0\">在前一个 <code>git log</code> 命令的输出中，查找包含 <code>upstream/main</code> 的条目。它应该在列表的顶部附近。</p>\n<ol>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"50we7o04d8b8q8kmnc8rw4itb\"><strong>确认条目还包含 <code>origin/main</code> 和 <code>main</code></strong></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ecr0s2il7rlgz6ooqutw3vnzj\">如果不是，你必须将本地计算机上的克隆以及你的 <code>personal/angular</code> 存储库与 <code>upstream</code> 存储库重新同步。重新同步存储库后，请在继续之前重新<a href=\"guide/doc-pr-prep#rebase-your-working-branch\">定位工作分支</a>。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4o32xd9m65iwgzcryh0orux8m\"><strong>确认你的更新的所有提交都在包含 <code>upstream/main</code> 的条目之后</strong></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5rucy6gvqlqw1tgmzwqgu4ejd\">请记住，日志输出会首先显示最近的提交。你的提交应该都在日志输出中包含 <code>upstream/main</code> 的条目之上。如果你有包含 <code>upstream/main</code> 的条目之后列出的提交，则你在工作分支中的提交会以某种方式混淆。你必须在尝试压缩任何提交之前修复分支。</p>\n</li>\n</ol>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4pi8v2czc5xaswftfbqcf4hfz\">计算包含 <code>upstream/main</code> 的条目顶部的行数。例如，在此日志输出中，工作分支名称是 <code>update-doc-contribution</code>，并且在包含 <code>upstream/main</code> 的条目之上有五个提交条目。</p>\n<div class=\"lightbox\">\n<!-- Image source is found in angular/aio/src/assets/images/doc-contribute-images.sketch, in the sketch page that matches this topic's filename -->\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4vxfkrh2t8fhcyq3hfxkikr46\"><a href=\"generated/images/guide/doc-pr-update/git-log-output-large.png\"><img alt=\"git log 输出的截图\" src=\"generated/images/guide/doc-pr-update/git-log-output.png\" width=\"722\" height=\"87\"></a></p>\n</div>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"97id0llm2c10qd28dnhu8c0nu\">运行此命令以压缩在包含 <code>upstream/main</code> 的条目之后发生的提交。在你的命令中，将 <code>HEAD</code> 之后的 <code>5</code> 替换为包含 <code>upstream/main</code> 的条目顶部的提交数。</p>\n<code-example format=\"shell\" language=\"shell\">\n\ngit rebase -i HEAD~5\n\n</code-example>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7s5coctnpmq0cw1k9lakinr0q\">此命令会打开你的默认编辑器，其中包含你在 <code>git rebase</code> 命令中选择的提交的条目。</p>\n<div class=\"lightbox\">\n<!-- Image source is found in angular/aio/src/assets/images/doc-contribute-images.sketch, in the sketch page that matches this topic's filename -->\n<img alt=\"Screenshot of git rebase editor screen\" src=\"generated/images/guide/doc-pr-update/git-squash-edit.png\" width=\"717\" height=\"113\">\n</div>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bsvn2pney64zqed0ve6k1qor6\">要压缩提交，请编辑编辑器中显示的文件中的命令。编辑器中的命令从最旧到最新列出，这与 <code>git log</code> 命令列出它们的顺序相反。可能的命令选项在命令下方的编辑器中列出。要压缩你的 Pull Request 的提交，你只需要：<code>pick</code> 和 <code>squash</code>。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7h942k0zcjawr4l69uju7t8by\">查看编辑器中的命令并更改它们以符合你的意图。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9hjcukyr7soryul8eso9oeteo\">这些命令从上到下进行处理，即从最旧的提交到最新的提交。若要将此分支中的所有提交合并到此拉取请求中，请将所有提交的 \n<code>pick</code> 命令更改为除第一个之外的所有提交的 \n<code>squash</code>。 此文本显示了这个示例的效果。</p>\n<code-example language=\"none\" hidecopy=\"\">\n\npick bb0ff71891 docs: update of documentation contrib. guide\nsquash c040d76685 docs: more content for doc updates\nsquash 472585c43f docs: fix links that were broken by renamed files\nsquash 3e6f4c73ac docs: add more info about open PR\nsquash 8e50fad064 docs: more pr docs\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"32qby90vf5qe2bndsy1c3t3by\">通过此编辑，<code>git rebase</code> 会选择第一个提交并将后提交的合并到第一个提交中。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6no8rz4d4kimjvv49peojjap0\">使用 <code>pick</code> 命令的提交的提交消息是用于结果提交的提交消息。确保它的格式正确并以 <code>docs:</code> 开头。如果你需要更改提交消息，可以在编辑器中编辑它。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"csnnnr0c8m9e9ljef4zyin8c0\">更新命令后，保存并退出编辑器。<code>git rebase</code> commit 会处理这些命令并更新你工作区中的提交日志。在此示例中，rebase 命令结合了五个提交，以在你的工作分支中创建一个提交。这是 rebase 命令完成后的提交日志。</p>\n<div class=\"lightbox\">\n<!-- Image source is found in angular/aio/src/assets/images/doc-contribute-images.sketch, in the sketch page that matches this topic's filename -->\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9dltxdi142uv1y5iyu5ynzes9\"><a href=\"generated/images/guide/doc-pr-update/git-log-after-squash-large.png\"><img alt=\"git rebase 命令后提交日志的截图\" src=\"generated/images/guide/doc-pr-update/git-log-after-squash.png\" width=\"722\" height=\"43\"></a></p>\n</div>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2njtdv2r3qeb482wnvonavd6f\"><code>git rebase</code> 命令会更改本地计算机中的提交日志，因此它现在与你的在线存储库中的不同。要更新你的在线存储库，你必须使用此命令强制从本地计算机推送更改。</p>\n<code-example format=\"shell\" language=\"shell\">\n\ngit push --force-with-lease\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1o18drtbac30bag0iwpeewlxm\">此操作也称为<em>强制推送</em>，因为它会更改存储在你 GitHub 帐户中的提交日志。通常，当你运行 <code>git push</code> 时，你会将新提交添加到在线存储库。当其他人 fork 存储库时，强制推送可能会对他们产生不良影响。此 force-push 是到你的 fork 存储库的，不应该共享，因此应该没问题。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3vak9m2vgrfdudkaa85eep56k\">在你的强制推送更新在线存储库后，你的 Pull Request 会重新启动自动测试并通知审阅者此更新。</p>\n</li>\n</ol>\n<h2 id=\"next-steps\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c4pkljueu68ifjoi5994e9l8o\">下一步<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/doc-pr-update#next-steps\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bwr4mnip14pr9c88bjwa9s455\">根据需要重复这些更新步骤，以回复你收到的所有反馈。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b7h903n2a8mfqtwccmop1qjat\">在你解决所有反馈并且你的 Pull Request 被批准后，它会合并到 <code>angular/angular</code>。你的 Pull Request 中的更改应该很快出现在文档中。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8qyfjda4khiqyq8o874jsp89r\">在你的 Pull Request 合并到 <code>angular/angular</code> 后，你可以<a href=\"guide/doc-edit-finish\">清理你的工作区</a>。</p>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最后复查时间：Wed Oct 12 2022</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/doc-pr-open\n - guide/doc-update-overview\n-->\n<!-- links from this doc:\n - generated/images/guide/doc-pr-update/git-log-after-squash-large.png\n - generated/images/guide/doc-pr-update/git-log-output-large.png\n - guide/doc-build-test\n - guide/doc-edit-finish\n - guide/doc-editing\n - guide/doc-pr-open#what-happens-to-abandoned-pull-requests\n - guide/doc-pr-prep#rebase-your-working-branch\n - guide/doc-pr-update#anatomy-of-a-pull-request\n - guide/doc-pr-update#clean-up-the-branch\n - guide/doc-pr-update#next-steps\n - guide/doc-pr-update#respond-to-a-comment\n - guide/doc-pr-update#to-squash-commits-in-your-working-branch\n - guide/doc-pr-update#update-a-documentation-pull-request\n - guide/doc-pr-update#update-a-file-in-the-pull-request\n - guide/doc-prepare-to-edit#create-a-git-workspace-on-your-local-computer\n - guide/doc-prepare-to-edit#doc-working-directory\n-->"}