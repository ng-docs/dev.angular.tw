{"id":"guide/image-directive","title":"NgOptimizedImage 入門","contents":"<div class=\"content\">\n  <h1 id=\"getting-started-with-ngoptimizedimage\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"eho1b3cawkvz0i6ih0w7adlpj\">NgOptimizedImage 入門<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#getting-started-with-ngoptimizedimage\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"az63iilcimn64snb9o73tazy2\"><code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 指令可以輕鬆採用關於效能的最佳實踐來載入圖片。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ahuchdt40g4fi594ifft1jb72\">該指令可確保<a href=\"http://web.dev/lcp\">最大內容繪製 （LCP）</a>圖片的載入優先級為：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ek0wynwdt5yokey4bb0ylxsjo\">自動設定 <code>&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a>&gt;</code> 標籤上的 <code>fetchpriority</code> 屬性</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6hs9dtc6t6j82idbwj249gt70\">預設延遲載入其他圖片</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"42falm2kdwxzjy6hegm1obr5h\">在文件頭部自動生成一個預連線 link 標籤</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"54kwo2ugxt39l119u2974x0ik\">自動生成 <code>srcset</code> 屬性</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3b9otasm1mh8kd8kljpj2hg36\">如果應用程式使用 SSR，則生成<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types/preload\">預載入提示</a></li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7p5crj6agknbd81ka0milu7yh\">除了最佳化 LCP 圖片的載入之外，<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 還實施了許多圖片最佳實踐，例如：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8cxotwxxdo76q24grku64btzi\">使用<a href=\"https://web.dev/image-cdns/#how-image-cdns-use-urls-to-indicate-optimization-options\">圖片 CDN URL 應用圖片最佳化</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9sxug4lwclbquq6q682s5yhl9\">透過要求 <code>width</code> 和 <code>height</code> 來防止佈局偏移</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1te16wt32h53nbw7tg987bdee\">如果 <code>width</code> 或 <code>height</code> 設定不正確，則會發出警告</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2n9up45tjx4gg33523q927ppl\">給出渲染時圖片是否會在視覺上失真的警告</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e3ckcn1uovxuo7dksncspkfly\"><strong>注意：儘管 <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 指令在 Angular 15 版本中成為穩定屬性，但它已被回溯，並在版本 13.4.0 和 14.3.0 中作為穩定屬性提供。</strong></p>\n<h2 id=\"getting-started\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bbwu5ocoy87h3ob0i4j82759h\">快速上手<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#getting-started\"><i class=\"material-icons\">link</i></a></h2>\n<h4 id=\"step-1-import-ngoptimizedimage\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"o8o33fsk2fqhzb0m14619jer\">步驟 1：匯入 NgOptimizedImage<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#step-1-import-ngoptimizedimage\"><i class=\"material-icons\">link</i></a></h4>\n<code-example format=\"typescript\" language=\"typescript\">\n\nimport { <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a> } from '@angular/common'\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4snuw9h5wmkgehttbdsjskbfc\">該指令被定義為<a href=\"/guide/standalone-components\">獨立指令</a>，因此元件應該直接匯入它。</p>\n<h4 id=\"step-2-optional-set-up-a-loader\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7vv5d5ex54s0xiic1sy6zcg0u\">第 2 步：（可選）設定載入器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#step-2-optional-set-up-a-loader\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"590n4wroso3x49p25lw8bj1bv\">使用 NgOptimizedImage <strong>不一定需要</strong>圖片載入器，但使用帶有圖片 CDN 的載入器可以實現強大的效能屬性，包括為圖片自動設定 <code>srcset</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5b1hh7hx9ng7hull7s0lwy7w5\">有關設定載入器的簡短指南，請參閱本頁末尾的<a href=\"guide/image-directive#configuring-an-image-loader-for-ngoptimizedimage\">設定圖片載入器</a>部分。</p>\n<h4 id=\"step-3-enable-the-directive\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"94mmpzavhe6ew2osqx3e9cg9c\">第 3 步：啟用該指令<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#step-3-enable-the-directive\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5b4bd7hilrhlny5fedwxbbi7n\">要啟用 <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 指令，請將圖片的 <code>src</code> 屬性替換為 <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a></code>。</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"cat.jpg\"&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2xdfevgshg89fqqzgbyrgqis\">如果你使用的是<a href=\"guide/image-directive#built-in-loaders\">內建的第三方載入器</a>，請確保忽略了 <code>src</code> 中的基本 URL 路徑，因為它會由此載入器自動附加。</p>\n<h4 id=\"step-4-mark-images-as-priority\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"91wexlvjdazxiur7jfg0tbe1c\">步驟 4：將圖片標記為 <code>priority</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#step-4-mark-images-as-priority\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2d7q6bpxabluo97qu1rnfwyn5\">始終將頁面上的 <a href=\"https://web.dev/lcp/#what-elements-are-considered\">LCP 圖片</a> 標記為 <code>priority</code> 的，以優先載入它。</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"cat.jpg\" width=\"400\" height=\"200\" priority&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ey72zfebcr1e5puqueq9ltsef\">將圖片標記為 <code>priority</code> 會應用以下最佳化：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f5bujzf9v8avi7fv0g2t5nswc\">設定 <code>fetchpriority=high</code> （在<a href=\"https://web.dev/priority-hints\">這裡</a>閱讀有關優先級提示的更多內容）</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c6iensn5iva04i739av4pq8jt\">設定 <code>loading=eager</code> （在<a href=\"https://web.dev/browser-level-image-lazy-loading\">這裡</a>閱讀有關原生延遲載入的更多訊息）</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cjxhvy5n40bmwdwy24q9s7luw\">如果在服務器上渲染，則自動生成一個 \n<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types/preload\">preload 連結元素</a>。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1s819jqw7mpzwzz72nx06bvj3\">在開發過程中，如果 LCP 元素是一個沒有 \n<code>priority</code> 屬性的影象，則 Angular 會記錄一個錯誤，因為這可能會顯著影響載入效能。頁面的 LCP 元素可能會基於多種因素而變化 - 例如使用者螢幕的尺寸，因此一個頁面可能有多個應該標記為 \n<code>priority</code> 的影象。檢視 \n<a href=\"https://web.dev/css-web-vitals/#images-and-largest-contentful-paint-lcp\">CSS for Web Vitals</a> 以獲取更多詳細訊息。</p>\n<h4 id=\"step-5-include-height-and-width\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2f15edtwlx5dbpmov4842mvrp\">第 5 步：包括高度和寬度<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#step-5-include-height-and-width\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"426sdvwgraxiwvgj5q06c5lt2\">為了防止<a href=\"https://web.dev/css-web-vitals/#images-and-layout-shifts\">與圖片相關的佈局移位</a>，NgOptimizedImage 要求你為圖片指定高度和寬度，如下所示：</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"cat.jpg\" width=\"400\" height=\"200\"&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3c0hzvhrdgd5ftfl7oktt5tid\">對於\n<strong>回應式圖片</strong>（你已經根據視口大小調整了大小的圖片），\n<code>width</code> 和 \n<code>height</code> 屬性應該是圖片檔案的固有大小。對於回應式圖片，還重要的是要\n<a href=\"guide/image-directive#responsive-images\">為 <code>sizes</code> 設定一個值。</a></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"39gro0lb0tkg4rves4had523v\">對於<strong>固定大小的圖片</strong>，<code>width</code> 和 <code>height</code> 屬性應該反映圖片的所需渲染的大小。這些屬性的縱橫比應始終與圖片的固有縱橫比對應。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c7kjczn8irmlqwmus1nkv44xl\">注意：如果你不知道圖片的大小，請考慮使用『填充（<code>fill</code>）模式』來繼承父容器的大小，如下所述：</p>\n<h3 id=\"using-fill-mode\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5qk4da0em6k0anicvqmsslngm\">使用 <code>fill</code> 模式<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#using-fill-mode\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"510jd2ls09thlqr1w8njq1w0d\">如果你希望讓圖片填充其容器元素，可以用 <code>fill</code> 屬性。當你想實現『背景圖片』行為時，這通常會很有用。當你不知道圖片的確切寬度和高度時，它也會很有幫助，但如果你確實有一個具有已知大小的父容器，可能希望將圖片適配進其中（請參閱下面的『object-fit』） .。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"77nxf4od7xh2cao6dks1wude2\">當你將 <code>fill</code> 屬性新增到圖片時，不需要也不應該包含 <code>width</code> 和 <code>height</code>，如下例所示：</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"cat.jpg\" fill&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5g8pqzinggkkipfc4l38kddcx\">你可以用 <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit\">object-fit</a> 這個 CSS 屬性來更改圖片填充其容器的方式。如果你使用 <code>object-fit: \"contain\"</code> 來設定圖片的樣式，則圖片將保持其縱橫比並被黑邊化（譯註：類似於電影在不同解析度播放時加黑邊）以適配此元素。如果你設定了 <code>object-fit: \"cover\"</code>，則元素將保留其長寬比，完全填充元素，並且某些內容可能會被『裁剪』。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8a0l3alroxb17tu67ezmp9pox\">請在 <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit\">MDN object-fit 文件</a>中檢視上述內容的視覺化範例。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"53c2d2gt7fl3ahj0riedjcb25\">你還可以用 <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/object-position\">object-location 屬性來設定</a>圖片的樣式，以調整其在容器元素中的位置。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2p5oynl59akzygy8iym1iifch\"><strong>重要說明</strong>：為了正確渲染『fill』圖片，其父元素<strong>必須</strong>使用 <code>position: \"relative\"</code>、<code>position: \"fixed\"</code> 或 <code>position: \"absolute\"</code> 來設定樣式。</p>\n<h2 id=\"using-placeholders\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9pu3bc45xsyrx9hjk8m7iviig\">使用佔位符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#using-placeholders\"><i class=\"material-icons\">link</i></a></h2>\n<h3 id=\"automatic-placeholders\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9pocjhv4jzvsboixo2xlx3vwd\">自動佔位符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#automatic-placeholders\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ccrfuw414jjams934jzricfei\">NgOptimizedImage 可以為你的影象提供一個自動低解析度佔位符，只要你使用提供自動影象調整的 CDN 或影象主機。要利用這個功能，只需給你的影象新增 \n<code>placeholder</code> 屬性，如下所示：</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"cat.jpg\" width=\"400\" height=\"200\" placeholder&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"974vx549slfnk4tuunxf44r0p\">新增此屬性將自動請求影象的第二個、較小版本，使用你指定的影象載入器。這個小影象將以 CSS 模糊的 \n<code>background-image</code> 樣式應用，而你的影象載入時。如果沒有提供影象載入器，則無法生成佔位符影象，並將丟擲錯誤。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bhiwlda8gfyfg66rxt2ykiinj\">生成的佔位符的預設大小為 30px 寬，但你可以透過在 \n<code><a href=\"api/common/IMAGE_CONFIG\" class=\"code-anchor\">IMAGE_CONFIG</a></code> 提供者中指定一個值來使其更大或更小，如下所示：</p>\n<code-example format=\"typescript\" language=\"typescript\">\nproviders: [\n  {\n    provide: <a href=\"api/common/IMAGE_CONFIG\" class=\"code-anchor\">IMAGE_CONFIG</a>,\n    useValue: {\n      placeholderResolution: 40\n    }\n  },\n],\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7hmscs36towsba0f3c9nhhn79\">如果你想要在模糊的佔位符周圍有銳利的邊緣，你可以將你的影象包裹在一個帶有 \n<code>overflow: hidden</code> 樣式的容器中。只要 \n<code>&lt;div&gt;</code> 和影象是相同大小的（比如使用 \n<code>width: fit-content</code> 樣式），佔位符的「模糊邊緣」將被隱藏。</p>\n<h3 id=\"data-url-placeholders\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"80lfd8z20i8g7lnqa90gyv8y2\">資料 URL 佔位符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#data-url-placeholders\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1twkmhln4h04dw8ep2oxd0h8t\">你也可以使用不帶影象載入器的 base64 \n<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs\">資料 URL</a> 指定一個佔位符。資料 URL 格式為 \n<code>data:image/[imagetype];[data]</code>，其中 \n<code>[imagetype]</code> 是影象格式，比如 \n<code>png</code>，而 \n<code>[data]</code> 是影象的 base64 編碼。該編碼可以在指令行中或JavaScript中完成。有關具體指令，請參見 \n<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs#encoding_data_into_base64_format\">MDN 文件</a>。以下是一個帶有截斷資料的資料 URL 佔位符範例：</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"cat.jpg\" width=\"400\" height=\"200\" placeholder=\"data:image/png;base64,iVBORw0K...\"&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9h74la0aftkgleme9yb7gh5mz\">然而，大型資料 URL 會增加你的 Angular 捆綁包的大小，並減慢頁面載入速度。如果你無法使用影象載入器，Angular 團隊建議保持 base64 佔位符影象小於 4KB，並且僅在關鍵影象上使用它們。除了減少佔位符尺寸外，還要考慮更改儲存影象時使用的影象格式或引數。在非常低的解析度下，這些引數對檔案大小有很大影響。</p>\n<h3 id=\"non-blurred-placeholders\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1qe8xoomgmm3j23m37jxm6bkh\">非模糊佔位符<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#non-blurred-placeholders\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5za6cqrnulunqjdyntt4sbv9e\">預設情況下，NgOptimizedImage 對影象佔位符應用 CSS 模糊效果。要呈現一個沒有模糊效果的佔位符，請提供一個包含 \n<code>blur</code> 屬性設定為 false 的物件的 \n<code>placeholderConfig</code> 引數。例如：</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"cat.jpg\" width=\"400\" height=\"200\" placeholder [placeholderConfig]=\"{blur: false}\"&gt;\n\n</code-example>\n<h2 id=\"adjusting-image-styling\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f2m5gyn4hwzmqneru932plral\">調整圖片樣式<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#adjusting-image-styling\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1nfzayji3yrpvj6a7vzl5jc0v\">根據圖片的樣式，新增 <code>width</code> 和 <code>height</code> 屬性可能會導致圖片的渲染方式不同。如果你的圖片樣式正在以扭曲的縱橫比渲染圖片，<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 會發出警告。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7ljesqhs2c8f5kvavean9dfmf\">你通常可以透過將 <code>height: auto</code> 或 <code>width: auto</code> 新增到圖片的樣式中來解決此問題。有關更多訊息，請參閱<a href=\"https://web.dev/patterns/web-vitals-patterns/images/img-tag\">關於 <code>&lt;img&gt;</code> 標籤的 web.dev 文章</a>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bwk7h6g3duyuzxozf607omq57\">如果圖片上的 <code>height</code> 和 <code>width</code> 屬性讓你無法用 CSS 以你想要的方式調整圖片大小，請考慮改用『填充』模式，併為圖片的父元素設定樣式。</p>\n<h2 id=\"performance-features\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8athrjnoftyka8sasn3xdjx4j\">效能最佳化屬性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#performance-features\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6yqqtp7yxwvdowtkwudh98c11\">NgOptimizedImage 包含許多旨在提高應用程式載入效能的屬性。本節會介紹這些屬性。</p>\n<h3 id=\"resource-hints\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"whahw29k4p8256setnzfnzxf\">資源提示<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#resource-hints\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3n9hv1sopuogllew1ykhh05ji\">為你的圖片來源新增一個\n<a href=\"https://web.dev/preconnect-and-dns-prefetch\"><code>preconnect</code>資源提示</a>，確保 LCP 圖片儘快載入。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"askvk3bob3kk13dhyp9lmvh3x\">為作為\n<a href=\"guide/image-directive#configuring-an-image-loader-for-ngoptimizedimage\">載入器</a>引數提供的域自動生成預連線連結。如果無法自動識別圖片來源，並且 LCP 圖片沒有檢測到預連線連結，\n<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code>將在開發過程中發出警告。在這種情況下，你應該手動在\n<code>index.html</code>中新增一個資源提示。在文件的\n<code>&lt;head&gt;</code>中，新增一個\n<code>link</code>標籤，屬性為\n<code>rel=\"preload\"</code>，如下所示：</p>\n<code-example format=\"html\" language=\"html\">\n\n&lt;link rel=\"preconnect\" href=\"https://my.cdn.origin\" /&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3hdb0tzvvdi7462r6jktjessd\">要停用預連線警告，請注入\n<code><a href=\"api/common/PRECONNECT_CHECK_BLOCKLIST\" class=\"code-anchor\">PRECONNECT_CHECK_BLOCKLIST</a></code>令牌：</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\nproviders: [\n  {provide: <a href=\"api/common/PRECONNECT_CHECK_BLOCKLIST\" class=\"code-anchor\">PRECONNECT_CHECK_BLOCKLIST</a>, useValue: 'https://your-domain.com'}\n],\n\nSee more information on automatic preconnect generation [here](#why-is-a-preconnect-element-not-being-generated-for-my-image-domain).\n\n</code-example>\n<h3 id=\"request-images-at-the-correct-size-with-automatic-srcset\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1xvafdfs3w69nvb8nij0ixq02\">使用自動 <code>srcset</code> 請求正確大小的圖片<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#request-images-at-the-correct-size-with-automatic-srcset\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4c97cxpo768kmibrbghz5mszu\">定義 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/srcset\"><code>srcset</code> 屬性</a>可確保瀏覽器為使用者的視口請求正確大小的圖片，因此不會浪費時間下載太大的圖片。<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 會根據 img 標籤上 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/sizes\"><code>sizes</code></a> 屬性的存在與否和值來為圖片生成適當的 <code>srcset</code>。</p>\n<h4 id=\"fixed-size-images\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"53avbugmhjt8uqnid0q3doqla\">固定大小的圖片<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#fixed-size-images\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7vu968ly50uvvj7qcn57ln2a9\">如果你的圖片的大小應該是『固定的』（即跨裝置的大小相同，除了<a href=\"https://web.dev/codelab-density-descriptors/\">畫素密度</a>不同），則無需設定 <code>sizes</code> 屬性。可以從圖片的 <code>width</code> 和 <code>height</code> 屬性自動生成 <code>srcset</code>，無需更多的輸入屬性。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ekhrdrqfidj682mmrdya0ecgb\">生成的範例 srcset：<code>&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> ... srcset=\"image-400w.jpg 1x, image-800w.jpg 2x\"&gt;</code></p>\n<h4 id=\"responsive-images\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5vmpnuw339d1tvxd0sok6tadb\">回應式圖片<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#responsive-images\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cikaa9zyxb3ncxpc6ej80lonf\">如果你的圖片應該是回應式的（即會根據視口大小放大和縮小），那麼你需要定義一個 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/sizes\"><code>sizes</code></a> 屬性來生成 <code>srcset</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"15t6q04e0ranx3jlcdzluqrd4\">如果你以前沒有使用過 <code>sizes</code>，一個很好的起點是根據視口寬度來設定它。例如，如果你的 CSS 要讓圖片填充視口寬度的 100%，則將 <code>sizes</code> 設定為 <code>100vw</code>，瀏覽器將選擇 <code>srcset</code> 中最接近視口寬度的圖片（在考慮畫素密度之後）。如果你的圖片只可能佔螢幕的一半（例如：在側邊欄中），請將 <code>sizes</code> 設定為 <code>50vw</code> 以確保瀏覽器選擇較小的圖片。以此類推。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cgfx2b78plu8j3dn9hxxq42v9\">如果你發現上述內容無法涵蓋你所需的圖片行為，請參閱有關<a href=\"guide/image-directive#advanced-sizes-values\">高階尺寸值</a>的文件。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"do7su406k8wjj5brf401qewhc\">預設情況下，回應式斷點是：</p>\n<p><code>[16, 32, 48, 64, 96, 128, 256, 384, 640, 750, 828, 1080, 1200, 1920, 2048, 3840]</code></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"13hsl7d7a6qci6rdo3p87i6m3\">如果你想自定義這些斷點，可以用 <code><a href=\"api/common/IMAGE_CONFIG\" class=\"code-anchor\">IMAGE_CONFIG</a></code> 提供者來實現：</p>\n<code-example format=\"typescript\" language=\"typescript\">\nproviders: [\n  {\n    provide: <a href=\"api/common/IMAGE_CONFIG\" class=\"code-anchor\">IMAGE_CONFIG</a>,\n    useValue: {\n      breakpoints: [16, 48, 96, 128, 384, 640, 750, 828, 1080, 1200, 1920]\n    }\n  },\n],\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9gco7c4ujw33mabe854u3j561\">如果你想手動定義 <code>srcset</code> 屬性，可以用 <code>ngSrcset</code> 屬性提供自己的：</p>\n<code-example format=\"html\" language=\"html\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"hero.jpg\" ngSrcset=\"100w, 200w, 300w\"&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6x5rrmyjnsjh0d7h5yeqt11os\">如果存在 <code>ngSrcset</code> 屬性，則 <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 會根據包含的大小生成並設定 <code>srcset</code>。不要在 <code>ngSrcset</code> 中包含圖片檔案名 - 該指令會從 <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a></code> 推斷此訊息。該指令支援寬度描述符（例如 <code>100w</code> ）和密度描述符（例如 <code>1x</code> ）。</p>\n<code-example format=\"html\" language=\"html\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"hero.jpg\" ngSrcset=\"100w, 200w, 300w\" sizes=\"50vw\"&gt;\n\n</code-example>\n<h3 id=\"disabling-automatic-srcset-generation\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"76rsd8s7f5h5msqht9c39ku61\">停用自動 srcset 生成<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#disabling-automatic-srcset-generation\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7mfrd6pgpa830ktsjt7ea8b6y\">要停用單個圖片的 srcset 生成，你可以在圖片上新增 <code>disableOptimizedSrcset</code> 屬性：</p>\n<code-example format=\"html\" language=\"html\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"about.jpg\" disableOptimizedSrcset&gt;\n\n</code-example>\n<h3 id=\"disabling-image-lazy-loading\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"89y5c1vkpvhktfzhhuahozhll\">停用圖片延遲載入<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#disabling-image-lazy-loading\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8tmypk0wgqmm0i1stvqjrc3r6\">預設情況下，<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 為所有未標記 <code>priority</code> 的圖片設定 <code>loading=lazy</code>。你可以透過設定 <code>loading</code> 屬性來為非優先圖片停用此行為。此屬性會接受值：<code>eager</code> 、 <code>auto</code> 和 <code>lazy</code>。<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/loading#value\">有關詳細訊息，請參閱標準圖片 <code>loading</code> 屬性的文件</a>。</p>\n<code-example format=\"html\" language=\"html\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"cat.jpg\" width=\"400\" height=\"200\" loading=\"eager\"&gt;\n\n</code-example>\n<h3 id=\"advanced-sizes-values\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"96a0ls5q07mmd0qsoej0563rn\">高階的 <code>sizes</code> 值<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#advanced-sizes-values\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ds71vtononwk860l7eux1w1z7\">你可能希望在不同大小的螢幕上以不同的寬度顯示圖片。這種模式的一個常見例子是基於網格或列的佈局，它在行動裝置上渲染為單列，在較大的裝置上渲染為兩列。你可以用『媒體查詢』語法在 <code>sizes</code> 屬性中捕獲此行為，例如以下內容：</p>\n<code-example format=\"html\" language=\"html\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"cat.jpg\" width=\"400\" height=\"200\" sizes=\"(max-width: 768px) 100vw, 50vw\"&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"br044mqdg7rrsxp7ksf2xfv2v\">上面的範例中的 <code>sizes</code> 屬性表示『我希望此圖片在 768px 寬的裝置上是螢幕寬度的 100%。否則，我希望它是螢幕寬度的 50%。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"37hrh9vqi85upt252hrg6ypuy\">有關\n<code>sizes</code>屬性的更多訊息，請檢視\n<a href=\"https://web.dev/learn/design/responsive-images/#sizes\">web.dev</a>或\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/sizes\">MDN</a>。</p>\n<h2 id=\"configuring-an-image-loader-for-ngoptimizedimage\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2dt10k1saqfxjmnrgsx0zi75p\">為 <code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 設定圖片載入器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#configuring-an-image-loader-for-ngoptimizedimage\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dhad4cb5tvdoe01z6k8n3fe7e\">『載入器』是一個為給定圖片檔案生成<a href=\"https://web.dev/image-cdns/#how-image-cdns-use-urls-to-indicate-optimization-options\">圖片轉換 URL</a>的函式。如果合適，<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 就會設定圖片的大小、格式和圖片質量轉換。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2rgl6bmc5wchbc5obg0tufbgh\"><code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 提供了一個不應用轉換的通用載入器和一個用於各種第三方圖片服務的載入器。它還支援編寫你自己的自定義載入器。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7cu5jn1hqlq1kcex7fhomynxu\">載入器型別</th>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ams69bxknsvkxy7e6gbayrjfr\">行為</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cktwx3v8n60zs92fz3utmkm06\">通用載入器</td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3ew3m6uy65qkefgyn1ucgdk2f\">通用載入器回傳的 URL 將始終與\n<code>src</code>的值對應。換句話說，此載入器不應用任何轉換。使用 Angular 為圖片提供服務的站點是此載入器的主要預期用例。</td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c15hj8qtnkcnk5cegrqncn6it\">第三方圖片服務的載入器</td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2syry6qogi0x6jx126ual9k9\">第三方圖片服務的載入器回傳的 URL 將遵循該特定圖片服務使用的 API 約定。</td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2nnwz4pz3mc2yjwdcf1mffvob\">自定義載入器</td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"41c2ul8y1y6pmo3wg9uti9wgv\">自定義載入器的行為由開發者定義。如果你的圖片服務不受預設定的\n<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code>載入器支援，請使用自定義載入器。</td>\n</tr>\n</tbody>\n</table>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f3zga0uv1jp0y6p08tv2n90dm\">基於 Angular 應用程式常用的圖片服務，<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 提供了預設定的載入器以使用以下圖片服務：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1j1pxvet0tvr9ul037lmljggz\">圖片服務</th>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5ztsszv4ap9frzpxtwhuiqlxz\">Angular API</th>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5eur89rbbrrg7fxsvemudi7u2\">文件</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"12oozlw8x7sikso0uwpt4nfy0\">Cloudflare 影象調整大小</td>\n<td align=\"left\"><code><a href=\"api/common/provideCloudflareLoader\" class=\"code-anchor\">provideCloudflareLoader</a></code></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9z5grdktor4z9tiiwpe4biiiw\"><a href=\"https://developers.cloudflare.com/images/image-resizing/\">文件</a></td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"24zzr7gbt72pvh0i03kaz0d4x\">Cloudinary</td>\n<td align=\"left\"><code><a href=\"api/common/provideCloudinaryLoader\" class=\"code-anchor\">provideCloudinaryLoader</a></code></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ct3cjq1gqk7dr2hkgrbhrb4v2\"><a href=\"https://cloudinary.com/documentation/resizing_and_cropping\">文件</a></td>\n</tr>\n<tr>\n<td align=\"left\">ImageKit</td>\n<td align=\"left\"><code><a href=\"api/common/provideImageKitLoader\" class=\"code-anchor\">provideImageKitLoader</a></code></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6tkpjwsbf2kntm51rlv2vpic0\"><a href=\"https://docs.imagekit.io/\">文件</a></td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7vten968mvvi865x8ft1wbf6v\">Imgix</td>\n<td align=\"left\"><code><a href=\"api/common/provideImgixLoader\" class=\"code-anchor\">provideImgixLoader</a></code></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4xsa7v5lzsx0i0uey94vnzply\"><a href=\"https://docs.imgix.com/\">文件</a></td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4jttudolow46aiz15nsks7fks\">Netlify</td>\n<td align=\"left\"><code><a href=\"api/common/provideNetlifyLoader\" class=\"code-anchor\">provideNetlifyLoader</a></code></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6nh75z1m4bjajnhd00rvb98m8\"><a href=\"https://docs.netlify.com/image-cdn/overview/\">文件</a></td>\n</tr>\n</tbody>\n</table>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"g14smsomu1lu5ajnzqqzjsmj\">要使用<strong>通用載入器</strong>，無需額外的程式碼更改。這是預設行為。</p>\n<h3 id=\"built-in-loaders\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"oigii9sun5bfiipr8kr5bv1k\">內建載入器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#built-in-loaders\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6ny2uqn82hb3k0o5uob54xigu\">要將現有的載入器用於<strong>第三方圖片服務</strong>，請將你選擇的服務的提供者工廠新增到 <code>providers</code> 陣列中。在下面的範例中，使用了 Imgix 載入器：</p>\n<code-example format=\"typescript\" language=\"typescript\">\nproviders: [\n  <a href=\"api/common/provideImgixLoader\" class=\"code-anchor\">provideImgixLoader</a>('https://my.base.url/'),\n],\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3jtnr8s503yscg0as4o7a48zt\">圖片資產的基本 URL 應作為引數傳遞給提供者工廠。對於大多數網站，此基本 URL 應對應以下模式之一：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"p732nq9rrjb7fmuowft10r3s\"><a href=\"https://yoursite.yourcdn.com\">https://yoursite.yourcdn.com</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ejr0wn6nxs7hlxuo9wkhlfwnz\"><a href=\"https://subdomain.yoursite.com\">https://subdomain.yoursite.com</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4v5urgstwz1qs6rqqmrhlybcg\"><a href=\"https://subdomain.yourcdn.com/yoursite\">https://subdomain.yourcdn.com/yoursite</a></li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dfpi92mmb4efycsyxh7cdufam\">你可以在相應 CDN 提供者的文件中瞭解有關基本 URL 結構的更多訊息。</p>\n<h3 id=\"custom-loaders\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1jpn1z8xktu8rlfraic7d4jdr\">自定義載入器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#custom-loaders\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c5n5zykmv61xdsjyv0x3uy4as\">要使用<strong>自定義載入器</strong>，請提供你的載入器函式作為 <code><a href=\"api/common/IMAGE_LOADER\" class=\"code-anchor\">IMAGE_LOADER</a></code> DI 標記的值。在下面的範例中，自定義載入器函式會回傳一個以 <code>https://example.com</code> 開頭的 URL，其中包含 <code>src</code> 和 <code>width</code> 作為 URL 引數。</p>\n<code-example format=\"typescript\" language=\"typescript\">\nproviders: [\n  {\n    provide: <a href=\"api/common/IMAGE_LOADER\" class=\"code-anchor\">IMAGE_LOADER</a>,\n    useValue: (config: <a href=\"api/common/ImageLoaderConfig\" class=\"code-anchor\">ImageLoaderConfig</a>) =&gt; {\n      return `https://example.com/images?src=${config.src}&amp;width=${config.width}`;\n    },\n  },\n],\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b74hflmy4crqntabuvfmqy6gm\"><code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code> 指令的載入器函式將 <code><a href=\"api/common/ImageLoaderConfig\" class=\"code-anchor\">ImageLoaderConfig</a></code> 型別的物件（來自 <code>@angular/common</code> ）作為其引數，並回傳影象資產（assets）的絕對 URL。<code><a href=\"api/common/ImageLoaderConfig\" class=\"code-anchor\">ImageLoaderConfig</a></code> 物件包含 <code>src</code> 屬性，以及可選的 <code>width</code> 和 <code>loaderParams</code> 屬性。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b3q7rfajdqe6zssnjb144w9c2\">注意：即使 <code>width</code> 屬性可能並不總是存在，自定義載入器也必須使用它來支援請求各種寬度的影象，以便讓 <code>ngSrcset</code> 正常工作。</p>\n<h3 id=\"the-loaderparams-property\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"915aqv1gdigmktr4atu2km4z1\"><code>loaderParams</code> 屬性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#the-loaderparams-property\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3v8j6wxgqa78giybdwj1gjvgv\">在\n<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code>指令中支援的另一個屬性是\n<code>loaderParams</code>，專門設計用於支援自定義載入器的使用。 \n<code>loaderParams</code>屬性接受一個帶有任意屬性的物件作為值，本身不會執行任何操作。 \n<code>loaderParams</code>中的資料被新增到傳遞給自定義載入器的\n<code><a href=\"api/common/ImageLoaderConfig\" class=\"code-anchor\">ImageLoaderConfig</a></code>物件中，可用於控制載入器的行為。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4gilijo8758ewahbfh3nmzg54\"><code>loaderParams</code> 的一個常見用途是控制高階影象 CDN 功能。</p>\n<h3 id=\"example-custom-loader\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2cx45n3ovvoj5qf8l0kmh32hz\">範例自定義載入器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#example-custom-loader\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4lq3rcmiaadwxjv9jhheyfzd1\">下面顯示了自定義載入器函式的範例。此範例函式連線 <code>src</code> 和 <code>width</code>，並使用 <code>loaderParams</code> 控制圓角的自定義 CDN 功能：</p>\n<code-example format=\"typescript\" language=\"typescript\">\nconst myCustomLoader = (config: <a href=\"api/common/ImageLoaderConfig\" class=\"code-anchor\">ImageLoaderConfig</a>) =&gt; {\n  let url = `https://example.com/images/${config.src}?`;\n  let queryParams = [];\n  if (config.width) {\n    queryParams.push(`w=${config.width}`);\n  }\n  if (config.loaderParams?.roundedCorners) {\n    queryParams.push('mask=corners&amp;corner-radius=5');\n  }\n  return url + queryParams.join('&amp;');\n};\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8rmx27qyfrh4a84u8vvwbaxjl\">請注意，在上面的範例中，我們發明了『roundedCorners』屬性名稱來控制自定義載入器的屬性。然後我們可以在建立影象時使用此屬性，如下所示：</p>\n<code-example format=\"html\" language=\"html\">\n\n&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> <a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a>=\"profile.jpg\" width=\"300\" height=\"300\" [loaderParams]=\"{roundedCorners: true}\"&gt;\n\n</code-example>\n<h2 id=\"frequently-asked-questions\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4z2ris4lq84izy0gkq4s2l2gu\">常見問題<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#frequently-asked-questions\"><i class=\"material-icons\">link</i></a></h2>\n<h3 id=\"does-ngoptimizedimage-support-the-background-image-css-property\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2qy2lf4vsutah9n033bhwesg3\">NgOptimizedImage是否支援\n<code>background-image</code> CSS屬性？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#does-ngoptimizedimage-support-the-background-image-css-property\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2ahyaxa4sjzuycciqsv0y63o6\">NgOptimizedImage沒有直接支援\n<code>background-image</code> CSS屬性，但是它設計得很容易適應將影象作為另一個元素的背景的用例。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3ijx1mx0ohykknkfeebiei5k7\">以下是從\n<code>background-image</code>遷移到\n<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code>的簡單逐步過程。在這些步驟中，我們將把具有影象背景的元素稱為『包含元素』：</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4zjbombcmjwv9yt8ovgy3832a\">1) 從包含元素中刪除\n<code>background-image</code>樣式。 2) 確保包含元素具有\n<code>position: \"relative\"</code>，\n<code>position: \"fixed\"</code>或\n<code>position: \"absolute\"</code>。 3) 建立一個新的影象元素作為包含元素的子元素，使用\n<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a></code>來啟用\n<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code>指令。 4) 給該元素新增\n<code>fill</code>屬性。不包括\n<code>height</code>和\n<code>width</code>。 5) 如果您認為這個影象可能是您的\n<a href=\"https://web.dev/lcp/\">LCP元素</a>，請向影象元素新增\n<code>priority</code>屬性。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5fnmzx0lgx75rotn1npptk4tp\">您可以根據『使用填充模式』部分中描述的方式調整背景影象如何填充容器。</p>\n<h3 id=\"why-cant-i-use-src-with-ngoptimizedimage\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dk1fnzlot0i7b8y7e3camxava\">為什麼不能在\n<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">NgOptimizedImage</a></code>中使用\n<code>src</code>？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#why-cant-i-use-src-with-ngoptimizedimage\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"694p03zzrszboen1b1kicfppc\">由於圍繞瀏覽器如何載入影象的技術考慮，選擇了\n<code><a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">ngSrc</a></code>屬性作為NgOptimizedImage的觸發器。 NgOptimizedImage對\n<code>loading</code>屬性進行了程式設計更改--如果瀏覽器在進行這些更改之前看到\n<code>src</code>屬性，它將開始急切地下載影象檔案，並且載入更改將被忽略。</p>\n<h3 id=\"can-i-use-two-different-image-domains-in-the-same-page\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dkki7xx46w4n8llkfhbqxzt6g\">我可以在同一頁中使用兩個不同的影象域嗎？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#can-i-use-two-different-image-domains-in-the-same-page\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9ks616olwglftw703nvvrew0\">影象載入器提供程式模式旨在儘可能簡單地滿足僅在元件中使用單個影象CDN的常見用例。 但是，仍然可以透過單個提供程式管理多個影象CDN。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cyhztm2yex7kxqrlkk801hkf9\">為此，我們建議編寫一個使用\n<code>loaderParams</code>屬性傳遞指定應使用哪個影象CDN的標誌，並根據該標誌呼叫適當載入器的\n<a href=\"guide/image-directive#custom-loaders\">自定義影象載入器</a>。</p>\n<h3 id=\"why-is-a-preconnect-element-not-being-generated-for-my-image-domain\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dsra7ju943iiwfoijlo70y0rz\">為什麼不為我的影象域生成預連線元素？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#why-is-a-preconnect-element-not-being-generated-for-my-image-domain\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1t8vcabs3j1mhe9j7dkj0mx0w\">基於對應用程式的靜態分析執行的預連線生成。這意味著圖片域必須直接包含在載入器引數中，如以下範例：</p>\n<code-example format=\"typescript\" language=\"typescript\">\nproviders: [\n  <a href=\"api/common/provideImgixLoader\" class=\"code-anchor\">provideImgixLoader</a>('https://my.base.url/'),\n],\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dt4d9zgvf1q6j9ja06nq1izlt\">如果你使用變數將域字串傳遞給載入器，或者你沒有使用載入器，靜態分析將無法識別域，並且不會生成預連線連結。在這種情況下，你應該手動向文件頭部新增一個預連線連結，如上述描述。</p>\n<h3 id=\"can-you-add-a-new-built-in-loader-for-my-preferred-cdn\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9vrn6pedzta7flxvpak6t6ekj\">你能為我偏好的 CDN 新增一個新的內建載入器嗎？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/image-directive#can-you-add-a-new-built-in-loader-for-my-preferred-cdn\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4b08sjxwjwg71wgghvd8gj24f\">出於維護原因，我們目前不打算在 Angular 儲存庫中支援額外的內建載入器。相反，我們鼓勵開發人員將任何額外的圖片載入器發布為第三方套件。</p>\n<!-- links -->\n<!-- external links -->\n<!--end links -->\n\n  <div class=\"reviewed\">最後複查時間：Tue Jul 18 2023</div>\n</div>\n\n\n<!-- links to this doc:\n - api/common\n - api/common/ImageConfig\n - guide/update-to-version-15\n-->\n<!-- links from this doc:\n - /guide/ssr\n - /guide/standalone-components\n - api/common/IMAGE_CONFIG\n - api/common/IMAGE_LOADER\n - api/common/ImageLoaderConfig\n - api/common/NgOptimizedImage\n - api/common/PRECONNECT_CHECK_BLOCKLIST\n - api/common/provideCloudflareLoader\n - api/common/provideCloudinaryLoader\n - api/common/provideImageKitLoader\n - api/common/provideImgixLoader\n - api/common/provideNetlifyLoader\n - guide/image-directive#adjusting-image-styling\n - guide/image-directive#advanced-sizes-values\n - guide/image-directive#automatic-placeholders\n - guide/image-directive#built-in-loaders\n - guide/image-directive#can-i-use-two-different-image-domains-in-the-same-page\n - guide/image-directive#can-you-add-a-new-built-in-loader-for-my-preferred-cdn\n - guide/image-directive#configuring-an-image-loader-for-ngoptimizedimage\n - guide/image-directive#custom-loaders\n - guide/image-directive#data-url-placeholders\n - guide/image-directive#disabling-automatic-srcset-generation\n - guide/image-directive#disabling-image-lazy-loading\n - guide/image-directive#does-ngoptimizedimage-support-the-background-image-css-property\n - guide/image-directive#example-custom-loader\n - guide/image-directive#fixed-size-images\n - guide/image-directive#frequently-asked-questions\n - guide/image-directive#getting-started\n - guide/image-directive#getting-started-with-ngoptimizedimage\n - guide/image-directive#non-blurred-placeholders\n - guide/image-directive#performance-features\n - guide/image-directive#request-images-at-the-correct-size-with-automatic-srcset\n - guide/image-directive#resource-hints\n - guide/image-directive#responsive-images\n - guide/image-directive#step-1-import-ngoptimizedimage\n - guide/image-directive#step-2-optional-set-up-a-loader\n - guide/image-directive#step-3-enable-the-directive\n - guide/image-directive#step-4-mark-images-as-priority\n - guide/image-directive#step-5-include-height-and-width\n - guide/image-directive#the-loaderparams-property\n - guide/image-directive#using-fill-mode\n - guide/image-directive#using-placeholders\n - guide/image-directive#why-cant-i-use-src-with-ngoptimizedimage\n - guide/image-directive#why-is-a-preconnect-element-not-being-generated-for-my-image-domain\n - http://web.dev/lcp\n - https://cloudinary.com/documentation/resizing_and_cropping\n - https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/loading#value\n - https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/sizes\n - https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/srcset\n - https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit\n - https://developer.mozilla.org/en-US/docs/Web/CSS/object-position\n - https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types/preload\n - https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs\n - https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs#encoding_data_into_base64_format\n - https://developers.cloudflare.com/images/image-resizing/\n - https://docs.imagekit.io/\n - https://docs.imgix.com/\n - https://docs.netlify.com/image-cdn/overview/\n - https://subdomain.yourcdn.com/yoursite\n - https://subdomain.yoursite.com\n - https://web.dev/browser-level-image-lazy-loading\n - https://web.dev/codelab-density-descriptors/\n - https://web.dev/css-web-vitals/#images-and-largest-contentful-paint-lcp\n - https://web.dev/css-web-vitals/#images-and-layout-shifts\n - https://web.dev/image-cdns/#how-image-cdns-use-urls-to-indicate-optimization-options\n - https://web.dev/lcp/\n - https://web.dev/lcp/#what-elements-are-considered\n - https://web.dev/learn/design/responsive-images/#sizes\n - https://web.dev/patterns/web-vitals-patterns/images/img-tag\n - https://web.dev/preconnect-and-dns-prefetch\n - https://web.dev/priority-hints\n - https://yoursite.yourcdn.com\n-->"}