{"id":"guide/testing","title":"測試","contents":"<div class=\"content\">\n  <p><a id=\"top\"></a></p>\n\n<h1 id=\"testing\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"etpgj6p39fywtmcrsphy8qrcg\">測試<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing#testing\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dtoha25m910v3325wxkzl8c55\">測試你的 Angular 應用可以幫助你檢查此應用是否正常執行。</p>\n<h2 id=\"prerequisites\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e44b21uig1fakj5vcfuvz1bdu\">前提條件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"67ufq6uo5axbfdm9my5w25nes\">在為 Angular 應用編寫測試之前，你應該對這些概念有一個基本的瞭解：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9l16j6cppokhgw9xk8pkapybb\"><a href=\"guide/architecture\">Angular 的基本原理</a></li>\n<li><a href=\"https://javascript.info/\">JavaScript</a></li>\n<li>HTML</li>\n<li>CSS</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4vtg2wry451tucy201uexb3e4\"><a href=\"cli\">Angular CLI</a></li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"q76rqw85moe5ornj72cfa9pt\">測試文件提供了透過使用 <a href=\"cli\">Angular CLI</a> 建立的範例應用程式對 Angular 應用程式進行單元和整合測試的提示和技術。這個範例應用程式與<a href=\"tutorial/tour-of-heroes\"><em>英雄之旅</em>教學課程</a>中的範例應用程式非常相似。</p>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3jhe3g7pull8hzqtm08p46wf0\">如果你要試驗本指南中所講的應用，請<live-example name=\"testing\" nodownload=\"\">在瀏覽器中執行它</live-example>或<live-example name=\"testing\" downloadonly=\"\">下載並在本地執行它</live-example>。</p>\n</div>\n<p><a id=\"setup\"></a></p>\n<h2 id=\"set-up-testing\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"edicl79awnv03trzhz9yfom1o\">建立環境<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing#set-up-testing\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b4tofl9hem3jy11tfxyx6gdi4\">Angular CLI 會下載並安裝試用 <a href=\"https://jasmine.github.io\">Jasmine 測試框架</a> 測試 Angular 應用時所需的一切。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"n73ve7p3gz8brbfwvlv181qt\">你使用 CLI 建立的專案是可以立即用於測試的。執行 CLI 指令 <a href=\"cli/test\"><code>ng test</code></a> 即可：</p>\n<code-example format=\"shell\" language=\"shell\">\n\nng test\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bfmcdar6a6v13ntx8qg8hn49\"><code>ng test</code> 指令在<em>監視模式</em>下建立應用，並啟動 <a href=\"https://karma-runner.github.io\">karma 測試執行器</a>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"143mb2sxqioqmlb935o73glhr\">它的控制台輸出一般是這樣的：</p>\n<code-example format=\"shell\" language=\"shell\">\n\n02 11 2022 09:08:28.605:INFO [karma-server]: Karma v6.4.1 server started at http://localhost:9876/\n02 11 2022 09:08:28.607:INFO [launcher]: Launching browsers Chrome with concurrency unlimited\n02 11 2022 09:08:28.620:INFO [launcher]: Starting browser Chrome\n02 11 2022 09:08:31.312:INFO [Chrome]: Connected on socket -LaEYvD2R7MdcS0-AAAB with id 31534482\nChrome: Executed 3 of 3 SUCCESS (0.193 secs / 0.172 secs)\nTOTAL: 3 SUCCESS\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ezenbfo7fgv3ucmd32f9o8afa\">日誌的最後一行顯示 Karma 執行了三個測試，這些測試都透過了。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5xwudpy3iu7qzot51svxoxkob\">測試輸出使用 <a href=\"https://github.com/dfederm/karma-jasmine-html-reporter\">Karma Jasmine HTML Reporter</a> 顯示在瀏覽器中。</p>\n<div class=\"lightbox\">\n<img alt=\"Jasmine HTML Reporter in the browser\" src=\"generated/images/guide/testing/initial-jasmine-html-reporter.png\" width=\"502\" height=\"306\">\n</div>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c8rc7xggj9xxj96xw1264rzx2\">可以點選某一行測試，來單獨重跑這個測試，或者點選一行描述訊息來重跑所選測試組（『測試套件』）中的那些測試。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1rj5tiit5ellz0r8ysi7rpicu\">同時，<code>ng test</code> 指令還會監聽這些變化。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6h090eu20dackksclavpk66ki\">要檢視它的實際效果，就對 <code>app.component.ts</code> 做一個小修改，並儲存它。這些測試就會重新執行，瀏覽器也會重新整理，然後新的測試結果就出現了。</p>\n<h2 id=\"configuration\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"27io2zcn0syxgd4dfu8paj1a1\">設定<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing#configuration\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bz57jbvt3r6qfqd6n0jv9bpo5\">Angular CLI 會為你處理 Jasmine 和 Karma 設定。它根據 <code>angular.json</code> 檔案中指定的選項在記憶體中建立完整設定。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ecipaazwpymkekjlzp3i645rm\">如果你想自定義 Karma，你可以透過執行以下指令建立一個 <code>karma.conf.js</code>：</p>\n<code-example format=\"shell\" language=\"shell\">\n\nng generate config karma\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ah59ewko3655t3tmhhe4rq9nu\">在 <a href=\"http://karma-runner.github.io/6.4/config/configuration-file.html\">Karma 設定指南</a>中可以瞭解更多關於 Karma 設定的內容。</p>\n</div>\n<h3 id=\"other-test-frameworks\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"drmoxmvux9pu6iqyppujewc6n\">其他測試框架<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing#other-test-frameworks\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e0imts06tg8mf7lk32venpu09\">你還可以使用其它的測試函式庫和測試執行器來對 Angular 應用進行單元測試。每個函式庫和執行器都有自己特有的安裝過程、設定項和語法。</p>\n<h3 id=\"test-file-name-and-location\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6cerb1mtf9nx0obt7rpcge4a7\">測試檔案名及其位置<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing#test-file-name-and-location\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dbjde75p51n1rvxeujg10e2uz\">在 <code>src/app</code> 目錄中，CLI 為 <code>AppComponent</code> 生成了一個名叫 <code>app.component.spec.ts</code> 的測試檔案。</p>\n<div class=\"alert is-important\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1dojjiqkjf7lj9m50wvh1fli4\">測試檔案的副檔名<strong>必須是 <code>.spec.ts</code></strong>，以便測試工具可以把它識別成一個包含測試的檔案，也叫 <em>spec（規約）</em> 檔案。</p>\n</div>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6yrd6x5pz3t2o1yuumv2pt6gv\"><code>app.component.ts</code> 和 <code>app.component.spec.ts</code> 檔案位於同一個資料夾中，而且相鄰。其根檔案名部分（<code>app.component</code>）都是一樣的。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b7hqspxutkt7z1vb19zl70drd\">請在你的專案中對<em>任意型別</em>的測試檔案都堅持這兩條約定。</p>\n<p><a id=\"q-spec-file-location\"></a></p>\n<h4 id=\"place-your-spec-file-next-to-the-file-it-tests\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"574nnwg8yc6bbjxl79gfirzi3\">把測試規約（spec）檔案放在它要測試的檔案旁邊<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing#place-your-spec-file-next-to-the-file-it-tests\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1w6h4s3byl6lkb9eziur1dzxy\">最好把單元測試規約檔案放到與它們測試的應用原始碼檔案相同的資料夾中：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bcnm8rwnax2j186oy1zt6807t\">這些測試很容易找到。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cnswkkr7dbefmenhnlyhxv92h\">你一眼就能看到應用中是否缺少一些測試。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7ooyq3vve01imdyk6m7p6bnd\">臨近的測試可以揭示一個部件會如何在上下文中工作。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bwbgrrue4nw87pocd2i8p8an8\">當移動原始碼時（在所難免），你不會忘了同時移動測試。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2bb4dpwfhuxyj43ug4r3ygo4s\">當重新命名源檔案時（在所難免），你不會忘了重新命名測試檔案。</li>\n</ul>\n<p><a id=\"q-specs-in-test-folder\"></a></p>\n<h4 id=\"place-your-spec-files-in-a-test-folder\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cjbw4yjrubbfc412p5wqcgqg6\">把 spec 檔案放到 test 目錄下<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing#place-your-spec-files-in-a-test-folder\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c65r6dw3b922y9gk4sfd2we3g\">應用的整合測試規範可以測試跨資料夾和模組的多個部分之間的互動。它們並不屬於任何一個特定的部分，所以把它們放在任何一個檔案旁都很不自然。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8dur4tu2f3hv2gydei57rqnmy\">最好在 <code>tests</code> 目錄下為它們建立一個合適的資料夾。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"byv0pfv3h0bcohahbdnchd4lt\">當然，用來測試那些測試助手的規約也位於 <code>test</code> 目錄下，緊挨著相應的測試助手檔案。</p>\n<p><a id=\"ci\"></a></p>\n<h2 id=\"testing-in-continuous-integration\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"47v9jkjdv1d2o866rbyqsn5qi\">建立持續整合環境<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing#testing-in-continuous-integration\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2i8nzffvt1lfz9lu9n2eigeuq\">保持專案無錯誤的最佳方法之一是透過測試套件，但你可能會忘記一直執行測試。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8akwisdymeqvxyadxxsnfvpl3\">避免專案出 BUG 的最佳方式之一，就是使用測試套件。但是很容易忘了一直執行它。持續整合（CI）伺服器讓你可以設定項目的程式碼儲存庫，以便每次送出和收到 Pull Request 時就會執行你的測試。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bdmrgs0xyry18yxwg1c604rp8\">要在持續整合 (CI) 中測試你的 Angular CLI 應用程式，請執行以下指令：</p>\n<code-example format=\"shell\" language=\"shell\">\n\nng test --no-watch --no-progress --browsers=ChromeHeadless\n\n</code-example>\n<h2 id=\"more-information-on-testing\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7838f80a0ysxladw99799isth\">關於測試的更多訊息<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/testing#more-information-on-testing\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4xxb806cvgsy9y0ihrr9s2od9\">當你設定準備好測試環境之後，可能會發現以下測試指南很有用。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3prlgfrx5eo2xqncnnob4crxu\">詳情</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bub3wooqubzybel4lxa7e31qy\"><a href=\"guide/testing-code-coverage\">程式碼覆蓋率</a></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"68gb8d40vgp1dygkwn38zr6d6\">你的測試覆蓋了多少應用程式，以及如何指定所需的覆蓋範圍。</td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"111dw2uqxce0frefshaxhiubm\"><a href=\"guide/testing-services\">測試服務</a></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7vy8pk98tc5upmchmuk22728u\">如何測試應用程式使用的服務。</td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5wmrobtuqwngusc83o7y8xn1m\"><a href=\"guide/testing-components-basics\">測試元件的基礎知識</a></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"95suvuqwzzuw9xi8tu2a75tew\">測試 Angular 元件的基礎知識。</td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5qnj2zh93r9d8ko8av13px9oi\"><a href=\"guide/testing-components-scenarios\">元件測試場景</a></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2f76x68lcqwm5ossqcjk6m50v\">各種元件測試場景和用例。</td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c03r5zb18lvlbg4o5hck7xaw2\"><a href=\"guide/testing-attribute-directives\">測試屬性型指令</a></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cahzo9hqvjzcibfx0pfh5h721\">如何測試你的屬性型指令。</td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3pantetu747y46uftmm2hif3o\"><a href=\"guide/testing-pipes\">測試通道</a></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"exl37e6zp8i5yzvgetx09ngyu\">如何測試通道。</td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dl9b4lzjfotu6yd6hy8bf1l83\"><a href=\"guide/test-debugging\">除錯測試</a></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9jv0iyys15gw4tpmr6pieu3qv\">常見的測試 bug。</td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"jmf95vqhs6rhs83f91eiqcjn\"><a href=\"guide/testing-utility-apis\">測試工具 API</a></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f1q3mmrkn65rty2sx6s93y8qk\">Angular 測試功能。</td>\n</tr>\n</tbody>\n</table>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：Tue Jan 17 2023</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/architecture-next-steps\n - guide/developer-guide-overview\n - guide/docs-style-guide\n - guide/example-apps-list\n - guide/test-debugging\n - guide/testing-code-coverage\n - guide/testing-utility-apis\n - tutorial/tour-of-heroes/toh-pt0\n-->\n<!-- links from this doc:\n - cli\n - cli/test\n - guide/architecture\n - guide/test-debugging\n - guide/testing#configuration\n - guide/testing#more-information-on-testing\n - guide/testing#other-test-frameworks\n - guide/testing#place-your-spec-file-next-to-the-file-it-tests\n - guide/testing#place-your-spec-files-in-a-test-folder\n - guide/testing#prerequisites\n - guide/testing#set-up-testing\n - guide/testing#test-file-name-and-location\n - guide/testing#testing\n - guide/testing#testing-in-continuous-integration\n - guide/testing-attribute-directives\n - guide/testing-code-coverage\n - guide/testing-components-basics\n - guide/testing-components-scenarios\n - guide/testing-pipes\n - guide/testing-services\n - guide/testing-utility-apis\n - tutorial/tour-of-heroes\n - http://karma-runner.github.io/6.4/config/configuration-file.html\n - https://github.com/dfederm/karma-jasmine-html-reporter\n - https://jasmine.github.io\n - https://javascript.info/\n - https://karma-runner.github.io\n-->"}