{"id":"guide/schematics","title":"原理圖（Schematic）","contents":"<div class=\"content\">\n  <h1 id=\"generating-code-using-schematics\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3btkttbvwr2a8ls0scu3tums3\">原理圖（Schematic）<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/schematics#generating-code-using-schematics\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cjteuka9bcm1ldofdtam1os8w\">原理圖是一個基於樣板的支援複雜邏輯的程式碼產生器。它是一組透過生成程式碼或修改程式碼來轉換軟體專案的指令。原理圖會打包成<a href=\"guide/glossary#collection\">集合（collection）</a>並用 npm 安裝。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7d4meubxk8be69hazn13d6ktl\">原理圖的集合可以作為一個強大的工具，以建立、修改和維護任何軟體專案，特別是當要自定義 Angular 專案以滿足你自己組織的特定需求時。比如，你可以藉助原理圖來用預定義的樣板或佈局生成常用的 UI 模式或特定的元件。也可以用原理圖來強制執行架構規則和約定，讓你的專案保持一致性和互操作性。</p>\n<h2 id=\"schematics-for-the-angular-cli\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"zcrhn07afazk2x36uxusbbki\">Angular CLI 中的原理圖<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/schematics#schematics-for-the-angular-cli\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"33a75y8v0ibjvadvar6ccty24\">原理圖是 Angular 生態系統的一部分。<a href=\"guide/glossary#cli\">Angular CLI</a> 使用原理圖對 Web 應用專案進行轉換。你可以修改這些原理圖，並定義新的原理圖，比如更新程式碼以修復依賴中的重大變更，或者把新的設定項或框架新增到現有的專案中。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6mc7vc6b6mohghgcejob946gp\"><code>@schematics/angular</code> 集合中的原理圖是 <code>ng generate</code> 和 <code>ng add</code> 指令的預設原理圖。此套件裡包含一些有名字的原理圖，可用於設定 <code>ng generate</code> 子指令的選項，比如 <code>ng generate component</code> 和 <code>ng generate service</code>。<code>ng generate</code> 的子指令是相應原理圖的簡寫。可以用長格式來指定並生成特定的原理圖或原理圖集合：</p>\n<code-example format=\"shell\" language=\"shell\">\n\nng generate my-schematic-collection:my-schematic-name\n\n</code-example>\n<p>or</p>\n<code-example format=\"shell\" language=\"shell\">\n\nng generate my-schematic-name --collection collection-name\n\n</code-example>\n<h3 id=\"configuring-cli-schematics\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cr90wct719wr55gx7papbkan6\">設定 CLI 的原理圖<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/schematics#configuring-cli-schematics\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"diuavpiijqdm2ruw8z2hiye9g\">與原理圖相關聯的 JSON 模式會告訴 Angular CLI 指令和子指令都有哪些選項以及預設值。這些預設值可以透過在指令行中為該選項提供不同的值來進行覆蓋。要了解如何更改程式碼生成選項的預設值，請參閱『 <a href=\"guide/workspace-config\">工作區設定</a> 』。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bkf3lpa3j24w5uy1eorlv87jx\">CLI 中那些用來生成專案及其部件的預設原理圖，其 JSON 模式收集在 <a href=\"https://github.com/angular/angular-cli/tree/main/packages/schematics/angular\"><code>@schematics/angular</code></a> 套件中。該模式描述了 CLI 中每個可用的 <code>ng generate</code> 子指令選項，如 <code>--help</code> 輸出中所示。</p>\n<h2 id=\"developing-schematics-for-libraries\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"23ra3v25urenaxo0uzflioaqs\">編寫函式庫的原理圖<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/schematics#developing-schematics-for-libraries\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"287bu4ahbrolhqsla9jvukilf\">作為一名函式庫開發人員，你可以建立自己的自定義原理圖集合，以便把你的函式庫與 Angular CLI 整合在一起。</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3jpcpfafanoi2t7fuv2le0s9r\"><em>新增（Add）原理圖</em>允許開發人員使用 <code>ng add</code> 在 Angular 工作區中安裝你的函式庫</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8ugrqq3d0chql9j6gxbzu7jce\"><em>生成（Generation）原理圖</em>可以告訴 <code>ng generate</code> 子指令如何修改專案、新增設定和指令碼，以及為庫中定義的工件提供腳手架</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8sxgdepymoiiwds2o0hn4g90o\"><em>更新（Update）原理圖</em>可以告訴 <code>ng update</code> 指令，如何更新函式庫的依賴，並在發布新版本時調整其中的重大變更</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9heoq0m2ys41owkurg88ymcqm\">要了解它們的更多細節以及如何建立它們，請參閱：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"csqr93mkx5rkvx296t4akijws\"><a href=\"guide/schematics-authoring\">創作原理圖</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6pz0vhjikj3onyr80n0p286su\"><a href=\"guide/schematics-for-libraries\">函式庫的原理圖</a></li>\n</ul>\n<h3 id=\"add-schematics\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1uliry5rqpukkxboad4h56lcs\">新增（Add）原理圖<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/schematics#add-schematics\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8oc1ol1nmy3up80chur6ny1bv\">庫中通常都會提供一個新增原理圖，以便透過 <code>ng add</code> 把這個函式庫新增到現有專案中。<code>add</code> 指令會執行套件管理器來下載新的依賴，並呼叫一個原理圖形式的安裝指令碼。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"berjas5wj40p3k409pb8xg5bf\">比如，<a href=\"https://material.angular.cn/guide/schematics\"><code>@angular/material</code></a> 原理圖會要求 <code>add</code> 指令安裝並設定 Angular Material 及其主題，並註冊可透過 <code>ng generate</code> 建立的新啟動器元件。可以把它作為自己的 \"新增原理圖\" 的範例。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dwjudncrdstgtne8zhgfl9wd7\">合作伙伴和第三方庫也可以透過新增原理圖來支援 Angular CLI。比如，<code>@ng-bootstrap/schematics</code> 會把 <a href=\"https://ng-bootstrap.github.io\">ng-bootstrap</a> 新增到應用中，<code>@clr/angular</code> 會安裝並設定 <a href=\"https://clarity.design/documentation/get-started\">VMWare 的 Clarity</a>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"564sl7l3duwirfq7qmwyduk8i\">\"新增原理圖\" 還可以透過更改設定、新增額外依賴（比如膩子指令碼），或者新增程式套件特有的初始化程式碼來修改專案。比如，<code>@angular/pwa</code> 原理圖會通過新增一個應用清單（manifest）和 Service Worker。</p>\n<h3 id=\"generation-schematics\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4f73cdsbwzai2nhyuoo5yooyj\">生成（Generation）原理圖<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/schematics#generation-schematics\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dc5hq5gz5t46hlhdohpbfiq5m\">產生器原理圖是 <code>ng generate</code> 的操作指令。那些已經有文件的子指令會使用預設的 Angular 產生器原理圖，但你可以在子指令中指定另一個原理圖來生成你的庫中定義的那些工件。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8e6ycx51ektrtyce9l5jd1nu4\">比如，Angular Material 為它定義的一些 UI 元件提供了產生器原理圖。下面的指令會使用其中一個原理圖來渲染一個 Angular Material 的 <code>&lt;mat-table&gt;</code> 元件，它預先設定了一個用於排序和分頁的資料來源。</p>\n<code-example format=\"shell\" language=\"shell\">\n\nng generate @angular/material:table &lt;component-name&gt;\n\n</code-example>\n<h3 id=\"update-schematics\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"83cvt6l7rgrrsy0y3iaklz729\">更新原理圖<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/schematics#update-schematics\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1bwhg8g127rwxu2olns8bpjes\"><code>ng update</code> 指令可以用來更新工作區的函式庫依賴。如果你沒有提供任何選項或使用了 help 選項，該指令會檢查你的工作區並建議要更新哪些函式庫。</p>\n<code-example format=\"shell\" language=\"shell\">\n\nng update\nWe analyzed your package.json, there are some packages to update:\n\n    Name                                      Version                     Command to update\n    ‐-------------------------------------------------------------------------------\n    @angular/cdk                       7.2.2 -&gt; 7.3.1           ng update @angular/cdk\n    @angular/cli                       7.2.3 -&gt; 7.3.0           ng update @angular/cli\n    @angular/core                      7.2.2 -&gt; 7.2.3           ng update @angular/core\n    @angular/material                  7.2.2 -&gt; 7.3.1           ng update @angular/material\n    rxjs                                      6.3.3 -&gt; 6.4.0           ng update rxjs\n\n    There might be additional packages that are outdated.\n    Run \"ng update --all\" to try to update all at the same time.\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"22y5e73fmaqr4kz5wubqs5avv\">如果你給這個指令指定一組要更新的函式庫（或 <code>--all</code> 標誌），它就會更新這些函式庫、這些函式庫的對等依賴，以及對等依賴的對等依賴。</p>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6zqzfp1rz9vb0h56xvo7185hu\">如果存在不一致（比如，如果在某個簡單的 <a href=\"https://semver.io\">semver</a> 範圍內無法對應對等依賴），那麼該指令會生成一個錯誤，並且不會更改工作區中的任何內容。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3mai0s2p1lhlzwqzqi0s8ppdw\">我們建議你不要強制更新所有的依賴項，而應該首先嘗試更新特定的依賴項。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"erk159jp1ile28kcjm9wxw2em\">關於 <code>ng update</code> 指令工作原理的更多訊息，請參閱『<a href=\"https://github.com/angular/angular-cli/blob/main/docs/specifications/update.md\">更新指令』</a>。</p>\n</div>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aaspnnrl34g0xdfvvp13r72hj\">如果你建立的新版本的函式庫引入了潛在的重大更改，你可以提供一個<em>更新原理圖</em>，讓 <code>ng update</code> 指令能夠自動解決所更新專案中的任何重大修改。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"buam1s1yof7toxwjc6mb60ovp\">比如，假設你要更新 Angular Material 函式庫。</p>\n<code-example format=\"shell\" language=\"shell\">\nng update @angular/material\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"accossa2dmza8l29ksw4dp8ox\">該指令會在你的工作區的 <code>package.json</code> 中更新 <code>@angular/material</code> 及其依賴項 <code>@angular/cdk</code>。如果任何一個套件中包含了涵蓋從現有版本到新版本的遷移規則的更新原理圖，那麼該指令就會在你的工作區中執行這個原理圖。</p>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最後複查時間：Mon Feb 28 2022</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/architecture-next-steps\n - guide/creating-libraries\n - guide/glossary\n - guide/standalone-migration\n - guide/what-is-angular\n - scaling\n-->\n<!-- links from this doc:\n - guide/glossary#cli\n - guide/glossary#collection\n - guide/schematics#add-schematics\n - guide/schematics#configuring-cli-schematics\n - guide/schematics#developing-schematics-for-libraries\n - guide/schematics#generating-code-using-schematics\n - guide/schematics#generation-schematics\n - guide/schematics#schematics-for-the-angular-cli\n - guide/schematics#update-schematics\n - guide/schematics-authoring\n - guide/schematics-for-libraries\n - guide/workspace-config\n - https://clarity.design/documentation/get-started\n - https://github.com/angular/angular-cli/blob/main/docs/specifications/update.md\n - https://github.com/angular/angular-cli/tree/main/packages/schematics/angular\n - https://material.angular.io/guide/schematics\n - https://ng-bootstrap.github.io\n - https://semver.io\n-->"}