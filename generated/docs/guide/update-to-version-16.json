{"id":"guide/update-to-version-16","title":"更新到 Angular v16","contents":"<div class=\"content\">\n  <h1 id=\"update-angular-to-v16\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8c96yd6c0gy47872t4wgc0y2a\">更新到 Angular v16<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#update-angular-to-v16\"><i class=\"material-icons\">link</i></a></h1>\n<!-- NOTE to writers: When creating the topic for the next version,                               -->\n<!--   remember to update the redirect link in angular/aio/firebase.json                          -->\n<!-- To update the redirect link in angular/aio/firebase.json:                                    -->\n<!--   1. Search for the entry in firebase.json with \"source\": \"guide/update-to-latest-version\"   -->\n<!--   2,  Update the destination value to refer to the new guide's URL                           -->\n<!--                                                                                              -->\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1w3w4gwufyfycg4qoof680rql\">本主題會提供如何將 Angular 應用程式更新到第 16 版的訊息。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bmaqf8wxy3ubcvvqyqlfhfdxb\">有關此訊息的摘要以及將 Angular 應用程式更新到 v16 的分步過程，請參閱<a href=\"https://update.angular.io\">Angular 更新指南</a>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4z60xxbu42n1m49629j8zfqij\"><a href=\"https://update.angular.io\">Angular 更新指南</a>和本主題中的訊息是從這些更改日誌中總結的：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8p1tcoqjybbamoiwriuz5dvk4\"><a href=\"https://github.com/angular/angular/blob/main/CHANGELOG.md\">angular/angular 函式庫的變更日誌</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4vjkm26a9sl0gyxbjwpa7l2ql\"><a href=\"https://github.com/angular/angular-cli/blob/main/CHANGELOG.md\">angular/angular-cli 函式庫的變更日誌</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6ywcwq8fnzlusplbto7k5i79f\"><a href=\"https://github.com/angular/components/blob/main/CHANGELOG.md\">angular/components 函式庫的變更日誌</a></li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1ad861fn1x7sdy4b0sjc6fpio\">有關將 Angular 應用程式更新到 v15 的訊息已歸檔在<a href=\"/guide/update-to-version-15\">更新到版本 15</a>中。</p>\n<p><a id=\"new-features\"></a></p>\n<h2 id=\"feature-highlights-in-angular-v16\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ag4tbzp1rr78mchxf7ytnjk33\">Angular v16 中的亮點屬性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#feature-highlights-in-angular-v16\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5ow70asr1peibwjqevzrahx8r\">如需更全面的新屬性清單，請參閱<a href=\"https://blog.angular.io\">有關 v16 更新的 Angular 部落格文章</a>。</p>\n<!-- markdownLint-disable MD001 -->\n<h4 id=\"angular-signals-developer-preview\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dkyh9h9otiwdpbcfio7cxsd4s\">Angular 訊號（Signal）的開發者預覽<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#angular-signals-developer-preview\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c9umbxger6szhfag6wvn2qlnb\">此版本包括 Angular 的新回應式基礎的第一個開發者預覽：<code><a href=\"api/core/signal\" class=\"code-anchor\">signal</a></code>、<code><a href=\"api/core/computed\" class=\"code-anchor\">computed</a></code> 和 <code><a href=\"api/core/effect\" class=\"code-anchor\">effect</a></code>。有關詳細訊息，請參閱<a href=\"/guide/signals\">訊號指南</a>；有關更多背景訊息，請參閱<a href=\"https://github.com/angular/angular/discussions/49685\">Angular Signals RFC</a>。</p>\n<h4 id=\"enhanced-hydration-developer-preview\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6tkxmlkmdtrdzhhsanakxgpp0\">增強水合功能的開發者預覽版<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#enhanced-hydration-developer-preview\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5ipbee1pl6vdubz29dmgzoubq\">以前，當 Angular 在服務端渲染或編譯時預渲染過的頁面上啟動時，框架會丟棄任何現有的 DOM 節點並從頭開始重新渲染。藉助 v16 增強的水合支援，你可以選擇讓 Angular 複用這些現有的 DOM 節點。此開發者預覽功能可以在許多場景中提高頁面載入效能。有關詳細訊息，請參閱完整的<a href=\"/guide/hydration\">水合指南</a>。</p>\n<h3 id=\"faster-builds-with-the-esbuild-developer-preview\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d0xkdptxhcjrggfkeb1jod0x\">使用 esbuild 開發者預覽版加快建立速度<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#faster-builds-with-the-esbuild-developer-preview\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"av61xzb5t7r1m6v52bfh58oa9\">v16 為你帶來了 Angular CLI 基於 <a href=\"https://esbuild.github.io\">esbuild</a> 的新建構式的開發者預覽版。這種新架構可以在許多場景中顯著縮短建立時間。此預覽版還包括與 <a href=\"https://vitejs.dev\">Vite</a> 的整合，以支援 CLI 開發伺服器。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bs2vfw6pc3arwic0wxpd2fh8d\">你可以透過更新 <code>angular.json</code> 來嘗試這種新的建立設定：</p>\n<code-example language=\"json\">\n\"architect\": {\n  \"build\": {\n    \"builder\": \"@angular-devkit/build-angular:browser-esbuild\",\n</code-example>\n<h3 id=\"standalone-component-migration-and-scaffolding\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3dyjvp7ew200pstbfj9fpc0oo\">獨立元件遷移和腳手架<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#standalone-component-migration-and-scaffolding\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2ezmkuiuihhpwh6z5snjumbaw\">為了支援開發者將他們的應用程式轉換為獨立 API，Angular v16 包括了一些遷移原理圖和獨立遷移指南。這些工具大大減少了將程式碼遷移到獨立元件、指令和通道時所需的工作量。有關詳細訊息，請訪問 <a href=\"/guide/standalone-migration\">獨立遷移指南</a>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"kfubhxu79i45n4co5e1j0le2\">你現在還可以透過執行以下指令來生成具有獨立元件的新 Angular 應用程式：</p>\n<code-example language=\"sh\">\nng new --standalone\n</code-example>\n<h3 id=\"required-inputs\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aboe7p0ln2s5rbsxbngmej61z\">必備的輸入屬性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#required-inputs\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6akm3ga46b5jhgurlyp6o0lsi\">你現在可以把元件和指令的輸入屬性標記為<strong>必備的</strong>：</p>\n<code-example language=\"typescript\">\nexport class ColorPicker {\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>({ required: true }) defaultColor!: string;\n}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3xq2lvdqdvio7ba5jrfctmkfv\">如果樣板包含一個元件，但沒有指定其所有必備輸入屬性，Angular 就會在建立時報告錯誤。</p>\n<p><a id=\"breaking-changes\"></a></p>\n<h2 id=\"highlighted-breaking-changes-in-angular-v16\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9uk4ns0nuz2sfp65tgnsc7esq\">Angular v16 重大變更中的亮點<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#highlighted-breaking-changes-in-angular-v16\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6l2uq9q6l26zqu82bdg58420k\">有關重大更改的完整清單，請參閱 GitHub 上的完整變更日誌。</p>\n<p><a id=\"v16-bc-01\"></a></p>\n<h3 id=\"angular-v16-requires-nodejs-version-v16-or-v18\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9l2exes9z6akilcfq5zyfzhno\">Angular v16 需要 node.js 版本 v16 或 v18<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#angular-v16-requires-nodejs-version-v16-or-v18\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"76sdk7n9tztk89qh6konhsixd\">Angular 需要 node.js v16 或 v18。<a href=\"https://github.com/angular/angular/pull/49255\">PR #47730</a></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7h86l3ewnugvd90sdni731l62\">有關完整版本相容性的詳細訊息，請參閱<a href=\"/guide/versions\">版本相容性</a>。</p>\n<p><a id=\"v16-bc-02\"></a></p>\n<h3 id=\"angular-v16-requires-typescript-version-49-or-later\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3233gfaipgicii4lvxvh6ro8i\">Angular v16 需要 TypeScript 4.9 或更高版本<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#angular-v16-requires-typescript-version-49-or-later\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f9var9yaixivmev0xq8b17tq\">在 Angular v16 中，支援 TypeScript 版本從 4.9.3 到 5.2.0（不包括），不支援早於 4.9.3 的版本。 \n<a href=\"https://github.com/angular/angular/pull/49155\">PR #49155</a></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7h86l3ewnugvd90sdni731l62\">有關完整版本相容性的詳細訊息，請參閱<a href=\"/guide/versions\">版本相容性</a>。</p>\n<p><a id=\"v16-bc-03\"></a></p>\n<h3 id=\"angular-compatibility-compiler-ngcc-has-been-removed\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4m32wfnnskerbkrpn4r38r3zi\">Angular 相容性編譯器（ngcc）已被刪除<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#angular-compatibility-compiler-ngcc-has-been-removed\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5ty2hpm3kjuo95vb8wke6y1kp\">Angular 相容性編譯器（ngcc）是一種建立工具，可促進 Angular 之前的編譯器和渲染架構（View Engine）與其新架構（Ivy）之間的相容性。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8m401hjoa1hg57otn4b083upm\">View Engine 已在 Angular v13 中移除了，到 v16 也最終移除了 ngcc。因此，使用 View Engine 建立的 Angular 函式庫不能在 Angular v16+ 中使用。</p>\n<p><a id=\"v16-bc-04\"></a></p>\n<h4 id=\"angular-package-format-changes\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e5isfu74s9ph2pxwwy9i9se1r\">Angular 套件格式更改<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#angular-package-format-changes\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6g5at0r3ru51oa8orytr8imol\">Angular 套件格式（APF）已更新，包含以下更改：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"trmro67gmjawcpxo2844ix6m\">扁平化 ESM 2015（FESM2015）輸出已被移除。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f4coffp69gb103axzfqgalepe\">EcmaScript 2020 輸出已更新為 EcmaScript 2022（包括扁平化輸出）。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"37ix7mofmrn03oq1liwktjkl1\">有關背景，請參閱 <a href=\"/guide/angular-package-format\">Angular 套件格式</a>。</p>\n<p><a id=\"v16-bc-06\"></a></p>\n<h4 id=\"reflectiveinjector-has-been-removed\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5iu6tpyr48plygcetxql4yu12\"><code>ReflectiveInjector</code> 已移除<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#reflectiveinjector-has-been-removed\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9zwo0iq8udu3bpb2obmyhtxlh\"><code>ReflectiveInjector</code> 和相關符號已移除。請更新程式碼以避免引用 <code>ReflectiveInjector</code> 符號。請改用 <code>Injector.create</code> 來建立一個注入器。</p>\n<p><a id=\"v16-bc-07\"></a></p>\n<h4 id=\"updated-behavior-for-routercreateurltree\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b4brk1d72vws51m6x1cm253yw\">更新了 <code>Router.createUrlTree</code> 的行為<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#updated-behavior-for-routercreateurltree\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7otfskuvw63zoapm11o0vbov9\">可能需要調整對 <code><a href=\"api/router/ActivatedRoute\" class=\"code-anchor\">ActivatedRoute</a></code> 實例的測試進行模擬（Mock），因為 Router.createUrlTree 現在可以在更多場景中做正確的事情。這意味著使用無效/不完整的 ActivatedRoute 進行模擬時的測試行為可能與以前不同。此外，測試現在可以導向到真正的 URL 了，而之前它們會導向到根目錄。請確保測試提供了對應的預期路由。這很少會對生產程式碼產生影響，但已經發現，當使用未出現在當前路由器狀態中的 <code><a href=\"api/router/ActivatedRoute\" class=\"code-anchor\">ActivatedRoute</a></code> 時的相對導向以前被忽略了（現在與期望的行為一致）。透過建立正確的 URL，這偶爾會導致應用程式中出現與以前不同的導向行為。大多數情況下，當嘗試建立僅使用空指令陣列更新查詢引數的導向時就會發生這種情況，例如 <code>router.navigate([], {relativeTo: route, queryParams: newQueryParams})</code>。在這種情況下，應該刪除 <code>relativeTo</code> 屬性。</p>\n<p><a id=\"deprecations\"></a></p>\n<h2 id=\"deprecations-highlights-in-angular-v16\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"xzn8zz6uz5k4hztn007p6x74\">Angular v16 棄用中的亮點<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-16#deprecations-highlights-in-angular-v16\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"27gvnvjy1rmau3gj48o3ait70\">這些 API 在 v16 中仍然可用，但可能會在未來版本中被移除，如 Angular 的\n<a href=\"/guide/releases#deprecation-policy\">棄用策略</a>所述。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"o3n0wfbp4icz228hgohmdgh6\">為了保持 Angular 應用程式的可靠性，只要條件允許，就應該儘快更新應用程式。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8rauhn4qvl8aihjj83daq48w4\">已移除</th>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b60cmg37kstj9qup38pt8swfn\">替代品</th>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3prlgfrx5eo2xqncnnob4crxu\">詳情</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1htfs9h06pgvxcxwf12so1cl9\"><a id=\"v16-dp-01\"></a>類別和 \n<code><a href=\"api/core/InjectionToken\" class=\"code-anchor\">InjectionToken</a></code> 路由守衛和解析器</td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8f8epqehr13tvwx8znyu185rp\">檢視詳情</td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7n4pp45n4kzs4zosyj9ohuw5t\">類別和 \n<code><a href=\"api/core/InjectionToken\" class=\"code-anchor\">InjectionToken</a></code> 守衛和解析器已被棄用。相反，將守衛編寫為普通的 JavaScript 函式，並使用 \n<code>@angular/core</code> 中的 \n<code>inject</code> 注入依賴。 \n<a href=\"https://github.com/angular/angular/pull/47924\">PR #47924</a></td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5aivs9bc2k0utjcdig4bn725g\"><a id=\"v16-dp-02\"></a>多個 Angular Material 元件的 \n<code>ripple</code> 屬性</td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6bs071f5k1m1udzmhtyd822xg\">無</td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"lg4mm3wa0ua7a7o79ebzxdia\"><code>MatButton</code>、\n<code>MatCheckbox</code>、\n<code>MatChip</code> 的 \n<code>ripple</code> 屬性已被棄用。此更改將漣漪效果轉移到元件的私有實現細節中。</td>\n</tr>\n</tbody>\n</table>\n\n  <div class=\"reviewed\">最後複查時間：Wed May 03 2023</div>\n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - /guide/angular-package-format\n - /guide/hydration\n - /guide/releases#deprecation-policy\n - /guide/signals\n - /guide/standalone-migration\n - /guide/update-to-version-15\n - /guide/versions\n - api/core/InjectionToken\n - api/core/Input\n - api/core/computed\n - api/core/effect\n - api/core/signal\n - api/router/ActivatedRoute\n - guide/update-to-version-16#angular-compatibility-compiler-ngcc-has-been-removed\n - guide/update-to-version-16#angular-package-format-changes\n - guide/update-to-version-16#angular-signals-developer-preview\n - guide/update-to-version-16#angular-v16-requires-nodejs-version-v16-or-v18\n - guide/update-to-version-16#angular-v16-requires-typescript-version-49-or-later\n - guide/update-to-version-16#deprecations-highlights-in-angular-v16\n - guide/update-to-version-16#enhanced-hydration-developer-preview\n - guide/update-to-version-16#faster-builds-with-the-esbuild-developer-preview\n - guide/update-to-version-16#feature-highlights-in-angular-v16\n - guide/update-to-version-16#highlighted-breaking-changes-in-angular-v16\n - guide/update-to-version-16#reflectiveinjector-has-been-removed\n - guide/update-to-version-16#required-inputs\n - guide/update-to-version-16#standalone-component-migration-and-scaffolding\n - guide/update-to-version-16#update-angular-to-v16\n - guide/update-to-version-16#updated-behavior-for-routercreateurltree\n - https://blog.angular.io\n - https://esbuild.github.io\n - https://github.com/angular/angular-cli/blob/main/CHANGELOG.md\n - https://github.com/angular/angular/blob/main/CHANGELOG.md\n - https://github.com/angular/angular/discussions/49685\n - https://github.com/angular/angular/pull/47924\n - https://github.com/angular/angular/pull/49155\n - https://github.com/angular/angular/pull/49255\n - https://github.com/angular/components/blob/main/CHANGELOG.md\n - https://update.angular.io\n - https://vitejs.dev\n-->"}