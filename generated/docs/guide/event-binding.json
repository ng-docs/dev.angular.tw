{"id":"guide/event-binding","title":"事件绑定","contents":"<div class=\"content\">\n  <h1 id=\"event-binding\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ehfop80m9e0igm4pklg35r7g8\">事件绑定<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/event-binding#event-binding\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3yuuifrn99fjd2z8cu6qsmbep\">通过事件绑定，你可以侦听并响应用户操作，比如按键、鼠标移动、点击和触摸。</p>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"81el5yk7yllx1tewd03bnp7o0\">本章包含代码片段的工作实例参阅<live-example></live-example>。</p>\n</div>\n<h2 id=\"prerequisites\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e44b21uig1fakj5vcfuvz1bdu\">前提条件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/event-binding#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f2juqutjpadle5b16ec0pok4o\"><a href=\"guide/architecture-components\">组件基础</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1basrmrmsgqz0ktslwd53at7b\"><a href=\"guide/glossary#template\">模板基础</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7boobbok84b51i60fmn6nurfv\"><a href=\"guide/binding-syntax\">绑定语法</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2f1axmc62ssz3pt6hgsd9y608\"><a href=\"guide/template-statements\">模板语句</a></li>\n</ul>\n<h2 id=\"binding-to-events\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"erfsd41b6e1mz0lhomzxkgqre\">绑定到事件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/event-binding#binding-to-events\"><i class=\"material-icons\">link</i></a></h2>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dfrwot8r8dkzq7j66hzq75te5\">有关绑定到属性的信息，请参阅\n<a href=\"guide/property-binding\">事件绑定</a>。</p>\n</div>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"j6h18r716p9u42sqtyfs0w3u\">要绑定到事件，你可以使用 Angular 事件绑定语法。此语法由等号左侧括号中的目标事件名称和右侧带引号的模板语句组成。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4nqp4ymyxml8as2hsvbd0xm38\">创建以下示例；目标事件名是 <code>click</code>，模板语句是 <code>onSave()</code>。</p>\n<code-example language=\"html\" header=\"Event binding syntax\">\n&lt;button (click)=\"onSave()\"&gt;Save&lt;/button&gt;\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"697nrdag4ntqh890ax27v3fk6\">事件绑定侦听按钮的单击事件，并在发生单击时调用组件的 <code>onSave()</code>。</p>\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/template-syntax/syntax-diagram.svg\" alt=\"Syntax diagram\" width=\"600\" height=\"125\">\n</div>\n<h3 id=\"determining-an-event-target\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"484eoa80az4ekkrmtedqlto0p\">确定事件目标<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/event-binding#determining-an-event-target\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5uyab5kvpneu7sw8igz3jbsun\">为了确定事件目标，Angular 会检查目标事件的名称是否与已知指令的 event 属性匹配。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5l8fedq5z45o1ikox5sccw0xp\">创建以下示例：（Angular 会检查 <code>myClick</code> 是否是自定义 <code>ClickDirective</code> 上的事件）</p>\n<code-example path=\"event-binding/src/app/app.component.html\" region=\"custom-directive\" header=\"src/app/app.component.html\">\n&lt;h4&gt;myClick is an event on the custom ClickDirective:&lt;/h4&gt;\n&lt;button type=\"button\" (myClick)=\"clickMessage=$event\" clickable&gt;click with myClick&lt;/button&gt;\n{{clickMessage}}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"862nh724ipnye53nnb5srkvj4\">如果目标事件名称 <code>myClick</code> 与 <code>ClickDirective</code> 的输出属性不匹配，Angular 将改为绑定到基础 DOM 元素上的 <code>myClick</code> 事件。</p>\n<h2 id=\"binding-to-keyboard-events\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"akmxq1oky1qbv1gsdp9brl6c5\">绑定到键盘事件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/event-binding#binding-to-keyboard-events\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3mik62f8b2nxs9ez9u8ozs8zp\">你可以用 Angular 的绑定语法绑定到键盘事件。你可以指定要绑定到键盘事件的键值或代码。它们的 <code>key</code> 和 <code>code</code> 字段是浏览器键盘事件对象的原生部分。默认情况下，事件绑定假定你要使用键盘事件上的 <code>key</code> 字段。你还可以用 <code>code</code> 字段。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6flu1cycrdf1o6ubvb7t04wkn\">键的组合可以用点（<code>.</code>）分隔。例如，<code>keydown.enter</code> 将允许你将事件绑定到 <code>enter</code> 键。你还可以用修饰键，例如 <code>shift</code> 、 <code>alt</code> 、 <code>control</code> 和 Mac 中的 <code>command</code> 键。以下示例展示了如何将键盘事件绑定到 <code>keydown.shift.t</code>。</p>\n<code-example language=\"html\">\n&lt;input (keydown.shift.t)=\"onKeydown($event)\" /&gt;\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7hrkyfwur5pxp3gu0tg9jdvid\">根据操作系统的不同，某些组合键可能会创建特殊字符，而不是你期望的组合键。例如，当你同时使用 option 和 shift 键时，MacOS 会创建特殊字符。如果你绑定到 <code>keydown.shift.alt.t</code>，在 macOS 上，该组合会生成 <code>ˇ</code> 而不是 <code>t</code>，它与绑定不匹配，也不会触发你的事件处理程序。要绑定到 macOS 上的 <code>keydown.shift.alt.t</code>，请使用 <code>code</code> 键盘事件字段来获取正确的行为，例如此示例中显示的 <code>keydown.code.shiftleft.altleft.keyt</code>。</p>\n<code-example language=\"html\">\n&lt;input (keydown.code.shiftleft.altleft.keyt)=\"onKeydown($event)\" /&gt;\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"anktdcwsb67e70iv591l9d1v8\"><code>code</code> 字段比 <code>key</code> 字段更具体。<code>key</code> 字段总是会报告 <code>shift</code>，而 <code>code</code> 字段将指明 <code>leftshift</code> 或 <code>rightshift</code>。使用 <code>code</code> 字段时，你可能需要添加单独的绑定以捕获你想要的所有行为。使用 <code>code</code> 字段时无需处理操作系统特有的行为，例如 macOS 上的 <code>shift + option</code> 行为。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4d3w24gz7ysvt2azvjs4tzg8p\">有关更多信息，请访问<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_key_values\">键值</a>和<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_code_values\">键码</a>的完整参考，以帮助你构建事件字符串。</p>\n<h2 id=\"binding-to-passive-events\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"22f3koerv070jxsx8wxhjscf1\">绑定到被动事件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/event-binding#binding-to-passive-events\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9icfni1l6f2oakulg9x3ca38u\">Angular 还支持\n<a href=\"https://developer.chrome.com/en/docs/lighthouse/best-practices/uses-passive-event-listeners/\">被动事件</a>监听器。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ccyd0f27lr4l4uw74b38lfs1x\">这是一个高级技术，对于大多数应用程序来说并非必需。如果您需要优化处理频繁发生的导致性能问题的事件，您可能会发现这很有用。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7oh1h0ei144rsw8id30n2porl\">例如，使用以下步骤使滚动事件变 passiv。</p>\n<ol>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7tmd5i6acbneaajwvtwiwx3v4\">在 <code>src</code> 目录下创建一个文件 <code>zone-flags.ts</code>。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"eyxeihojmte8rjnz3yazhcl9w\">将以下行添加到此文件中。 \n<code-example language=\"typescript\">\n  (window as any)['__zone_symbol__PASSIVE_EVENTS'] = ['scroll']; \n</code-example></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9wxu1advhqn4mkla2ux48269n\">在 \n<code>src/polyfills.ts</code> 文件中，在导入 zone.js 之前，导入新创建的 \n<code>zone-flags</code>。 \n<code-example language=\"typescript\">\n  import './zone-flags'; import 'zone.js'; // 包含在 Angular CLI 中。 \n</code-example></li>\n</ol>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6k99xiju5qif9ge6mvtcep509\">在这些步骤之后，如果你为 <code>scroll</code> 事件添加事件侦听器，侦听器就会是 <code>passive</code> 的。</p>\n<h2 id=\"whats-next\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"407r2fj2mi5kvg7imj9zdcpe\">下一步呢？<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/event-binding#whats-next\"><i class=\"material-icons\">link</i></a></h2>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"drgo6qs2d416h44h219ok8tuf\">关于事件绑定工作原理的更多信息，请参阅<a href=\"guide/event-binding-concepts\">事件绑定工作原理</a>。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"mfyxx87fibqbnu58gbuv5vkk\"><a href=\"guide/property-binding\">属性绑定</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cnor5fuai7856ka52hmiklm7k\"><a href=\"guide/interpolation\">文本插值</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"pmgobrf7ht0v6oo28ihppae5\"><a href=\"guide/two-way-binding\">双向绑定</a></li>\n</ul>\n\n  <div class=\"reviewed\">最后复查时间：Fri Sep 01 2023</div>\n</div>\n\n\n<!-- links to this doc:\n - extended-diagnostics/NG8101\n - guide/ajs-quick-reference\n - guide/binding-overview\n - guide/built-in-directives\n - guide/example-apps-list\n - guide/glossary\n - guide/inputs-outputs\n - guide/interpolation\n - guide/property-binding\n - guide/template-overview\n - guide/template-syntax\n - guide/two-way-binding\n - guide/user-input\n - tutorial/tour-of-heroes/toh-pt2\n - tutorial/tour-of-heroes/toh-pt4\n-->\n<!-- links from this doc:\n - guide/architecture-components\n - guide/binding-syntax\n - guide/event-binding#binding-to-events\n - guide/event-binding#binding-to-keyboard-events\n - guide/event-binding#binding-to-passive-events\n - guide/event-binding#determining-an-event-target\n - guide/event-binding#event-binding\n - guide/event-binding#prerequisites\n - guide/event-binding#whats-next\n - guide/event-binding-concepts\n - guide/glossary#template\n - guide/interpolation\n - guide/property-binding\n - guide/template-statements\n - guide/two-way-binding\n - https://developer.chrome.com/en/docs/lighthouse/best-practices/uses-passive-event-listeners/\n - https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_code_values\n - https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_key_values\n-->"}