{"id":"guide/animations-attach-to-html-template","title":"定義動畫並附加到 HTML 範本","contents":"<div class=\"content\">\n  <h1 id=\"define-animations-and-attach-to-an-html-template\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6dl4oy8bc4xool6reou5g65sb\">定義動畫並附加到 HTML 範本<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/animations-attach-to-html-template#define-animations-and-attach-to-an-html-template\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"62phz1kujk2ubjx5e7kdjbxrp\">動畫是在控制要動畫的 HTML 元素的宿主元件的元資料中定義的。</p>\n<h2 id=\"define-the-animation\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1omzuavn7djpcyns7t98t2cvz\">定義動畫。<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/animations-attach-to-html-template#define-the-animation\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bihgv7yx55qnwkmvw6c0l7tq9\">將定義動畫的程式碼放在 <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> 裝飾器中的 <code>animations:</code> 屬性下。</p>\n<code-example header=\"src/app/open-close.component.ts\" path=\"animations/src/app/open-close.component.ts\" region=\"component\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  standalone: true,\n  selector: 'app-open-close',\n  animations: [\n    <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('openClose', [\n      // ...\n      state('open', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n        height: '200px',\n        opacity: 1,\n        backgroundColor: 'yellow'\n      })),\n      state('closed', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n        height: '100px',\n        opacity: 0.8,\n        backgroundColor: 'blue'\n      })),\n      <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('open =&gt; closed', [\n        <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s')\n      ]),\n      <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('closed =&gt; open', [\n        <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.5s')\n      ]),\n    ]),\n  ],\n  templateUrl: 'open-close.component.html',\n  styleUrls: ['open-close.component.css']\n})\nexport class OpenCloseComponent {\n  isOpen = true;\n\n  toggle() {\n    this.isOpen = !this.isOpen;\n  }\n\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"82x2veaq3ah5pzk7ps97lc8ti\">定義了元件的動畫觸發器後，將其附加到範本中的元素。將觸發器名稱括在方括號中，並在它前面加上 <code>@</code> 符號。可以使用標準的 Angular 屬性綁定語法將觸發器繫結到範本表示式。其中 <code>triggerName</code> 是觸發器的名稱，<code>expression</code> 計算為某個已定義的動畫狀態。</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n&lt;div [@triggerName]=\"expression\"&gt;…&lt;/div&gt;;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"224onj073z4i6z0hxorrxjsz6\">當該表示式的值變成了新的狀態時，動畫就會執行或者叫觸發。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bv1ofmcvkewk66me116fgz9j3\">下列程式碼片段把該觸發器繫結到了 <code>isOpen</code> 屬性的值上。</p>\n<code-example header=\"src/app/open-close.component.html\" path=\"animations/src/app/open-close.component.1.html\" region=\"trigger\">\n&lt;nav&gt;\n  &lt;button type=\"button\" (click)=\"toggle()\"&gt;Toggle Open/Close&lt;/button&gt;\n&lt;/nav&gt;\n\n&lt;div [@openClose]=\"isOpen ? 'open' : 'closed'\" class=\"open-close-container\"&gt;\n  &lt;p&gt;The box is now {{ isOpen ? 'Open' : 'Closed' }}!&lt;/p&gt;\n&lt;/div&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6f36x9whsug5m8xswzbhkn4i1\">在這個例子中，當 <code>isOpen</code> 表示式求值為一個已定義狀態 <code>open</code> 或 <code>closed</code> 時，就會通知 <code>openClose</code> 觸發器說狀態變化了。然後，就由 <code>openClose</code> 中的程式碼來處理狀態變更，並啟動狀態變更動畫。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"61r7ygn6tys61srrgmi9gmlx3\">對於那些進入或離開頁面的元素（插入到 DOM 中或從中移除），你可以讓動畫變成有條件的。比如，在 HTML 範本中可以和 <code>*<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code> 一起使用動畫觸發器。</p>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dda4erkaz6zm4ek4ho0blrp5i\"><strong>注意</strong>：<br>\n在元件檔案中，要把用來定義動畫的觸發器設定為 <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>()</code> 裝飾器的 <code>animations:</code> 屬性的值。</p>\n<h2 id=\"attach-an-animation-to-an-html-template\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6mu3j9ct0nu1qf6kynzr9l23g\">將動畫附加到 HTML 範本<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/animations-attach-to-html-template#attach-an-animation-to-an-html-template\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cno4aia9g8d97ppcqbelyartb\">在 HTML 範本檔案中，使用這個觸發器的名稱來把所定義的這些動畫附加到想要新增動畫的 HTML 元素上。</p>\n</div>\n\n  <div class=\"reviewed\">最後複查時間：Fri Oct 28 2022</div>\n</div>\n\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - api/animations/animate\n - api/animations/style\n - api/animations/transition\n - api/animations/trigger\n - api/common/NgIf\n - api/core/Component\n - guide/animations-attach-to-html-template#attach-an-animation-to-an-html-template\n - guide/animations-attach-to-html-template#define-animations-and-attach-to-an-html-template\n - guide/animations-attach-to-html-template#define-the-animation\n-->"}