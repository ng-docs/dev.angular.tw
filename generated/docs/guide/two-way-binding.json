{"id":"guide/two-way-binding","title":"双向绑定","contents":"<div class=\"content\">\n  <h1 id=\"two-way-binding\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4xy6wmoza9k1s7w2doa894ml4\">双向绑定<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/two-way-binding#two-way-binding\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9g06dg2gj9wereejs8mkw87ym\">双向绑定为应用中的组件提供了一种共享数据的方式。使用双向绑定绑定来侦听事件并在父组件和子组件之间同步更新值。</p>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"81el5yk7yllx1tewd03bnp7o0\">本章包含代码片段的工作实例参阅<live-example></live-example>。</p>\n</div>\n<h2 id=\"prerequisites\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e44b21uig1fakj5vcfuvz1bdu\">前提条件<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/two-way-binding#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"33l66qy4h4zsq35xy7yksmoq9\">为了充分利用双向绑定，你应该对以下概念有基本的了解：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"mfyxx87fibqbnu58gbuv5vkk\"><a href=\"guide/property-binding\">属性绑定</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6tdxpqx0gzw605pst3e974rgi\"><a href=\"guide/event-binding\">事件绑定</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8xwvk9gjs0500yzvzsybwxoav\"><a href=\"guide/inputs-outputs\">输入和输出</a></li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6j6p3p8tyvteh0w3b63ygpf9d\">双向绑定将属性绑定与事件绑定结合在一起：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7jkz5u13vo6be1cpi42eb3su9\">绑定</th>\n<th align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3prlgfrx5eo2xqncnnob4crxu\">详情</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"mfyxx87fibqbnu58gbuv5vkk\"><a href=\"guide/property-binding\">属性绑定</a></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8v7kwbdbhvsxuwi1wdw7xu1cg\">设置特定元素属性。</td>\n</tr>\n<tr>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6tdxpqx0gzw605pst3e974rgi\"><a href=\"guide/event-binding\">事件绑定</a></td>\n<td align=\"left\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d7loxtc8s90a5nlo3efuj09ug\">监听元素更改事件。</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"adding-two-way-data-binding\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6u9e81pwlktkxfsku6v1pacfw\">添加双向数据绑定<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/two-way-binding#adding-two-way-data-binding\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9d8f54219x0hduqj8tzi7vidz\">Angular 的双向绑定语法是方括号和圆括号的组合 <code>[()]</code>。<code>[]</code> 进行属性绑定，<code>()</code> 进行事件绑定，如下所示。</p>\n<code-example header=\"src/app/app.component.html\" path=\"two-way-binding/src/app/app.component.html\" region=\"two-way-syntax\">\n&lt;app-sizer [(size)]=\"fontSizePx\"&gt;&lt;/app-sizer&gt;\n\n</code-example>\n<h2 id=\"how-two-way-binding-works\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ezl2stpm63u8kwjvz6yewrlmg\">双向绑定工作原理<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/two-way-binding#how-two-way-binding-works\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"t3xe7l4b8konr7lsk4z7y1yn\">为了使双向数据绑定有效，<code>@<a href=\"api/core/Output\" class=\"code-anchor\">Output</a>()</code> 属性的名字必须遵循 <code>inputChange</code> 模式，其中 <code>input</code> 是相应 <code>@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</code> 属性的名字。比如，如果 <code>@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</code> 属性为 <code>size</code>，则 <code>@<a href=\"api/core/Output\" class=\"code-anchor\">Output</a>()</code> 属性必须为 <code>sizeChange</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3pu9pak4fvlrx56oefafkbt41\">后面的 <code>sizerComponent</code> 具有值属性 <code>size</code> 和事件属性 <code>sizeChange</code>。<code>size</code> 属性是 <code>@<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>()</code>，因此数据可以流入 <code>sizerComponent</code>。<code>sizeChange</code> 事件是一个 <code>@<a href=\"api/core/Output\" class=\"code-anchor\">Output</a>()</code>，它允许数据从 <code>sizerComponent</code> 流出到父组件。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1a4w6hzvsxi6l3oc27s0n1y4v\">接下来，有两个方法，<code>dec()</code> 用于减小字体大小，<code>inc()</code> 用于增大字体大小。这两种方法使用 <code>resize()</code> 在最小/最大值的约束内更改 <code>size</code> 属性的值，并发出带有新 <code>size</code> 值的事件。</p>\n<code-example header=\"src/app/sizer.component.ts\" path=\"two-way-binding/src/app/sizer/sizer.component.ts\" region=\"sizer-component\">\nexport class SizerComponent {\n  @<a href=\"api/core/Input\" class=\"code-anchor\">Input</a>() size!: number | string;\n  @<a href=\"api/core/Output\" class=\"code-anchor\">Output</a>() sizeChange = new <a href=\"api/core/EventEmitter\" class=\"code-anchor\">EventEmitter</a>&lt;number&gt;();\n\n  dec() {\n    this.resize(-1);\n  }\n  inc() {\n    this.resize(+1);\n  }\n\n  resize(delta: number) {\n    this.size = Math.min(40, Math.max(8, +this.size + delta));\n    this.sizeChange.emit(this.size);\n  }\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ezo8fd4lrd89v5967wkb011pc\"><code>sizerComponent</code> 模板有两个按钮，分别将 click 事件绑定到 <code>inc()</code> 和 <code>dec()</code> 方法。当用户单击按钮之一时，<code>sizerComponent</code> 调用相应的方法。<code>inc()</code> 和 <code>dec()</code> 这两个方法分别使用 <code>+1</code> 或 <code>-1</code> 调用 <code>resize()</code> 方法，它使用新的 size 值引发 <code>sizeChange</code> 事件。</p>\n<code-example header=\"src/app/sizer.component.html\" path=\"two-way-binding/src/app/sizer/sizer.component.html\">\n&lt;div&gt;\n  &lt;button type=\"button\" (click)=\"dec()\" title=\"smaller\"&gt;-&lt;/button&gt;\n  &lt;button type=\"button\" (click)=\"inc()\" title=\"bigger\"&gt;+&lt;/button&gt;\n  &lt;span [style.font-size.px]=\"size\"&gt;FontSize: {{size}}px&lt;/span&gt;\n&lt;/div&gt;\n\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6ibjqugfpc79jory48zekk3dj\">在 <code>AppComponent</code> 模板中，<code>fontSizePx</code> 被双向绑定到 <code>SizerComponent</code>。</p>\n<code-example header=\"src/app/app.component.html\" path=\"two-way-binding/src/app/app.component.html\" region=\"two-way-1\">\n&lt;app-sizer [(size)]=\"fontSizePx\"&gt;&lt;/app-sizer&gt;\n&lt;div [style.font-size.px]=\"fontSizePx\"&gt;Resizable Text&lt;/div&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8ooxgu3xpkopt8cqnln1a81ck\">在 <code>AppComponent</code> 中，通过将 <code>fontSizePx</code> 的值设置为 <code>16</code> 来设置初始 <code>SizerComponent.size</code> 值。</p>\n<code-example header=\"src/app/app.component.ts\" path=\"two-way-binding/src/app/app.component.ts\" region=\"font-size\">\nfontSizePx = 16;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"87oh3ji9uma5b35mukyhfegjb\">单击这些按钮将更新 <code>AppComponent.fontSizePx</code>。修改后的 <code>AppComponent.fontSizePx</code> 值将更新样式绑定，从而使显示的文本变大或变小。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"digpqq5f7u3nu774pyinfvvu9\">双向绑定语法是属性绑定和事件绑定的组合的简写形式。拆成单独的属性绑定和事件绑定形式的 <code>SizerComponent</code> 代码如下。</p>\n<code-example header=\"src/app/app.component.html (expanded)\" path=\"two-way-binding/src/app/app.component.html\" region=\"two-way-2\">\n&lt;app-sizer [size]=\"fontSizePx\" (sizeChange)=\"fontSizePx=$event\"&gt;&lt;/app-sizer&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"clbhh230zfc35pd3e772s7ffg\"><code>$event</code> 变量包含 <code>SizerComponent.sizeChange</code> 事件的数据。当用户单击按钮时，Angular 将 <code>$event</code> 赋值给 <code>AppComponent.fontSizePx</code>。</p>\n<div class=\"callout is-helpful\">\n<header data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ez9l4pt3my0r7tbygo231zdax\">表单中的双向绑定</header>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"68x7f3v4ajtp0iq254t2t5m53\">因为没有任何原生 HTML 元素遵循了 <code>x</code> 值和 <code>xChange</code> 事件的命名模式，所以与表单元素进行双向绑定需要使用 <code><a href=\"api/forms/NgModel\" class=\"code-anchor\">NgModel</a></code>。关于如何在表单中使用双向绑定的更多信息，请参见 Angular <a href=\"guide/built-in-directives#ngModel\">NgModel</a>。</p>\n</div>\n<h2 id=\"two-way-binding-to-signals\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8hkch4u4ha37ki36uqg9incce\">双向绑定到信号<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/two-way-binding#two-way-binding-to-signals\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c1h3r67elxbzsp3yy2csxe7wg\">Angular支持将普通值和信号绑定到双向绑定中。如果将可写信号传递给双向绑定，Angular将自动保持其与底层输入和输出同步。</p>\n<code-example language=\"typescript\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  template: '&lt;input [(<a href=\"api/forms/NgModel\" class=\"code-anchor\">ngModel</a>)]=\"name\"&gt;',\n  imports: [<a href=\"api/forms/FormsModule\" class=\"code-anchor\">FormsModule</a>]\n})\nexport class MyComp {\n  name = <a href=\"api/core/signal\" class=\"code-anchor\">signal</a>('Bob');\n}\n</code-example>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最后复查时间：Mon Feb 28 2022</div>\n</div>\n\n\n<!-- links to this doc:\n - extended-diagnostics/NG8101\n - guide/built-in-directives\n - guide/event-binding\n - guide/example-apps-list\n - guide/inputs-outputs\n - guide/template-syntax\n-->\n<!-- links from this doc:\n - api/core/Component\n - api/core/EventEmitter\n - api/core/Input\n - api/core/Output\n - api/core/signal\n - api/forms/FormsModule\n - api/forms/NgModel\n - guide/built-in-directives#ngModel\n - guide/event-binding\n - guide/inputs-outputs\n - guide/property-binding\n - guide/two-way-binding#adding-two-way-data-binding\n - guide/two-way-binding#how-two-way-binding-works\n - guide/two-way-binding#prerequisites\n - guide/two-way-binding#two-way-binding\n - guide/two-way-binding#two-way-binding-to-signals\n-->"}