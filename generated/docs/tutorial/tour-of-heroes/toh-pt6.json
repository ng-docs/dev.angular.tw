{"id":"tutorial/tour-of-heroes/toh-pt6","title":"從伺服器端獲取資料","contents":"<div class=\"content\">\n  <h1 id=\"get-data-from-a-server\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"qvwkoeo1pv0cmtzxzpk59tdj\">從伺服器端獲取資料<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#get-data-from-a-server\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a2iwys9l1o71v504l6gsy8pq6\">本教程會將藉助 Angular 的 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 來新增一些資料持久化屬性。</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e9micj5munmqmurjcnpa8pqo5\"><code>HeroService</code> 透過 HTTP 請求獲取英雄資料</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"48v44m65uf33p3cjuyz1z5jg4\">使用者可以新增、編輯和刪除英雄，並透過 HTTP 來儲存這些更改</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9rt99f3qjdqa30h7l9v6j8ixk\">使用者可以根據名字搜尋英雄</li>\n</ul>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d5oeh6bf2o8adlc4yerbj497y\">這裡所說的範例應用，參閱<live-example></live-example>。</p>\n</div>\n<h2 id=\"enable-http-services\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aq206hvalkmjbiiqu48od0vkb\">啟用 HTTP 服務<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#enable-http-services\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bjkyvrbpnk83mq7l71o458kio\">要讓 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 在應用中隨處可用，需要兩個步驟。首先，用匯入語句把它新增到根模組 <code>AppModule</code> 中：</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3l43y4q7uh45ybf9gfch80jmo\">要讓 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 在應用中隨處可用，需要兩個步驟。首先，用匯入語句把它新增到根模組 <code>AppModule</code> 中：</p>\n<code-example header=\"src/app/app.module.ts (HttpClientModule import)\" path=\"toh-pt6/src/app/app.module.ts\" region=\"import-http-client\">\nimport { <a href=\"api/common/http/HttpClientModule\" class=\"code-anchor\">HttpClientModule</a> } from '@angular/common/<a href=\"api/common/http\" class=\"code-anchor\">http</a>';\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7brsd6cqz7e7ll41wa2h3ley8\">接下來，仍然在 <code>AppModule</code> 中，把 <code><a href=\"api/common/http/HttpClientModule\" class=\"code-anchor\">HttpClientModule</a></code> 新增到 <code>imports</code> 陣列中：</p>\n<code-example header=\"src/app/app.module.ts (imports array excerpt)\" path=\"toh-pt6/src/app/app.module.ts\" region=\"import-httpclientmodule\">\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports: [\n    <a href=\"api/common/http/HttpClientModule\" class=\"code-anchor\">HttpClientModule</a>,\n  ],\n})\n\n</code-example>\n<h2 id=\"simulate-a-data-server\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9i7v39yyxazwht3grgx8logn1\">模擬資料伺服器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#simulate-a-data-server\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d2w9hpqo9esdp7xucph95khb8\">透過使用記憶體 Web API，你不用架設伺服器就可以學習 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 了。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d4ohjfyo16si17kzcj2zsktzf\">安裝完這個模組之後，應用將會透過 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 來發起請求和接收回應。本應用不在乎實際上是這個記憶體 Web API 在攔截這些請求、操作一個記憶體資料庫，並且給出模擬的回應。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1ehti9acu6ynup8j8t09epc15\">透過使用記憶體 Web API，你不用架設伺服器就可以學習 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 了。</p>\n<div class=\"alert is-important\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1328e50myq6990x3m2vyjbbf0\">如果你只是在<em>閱讀</em>本教程來學習 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code>，那麼可以<a href=\"tutorial/toh-pt6#import-heroes\">跳過</a>這一步。\n如果你正在隨著本教程<em>敲程式碼</em>，那就留下來，並加上這個<em>記憶體 Web API</em>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2hafyop02edmhdo6rj7fvm6ai\">如果你只是在<em>閱讀</em>本教程來學習 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code>，那麼可以<a href=\"tutorial/tour-of-heroes/toh-pt6#import-heroes\">跳過</a>這一步。\n如果你正在隨著本教程<em>敲程式碼</em>，那就留下來，並加上這個<em>記憶體 Web API</em>。</p>\n</div>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"al667jvgnuoew941u1iywpuzj\">用如下指令從 <code>npm</code> 中安裝這個<em>記憶體 Web API</em> 套件（譯註：請使用 0.5+ 的版本，不要使用 0.4-）</p>\n<code-example format=\"shell\" language=\"shell\">\n\nnpm install angular-in-memory-web-api --save\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3fnorar6upa9y5zipfe4ox7q5\">使用以下指令生成類 <code>src/app/in-memory-data.service.ts</code>：</p>\n<code-example format=\"shell\" language=\"shell\">\n\nng generate service InMemoryData\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5mxe6xj5waois3g0ib42635fk\">將 <code>in-memory-data.service.ts</code> 改為以下內容：</p>\n<code-example header=\"src/app/in-memory-data.service.ts\" path=\"toh-pt6/src/app/in-memory-data.service.ts\" region=\"init\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> } from '@angular/core';\nimport { InMemoryDbService } from 'angular-in-memory-web-api';\nimport { Hero } from './hero';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>({\n  providedIn: 'root',\n})\nexport class InMemoryDataService implements InMemoryDbService {\n  createDb() {\n    const heroes = [\n      { id: 12, name: 'Dr. Nice' },\n      { id: 13, name: 'Bombasto' },\n      { id: 14, name: 'Celeritas' },\n      { id: 15, name: 'Magneta' },\n      { id: 16, name: 'RubberMan' },\n      { id: 17, name: 'Dynama' },\n      { id: 18, name: 'Dr. IQ' },\n      { id: 19, name: 'Magma' },\n      { id: 20, name: 'Tornado' }\n    ];\n    return {heroes};\n  }\n\n  // Overrides the genId method to ensure that a hero always has an id.\n  // If the heroes array is empty,\n  // the method below returns the initial number (11).\n  // if the heroes array is not empty, the method below returns the highest\n  // hero id + 1.\n  genId(heroes: Hero[]): number {\n    return heroes.length &gt; 0 ? Math.max(...heroes.map(hero =&gt; hero.id)) + 1 : 11;\n  }\n}\n\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5yo236ye04g1kvslqj7ctfcek\">在 <code>AppModule</code> 中，匯入 <code>HttpClientInMemoryWebApiModule</code> 和 <code>InMemoryDataService</code> 類，稍後你將建立它們。</p>\n<code-example header=\"src/app/app.module.ts (In-memory Web API imports)\" path=\"toh-pt6/src/app/app.module.ts\" region=\"import-in-mem-stuff\">\nimport { HttpClientInMemoryWebApiModule } from 'angular-in-memory-web-api';\nimport { InMemoryDataService } from './in-memory-data.service';\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1mybakug0itg4bh8hhkxfl1cc\">在 <code><a href=\"api/common/http/HttpClientModule\" class=\"code-anchor\">HttpClientModule</a></code> 之後，將 <code>HttpClientInMemoryWebApiModule</code> 新增到 <code>AppModule</code> 的 <code>imports</code> 陣列中，並以 <code>InMemoryDataService</code> 為引數對其進行設定。</p>\n<code-example header=\"src/app/app.module.ts (imports array excerpt)\" path=\"toh-pt6/src/app/app.module.ts\" region=\"in-mem-web-api-imports\">\n<a href=\"api/common/http/HttpClientModule\" class=\"code-anchor\">HttpClientModule</a>,\n\n// The HttpClientInMemoryWebApiModule module intercepts HTTP requests\n// and returns simulated server responses.\n// Remove it when a real server is ready to receive requests.\nHttpClientInMemoryWebApiModule.forRoot(\n  InMemoryDataService, { dataEncapsulation: false }\n)\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dze1xcr8zmsv0uuciwraoanwm\">使用以下指令生成類 <code>src/app/in-memory-data.service.ts</code>：</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dsa8zm06ydm15h1gg80snjote\">等伺服器就緒後，就可以拋棄這個記憶體 Web API，以便應用的請求能直接傳到伺服器。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"18wpdprcpfu05tkzecaxuxb77\">等伺服器就緒後，就可以拋棄這個記憶體 Web API，以便應用的請求能直接傳到伺服器。</p>\n<p><a id=\"import-heroes\"></a></p>\n<h2 id=\"heroes-and-http\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bmqhvnycl6mtof7axw2m2o0zy\">英雄與 HTTP<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#heroes-and-http\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"32no1657hfvxoayqh46fay3js\">在 <code>HeroService</code> 中，匯入 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 和 <code><a href=\"api/common/http/HttpHeaders\" class=\"code-anchor\">HttpHeaders</a></code>：</p>\n<code-example header=\"src/app/hero.service.ts (import HTTP symbols)\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"import-httpclient\">\nimport { <a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a>, <a href=\"api/common/http/HttpHeaders\" class=\"code-anchor\">HttpHeaders</a> } from '@angular/common/<a href=\"api/common/http\" class=\"code-anchor\">http</a>';\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"657d7f9cu0fpj7jm05lxfq09b\">仍然在 <code>HeroService</code> 中，把 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 注入到建構式函式中一個名叫 <code><a href=\"api/common/http\" class=\"code-anchor\">http</a></code> 的私有屬性中。</p>\n<code-example path=\"toh-pt6/src/app/hero.service.ts\" header=\"src/app/hero.service.ts\" region=\"ctor\">\nconstructor(\n  private <a href=\"api/common/http\" class=\"code-anchor\">http</a>: <a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a>,\n  private messageService: MessageService) { }\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6cg7gbap2ks4yl6bybg0un8gh\">注意保留對 <code>MessageService</code> 的注入，但是因為你將頻繁呼叫它，因此請把它包裹進一個私有的 <code>log</code> 方法中。</p>\n<code-example path=\"toh-pt6/src/app/hero.service.ts\" header=\"src/app/hero.service.ts\" region=\"log\">\n/** Log a HeroService message with the MessageService */\nprivate log(message: string) {\n  this.messageService.add(`HeroService: ${message}`);\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5g60di9vllykkm05xkraj8ihf\">把伺服器上英雄資料資源的訪問地址 <code>heroesURL</code> 定義為 <code>:base/:collectionName</code> 的形式。這裡的 <code>base</code> 是要請求的資源，而 <code>collectionName</code> 是 <code>in-memory-data-service.ts</code> 中的英雄資料物件。</p>\n<code-example path=\"toh-pt6/src/app/hero.service.ts\" header=\"src/app/hero.service.ts\" region=\"heroesUrl\">\nprivate heroesUrl = 'api/heroes';  // URL to web api\n\n</code-example>\n<h3 id=\"get-heroes-with-httpclient\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"86p7ihyrbicltlwbzowapqnnr\">透過 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 獲取英雄<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#get-heroes-with-httpclient\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a823qnkjxqwqgklanxc6r6bwm\">當前的 <code>HeroService.getHeroes()</code> 使用 RxJS 的 <code>of()</code> 函式來把模擬英雄資料回傳為 <code>Observable&lt;Hero[]&gt;</code> 格式。</p>\n<code-example header=\"src/app/hero.service.ts (getHeroes with RxJs 'of()')\" path=\"toh-pt4/src/app/hero.service.ts\" region=\"getHeroes-1\">\ngetHeroes(): Observable&lt;Hero[]&gt; {\n  const heroes = of(HEROES);\n  return heroes;\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"180pmxencu7450ewbc4drkf6k\">把該方法轉換成使用 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 的，程式碼如下：</p>\n<code-example header=\"src/app/hero.service.ts\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"getHeroes-1\">\n/** GET heroes from the server */\ngetHeroes(): Observable&lt;Hero[]&gt; {\n  return this.http.get&lt;Hero[]&gt;(this.heroesUrl)\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"emonqsc71ygc95pq2smck2kok\">你用 <code>http.get()</code> 替換了 <code>of()</code>，沒有做其它修改，但是應用仍然在正常工作，這是因為這兩個函式都回傳了 <code>Observable&lt;Hero[]&gt;</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dsdf7y57o46b99t6c0vedq40t\">你用 <code>http.get()</code> 替換了 <code>of()</code>，沒有做其它修改，但是應用仍然在正常工作，這是因為這兩個函式都回傳了 <code>Observable&lt;Hero[]&gt;</code>。</p>\n<h3 id=\"httpclient-methods-return-one-value\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1vngwatza9tnsryciyo043sk6\"><code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 的方法回傳單個值<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#httpclient-methods-return-one-value\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"98pgsq1ptq8vt8ezj72hp18i0\">具體到這次 <code><a href=\"api/common/http/HttpClient#get\" class=\"code-anchor\">HttpClient.get()</a></code> 呼叫，它回傳一個 <code>Observable&lt;Hero[]&gt;</code>，也就是『一個英雄陣列的可觀察物件』。在實踐中，它也只會回傳一個英雄陣列。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"27ajmog86gze4kij5b2do6dxv\">HTTP 是一個請求/回應式協定。你發起請求，它回傳單個的回應。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"763nvaioqejvjb02cczlcar4b\">通常，<code>Observable</code> <em>可以</em>在一段時間內回傳多個值。但來自 <code><a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a></code> 的 <code>Observable</code> 總是發出一個值，然後結束，再也不會發出其它值。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a6gmigpi9loyi4ayd3h3dvqj6\">具體到這次 <code><a href=\"api/common/http/HttpClient#get\" class=\"code-anchor\">HttpClient.get()</a></code> 呼叫，它回傳一個 <code>Observable&lt;Hero[]&gt;</code>，也就是『一個英雄陣列的可觀察物件』。在實踐中，它也只會回傳一個英雄陣列。</p>\n<h3 id=\"httpclientget-returns-response-data\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dm8u3wi2df5o2nrwywft3hsiq\"><code><a href=\"api/common/http/HttpClient#get\" class=\"code-anchor\">HttpClient.get()</a></code> 回傳回應資料<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#httpclientget-returns-response-data\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9ki9375ckok54s8eukbeb2sz\">伺服器的資料 API 決定了 JSON 資料的具體形態。<em>英雄之旅</em>的資料 API 會把英雄資料作為一個陣列進行回傳。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"36p3s25tkvctc9a8z75acofau\">伺服器的資料 API 決定了 JSON 資料的具體形態。<em>英雄之旅</em>的資料 API 會把英雄資料作為一個陣列進行回傳。</p>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c1uud9524bbmz0ec1fxytzihn\">雖然不打算在此展開討論，不過你可以到範例原始碼中的 <code>getHeroNo404()</code> 方法中找到一個使用 <code>map()</code> 運算子的例子。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"99mfhuc5y4tio06zbkssgpmr8\">雖然不打算在此展開討論，不過你可以到範例原始碼中的 <code>getHeroNo404()</code> 方法中找到一個使用 <code>map()</code> 運算子的例子。</p>\n</div>\n<h3 id=\"error-handling\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ad0cx4y7txhii62pgdd0mpma9\">錯誤處理<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#error-handling\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"70vjuxz1mo06ihd0lhkx1fl3s\">從 <code>rxjs/operators</code> 中匯入 <code>catchError</code> 符號，以及你稍後將會用到的其它運算子。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8bqhrytxny7poluded321w6u2\">要捕獲錯誤，你就要使用 RxJS 的 <code>catchError()</code> 運算子來<strong>建立對 Observable 結果的處理通道（pipe）</strong>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c2hikcsee8jme19cwoh7z69ox\">從 <code>rxjs/operators</code> 中匯入 <code>catchError</code> 符號，以及你稍後將會用到的其它運算子。</p>\n<code-example header=\"src/app/hero.service.ts\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"import-rxjs-operators\">\nimport { catchError, map, tap } from 'rxjs/operators';\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"buhpnywf7rx08odjv2rzzmwbh\">現在，使用 <code>pipe()</code> 方法來擴充套件 <code>Observable</code> 的結果，並給它一個 <code>catchError()</code> 運算子。</p>\n<code-example header=\"src/app/hero.service.ts\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"getHeroes-2\">\ngetHeroes(): Observable&lt;Hero[]&gt; {\n  return this.http.get&lt;Hero[]&gt;(this.heroesUrl)\n    .pipe(\n      catchError(this.handleError&lt;Hero[]&gt;('getHeroes', []))\n    );\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7kttq730rn13rm4hvzmsfx06r\">下面的 <code>handleError()</code> 方法會報告這個錯誤，並回傳一個無害的結果（安全值），以便應用能正常工作。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"eoigiyhanmb30ka2wknzdtc\">下面的 <code>handleError()</code> 方法會報告這個錯誤，並回傳一個無害的結果（安全值），以便應用能正常工作。</p>\n<h4 id=\"handleerror\"><code>handleError</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#handleerror\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8h7zot8gioltcbw9de1xlzmq6\">它不再直接處理這些錯誤，而是回傳給 <code>catchError</code> 回傳一個錯誤處理函式。還要用操作名和出錯時要回傳的安全值來對這個錯誤處理函式進行設定。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d0rlcdpn7slxb61u2foiqhgfl\">它不再直接處理這些錯誤，而是回傳給 <code>catchError</code> 回傳一個錯誤處理函式。還要用操作名和出錯時要回傳的安全值來對這個錯誤處理函式進行設定。</p>\n<code-example header=\"src/app/hero.service.ts\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"handleError\">\n/**\n * Handle Http operation that failed.\n * Let the app continue.\n *\n * @param operation - name of the operation that failed\n * @param result - optional value to return as the observable result\n */\nprivate handleError&lt;T&gt;(operation = 'operation', result?: T) {\n  return (error: any): Observable&lt;T&gt; =&gt; {\n\n    // TODO: send the error to remote logging infrastructure\n    console.error(error); // log to console instead\n\n    // TODO: better job of transforming error for user consumption\n    this.log(`${operation} failed: ${error.message}`);\n\n    // Let the app keep running by returning an empty result.\n    return of(result as T);\n  };\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6wncto0b8a6yh2st3wk4yyo7j\">因為每個服務方法都會回傳不同型別的 <code>Observable</code> 結果，因此 <code>handleError()</code> 也需要一個型別引數，以便它回傳一個此類型的安全值，正如應用所期望的那樣。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b43fbbfeao7d09ma1x36oaxj8\">因為每個服務方法都會回傳不同型別的 <code>Observable</code> 結果，因此 <code>handleError()</code> 也需要一個型別引數，以便它回傳一個此類型的安全值，正如應用所期望的那樣。</p>\n<h3 id=\"tap-into-the-observable\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"awg3kf9mw3rvbrr7baj71sfht\">窺探 <code>Observable</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#tap-into-the-observable\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"wgojbny6iu7ao97p1tyatpw\"><code>getHeroes()</code>方法利用可觀察值流，並使用\n<code>log()</code>方法向頁面底部的訊息區域傳送訊息。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3djpe96ot4yo3oc2xpvo29qw8\">RxJS 的 <code>tap()</code> 運算子可以透過檢視 Observable 中的值來實現此功能，可以用那些值做一些事情，並且把它們傳出來。這種 <code>tap()</code> 回呼不會改變這些值本身。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"u46wljyr5sqejuxds9pbk4al\">下面是 <code>getHeroes()</code> 的最終版本，它使用 <code>tap()</code> 來記錄各種操作。</p>\n<code-example path=\"toh-pt6/src/app/hero.service.ts\" header=\"src/app/hero.service.ts\" region=\"getHeroes\">\n/** GET heroes from the server */\ngetHeroes(): Observable&lt;Hero[]&gt; {\n  return this.http.get&lt;Hero[]&gt;(this.heroesUrl)\n    .pipe(\n      tap(_ =&gt; this.log('fetched heroes')),\n      catchError(this.handleError&lt;Hero[]&gt;('getHeroes', []))\n    );\n}\n\n</code-example>\n<h3 id=\"get-hero-by-id\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bnr6f1pgdyjy7z99825gsxato\">透過 id 獲取英雄<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#get-hero-by-id\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b6brfc05jj80zmro8cgf1pd6e\">把 <code>HeroService.getHero()</code> 方法改成這樣，以發起該請求：</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9xxjhe0k5mkhq0uosafl6vyqu\">這裡的 <code>baseURL</code> 就是在 <a href=\"tutorial/tour-of-heroes/toh-pt6#heroes-and-http\">英雄清單與 HTTP</a> 部分定義過的 <code>heroesURL</code>（在 <code>api/heroes</code> 中）。而 <code>id</code> 則是你要獲取的英雄的編號，比如，<code>api/heroes/11</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f15q10yoe0h0od35gqv1ms1q7\">把 <code>HeroService.getHero()</code> 方法改成這樣，以發起該請求：</p>\n<code-example header=\"src/app/hero.service.ts\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"getHero\">\n/** GET hero by id. Will 404 if id not found */\ngetHero(id: number): Observable&lt;Hero&gt; {\n  const url = `${this.heroesUrl}/${id}`;\n  return this.http.get&lt;Hero&gt;(url).pipe(\n    tap(_ =&gt; this.log(`fetched hero id=${id}`)),\n    catchError(this.handleError&lt;Hero&gt;(`getHero id=${id}`))\n  );\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ep1oq7e5e2l7qtppfzkmfd9pq\">這裡和 <code>getHeroes()</code> 相比有三個顯著的差異:</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"111noiybeszn2mp7dqf0gpkb4\"><code>getHero()</code> 使用想獲取的英雄的 id 構造了一個請求 URL</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"17sly1ljyb73umkw36fotcyy8\">伺服器應該使用單個英雄作為回應，而不是一個英雄陣列</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5pjtkcv7qu6u0rbkh3xa3xogr\">所以，<code>getHero()</code> 會回傳 <code>Observable&lt;Hero&gt;</code>，它是一個 <code>Hero</code> 物件型別的 Observable，而不是一個 <code>Hero</code> <em>陣列</em>型別的 Observable。</li>\n</ul>\n<h2 id=\"update-heroes\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"80tll81yanh36dqqi5wusecu1\">修改英雄<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#update-heroes\"><i class=\"material-icons\">link</i></a></h2>\n<!-- markdownlint-disable MD001 -->\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"49r1czpftfh9ms72jivenoke1\">在英雄詳情樣板的底部新增一個儲存按鈕，它繫結了一個 <code>click</code> 事件，事件繫結會呼叫元件中一個名叫 <code>save()</code> 的新方法。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d78nfd91eba8sjlvfbh4l3i5t\">如果你希望保留這些修改，就要把它們寫回到伺服器。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c47107g3rxhg86p481xt644v9\">在英雄詳情樣板的底部新增一個儲存按鈕，它繫結了一個 <code>click</code> 事件，事件繫結會呼叫元件中一個名叫 <code>save()</code> 的新方法。</p>\n<code-example header=\"src/app/hero-detail/hero-detail.component.html (save)\" path=\"toh-pt6/src/app/hero-detail/hero-detail.component.html\" region=\"save\">\n&lt;button type=\"button\" (click)=\"save()\"&gt;save&lt;/button&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2fn8o2wb4r7mlnoy9mzbxbewi\">在 <code>HeroDetail</code> 元件類別中，新增如下的 <code>save()</code> 方法，它使用英雄服務中的 <code>updateHero()</code> 方法來儲存對英雄名字的修改，然後導向回前一個檢視。</p>\n<code-example header=\"src/app/hero-detail/hero-detail.component.ts (save)\" path=\"toh-pt6/src/app/hero-detail/hero-detail.component.ts\" region=\"save\">\nsave(): void {\n  if (this.hero) {\n    this.heroService.updateHero(this.hero)\n      .subscribe(() =&gt; this.goBack());\n  }\n}\n\n</code-example>\n<h4 id=\"add-heroserviceupdatehero\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7wkyhr8xg5t6o7v6e0d4be0m1\">新增 <code>HeroService.updateHero()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#add-heroserviceupdatehero\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"880gfc715l7fwrqu0l1xbd8j7\"><code>updateHero()</code> 的總體結構和 <code>getHeroes()</code> 很相似，但它會使用 <code>http.put()</code> 來把修改後的英雄儲存到伺服器上。把下列程式碼新增進 <code>HeroService</code>。</p>\n<code-example header=\"src/app/hero.service.ts (update)\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"updateHero\">\n/** PUT: update the hero on the server */\nupdateHero(hero: Hero): Observable&lt;any&gt; {\n  return this.http.put(this.heroesUrl, hero, this.httpOptions).pipe(\n    tap(_ =&gt; this.log(`updated hero id=${hero.id}`)),\n    catchError(this.handleError&lt;any&gt;('updateHero'))\n  );\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8hhviylad1lfrkd1zy36f9qmu\"><code><a href=\"api/common/http/HttpClient#put\" class=\"code-anchor\">HttpClient.put()</a></code> 方法接受三個引數：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2dwejd2ahbe5ihtd0jxj3vd\">URL 地址</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3w0mjvhui54zo8r47bdjfa3ma\">要修改的資料，這裡就是修改後的英雄</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cyk2rtnidu0xcswyg7218m57s\">選項</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4ubbbnm4519lripuvphpfedv8\">英雄 Web API 期待在儲存時的請求中有一個特殊的頭。這個頭是在 <code>HeroService</code> 的 <code>httpOptions</code> 常數中定義的。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3ni4e1i4hluszx1zapjxel8xs\">英雄 Web API 期待在儲存時的請求中有一個特殊的頭。這個頭是在 <code>HeroService</code> 的 <code>httpOptions</code> 常數中定義的。</p>\n<code-example header=\"src/app/hero.service.ts\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"http-options\">\nhttpOptions = {\n  headers: new <a href=\"api/common/http/HttpHeaders\" class=\"code-anchor\">HttpHeaders</a>({ 'Content-Type': 'application/json' })\n};\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f39k60hxl1e2lcostu7clv3rs\">重新整理瀏覽器，修改英雄名，儲存這些修改。在 <code>HeroDetailComponent</code> 的 <code>save()</code> 方法中導向到前一個檢視。現在，改名後的英雄已經顯示在清單中了。</p>\n<h2 id=\"add-a-new-hero\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8arpbx6ig96s6l5n6p1iw2fr4\">新增一個新英雄<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#add-a-new-hero\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aicbtlkkfqkm5eetjlmz7whb5\">把下列程式碼插入到 <code>HeroesComponent</code> 樣板中標題的緊後面：</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7mlcwhy4e0hvu3om90pyzshrj\">把下列程式碼插入到 <code>HeroesComponent</code> 樣板中標題的緊後面：</p>\n<code-example header=\"src/app/heroes/heroes.component.html (add)\" path=\"toh-pt6/src/app/heroes/heroes.component.html\" region=\"add\">\n&lt;div&gt;\n  &lt;label for=\"new-hero\"&gt;Hero name: &lt;/label&gt;\n  &lt;input id=\"new-hero\" #heroName /&gt;\n\n  &lt;!-- (click) passes input value to add() and then clears the input --&gt;\n  &lt;button type=\"button\" class=\"add-button\" (click)=\"add(heroName.value); heroName.value=''\"&gt;\n    Add hero\n  &lt;/button&gt;\n&lt;/div&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dtuhpqvynwdeq8u72y1npks3b\">當點選事件觸發時，呼叫元件的點選處理器（<code>add()</code>），然後清空這個輸入框，以便用來輸入另一個名字。把下列程式碼新增到 <code>HeroesComponent</code> 類：</p>\n<code-example header=\"src/app/heroes/heroes.component.ts (add)\" path=\"toh-pt6/src/app/heroes/heroes.component.ts\" region=\"add\">\nadd(name: string): void {\n  name = name.trim();\n  if (!name) { return; }\n  this.heroService.addHero({ name } as Hero)\n    .subscribe(hero =&gt; {\n      this.heroes.push(hero);\n    });\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dob1wdnmxtane4xogpifbidma\">往 <code>HeroService</code> 類別中新增 <code>addHero()</code> 方法。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4afgzqojwyyvzvrnubdjnkndp\"><code>addHero()</code>建立一個新物件時，\n<code>subscribe()</code>回呼接收新英雄並將其推入\n<code>heroes</code>清單以供顯示。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"28et5rhp5sn0mauieom760dzv\">往 <code>HeroService</code> 類別中新增 <code>addHero()</code> 方法。</p>\n<code-example header=\"src/app/hero.service.ts (addHero)\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"addHero\">\n/** POST: add a new hero to the server */\naddHero(hero: Hero): Observable&lt;Hero&gt; {\n  return this.http.post&lt;Hero&gt;(this.heroesUrl, hero, this.httpOptions).pipe(\n    tap((newHero: Hero) =&gt; this.log(`added hero w/ id=${newHero.id}`)),\n    catchError(this.handleError&lt;Hero&gt;('addHero'))\n  );\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4ls6eoh71fe3h96icnhnam68q\"><code>addHero()</code> 和 <code>updateHero()</code> 有兩點不同。</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a4olmxmk3qpxbx1vpz8aaj9e8\">它呼叫 <code><a href=\"api/common/http/HttpClient#post\" class=\"code-anchor\">HttpClient.post()</a></code> 而不是 <code>put()</code>。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1o0hqit4urtxabhg12mwmw78e\">它期待伺服器為這個新的英雄生成一個 id，然後把它透過 <code>Observable&lt;Hero&gt;</code> 回傳給呼叫者。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9aglwqcmsunfqu9wl8rdo7rho\">重新整理瀏覽器，並新增一些英雄。</p>\n<h2 id=\"delete-a-hero\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aeuv8p9ba7q4c65b8tyy9gjn4\">刪除某個英雄<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#delete-a-hero\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"11aoizynq85b3uwb8bqrtjdi0\">把下列按鈕（<code>button</code>）元素新增到 <code>HeroesComponent</code> 的樣板中，就在每個 <code>&lt;li&gt;</code> 元素中的英雄名字後方。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"22x5ev39gcknlkj01o626wrab\">把下列按鈕（<code>button</code>）元素新增到 <code>HeroesComponent</code> 的樣板中，就在每個 <code>&lt;li&gt;</code> 元素中的英雄名字後方。</p>\n<code-example header=\"src/app/heroes/heroes.component.html\" path=\"toh-pt6/src/app/heroes/heroes.component.html\" region=\"delete\">\n&lt;button type=\"button\" class=\"delete\" title=\"delete hero\"\n  (click)=\"delete(hero)\"&gt;x&lt;/button&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dlpvi9zlcskc99kymxbyqc2jx\">英雄清單的 HTML 應該是這樣的：</p>\n<code-example header=\"src/app/heroes/heroes.component.html (list of heroes)\" path=\"toh-pt6/src/app/heroes/heroes.component.html\" region=\"list\">\n&lt;ul class=\"heroes\"&gt;\n  &lt;li *<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a>=\"let hero of heroes\"&gt;\n    &lt;a <a href=\"api/router/RouterLink\" class=\"code-anchor\">routerLink</a>=\"/detail/{{hero.id}}\"&gt;\n      &lt;span class=\"badge\"&gt;{{hero.id}}&lt;/span&gt; {{hero.name}}\n    &lt;/a&gt;\n    &lt;button type=\"button\" class=\"delete\" title=\"delete hero\"\n      (click)=\"delete(hero)\"&gt;x&lt;/button&gt;\n  &lt;/li&gt;\n&lt;/ul&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"af7cl4xdqqk20h4z1nfse3zcq\">要把刪除按鈕定位在每個英雄條目的最右邊，就要從<a href=\"tutorial/tour-of-heroes/toh-pt6#heroescomponent\">最終程式碼</a> 中往 <code>heroes.component.css</code> 中新增一些 CSS。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4fp7bh5eay5d13flzn8h9c2zz\">把 <code>delete()</code> 處理器新增到元件中。</p>\n<code-example header=\"src/app/heroes/heroes.component.ts (delete)\" path=\"toh-pt6/src/app/heroes/heroes.component.ts\" region=\"delete\">\ndelete(hero: Hero): void {\n  this.heroes = this.heroes.filter(h =&gt; h !== hero);\n  this.heroService.deleteHero(hero.id).subscribe();\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5e8m32imtdt5z36bcnkwa2nio\">接下來，把 <code>deleteHero()</code> 方法新增到 <code>HeroService</code> 中，程式碼如下。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9l6pmrkzirqxgphv646qvxl0a\">元件與 <code>heroService.deleteHero()</code> 回傳的 <code>Observable</code> 還完全沒有關聯。<strong>必須訂閱它</strong>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7nuzn4xjkt7gq6n10c4gffal2\">接下來，把 <code>deleteHero()</code> 方法新增到 <code>HeroService</code> 中，程式碼如下。</p>\n<code-example header=\"src/app/hero.service.ts (delete)\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"deleteHero\">\n/** DELETE: delete the hero from the server */\ndeleteHero(id: number): Observable&lt;Hero&gt; {\n  const url = `${this.heroesUrl}/${id}`;\n\n  return this.http.delete&lt;Hero&gt;(url, this.httpOptions).pipe(\n    tap(_ =&gt; this.log(`deleted hero id=${id}`)),\n    catchError(this.handleError&lt;Hero&gt;('deleteHero'))\n  );\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"97oitraerje2bsihu8b94f4e\">注意以下關鍵點：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9olutpetm07dsouogpi9visli\"><code>deleteHero()</code> 呼叫了 <code><a href=\"api/common/http/HttpClient#delete\" class=\"code-anchor\">HttpClient.delete()</a></code></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9v3usqbur6c92uvml89tq7wwq\">URL 就是英雄的資源 URL 加上要刪除的英雄的 <code>id</code></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"anlh6v7szeyryfi39zve4j2tb\">你不用像 <code>put()</code> 和 <code>post()</code> 中那樣傳送任何資料</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"anghmug5jxe3xqktqlzkrlkfc\">你仍要傳送 <code>httpOptions</code></li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2lu9m63hn0h870piddsj5naxv\">重新整理瀏覽器並嘗試新的刪除屬性。</p>\n<div class=\"alert is-important\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"s9v82uq765b5enceptmmzyy\">你可以透過暫時移除 <code>subscribe()</code> 來確認這一點，點選 <strong>Dashboard</strong>，然後點選 <strong>Heroes</strong>。這裡應該始終展示著英雄清單。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"akxwc0o0hpitcvt0c75k5h2yc\">你可以透過暫時移除 <code>subscribe()</code> 來確認這一點，點選 <strong>Dashboard</strong>，然後點選 <strong>Heroes</strong>。這裡應該始終展示著英雄清單。</p>\n</div>\n<h2 id=\"search-by-name\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9jxapfozmpysbtuoqbmbq2zby\">根據名字搜尋<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#search-by-name\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"83u968f8zxgv8a8fis6yk6cmn\">在最後一次練習中，你要學到把 <code>Observable</code> 的運算子串在一起，讓你能將相似 HTTP 請求的數量最小化，並節省網路頻寬。</p>\n<h3 id=\"add-a-heroes-search-feature-to-the-dashboard\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cqn30arn8ppyoobqsgtiq30js\">往<em>儀表盤</em>中加入<em>英雄搜尋</em>屬性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#add-a-heroes-search-feature-to-the-dashboard\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"45ppa5pjbp38gaaz7yfgup9wl\">當用戶在搜尋框中輸入名字時，你的應用就會不斷傳送根據名字過濾英雄的 HTTP 請求。你的目標是僅僅發出儘可能少的必要請求。</p>\n<h4 id=\"heroservicesearchheroes\"><code>HeroService.searchHeroes()</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#heroservicesearchheroes\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2d8uy1mrs13b6dspk637mi5jb\">先把 <code>searchHeroes()</code> 方法新增到 <code>HeroService</code> 中。</p>\n<code-example header=\"src/app/hero.service.ts\" path=\"toh-pt6/src/app/hero.service.ts\" region=\"searchHeroes\">\n/* GET heroes whose name contains search term */\nsearchHeroes(term: string): Observable&lt;Hero[]&gt; {\n  if (!term.trim()) {\n    // if not search term, return empty hero array.\n    return of([]);\n  }\n  return this.http.get&lt;Hero[]&gt;(`${this.heroesUrl}/?name=${term}`).pipe(\n    tap(x =&gt; x.length ?\n       this.log(`found heroes matching \"${term}\"`) :\n       this.log(`no heroes matching \"${term}\"`)),\n    catchError(this.handleError&lt;Hero[]&gt;('searchHeroes', []))\n  );\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a6j2gryprmmwi3l1zucqv7bva\">如果沒有搜尋詞，該方法立即回傳一個空陣列。剩下的部分和 <code>getHeroes()</code> 很像。唯一的不同點是 URL，它包含了一個由搜尋詞組成的查詢字串。</p>\n<h3 id=\"add-search-to-the-dashboard\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"65ebyolr3o64wvhoc7374gda9\">為儀表盤新增搜尋功能<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#add-search-to-the-dashboard\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1nlag9ifzkr88uyrvqvr8s7gi\">開啟 <code>DashboardComponent</code> 的樣板並且把用於搜尋英雄的元素 <code>&lt;app-hero-search&gt;</code> 新增到程式碼的底部。</p>\n<code-example header=\"src/app/dashboard/dashboard.component.html\" path=\"toh-pt6/src/app/dashboard/dashboard.component.html\">\n&lt;h2&gt;Top Heroes&lt;/h2&gt;\n&lt;div class=\"heroes-menu\"&gt;\n  &lt;a *<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a>=\"let hero of heroes\"\n      <a href=\"api/router/RouterLink\" class=\"code-anchor\">routerLink</a>=\"/detail/{{hero.id}}\"&gt;\n      {{hero.name}}\n  &lt;/a&gt;\n&lt;/div&gt;\n\n&lt;app-hero-search&gt;&lt;/app-hero-search&gt;\n\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bh9uozixr26u3r81pj1ois4pv\">為此，下一步就是新增一個元件，它的選擇器要能對應 <code>&lt;app-hero-search&gt;</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2jpsd6r343httd4m2r88nehhs\">為此，下一步就是新增一個元件，它的選擇器要能對應 <code>&lt;app-hero-search&gt;</code>。</p>\n<h3 id=\"create-herosearchcomponent\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"24sxx1xa1mqc825xjoz4yath2\">建立 <code>HeroSearchComponent</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#create-herosearchcomponent\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ds0hr81hnuttzdmpde0u5s1b5\">執行 <code>ng generate</code> 以建立一個 <code>HeroSearchComponent</code>。</p>\n<code-example format=\"shell\" language=\"shell\">\n\nng generate component hero-search\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"abdlwruy45hqvnl9ixouxpzfz\">把生成的 <code>HeroSearchComponent</code> 的<em>樣板</em>改成一個 <code>&lt;input&gt;</code> 和一個對應到的搜尋結果的清單。程式碼如下。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3t21j3h046ijrk1gt6hsepnp9\">把生成的 <code>HeroSearchComponent</code> 的<em>樣板</em>改成一個 <code>&lt;input&gt;</code> 和一個對應到的搜尋結果的清單。程式碼如下。</p>\n<code-example header=\"src/app/hero-search/hero-search.component.html\" path=\"toh-pt6/src/app/hero-search/hero-search.component.html\">\n&lt;div id=\"search-component\"&gt;\n  &lt;label for=\"search-box\"&gt;Hero Search&lt;/label&gt;\n  &lt;input #searchBox id=\"search-box\" (input)=\"search(searchBox.value)\" /&gt;\n\n  &lt;ul class=\"search-result\"&gt;\n    &lt;li *<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a>=\"let hero of heroes$ | <a href=\"api/platform-browser/animations/async\" class=\"code-anchor\">async</a>\" &gt;\n      &lt;a <a href=\"api/router/RouterLink\" class=\"code-anchor\">routerLink</a>=\"/detail/{{hero.id}}\"&gt;\n        {{hero.name}}\n      &lt;/a&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/div&gt;\n\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1q0bj4m6swmo7uoruolgxp7g1\">從下面的 <a href=\"tutorial/tour-of-heroes/toh-pt6#herosearchcomponent\">最終程式碼</a> 中把私有 CSS 樣式新增到 <code>hero-search.component.css</code> 中。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ascxbibcsewcx762bak4ao54m\">當用戶在搜尋框中輸入時，一個 <code>input</code> 事件繫結會呼叫該組件的 <code>search()</code> 方法，並傳入新的搜尋框的值。</p>\n<p><a id=\"asyncpipe\"></a></p>\n<h3 id=\"asyncpipe\"><code><a href=\"api/common/AsyncPipe\" class=\"code-anchor\">AsyncPipe</a></code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#asyncpipe\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a2curne3t78p7dznlz1k5i3kr\"><code>*<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code> 會重複渲染這些英雄物件。注意，<code>*<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code> 在一個名叫 <code>heroes$</code> 的清單上迭代，而不是 <code>heroes</code>。<code>$</code> 是一個約定，表示 <code>heroes$</code> 是一個 <code>Observable</code> 而不是陣列。</p>\n<code-example header=\"src/app/hero-search/hero-search.component.html\" path=\"toh-pt6/src/app/hero-search/hero-search.component.html\" region=\"async\">\n&lt;li *<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a>=\"let hero of heroes$ | <a href=\"api/platform-browser/animations/async\" class=\"code-anchor\">async</a>\" &gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6hh504m0kizh4mdflhjonreve\">由於 \n<code>*<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code> 無法處理 \n<code>Observable</code>，請使用通道符 \n<code>|</code>，然後跟上 \n<code>async</code>。 這標識了 Angular 的 \n<code><a href=\"api/common/AsyncPipe\" class=\"code-anchor\">AsyncPipe</a></code> 並自動訂閱一個 \n<code>Observable</code>，這樣你就不需要在元件類別中手動訂閱。</p>\n<h3 id=\"edit-the-herosearchcomponent-class\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"63c7oesy9mpdhqdgavk5dk3z9\">修正 <code>HeroSearchComponent</code> 類<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#edit-the-herosearchcomponent-class\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bmrhhmdqx6afg6bmeh3bhj919\">修改所生成的 <code>HeroSearchComponent</code> 類及其元資料，程式碼如下。</p>\n<code-example header=\"src/app/hero-search/hero-search.component.ts\" path=\"toh-pt6/src/app/hero-search/hero-search.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> } from '@angular/core';\n\nimport { Observable, Subject } from 'rxjs';\n\nimport {\n   debounceTime, distinctUntilChanged, switchMap\n } from 'rxjs/operators';\n\nimport { Hero } from '../hero';\nimport { HeroService } from '../hero.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-hero-search',\n  templateUrl: './hero-search.component.html',\n  styleUrls: [ './hero-search.component.css' ]\n})\nexport class HeroSearchComponent implements <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> {\n  heroes$!: Observable&lt;Hero[]&gt;;\n  private searchTerms = new Subject&lt;string&gt;();\n\n  constructor(private heroService: HeroService) {}\n\n  // Push a search term into the observable stream.\n  search(term: string): void {\n    this.searchTerms.next(term);\n  }\n\n  ngOnInit(): void {\n    this.heroes$ = this.searchTerms.pipe(\n      // wait 300ms after each keystroke before considering the term\n      debounceTime(300),\n\n      // ignore new term if same as previous term\n      distinctUntilChanged(),\n\n      // switch to new search observable each time the term changes\n      switchMap((term: string) =&gt; this.heroService.searchHeroes(term)),\n    );\n  }\n}\n\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8mchelbr3yw5nsuarx9xcpjo4\">注意，<code>heroes$</code> 宣告為一個 <code>Observable</code></p>\n<code-example header=\"src/app/hero-search/hero-search.component.ts\" path=\"toh-pt6/src/app/hero-search/hero-search.component.ts\" region=\"heroes-stream\">\nheroes$!: Observable&lt;Hero[]&gt;;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"g2rsqqmvljqq9nuvxkqo3449\">你將會在 <a href=\"tutorial/tour-of-heroes/toh-pt6#search-pipe\"><code>ngOnInit()</code></a> 中設定它，在此之前，先仔細看看 <code>searchTerms</code> 的定義。</p>\n<h3 id=\"the-searchterms-rxjs-subject\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5wwxy47n6w8wmji4ov2ku4sn6\">RxJS <code>Subject</code> 型別的 <code>searchTerms</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#the-searchterms-rxjs-subject\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"37wwo2hm2indea1r5klvga4oc\"><code>searchTerms</code> 屬性是 RxJS 的 <code>Subject</code> 型別。</p>\n<code-example header=\"src/app/hero-search/hero-search.component.ts\" path=\"toh-pt6/src/app/hero-search/hero-search.component.ts\" region=\"searchTerms\">\nprivate searchTerms = new Subject&lt;string&gt;();\n\n// Push a search term into the observable stream.\nsearch(term: string): void {\n  this.searchTerms.next(term);\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"capeygtgff45orjy74logm7ok\">文字框的 <code>input</code> 事件的<em>事件繫結</em>會呼叫 <code>search()</code> 方法。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1idl531f8ccvahytk1cnn6jgb\">你還可以透過呼叫它的 <code>next(value)</code> 方法往 <code>Observable</code> 中推送一些值，就像 <code>search()</code> 方法中一樣。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3mc8g4y34aer123j3cqk6kze\">文字框的 <code>input</code> 事件的<em>事件繫結</em>會呼叫 <code>search()</code> 方法。</p>\n<code-example header=\"src/app/hero-search/hero-search.component.html\" path=\"toh-pt6/src/app/hero-search/hero-search.component.html\" region=\"input\">\n&lt;input #searchBox id=\"search-box\" (input)=\"search(searchBox.value)\" /&gt;\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c3iipn5n8h8vmlx40jpnrxr67\">每當使用者在文字框中輸入時，這個事件繫結就會使用文字框的值（搜尋詞）呼叫 <code>search()</code> 函式。<code>searchTerms</code> 變成了一個能發出搜尋詞的穩定的流。</p>\n<p><a id=\"search-pipe\"></a></p>\n<h3 id=\"chaining-rxjs-operators\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2vrqfqepug5rs0cea0b7e63g2\">串聯 RxJS 運算子<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#chaining-rxjs-operators\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d6vrophqbab68q9q6dlj3umbq\">如果每當使用者按鍵後就直接呼叫 <code>searchHeroes()</code> 將導致建立海量的 HTTP 請求，浪費伺服器資源並干擾資料排程計劃。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a1ok116cb9k47xjcx8kymrwcx\">應該怎麼做呢？<code>ngOnInit()</code> 往 <code>searchTerms</code> 這個可觀察物件的處理通道中加入了一系列 RxJS 運算子，用以縮減對 <code>searchHeroes()</code> 的呼叫次數。最終，它回傳一個可及時給出英雄搜尋結果的可觀察物件，這裡每次都是 <code>Hero[]</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2etchxpsss17oi80m1rjvpgb9\">程式碼如下。</p>\n<code-example header=\"src/app/hero-search/hero-search.component.ts\" path=\"toh-pt6/src/app/hero-search/hero-search.component.ts\" region=\"search\">\nthis.heroes$ = this.searchTerms.pipe(\n  // wait 300ms after each keystroke before considering the term\n  debounceTime(300),\n\n  // ignore new term if same as previous term\n  distinctUntilChanged(),\n\n  // switch to new search observable each time the term changes\n  switchMap((term: string) =&gt; this.heroService.searchHeroes(term)),\n);\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ers95fjfgucvupitnawq78nnh\">各個運算子的工作方式如下：</p>\n<ul>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9ot4tts82p9s2vd6o8oi2bmeu\">在傳出最終字串之前，<code>debounceTime(300)</code> 將會等待，直到新增字串的事件暫停了 300 毫秒。你實際發起請求的間隔永遠不會小於 300ms。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"et8uiwlmbl6m6j80fo30qi2u8\"><code>distinctUntilChanged()</code> 會確保只在過濾條件變化時才傳送請求。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8ge99annsghpj7bjkeyu66evj\"><code>switchMap()</code> 會為每個從 <code>debounce()</code> 和 <code>distinctUntilChanged()</code> 中透過的搜尋詞呼叫搜尋服務。它會取消並丟棄以前的搜尋可觀察物件，只保留最近的。</p>\n</li>\n</ul>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b61ldqp34jt0ve22hdopjbqxz\">使用 \n<a href=\"https://www.learnrxjs.io/learn-rxjs/operators/transformation/switchmap\"><code>switchMap</code> 運算子</a>，每個符合條件的按鍵事件都可以觸發一個 \n<code><a href=\"api/common/http/HttpClient#get\" class=\"code-anchor\">HttpClient.get()</a></code> 方法呼叫。 即使在請求之間有 300 毫秒的暫停，你可能會有許多 HTTP 請求同時進行，它們可能不會按照傳送順序回傳。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"353bd555wdpfcu39zdrppmfr7\"><code>switchMap()</code> 會記住原始的請求順序，只會回傳最近一次 HTTP 方法呼叫的結果。以前的那些請求都會被取消和捨棄。</p>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7fv11998qdqug3husdw123f61\"><strong>注意</strong>：<br>\n取消前一個 <code>searchHeroes()</code> 可觀察物件並不會中止尚未完成的 HTTP 請求。那些不想要的結果只會在它們抵達應用程式碼之前被捨棄。</p>\n</div>\n</div>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1wci87ffeb4304ty5vnxomazu\">記住，元件類別中並沒有訂閱 <code>heroes$</code> 這個可觀察物件，而是由樣板中的 <a href=\"tutorial/tour-of-heroes/toh-pt6#asyncpipe\"><code>AsyncPipe</code></a> 完成的。</p>\n<h4 id=\"try-it\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5o8k80g83w0jrloe187y9vxwi\">試試看<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#try-it\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"56emk2qkw3jkb6nk6qw7ijv8j\">再次執行本應用。在這個 <em>儀表盤</em> 中，在搜尋框中輸入一些文字。如果你輸入的字元對應上了任何現有英雄的名字，你將會看到如下效果。</p>\n<div class=\"lightbox\">\n<img alt=\"Hero Search field with the letters 'm' and 'a' along with four search results that match the query displayed in a list beneath the search input\" src=\"generated/images/guide/toh/toh-hero-search.gif\" width=\"400\" height=\"299\">\n</div>\n<h2 id=\"final-code-review\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e9wa7wkqdj6wmwmxq53bbnpvt\">檢視最終程式碼<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#final-code-review\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1kr98pq6w5jegxiwggriaismh\">本文討論過的程式碼檔案如下。它們都位於 <code>src/app/</code> 資料夾中。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e3g1yty007vd10h86v2mif2mg\"><a id=\"heroservice\"></a>\n<a id=\"inmemorydataservice\"></a></p>\n<p><a id=\"appmodule\"></a></p>\n<h3 id=\"heroservice-inmemorydataservice-appmodule\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d4j5zvt7okeyi4zftoz7nkf7\"><code>HeroService</code>、\n<code>InMemoryDataService</code>、\n<code>AppModule</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#heroservice-inmemorydataservice-appmodule\"><i class=\"material-icons\">link</i></a></h3>\n<code-tabs>\n    <code-pane header=\"hero.service.ts\" path=\"toh-pt6/src/app/hero.service.ts\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> } from '@angular/core';\nimport { <a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a>, <a href=\"api/common/http/HttpHeaders\" class=\"code-anchor\">HttpHeaders</a> } from '@angular/common/<a href=\"api/common/http\" class=\"code-anchor\">http</a>';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\n\nimport { Hero } from './hero';\nimport { MessageService } from './message.service';\n\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>({ providedIn: 'root' })\nexport class HeroService {\n\n  private heroesUrl = 'api/heroes';  // URL to web api\n\n  httpOptions = {\n    headers: new <a href=\"api/common/http/HttpHeaders\" class=\"code-anchor\">HttpHeaders</a>({ 'Content-Type': 'application/json' })\n  };\n\n  constructor(\n    private <a href=\"api/common/http\" class=\"code-anchor\">http</a>: <a href=\"api/common/http/HttpClient\" class=\"code-anchor\">HttpClient</a>,\n    private messageService: MessageService) { }\n\n  /** GET heroes from the server */\n  getHeroes(): Observable&lt;Hero[]&gt; {\n    return this.http.get&lt;Hero[]&gt;(this.heroesUrl)\n      .pipe(\n        tap(_ =&gt; this.log('fetched heroes')),\n        catchError(this.handleError&lt;Hero[]&gt;('getHeroes', []))\n      );\n  }\n\n  /** GET hero by id. Return `undefined` when id not found */\n  getHeroNo404&lt;<a href=\"api/router/Data\" class=\"code-anchor\">Data</a>&gt;(id: number): Observable&lt;Hero&gt; {\n    const url = `${this.heroesUrl}/?id=${id}`;\n    return this.http.get&lt;Hero[]&gt;(url)\n      .pipe(\n        map(heroes =&gt; heroes[0]), // returns a {0|1} element array\n        tap(h =&gt; {\n          const outcome = h ? 'fetched' : 'did not find';\n          this.log(`${outcome} hero id=${id}`);\n        }),\n        catchError(this.handleError&lt;Hero&gt;(`getHero id=${id}`))\n      );\n  }\n\n  /** GET hero by id. Will 404 if id not found */\n  getHero(id: number): Observable&lt;Hero&gt; {\n    const url = `${this.heroesUrl}/${id}`;\n    return this.http.get&lt;Hero&gt;(url).pipe(\n      tap(_ =&gt; this.log(`fetched hero id=${id}`)),\n      catchError(this.handleError&lt;Hero&gt;(`getHero id=${id}`))\n    );\n  }\n\n  /* GET heroes whose name contains search term */\n  searchHeroes(term: string): Observable&lt;Hero[]&gt; {\n    if (!term.trim()) {\n      // if not search term, return empty hero array.\n      return of([]);\n    }\n    return this.http.get&lt;Hero[]&gt;(`${this.heroesUrl}/?name=${term}`).pipe(\n      tap(x =&gt; x.length ?\n         this.log(`found heroes matching \"${term}\"`) :\n         this.log(`no heroes matching \"${term}\"`)),\n      catchError(this.handleError&lt;Hero[]&gt;('searchHeroes', []))\n    );\n  }\n\n  //////// Save methods //////////\n\n  /** POST: add a new hero to the server */\n  addHero(hero: Hero): Observable&lt;Hero&gt; {\n    return this.http.post&lt;Hero&gt;(this.heroesUrl, hero, this.httpOptions).pipe(\n      tap((newHero: Hero) =&gt; this.log(`added hero w/ id=${newHero.id}`)),\n      catchError(this.handleError&lt;Hero&gt;('addHero'))\n    );\n  }\n\n  /** DELETE: delete the hero from the server */\n  deleteHero(id: number): Observable&lt;Hero&gt; {\n    const url = `${this.heroesUrl}/${id}`;\n\n    return this.http.delete&lt;Hero&gt;(url, this.httpOptions).pipe(\n      tap(_ =&gt; this.log(`deleted hero id=${id}`)),\n      catchError(this.handleError&lt;Hero&gt;('deleteHero'))\n    );\n  }\n\n  /** PUT: update the hero on the server */\n  updateHero(hero: Hero): Observable&lt;any&gt; {\n    return this.http.put(this.heroesUrl, hero, this.httpOptions).pipe(\n      tap(_ =&gt; this.log(`updated hero id=${hero.id}`)),\n      catchError(this.handleError&lt;any&gt;('updateHero'))\n    );\n  }\n\n  /**\n   * Handle Http operation that failed.\n   * Let the app continue.\n   *\n   * @param operation - name of the operation that failed\n   * @param result - optional value to return as the observable result\n   */\n  private handleError&lt;T&gt;(operation = 'operation', result?: T) {\n    return (error: any): Observable&lt;T&gt; =&gt; {\n\n      // TODO: send the error to remote logging infrastructure\n      console.error(error); // log to console instead\n\n      // TODO: better job of transforming error for user consumption\n      this.log(`${operation} failed: ${error.message}`);\n\n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n\n  /** Log a HeroService message with the MessageService */\n  private log(message: string) {\n    this.messageService.add(`HeroService: ${message}`);\n  }\n}\n\n\n</code-pane>\n    <code-pane header=\"in-memory-data.service.ts\" path=\"toh-pt6/src/app/in-memory-data.service.ts\">\nimport { <a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a> } from '@angular/core';\nimport { InMemoryDbService } from 'angular-in-memory-web-api';\nimport { Hero } from './hero';\n\n@<a href=\"api/core/Injectable\" class=\"code-anchor\">Injectable</a>({\n  providedIn: 'root',\n})\nexport class InMemoryDataService implements InMemoryDbService {\n  createDb() {\n    const heroes = [\n      { id: 12, name: 'Dr. Nice' },\n      { id: 13, name: 'Bombasto' },\n      { id: 14, name: 'Celeritas' },\n      { id: 15, name: 'Magneta' },\n      { id: 16, name: 'RubberMan' },\n      { id: 17, name: 'Dynama' },\n      { id: 18, name: 'Dr. IQ' },\n      { id: 19, name: 'Magma' },\n      { id: 20, name: 'Tornado' }\n    ];\n    return {heroes};\n  }\n\n  // Overrides the genId method to ensure that a hero always has an id.\n  // If the heroes array is empty,\n  // the method below returns the initial number (11).\n  // if the heroes array is not empty, the method below returns the highest\n  // hero id + 1.\n  genId(heroes: Hero[]): number {\n    return heroes.length &gt; 0 ? Math.max(...heroes.map(hero =&gt; hero.id)) + 1 : 11;\n  }\n}\n\n\n</code-pane>\n    <code-pane header=\"app.module.ts\" path=\"toh-pt6/src/app/app.module.ts\">\nimport { <a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a> } from '@angular/core';\nimport { <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a> } from '@angular/platform-browser';\nimport { <a href=\"api/forms/FormsModule\" class=\"code-anchor\">FormsModule</a> } from '@angular/forms';\nimport { <a href=\"api/common/http/HttpClientModule\" class=\"code-anchor\">HttpClientModule</a> } from '@angular/common/<a href=\"api/common/http\" class=\"code-anchor\">http</a>';\n\nimport { HttpClientInMemoryWebApiModule } from 'angular-in-memory-web-api';\nimport { InMemoryDataService } from './in-memory-data.service';\n\nimport { AppRoutingModule } from './app-routing.module';\n\nimport { AppComponent } from './app.component';\nimport { DashboardComponent } from './dashboard/dashboard.component';\nimport { HeroDetailComponent } from './hero-detail/hero-detail.component';\nimport { HeroesComponent } from './heroes/heroes.component';\nimport { HeroSearchComponent } from './hero-search/hero-search.component';\nimport { MessagesComponent } from './messages/messages.component';\n\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  imports: [\n    <a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>,\n    <a href=\"api/forms/FormsModule\" class=\"code-anchor\">FormsModule</a>,\n    AppRoutingModule,\n    <a href=\"api/common/http/HttpClientModule\" class=\"code-anchor\">HttpClientModule</a>,\n\n    // The HttpClientInMemoryWebApiModule module intercepts HTTP requests\n    // and returns simulated server responses.\n    // Remove it when a real server is ready to receive requests.\n    HttpClientInMemoryWebApiModule.forRoot(\n      InMemoryDataService, { dataEncapsulation: false }\n    )\n  ],\n  declarations: [\n    AppComponent,\n    DashboardComponent,\n    HeroesComponent,\n    HeroDetailComponent,\n    MessagesComponent,\n    HeroSearchComponent\n  ],\n  bootstrap: [ AppComponent ]\n})\nexport class AppModule { }\n\n\n</code-pane>\n</code-tabs>\n<p><a id=\"heroescomponent\"></a></p>\n<h3 id=\"heroescomponent\"><code>HeroesComponent</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#heroescomponent\"><i class=\"material-icons\">link</i></a></h3>\n<code-tabs>\n    <code-pane header=\"heroes/heroes.component.html\" path=\"toh-pt6/src/app/heroes/heroes.component.html\">\n&lt;h2&gt;My Heroes&lt;/h2&gt;\n\n&lt;div&gt;\n  &lt;label for=\"new-hero\"&gt;Hero name: &lt;/label&gt;\n  &lt;input id=\"new-hero\" #heroName /&gt;\n\n  &lt;!-- (click) passes input value to add() and then clears the input --&gt;\n  &lt;button type=\"button\" class=\"add-button\" (click)=\"add(heroName.value); heroName.value=''\"&gt;\n    Add hero\n  &lt;/button&gt;\n&lt;/div&gt;\n\n&lt;ul class=\"heroes\"&gt;\n  &lt;li *<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a>=\"let hero of heroes\"&gt;\n    &lt;a <a href=\"api/router/RouterLink\" class=\"code-anchor\">routerLink</a>=\"/detail/{{hero.id}}\"&gt;\n      &lt;span class=\"badge\"&gt;{{hero.id}}&lt;/span&gt; {{hero.name}}\n    &lt;/a&gt;\n    &lt;button type=\"button\" class=\"delete\" title=\"delete hero\"\n      (click)=\"delete(hero)\"&gt;x&lt;/button&gt;\n  &lt;/li&gt;\n&lt;/ul&gt;\n\n\n</code-pane>\n    <code-pane header=\"heroes/heroes.component.ts\" path=\"toh-pt6/src/app/heroes/heroes.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> } from '@angular/core';\n\nimport { Hero } from '../hero';\nimport { HeroService } from '../hero.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-heroes',\n  templateUrl: './heroes.component.html',\n  styleUrls: ['./heroes.component.css']\n})\nexport class HeroesComponent implements <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> {\n  heroes: Hero[] = [];\n\n  constructor(private heroService: HeroService) { }\n\n  ngOnInit(): void {\n    this.getHeroes();\n  }\n\n  getHeroes(): void {\n    this.heroService.getHeroes()\n    .subscribe(heroes =&gt; this.heroes = heroes);\n  }\n\n  add(name: string): void {\n    name = name.trim();\n    if (!name) { return; }\n    this.heroService.addHero({ name } as Hero)\n      .subscribe(hero =&gt; {\n        this.heroes.push(hero);\n      });\n  }\n\n  delete(hero: Hero): void {\n    this.heroes = this.heroes.filter(h =&gt; h !== hero);\n    this.heroService.deleteHero(hero.id).subscribe();\n  }\n\n}\n\n\n</code-pane>\n    <code-pane header=\"heroes/heroes.component.css\" path=\"toh-pt6/src/app/heroes/heroes.component.css\">\n/* HeroesComponent's private CSS styles */\n.heroes {\n  margin: 0 0 2em 0;\n  list-style-type: none;\n  padding: 0;\n  width: 15em;\n}\n\ninput {\n  display: block;\n  width: 100%;\n  padding: .5rem;\n  margin: 1rem 0;\n  box-sizing: border-box;\n}\n\n.heroes li {\n  position: relative;\n  cursor: pointer;\n}\n\n.heroes li:hover {\n  left: .1em;\n}\n\n.heroes a {\n  color: #333;\n  text-decoration: none;\n  background-color: #EEE;\n  margin: .5em;\n  padding: .3em 0;\n  height: 1.6em;\n  border-radius: 4px;\n  display: block;\n  width: 100%;\n}\n\n.heroes a:hover {\n  color: #2c3a41;\n  background-color: #e6e6e6;\n}\n\n.heroes a:active {\n  background-color: #525252;\n  color: #fafafa;\n}\n\n.heroes .badge {\n  display: inline-block;\n  font-size: small;\n  color: white;\n  padding: 0.8em 0.7em 0 0.7em;\n  background-color: #405061;\n  line-height: 1em;\n  position: relative;\n  left: -1px;\n  top: -4px;\n  height: 1.8em;\n  min-width: 16px;\n  text-align: right;\n  margin-right: .8em;\n  border-radius: 4px 0 0 4px;\n}\n\n.add-button {\n padding: .5rem 1.5rem;\n font-size: 1rem;\n margin-bottom: 2rem;\n}\n\n.add-button:hover {\n  color: white;\n  background-color: #42545C;\n}\n\nbutton.delete {\n  position: absolute;\n  left: 210px;\n  top: 5px;\n  background-color: white;\n  color:  #525252;\n  font-size: 1.1rem;\n  margin: 0;\n  padding: 1px 10px 3px 10px;\n}\n\nbutton.delete:hover {\n  background-color: #525252;\n  color: white;\n}\n\n\n</code-pane>\n</code-tabs>\n<p><a id=\"herodetailcomponent\"></a></p>\n<h3 id=\"herodetailcomponent\"><code>HeroDetailComponent</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#herodetailcomponent\"><i class=\"material-icons\">link</i></a></h3>\n<code-tabs>\n    <code-pane header=\"hero-detail/hero-detail.component.html\" path=\"toh-pt6/src/app/hero-detail/hero-detail.component.html\">\n&lt;div *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"hero\"&gt;\n  &lt;h2&gt;{{hero.name | <a href=\"api/common/UpperCasePipe\" class=\"code-anchor\">uppercase</a>}} Details&lt;/h2&gt;\n  &lt;div&gt;&lt;span&gt;id: &lt;/span&gt;{{hero.id}}&lt;/div&gt;\n  &lt;div&gt;\n    &lt;label for=\"hero-name\"&gt;Hero name: &lt;/label&gt;\n    &lt;input id=\"hero-name\" [(<a href=\"api/forms/NgModel\" class=\"code-anchor\">ngModel</a>)]=\"hero.name\" placeholder=\"Hero name\"/&gt;\n  &lt;/div&gt;\n  &lt;button type=\"button\" (click)=\"goBack()\"&gt;go back&lt;/button&gt;\n  &lt;button type=\"button\" (click)=\"save()\"&gt;save&lt;/button&gt;\n&lt;/div&gt;\n\n\n</code-pane>\n    <code-pane header=\"hero-detail/hero-detail.component.ts\" path=\"toh-pt6/src/app/hero-detail/hero-detail.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> } from '@angular/core';\nimport { <a href=\"api/router/ActivatedRoute\" class=\"code-anchor\">ActivatedRoute</a> } from '@angular/router';\nimport { <a href=\"api/common/Location\" class=\"code-anchor\">Location</a> } from '@angular/common';\n\nimport { Hero } from '../hero';\nimport { HeroService } from '../hero.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-hero-detail',\n  templateUrl: './hero-detail.component.html',\n  styleUrls: [ './hero-detail.component.css' ]\n})\nexport class HeroDetailComponent implements <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> {\n  hero: Hero | undefined;\n\n  constructor(\n    private route: <a href=\"api/router/ActivatedRoute\" class=\"code-anchor\">ActivatedRoute</a>,\n    private heroService: HeroService,\n    private location: <a href=\"api/common/Location\" class=\"code-anchor\">Location</a>\n  ) {}\n\n  ngOnInit(): void {\n    this.getHero();\n  }\n\n  getHero(): void {\n    const id = parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n    this.heroService.getHero(id)\n      .subscribe(hero =&gt; this.hero = hero);\n  }\n\n  goBack(): void {\n    this.location.back();\n  }\n\n  save(): void {\n    if (this.hero) {\n      this.heroService.updateHero(this.hero)\n        .subscribe(() =&gt; this.goBack());\n    }\n  }\n}\n\n\n</code-pane>\n    <code-pane header=\"hero-detail/hero-detail.component.css\" path=\"toh-pt6/src/app/hero-detail/hero-detail.component.css\">\n/* HeroDetailComponent's private CSS styles */\nlabel {\n  color: #435960;\n  font-weight: bold;\n}\ninput {\n  font-size: 1em;\n  padding: .5rem;\n}\nbutton {\n  margin-top: 20px;\n  margin-right: .5rem;\n  background-color: #eee;\n  padding: 1rem;\n  border-radius: 4px;\n  font-size: 1rem;\n}\nbutton:hover {\n  background-color: #cfd8dc;\n}\nbutton:disabled {\n  background-color: #eee;\n  color: #ccc;\n  cursor: auto;\n}\n\n\n</code-pane>\n</code-tabs>\n<p><a id=\"dashboardcomponent\"></a></p>\n<h3 id=\"dashboardcomponent\"><code>DashboardComponent</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#dashboardcomponent\"><i class=\"material-icons\">link</i></a></h3>\n<code-tabs>\n    <code-pane header=\"dashboard/dashboard.component.html\" path=\"toh-pt6/src/app/dashboard/dashboard.component.html\">\n&lt;h2&gt;Top Heroes&lt;/h2&gt;\n&lt;div class=\"heroes-menu\"&gt;\n  &lt;a *<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a>=\"let hero of heroes\"\n      <a href=\"api/router/RouterLink\" class=\"code-anchor\">routerLink</a>=\"/detail/{{hero.id}}\"&gt;\n      {{hero.name}}\n  &lt;/a&gt;\n&lt;/div&gt;\n\n&lt;app-hero-search&gt;&lt;/app-hero-search&gt;\n\n\n</code-pane>\n    <code-pane header=\"dashboard/dashboard.component.ts\" path=\"toh-pt6/src/app/dashboard/dashboard.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> } from '@angular/core';\nimport { Hero } from '../hero';\nimport { HeroService } from '../hero.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: [ './dashboard.component.css' ]\n})\nexport class DashboardComponent implements <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> {\n  heroes: Hero[] = [];\n\n  constructor(private heroService: HeroService) { }\n\n  ngOnInit(): void {\n    this.getHeroes();\n  }\n\n  getHeroes(): void {\n    this.heroService.getHeroes()\n      .subscribe(heroes =&gt; this.heroes = heroes.slice(1, 5));\n  }\n}\n\n\n</code-pane>\n    <code-pane header=\"dashboard/dashboard.component.css\" path=\"toh-pt6/src/app/dashboard/dashboard.component.css\">\n/* DashboardComponent's private CSS styles */\n\nh2 {\n  text-align: center;\n}\n\n.heroes-menu {\n  padding: 0;\n  margin: auto;\n  max-width: 1000px;\n\n  /* flexbox */\n  display: -webkit-box;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  align-content: flex-start;\n  align-items: flex-start;\n}\n\na {\n  background-color: #3f525c;\n  border-radius: 2px;\n  padding: 1rem;\n  font-size: 1.2rem;\n  text-decoration: none;\n  display: inline-block;\n  color: #fff;\n  text-align: center;\n  width: 100%;\n  min-width: 70px;\n  margin: .5rem auto;\n  box-sizing: border-box;\n\n  /* flexbox */\n  order: 0;\n  flex: 0 1 auto;\n  align-self: auto;\n}\n\n@media (min-width: 600px) {\n  a {\n    width: 18%;\n    box-sizing: content-box;\n  }\n}\n\na:hover {\n  background-color: black;\n}\n\n\n</code-pane>\n</code-tabs>\n<p><a id=\"herosearchcomponent\"></a></p>\n<h3 id=\"herosearchcomponent\"><code>HeroSearchComponent</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#herosearchcomponent\"><i class=\"material-icons\">link</i></a></h3>\n<code-tabs>\n    <code-pane header=\"hero-search/hero-search.component.html\" path=\"toh-pt6/src/app/hero-search/hero-search.component.html\">\n&lt;div id=\"search-component\"&gt;\n  &lt;label for=\"search-box\"&gt;Hero Search&lt;/label&gt;\n  &lt;input #searchBox id=\"search-box\" (input)=\"search(searchBox.value)\" /&gt;\n\n  &lt;ul class=\"search-result\"&gt;\n    &lt;li *<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a>=\"let hero of heroes$ | <a href=\"api/platform-browser/animations/async\" class=\"code-anchor\">async</a>\" &gt;\n      &lt;a <a href=\"api/router/RouterLink\" class=\"code-anchor\">routerLink</a>=\"/detail/{{hero.id}}\"&gt;\n        {{hero.name}}\n      &lt;/a&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/div&gt;\n\n\n</code-pane>\n    <code-pane header=\"hero-search/hero-search.component.ts\" path=\"toh-pt6/src/app/hero-search/hero-search.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a>, <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> } from '@angular/core';\n\nimport { Observable, Subject } from 'rxjs';\n\nimport {\n   debounceTime, distinctUntilChanged, switchMap\n } from 'rxjs/operators';\n\nimport { Hero } from '../hero';\nimport { HeroService } from '../hero.service';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-hero-search',\n  templateUrl: './hero-search.component.html',\n  styleUrls: [ './hero-search.component.css' ]\n})\nexport class HeroSearchComponent implements <a href=\"api/core/OnInit\" class=\"code-anchor\">OnInit</a> {\n  heroes$!: Observable&lt;Hero[]&gt;;\n  private searchTerms = new Subject&lt;string&gt;();\n\n  constructor(private heroService: HeroService) {}\n\n  // Push a search term into the observable stream.\n  search(term: string): void {\n    this.searchTerms.next(term);\n  }\n\n  ngOnInit(): void {\n    this.heroes$ = this.searchTerms.pipe(\n      // wait 300ms after each keystroke before considering the term\n      debounceTime(300),\n\n      // ignore new term if same as previous term\n      distinctUntilChanged(),\n\n      // switch to new search observable each time the term changes\n      switchMap((term: string) =&gt; this.heroService.searchHeroes(term)),\n    );\n  }\n}\n\n\n</code-pane>\n    <code-pane header=\"hero-search/hero-search.component.css\" path=\"toh-pt6/src/app/hero-search/hero-search.component.css\">\n/* HeroSearch private styles */\n\nlabel {\n  display: block;\n  font-weight: bold;\n  font-size: 1.2rem;\n  margin-top: 1rem;\n  margin-bottom: .5rem;\n\n}\ninput {\n  padding: .5rem;\n  width: 100%;\n  max-width: 600px;\n  box-sizing: border-box;\n  display: block;\n}\n\ninput:focus {\n  outline: #336699 auto 1px;\n}\n\nli {\n  list-style-type: none;\n}\n.search-result li a {\n  border-bottom: 1px solid gray;\n  border-left: 1px solid gray;\n  border-right: 1px solid gray;\n  display: inline-block;\n  width: 100%;\n  max-width: 600px;\n  padding: .5rem;\n  box-sizing: border-box;\n  text-decoration: none;\n  color: black;\n}\n\n.search-result li a:hover {\n  background-color: #435A60;\n  color: white;\n}\n\nul.search-result {\n  margin-top: 0;\n  padding-left: 0;\n}\n\n\n</code-pane>\n</code-tabs>\n<h2 id=\"summary\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2fflknbbur8ttwdtn3o9w4vat\">總結<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/tour-of-heroes/toh-pt6#summary\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ajilzna3wjb7lmdh40fcvf61d\">旅程即將結束，不過你已經收穫頗豐。</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3hrlr37xmub2wdniicr8uchwz\">你新增了在應用程式中使用 HTTP 的必備依賴</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6kokxsq5d9ptukmgflddjosqk\">你重構了 <code>HeroService</code>，以透過 web API 來載入英雄資料</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"94f44axwngtjzltzks7rkn5iu\">你擴充套件了 <code>HeroService</code> 來支援 <code>post()</code>、<code>put()</code> 和 <code>delete()</code> 方法</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1v2h37ly6gb8qp3fld4jsdvea\">你修改了元件，以允許使用者新增、編輯和刪除英雄</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"30205v0xkkqhikc74r0iv6n0m\">你設定了一個記憶體 Web API</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3b3gav08u9slhhalj4j54b5tp\">你學會瞭如何使用『可觀察物件』</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dlj4y86fwecqg7lviisevsww0\">《英雄之旅》教程結束了。如果你準備開始學習 Angular 開發的原理，請開始 <a href=\"guide/architecture\" title=\"Architecture\">架構</a> 一章。</p>\n\n  <div class=\"reviewed\">最後複查時間：Mon Feb 28 2022</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/example-apps-list\n - guide/localizing-angular\n - tutorial/tour-of-heroes/toh-pt4\n - tutorial/tour-of-heroes/toh-pt5\n-->\n<!-- links from this doc:\n - api/common/AsyncPipe\n - api/common/Location\n - api/common/NgFor\n - api/common/NgIf\n - api/common/UpperCasePipe\n - api/common/http\n - api/common/http/HttpClient\n - api/common/http/HttpClient#delete\n - api/common/http/HttpClient#get\n - api/common/http/HttpClient#post\n - api/common/http/HttpClient#put\n - api/common/http/HttpClientModule\n - api/common/http/HttpHeaders\n - api/core/Component\n - api/core/Injectable\n - api/core/NgModule\n - api/core/OnInit\n - api/forms/FormsModule\n - api/forms/NgModel\n - api/platform-browser/BrowserModule\n - api/platform-browser/animations/async\n - api/router/ActivatedRoute\n - api/router/Data\n - api/router/RouterLink\n - guide/architecture\n - tutorial/tour-of-heroes/toh-pt6#add-a-heroes-search-feature-to-the-dashboard\n - tutorial/tour-of-heroes/toh-pt6#add-a-new-hero\n - tutorial/tour-of-heroes/toh-pt6#add-heroserviceupdatehero\n - tutorial/tour-of-heroes/toh-pt6#add-search-to-the-dashboard\n - tutorial/tour-of-heroes/toh-pt6#asyncpipe\n - tutorial/tour-of-heroes/toh-pt6#chaining-rxjs-operators\n - tutorial/tour-of-heroes/toh-pt6#create-herosearchcomponent\n - tutorial/tour-of-heroes/toh-pt6#dashboardcomponent\n - tutorial/tour-of-heroes/toh-pt6#delete-a-hero\n - tutorial/tour-of-heroes/toh-pt6#edit-the-herosearchcomponent-class\n - tutorial/tour-of-heroes/toh-pt6#enable-http-services\n - tutorial/tour-of-heroes/toh-pt6#error-handling\n - tutorial/tour-of-heroes/toh-pt6#final-code-review\n - tutorial/tour-of-heroes/toh-pt6#get-data-from-a-server\n - tutorial/tour-of-heroes/toh-pt6#get-hero-by-id\n - tutorial/tour-of-heroes/toh-pt6#get-heroes-with-httpclient\n - tutorial/tour-of-heroes/toh-pt6#handleerror\n - tutorial/tour-of-heroes/toh-pt6#herodetailcomponent\n - tutorial/tour-of-heroes/toh-pt6#heroes-and-http\n - tutorial/tour-of-heroes/toh-pt6#heroescomponent\n - tutorial/tour-of-heroes/toh-pt6#herosearchcomponent\n - tutorial/tour-of-heroes/toh-pt6#heroservice-inmemorydataservice-appmodule\n - tutorial/tour-of-heroes/toh-pt6#heroservicesearchheroes\n - tutorial/tour-of-heroes/toh-pt6#httpclient-methods-return-one-value\n - tutorial/tour-of-heroes/toh-pt6#httpclientget-returns-response-data\n - tutorial/tour-of-heroes/toh-pt6#import-heroes\n - tutorial/tour-of-heroes/toh-pt6#search-by-name\n - tutorial/tour-of-heroes/toh-pt6#search-pipe\n - tutorial/tour-of-heroes/toh-pt6#simulate-a-data-server\n - tutorial/tour-of-heroes/toh-pt6#summary\n - tutorial/tour-of-heroes/toh-pt6#tap-into-the-observable\n - tutorial/tour-of-heroes/toh-pt6#the-searchterms-rxjs-subject\n - tutorial/tour-of-heroes/toh-pt6#try-it\n - tutorial/tour-of-heroes/toh-pt6#update-heroes\n - https://github.com/angular/angular/tree/main/packages/misc/angular-in-memory-web-api\n - https://www.learnrxjs.io/learn-rxjs/operators/transformation/switchmap\n-->"}