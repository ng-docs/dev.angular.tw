{"id":"tutorial/first-app/first-app-lesson-13","title":"第13课：向应用添加搜索功能","contents":"<div class=\"content\">\n  <h1 id=\"lesson-13-add-the-search-feature-to-your-app\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1uo66mq216rxbc95fwg91vhr\">第13课：向应用添加搜索功能<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-13#lesson-13-add-the-search-feature-to-your-app\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5ri4f0qpbj6n22ak13q8buxv0\">本教程示范了如何向 Angular 应用程序添加搜索功能。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c7dvmzlmo2ncowu58w4zyfbma\">该应用程序将使用户能够搜索应用程序提供的数据，并且只显示与输入的字词匹配的结果。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7yrs6yvmlabo3pu7w8cj5do0j\"><strong>预计时间</strong>：约15分钟</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1rsbs0uwzaxhbxdj860z9mz6a\"><strong>起始代码：</strong> \n<live-example name=\"first-app-lesson-12\"></live-example></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aof2h34al9jfstgdmh31qv94x\"><strong>完成代码：</strong> \n<live-example name=\"first-app-lesson-13\"></live-example></p>\n<h2 id=\"what-youll-learn\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cy8qhuh22qozu5okjmjfdf3nx\">你将学到<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-13#what-youll-learn\"><i class=\"material-icons\">link</i></a></h2>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6g1lmj8k1tee2jfffp2y5n6a7\">应用程序将使用表单中的数据来搜索相匹配的房屋位置</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bhpubsar5bp6toybrkcfsgc1m\">应用程序将仅显示匹配的房屋位置</li>\n</ul>\n<h2 id=\"step-1---update-the-home-component-properties\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c0delkk5vrvumckg598vqf4gv\">第 1 步 - 更新 home 组件属性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-13#step-1---update-the-home-component-properties\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"97t94r82g0ciarl2nriaph019\">在此步骤中，你将更新 <code>HomeComponent</code> 类以将数据存储在供过滤的新数组属性中。</p>\n<ol>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3viorynj93yamhp6ra0kilky2\">在 <code>src/app/home/home.component.ts</code> 中，将新属性添加到名为 <code>filteredLocationList</code> 的类中。</p>\n<code-example header=\"Add the filtered results property\" path=\"first-app-lesson-13/src/app/home/home.component.ts\" region=\"add-filtered-location-list\">\nfilteredLocationList: HousingLocation[] = [];\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"kbamvy5fnf9et06woxy5ml4y\"><code>filteredLocationList</code> 持有与用户输入的搜索条件相匹配的值。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7i2954z0dvutnai3nqjo8784u\">页面加载时，<code>filteredLocationList</code> 应默认包含所有房屋位置值。更新 <code>HomeComponent</code> 的 <code>constructor</code> 以设置值。</p>\n<code-example header=\"Set the value of filteredLocationList\" path=\"first-app-lesson-13/src/app/home/home.component.ts\" region=\"update-constructor\">\nconstructor() {\n  this.housingLocationList = this.housingService.getAllHousingLocations();\n  this.filteredLocationList = this.housingLocationList;\n}\n\n</code-example>\n</li>\n</ol>\n<h2 id=\"step-2---update-the-home-component-template\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4o71ryjluzwldpwrkwpf0bbpm\">第 2 步 - 更新 home 组件模板<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-13#step-2---update-the-home-component-template\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bs277uh7qym65atyq89y2pqm5\"><code>HomeComponent</code> 已经包含一个输入字段，你将使用它来捕获用户的输入。该字符串文本将用于过滤结果。</p>\n<ol>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"crhswb7kmllt1tmj90e6a2wxa\">更新\n<code>HomeComponent</code>模板，包含一个在\n<input>元素中称为\n<code>#filter</code>的模板变量。</p>\n<code-example header=\"Add a template variable to HomeComponent's template\" format=\"html\" language=\"html\">\n    &lt;input type=\"text\" placeholder=\"Filter by city\" #filter&gt;\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cjv5t9ifxvjvdrfiz13ag4g31\">这个示例使用一个\n<a href=\"/guide/template-reference-variables\">模板引用变量</a>来访问\n<input>元素的值。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"23eqp257h2hrq7kez96r0uc6d\">接下来，更新组件模板，为\"搜索\"按钮附加一个事件处理程序。</p>\n<code-example header=\"Bind the click event\" format=\"html\" language=\"html\">\n    &lt;button class=\"primary\" type=\"button\" (click)=\"filterResults(filter.value)\"&gt;Search&lt;/button&gt;\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4hi58uusa95bhm99mssdgpx1x\">通过在\n<button>元素上绑定<code>click</code>事件，可以调用<code>filterResults</code>函数。函数的参数是<code>filter</code>模板变量的<code>value</code>属性。具体来说，是<input> HTML 元素的<code>.value</code>属性。</button></p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"368eogs13g9df70ulq15p5q3b\">最后的模板更新是针对 <code><a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code> 指令的。更新 <code><a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code> 值以迭代 <code>filteredLocationList</code> 数组中的值。</p>\n<code-example header=\"Update the ngFor directive value\" format=\"html\" language=\"html\">\n    &lt;app-housing-location *<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a>=\"let housingLocation of filteredLocationList\" [housingLocation]=\"housingLocation\"&gt;&lt;/app-housing-location&gt;\n</code-example>\n</li>\n</ol>\n<h2 id=\"step-3---implement-the-event-handler-function\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"419nwajfbx8buh9junplh824i\">第 3 步 - 实现事件处理函数<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-13#step-3---implement-the-event-handler-function\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"agaviuvdq9iplo8umcu80aif5\">模板已更新为将 <code>filterResults</code> 函数绑定到 <code>click</code> 事件。接下来，你的任务是在 <code>HomeComponent</code> 类中实现 <code>filterResults</code> 函数。</p>\n<ol>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4zgp89gs0lw5qrfkk392y1rf6\">更新 <code>HomeComponent</code> 类以包含 <code>filterResults</code> 函数的实现。</p>\n<code-example header=\"Add the filterResults function implementation\" path=\"first-app-lesson-13/src/app/home/home.component.ts\" region=\"add-filter-results-fn\">\nfilterResults(text: string) {\n  if (!text) {\n    this.filteredLocationList = this.housingLocationList;\n    return;\n  }\n\n  this.filteredLocationList = this.housingLocationList.filter(\n    housingLocation =&gt; housingLocation?.city.toLowerCase().includes(text.toLowerCase())\n  );\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"v4dnjrbzpe1nukhgk9efjeoc\">这个函数使用\n<code>String</code>的\n<code>filter</code>函数来比较\n<code>text</code>参数的值与\n<code>housingLocation.city</code>属性的值。你可以更新这个函数来与任何属性或多个属性匹配，以进行有趣的练习。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d9bvruz5d6s4tuafhg77ynow5\">保存你的代码。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1e52w2xz9oidcys9mezsvaw50\">刷新浏览器，输入文字后点击“搜索”按钮，确认这样可以按城市搜索房源位置数据。</p>\n</li>\n</ol>\n<section class=\"lightbox\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2rqro2iytmduovczsc0f8xmt\"><img alt=\"filtered search results based on user input\" src=\"generated/images/guide/faa/homes-app-lesson-13-step-3.png\" width=\"2342\" height=\"1964\"></section>\n<h2 id=\"lesson-review\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ckmo8mg671uh3oxv2z72tuj64\">课程回顾<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-13#lesson-review\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d5ud8w00ppczgc6czqimjxyvo\">在这节课中，你将应用更新为：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"28dtbrzqtgoyylifr7zxdh9lp\">使用模板变量与模板值交互</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5ewr78yiaca574zldpms6ip4i\">使用事件绑定和数组函数来添加搜索功能</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2vi4aou9du2w1ijyabax7x8qx\">如果你在学习这节课时遇到了任何问题，可以在<live-example></live-example>查看完整代码。</p>\n<h2 id=\"next-steps\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c4pkljueu68ifjoi5994e9l8o\">下一步<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-13#next-steps\"><i class=\"material-icons\">link</i></a></h2>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ecre6fw1n2l9fh5dlhc8zrl68\"><a href=\"tutorial/first-app/first-app-lesson-14\">第 14 课 - 为应用程序添加 HTTP 通信</a></li>\n</ul>\n<h2 id=\"more-information\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a4i4l0z1p0mxth3he9lk6m2op\">更多信息<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-13#more-information\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ep5mlw3d5q1ucm62jzem9a7pc\">有关这节课中涵盖的主题的更多信息，请访问：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2u0zcimz3se9no0e5fhxefpy0\"><a href=\"/guide/template-reference-variables\">模板变量</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2u1dsgiofhh0vc96dd6wht2rf\"><a href=\"/guide/event-binding\">事件处理</a></li>\n</ul>\n\n  <div class=\"reviewed\">最后复查时间：Tue Jul 11 2023</div>\n</div>\n\n\n<!-- links to this doc:\n - tutorial/first-app/first-app-lesson-12\n-->\n<!-- links from this doc:\n - /guide/event-binding\n - /guide/template-reference-variables\n - api/common/NgFor\n - tutorial/first-app/first-app-lesson-13#lesson-13-add-the-search-feature-to-your-app\n - tutorial/first-app/first-app-lesson-13#lesson-review\n - tutorial/first-app/first-app-lesson-13#more-information\n - tutorial/first-app/first-app-lesson-13#next-steps\n - tutorial/first-app/first-app-lesson-13#step-1---update-the-home-component-properties\n - tutorial/first-app/first-app-lesson-13#step-2---update-the-home-component-template\n - tutorial/first-app/first-app-lesson-13#step-3---implement-the-event-handler-function\n - tutorial/first-app/first-app-lesson-13#what-youll-learn\n - tutorial/first-app/first-app-lesson-14\n-->"}