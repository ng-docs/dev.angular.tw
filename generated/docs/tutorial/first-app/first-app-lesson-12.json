{"id":"tutorial/first-app/first-app-lesson-12","title":"第12课：向你的 Angular 应用添加表单","contents":"<div class=\"content\">\n  <h1 id=\"lesson-12-adding-a-form-to-your-angular-app\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a5o1xn2kgqphqokhzwbvt1g2m\">第12课：向你的 Angular 应用添加表单<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-12#lesson-12-adding-a-form-to-your-angular-app\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8huukcyl0kdq1y7h4s4kie9a4\">本教程演示如何向 Angular 应用添加一个收集用户数据的表单。 本课程从一个功能性的 Angular 应用开始，展示如何向其添加一个表单。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"90gt8hcprkf00ewlpa354pzl9\">表单收集的数据只会发送到应用程序的服务，后者会将其写入浏览器的控制台。这节课不涉及使用 REST API 发送和接收表单数据。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7yrs6yvmlabo3pu7w8cj5do0j\"><strong>预计时间</strong>：约15分钟</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"349tcskryua8cfopplz4fvl62\"><strong>起始代码：</strong> \n<live-example name=\"first-app-lesson-11\"></live-example></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2qkcfm7d1jss00xfbch2pzv9l\"><strong>完成代码：</strong> \n<live-example name=\"first-app-lesson-12\"></live-example></p>\n<h2 id=\"what-youll-learn\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cy8qhuh22qozu5okjmjfdf3nx\">你将学到<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-12#what-youll-learn\"><i class=\"material-icons\">link</i></a></h2>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ejcqli3fghbzwtgi0agwh05fa\">应用程序有一个表单，用户可以在其中输入要发送给服务的数据。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3sia5qrztr0us8mwr9hm8ggl1\">该服务将表单中的数据写入浏览器的控制台日志。</li>\n</ul>\n<h2 id=\"step-1---add-a-method-to-send-form-data\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c5k4lgowygnz8ex2qt5kxp77h\">第 1 步 - 添加发送表单数据的方法<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-12#step-1---add-a-method-to-send-form-data\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cqvyorqsmy1zbnqact9amp1xl\">此步骤会向服务中添加一个方法，该方法接收要发送到数据目的地的表单数据。在此示例中，该方法将表单中的数据写入浏览器的控制台日志。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9r6pgvig5ms9l5ukrbwsza8xg\">在 IDE 的<strong>编辑</strong>窗格中：</p>\n<ol>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cofmepmqpr0h7uw7kqynkjez4\">在 <code>src/app/housing.service.ts</code> 的 <code>HousingService</code> 类中，将此方法粘贴到类定义的底部。</p>\n<code-example header=\"Submit method in src/app/housing.service.ts\" path=\"first-app-lesson-12/src/app/housing.service.ts\" region=\"submit-method\">\nsubmitApplication(firstName: string, lastName: string, <a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a>: string) {\n  console.log(`Homes application received: firstName: ${firstName}, lastName: ${lastName}, <a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a>: ${<a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a>}.`);\n}\n\n</code-example>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8zz0za5ogwktknzyeafgd8ja5\">确保应用在构建时没有错误。在继续下一步之前更正所有错误。</p>\n</li>\n</ol>\n<h2 id=\"step-2---add-the-form-functions-to-the-details-page\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"31sidf2rxvkttvwupfoyi5ewz\">第 2 步 - 将表单功能添加到详情页面<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-12#step-2---add-the-form-functions-to-the-details-page\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9ac005oru1yuw86xa180e7umd\">这一步将在详情页面中添加处理表单交互的代码。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e4dsv4oviqhfvaxgte930agsn\">在 IDE 的<strong>编辑</strong>窗格中，打开 <code>src/app/details/details.component.ts</code> 文件：</p>\n<ol>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8u4pr8c2vsvjuhofoh9gsmbyw\">在文件顶部的 <code>import</code> 语句之后，添加以下代码以导入 Angular 表单类。</p>\n<code-example header=\"Forms imports in src/app/details/details.component.ts\" path=\"first-app-lesson-12/src/app/details/details.component.ts\" region=\"form-imports\">\nimport { <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>, <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>, <a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a> } from '@angular/forms';\n\n</code-example>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9ugf7nma7wdaeuh77kw65zpuo\">在 <code>DetailsComponent</code> 装饰器的元数据中，使用以下代码更新 <code>imports</code> 属性：</p>\n<code-example header=\"imports directive in src/app/details/details.component.ts\" path=\"first-app-lesson-12/src/app/details/details.component.ts\" region=\"component-imports\">\nimports: [\n  <a href=\"api/common/CommonModule\" class=\"code-anchor\">CommonModule</a>,\n  <a href=\"api/forms/ReactiveFormsModule\" class=\"code-anchor\">ReactiveFormsModule</a>\n],\n\n</code-example>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d3ua8wzi9hp747a9yj4rygwgs\">在 <code>DetailsComponent</code> 类中的 <code>constructor()</code> 方法之前，添加以下代码以创建表单对象。</p>\n<code-example header=\"template directive in src/app/details/details.component.ts\" path=\"first-app-lesson-12/src/app/details/details.component.ts\" region=\"form-code\">\napplyForm = new <a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a>({\n  firstName: new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>(''),\n  lastName: new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>(''),\n  <a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a>: new <a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a>('')\n});\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"apa91uzre2samh0zaim4bxfmg\">在 Angular 中，<code><a href=\"api/forms/FormGroup\" class=\"code-anchor\">FormGroup</a></code> 和 <code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> 是能帮你构建出表单的类型。<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> 类型可以提供默认值并塑造表单数据的形态。在此示例中，<code>firstName</code> 是一个 <code>string</code>，默认值为空字符串。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"665eqx8ffhldpnwbrs0ddihrl\">在 <code>DetailsComponent</code> 类中的 <code>constructor()</code> 方法之后，添加以下代码来处理 <strong>Apply now</strong> 的点击事件。</p>\n<code-example header=\"template directive in src/app/details/details.component.ts\" path=\"first-app-lesson-12/src/app/details/details.component.ts\" region=\"form-submit\">\nsubmitApplication() {\n  this.housingService.submitApplication(\n    this.applyForm.value.firstName ?? '',\n    this.applyForm.value.lastName ?? '',\n    this.applyForm.value.email ?? ''\n  );\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8x5x648o1f8mlw2sg9jedmatc\">此按钮尚不存在 - 你将在下一步中添加它。在上面的代码中，<code><a href=\"api/forms/FormControl\" class=\"code-anchor\">FormControl</a></code> 可能会返回 <code>null</code>。如果值为 <code>null</code>，此代码使用空值合并运算符 <code>??</code> 将其默认为空字符串。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8zz0za5ogwktknzyeafgd8ja5\">确保应用在构建时没有错误。在继续下一步之前更正所有错误。</p>\n</li>\n</ol>\n<h2 id=\"step-3---add-the-forms-markup-to-the-details-page\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3p4ztka6ypu1xgg48pac2k47j\">第 3 步 - 将表单的标记添加到详情页面<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-12#step-3---add-the-forms-markup-to-the-details-page\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"azh2j20s0kg92kg4h6k4y6gww\">此步骤将标记添加到显示表单的详情页面。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e4dsv4oviqhfvaxgte930agsn\">在 IDE 的<strong>编辑</strong>窗格中，打开 <code>src/app/details/details.component.ts</code> 文件：</p>\n<ol>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"73khy28pqe5d694vqjswl5dkm\">在 <code>DetailsComponent</code> 装饰器的元数据中，把 <code>template</code> 的 HTML 更新成如下代码，以添加表单的标记。</p>\n<code-example header=\"template directive in src/app/details/details.component.ts\" path=\"first-app-lesson-12/src/app/details/details.component.ts\" region=\"component-template\">\ntemplate: `\n  &lt;article&gt;\n    &lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> class=\"listing-photo\" [src]=\"housingLocation?.photo\"\n      alt=\"Exterior photo of {{housingLocation?.name}}\"/&gt;\n    &lt;section class=\"listing-description\"&gt;\n      &lt;h2 class=\"listing-heading\"&gt;{{housingLocation?.name}}&lt;/h2&gt;\n      &lt;p class=\"listing-location\"&gt;{{housingLocation?.city}}, {{housingLocation?.state}}&lt;/p&gt;\n    &lt;/section&gt;\n    &lt;section class=\"listing-features\"&gt;\n      &lt;h2 class=\"section-heading\"&gt;About this housing location&lt;/h2&gt;\n      &lt;ul&gt;\n        &lt;li&gt;Units available: {{housingLocation?.availableUnits}}&lt;/li&gt;\n        &lt;li&gt;Does this location have wifi: {{housingLocation?.wifi}}&lt;/li&gt;\n        &lt;li&gt;Does this location have laundry: {{housingLocation?.laundry}}&lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/section&gt;\n    &lt;section class=\"listing-apply\"&gt;\n      &lt;h2 class=\"section-heading\"&gt;Apply now to live here&lt;/h2&gt;\n      &lt;form [formGroup]=\"applyForm\" (submit)=\"submitApplication()\"&gt;\n        &lt;label for=\"first-name\"&gt;First Name&lt;/label&gt;\n        &lt;input id=\"first-name\" type=\"text\" <a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>=\"firstName\"&gt;\n\n        &lt;label for=\"last-name\"&gt;Last Name&lt;/label&gt;\n        &lt;input id=\"last-name\" type=\"text\" <a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>=\"lastName\"&gt;\n\n        &lt;label for=\"<a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a>\"&gt;Email&lt;/label&gt;\n        &lt;input id=\"<a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a>\" type=\"<a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a>\" <a href=\"api/forms/FormControlName\" class=\"code-anchor\">formControlName</a>=\"<a href=\"api/forms/EmailValidator\" class=\"code-anchor\">email</a>\"&gt;\n        &lt;button type=\"submit\" class=\"primary\"&gt;Apply now&lt;/button&gt;\n      &lt;/form&gt;\n    &lt;/section&gt;\n  &lt;/article&gt;\n`,\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2olloryyp16sl39q8qqrvz9pp\">模板现在包含一个事件处理程序\n<code>(submit)=\"submitApplication()\"</code>。Angular 在模板代码中使用括号语法来定义事件。等号右侧的代码是在触发此事件时应该执行的代码。你可以绑定到浏览器事件和自定义事件。</p>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8zz0za5ogwktknzyeafgd8ja5\">确保应用在构建时没有错误。在继续下一步之前更正所有错误。</p>\n</li>\n</ol>\n    <section class=\"lightbox\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5hybsbeuqik4ymrwtaf05pbp\"><img alt=\"details page with a form for applying to live at this location\" src=\"generated/images/guide/faa/homes-app-lesson-12-step-3.png\" width=\"1920\" height=\"1159\"></section>\n<h2 id=\"step-4---test-your-apps-new-form\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7of8s9yx3uljmrou6sx7diarb\">第 4 步 - 测试应用的新表单<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-12#step-4---test-your-apps-new-form\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"eb6pquxre9wgiv9jqb7xuq8qy\">此步骤会测试新表单，以查看当表单数据提交到应用程序时，表单数据会出现在控制台日志中。</p>\n<ol>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"eun2hq10lipuafmoogreki2qx\">在 IDE 的<strong>终端</strong>窗格中，运行 <code>ng serve</code> （如果它尚未运行）。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3ij39tsl3uxmqdwp93hhtiadx\">在你的浏览器中，通过 <code>http://localhost:4200</code> 打开应用程序。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cv2mklpk168c514fnxc6g17rr\">在浏览器中右键单击应用，在上下文菜单中选择\n<strong>检查</strong>。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"79kzsbe1a1bi2qh9bqm2p4kzd\">在开发者工具窗口中，选择<strong>控制台</strong>选项卡。确保开发者工具窗口对后续步骤可见</li>\n<li>In your app:\n<ol>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9pkxszgje31wcnb313b7seq4k\">选择房屋位置并单击<strong>了解更多</strong>，以查看有关房屋的详情。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3eacschvrmvbosskht8t7hpeg\">在房屋的详情页面中，滚动到底部以找到新表格。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"arbrr0uu27vlpawtqrc2v5e3x\">在表单的字段中输入数据 - 任何数据都可以。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"awk6nxdg2bwjphzl786u1sgka\">选择<strong>立即应用</strong>以提交数据。</li>\n</ol>\n</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cgwa8ncn3qbsxr5gs34kq8c41\">在开发者工具窗口中，查看日志输出以找到你的表单数据。</li>\n</ol>\n<h2 id=\"lesson-review\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ckmo8mg671uh3oxv2z72tuj64\">课程回顾<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-12#lesson-review\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d5ud8w00ppczgc6czqimjxyvo\">在这节课中，你将应用更新为：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bi6ptx1z548skrjururrpf8d0\">使用 Angular 的表单功能添加表单</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6sd890kg3psuqy4iy2k6gl7el\">使用事件处理程序将表单中捕获的数据连接到组件</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2vi4aou9du2w1ijyabax7x8qx\">如果你在学习这节课时遇到了任何问题，可以在<live-example></live-example>查看完整代码。</p>\n<h2 id=\"next-steps\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c4pkljueu68ifjoi5994e9l8o\">下一步<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-12#next-steps\"><i class=\"material-icons\">link</i></a></h2>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1x2x5y9450asnlujbunykf0xv\"><a href=\"tutorial/first-app/first-app-lesson-13\">第 13 课 - 将搜索功能添加到应用程序</a></li>\n</ul>\n<h2 id=\"more-information\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"a4i4l0z1p0mxth3he9lk6m2op\">更多信息<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"tutorial/first-app/first-app-lesson-12#more-information\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ep5mlw3d5q1ucm62jzem9a7pc\">有关这节课中涵盖的主题的更多信息，请访问：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1bf8oke082sgdrbpi2xwifmec\"><a href=\"/guide/forms\">Angular 表单</a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2u1dsgiofhh0vc96dd6wht2rf\"><a href=\"/guide/event-binding\">事件处理</a></li>\n</ul>\n\n  <div class=\"reviewed\">最后复查时间：Wed Jul 12 2023</div>\n</div>\n\n\n<!-- links to this doc:\n - tutorial/first-app/first-app-lesson-11\n-->\n<!-- links from this doc:\n - /guide/event-binding\n - /guide/forms\n - api/common/CommonModule\n - api/common/NgOptimizedImage\n - api/forms/EmailValidator\n - api/forms/FormControl\n - api/forms/FormControlName\n - api/forms/FormGroup\n - api/forms/ReactiveFormsModule\n - tutorial/first-app/first-app-lesson-12#lesson-12-adding-a-form-to-your-angular-app\n - tutorial/first-app/first-app-lesson-12#lesson-review\n - tutorial/first-app/first-app-lesson-12#more-information\n - tutorial/first-app/first-app-lesson-12#next-steps\n - tutorial/first-app/first-app-lesson-12#step-1---add-a-method-to-send-form-data\n - tutorial/first-app/first-app-lesson-12#step-2---add-the-form-functions-to-the-details-page\n - tutorial/first-app/first-app-lesson-12#step-3---add-the-forms-markup-to-the-details-page\n - tutorial/first-app/first-app-lesson-12#step-4---test-your-apps-new-form\n - tutorial/first-app/first-app-lesson-12#what-youll-learn\n - tutorial/first-app/first-app-lesson-13\n-->"}