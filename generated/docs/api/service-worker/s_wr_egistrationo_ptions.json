{"id":"api/service-worker/SwRegistrationOptions","title":"SwRegistrationOptions","contents":"<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.io/api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.io/api/service-worker\", \"name\": \"@angular/service-worker\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.io/api/service-worker/SwRegistrationOptions\", \"name\": \"SwRegistrationOptions\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> &gt; <a href=\"api/service-worker\">@angular/service-worker</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/service-worker/src/provider.ts#L114-L173\" aria-label=\"檢視原始碼\" title=\"檢視原始碼\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  <header class=\"api-header\">\n    <h1 id=\"swregistrationoptions\">SwRegistrationOptions<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/service-worker/SwRegistrationOptions#swregistrationoptions\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label class\">class</label>\n  </header>\n  \n\n  <div class=\"api-body\">\n  <section class=\"short-description\">\n    <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"q9wc20crwxq1mtgp7uzwbtj9\">可用於在 <code><a href=\"api/service-worker/ServiceWorkerModule#register\" class=\"code-anchor\">ServiceWorkerModule.register()</a></code> 之外為 <code><a href=\"api/service-worker/ServiceWorkerModule\" class=\"code-anchor\">ServiceWorkerModule</a></code> 提供選項的標記。</p>\n\n    <p><a href=\"api/service-worker/SwRegistrationOptions#description\">檢視更多...</a></p>\n  </section><section class=\"class-overview\">\n<code-example language=\"ts\" hidecopy=\"true\">\nabstract class <a href=\"api/service-worker/SwRegistrationOptions\" class=\"code-anchor\">SwRegistrationOptions</a> {\n  <a class=\"code-anchor\" href=\"api/service-worker/SwRegistrationOptions#enabled\"><span class=\"member-name\">enabled</span>?: boolean</a>\n  <a class=\"code-anchor\" href=\"api/service-worker/SwRegistrationOptions#scope\"><span class=\"member-name\">scope</span>?: string</a>\n  <a class=\"code-anchor\" href=\"api/service-worker/SwRegistrationOptions#registrationStrategy\"><span class=\"member-name\">registrationStrategy</span>?: string | (() =&gt; Observable&lt;unknown&gt;)</a>\n}\n</code-example>\n\n</section>\n\n  \n<section class=\"description\">\n  <h2 id=\"description\">說明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/service-worker/SwRegistrationOptions#description\"><i class=\"material-icons\">link</i></a></h2>\n  <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4ic67cfv4u5zegpgpyrits5rt\">你可以用此標記來定義一個在執行時生成註冊選項的提供者，例如透過函式呼叫：</p>\n<code-example path=\"service-worker/registration-options/module.ts\" region=\"registration-options\" header=\"app.module.ts\">\nimport {<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>} from '@angular/core';\nimport {<a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>} from '@angular/platform-browser';\nimport {<a href=\"api/service-worker/ServiceWorkerModule\" class=\"code-anchor\">ServiceWorkerModule</a>, <a href=\"api/service-worker/SwRegistrationOptions\" class=\"code-anchor\">SwRegistrationOptions</a>} from '@angular/service-worker';\n/* . . . */\n\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  /* . . . */\n  imports: [<a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>, ServiceWorkerModule.register('ngsw-worker.js')],\n  providers: [\n    {\n      provide: <a href=\"api/service-worker/SwRegistrationOptions\" class=\"code-anchor\">SwRegistrationOptions</a>,\n      useFactory: () =&gt; ({enabled: location.search.includes('sw=true')}),\n    },\n  ],\n})\nexport class AppModule {}\n\n</code-example>\n</section>\n  \n<section class=\"instance-properties\">\n  <a id=\"properties\"></a>\n  <h2 id=\"instance-properties\">屬性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/service-worker/SwRegistrationOptions#instance-properties\"><i class=\"material-icons\">link</i></a></h2>\n  <table class=\"is-full-width list-table property-table\">\n    <thead>\n      <tr>\n        <th>屬性</th>\n        <th>說明</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"enabled\"></a>\n          <code class=\"\"><span class=\"member-name\">enabled</span>?: boolean</code>\n        </td>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1xw370uo9x9rc68fapcifxcnt\">ServiceWorker 是否將被註冊，並且相關服務（例如 <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> 和 <code><a href=\"api/service-worker/SwUpdate\" class=\"code-anchor\">SwUpdate</a></code> ）將嘗試與它進行通訊和互動。</p>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"85zse8vprpfdsr05rehd9rwsu\">預設值：true</p>\n\n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"scope\"></a>\n          <code class=\"\"><span class=\"member-name\">scope</span>?: string</code>\n        </td>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ace9dofrp3wbkqe3hzgjvr5vb\">定義 ServiceWorker 的註冊範圍的 URL；也就是說，它可以控制的 URL 範圍。呼叫<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register\">ServiceWorkerContainer#register()</a>時將使用它。</p>\n          \n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"registrationStrategy\"></a>\n          <code class=\"\"><span class=\"member-name\">registrationStrategy</span>?: string | (() =&gt; Observable&lt;unknown&gt;)</code>\n        </td>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dtlhqngoc6h073fzsm52hnlrk\">定義 ServiceWorker 註冊策略，該策略確定它將何時註冊到瀏覽器。</p>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1p2m7ohqykpccjwuh9be279w0\">應用程式穩定後註冊的預設行為（即一旦沒有掛起的微任務和巨集任務）旨在儘快註冊 ServiceWorker，但不影響應用程式的首次載入。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"60ioamz17l2dxwfvu6av3haud\">不過，在某些情況下，你可能希望對 ServiceWorker 的註冊時間進行更多控制（例如，可能會有長時間執行的超時或輪詢間隔，以防止應用程式穩定）。可用的選項是：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dz1uq9c4jeb5h7vfpdye8jljv\"><code>registerWhenStable:&lt;timeout&gt;</code>：一旦應用程式穩定（沒有掛起的微/巨集任務）後註冊，但不遲於 <code>&lt;timeout&gt;</code> 毫秒。如果應用程式在 <code>&lt;timeout&gt;</code> 毫秒後尚未穩定（例如，由於經常出現的非同步任務），則 ServiceWorker 無論如何都會被註冊。如果省略 <code>&lt;timeout&gt;</code>，則 ServiceWorker 將僅在應用穩定後才會註冊。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3f03wysbm0s85re0mp9c6fq62\"><code>registerImmediately</code>：立即註冊。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9hydryh1cz3footb9wtv8qhn3\"><code>registerWithDelay:&lt;timeout&gt;</code>：使用 <code>&lt;timeout&gt;</code> 毫秒的延遲進行註冊。例如，使用 <code>registerWithDelay:5000</code> 在 5 秒後註冊 ServiceWorker。如果省略 <code>&lt;timeout&gt;</code>，則預設為 <code>0</code>，一旦所有掛起的微任務完成，它將盡快註冊 ServiceWorker，但仍然是非同步的。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"867n22n315th1x35h3ejwnv7t\"><a href=\"guide/observables\">Observable</a>工廠函式：回傳 <code>Observable</code> 的函式。該函式將在執行時用於獲取和訂閱 <code>Observable</code>，並且一旦發出第一個值，ServiceWorker 就會被註冊。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9ltyw0j4y4ndb9wppggq1a0cb\">預設值：『registerWhenStable:30000』</p>\n\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</section>\n</div>\n</article>\n\n<!-- links to this doc:\n - api/service-worker\n - api/service-worker/ServiceWorkerModule\n - api/service-worker/provideServiceWorker\n - guide/service-worker-communications\n-->\n<!-- links from this doc:\n - /api\n - api/core/NgModule\n - api/platform-browser/BrowserModule\n - api/service-worker\n - api/service-worker/ServiceWorkerModule\n - api/service-worker/ServiceWorkerModule#register\n - api/service-worker/SwPush\n - api/service-worker/SwRegistrationOptions#description\n - api/service-worker/SwRegistrationOptions#enabled\n - api/service-worker/SwRegistrationOptions#instance-properties\n - api/service-worker/SwRegistrationOptions#registrationStrategy\n - api/service-worker/SwRegistrationOptions#scope\n - api/service-worker/SwRegistrationOptions#swregistrationoptions\n - api/service-worker/SwUpdate\n - guide/observables\n - https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/service-worker/src/provider.ts#L114-L173\n-->"}