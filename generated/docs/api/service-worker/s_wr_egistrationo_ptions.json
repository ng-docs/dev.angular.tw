{"id":"api/service-worker/SwRegistrationOptions","title":"SwRegistrationOptions","contents":"<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.io/api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.io/api/service-worker\", \"name\": \"@angular/service-worker\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.io/api/service-worker/SwRegistrationOptions\", \"name\": \"SwRegistrationOptions\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> &gt; <a href=\"api/service-worker\">@angular/service-worker</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/service-worker/src/provider.ts#L114-L173\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  <header class=\"api-header\">\n    <h1 id=\"swregistrationoptions\">SwRegistrationOptions<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/service-worker/SwRegistrationOptions#swregistrationoptions\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label class\">class</label>\n  </header>\n  \n\n  <div class=\"api-body\">\n  <section class=\"short-description\">\n    <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"q9wc20crwxq1mtgp7uzwbtj9\">可用于在 <code><a href=\"api/service-worker/ServiceWorkerModule#register\" class=\"code-anchor\">ServiceWorkerModule.register()</a></code> 之外为 <code><a href=\"api/service-worker/ServiceWorkerModule\" class=\"code-anchor\">ServiceWorkerModule</a></code> 提供选项的标记。</p>\n\n    <p><a href=\"api/service-worker/SwRegistrationOptions#description\">查看更多...</a></p>\n  </section><section class=\"class-overview\">\n<code-example language=\"ts\" hidecopy=\"true\">\nabstract class <a href=\"api/service-worker/SwRegistrationOptions\" class=\"code-anchor\">SwRegistrationOptions</a> {\n  <a class=\"code-anchor\" href=\"api/service-worker/SwRegistrationOptions#enabled\"><span class=\"member-name\">enabled</span>?: boolean</a>\n  <a class=\"code-anchor\" href=\"api/service-worker/SwRegistrationOptions#scope\"><span class=\"member-name\">scope</span>?: string</a>\n  <a class=\"code-anchor\" href=\"api/service-worker/SwRegistrationOptions#registrationStrategy\"><span class=\"member-name\">registrationStrategy</span>?: string | (() =&gt; Observable&lt;unknown&gt;)</a>\n}\n</code-example>\n\n</section>\n\n  \n<section class=\"description\">\n  <h2 id=\"description\">说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/service-worker/SwRegistrationOptions#description\"><i class=\"material-icons\">link</i></a></h2>\n  <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4ic67cfv4u5zegpgpyrits5rt\">你可以用此标记来定义一个在运行时生成注册选项的提供者，例如通过函数调用：</p>\n<code-example path=\"service-worker/registration-options/module.ts\" region=\"registration-options\" header=\"app.module.ts\">\nimport {<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>} from '@angular/core';\nimport {<a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>} from '@angular/platform-browser';\nimport {<a href=\"api/service-worker/ServiceWorkerModule\" class=\"code-anchor\">ServiceWorkerModule</a>, <a href=\"api/service-worker/SwRegistrationOptions\" class=\"code-anchor\">SwRegistrationOptions</a>} from '@angular/service-worker';\n/* . . . */\n\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  /* . . . */\n  imports: [<a href=\"api/platform-browser/BrowserModule\" class=\"code-anchor\">BrowserModule</a>, ServiceWorkerModule.register('ngsw-worker.js')],\n  providers: [\n    {\n      provide: <a href=\"api/service-worker/SwRegistrationOptions\" class=\"code-anchor\">SwRegistrationOptions</a>,\n      useFactory: () =&gt; ({enabled: location.search.includes('sw=true')}),\n    },\n  ],\n})\nexport class AppModule {}\n\n</code-example>\n</section>\n  \n<section class=\"instance-properties\">\n  <a id=\"properties\"></a>\n  <h2 id=\"instance-properties\">属性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/service-worker/SwRegistrationOptions#instance-properties\"><i class=\"material-icons\">link</i></a></h2>\n  <table class=\"is-full-width list-table property-table\">\n    <thead>\n      <tr>\n        <th>属性</th>\n        <th>说明</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"enabled\"></a>\n          <code class=\"\"><span class=\"member-name\">enabled</span>?: boolean</code>\n        </td>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1xw370uo9x9rc68fapcifxcnt\">ServiceWorker 是否将被注册，并且相关服务（例如 <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> 和 <code><a href=\"api/service-worker/SwUpdate\" class=\"code-anchor\">SwUpdate</a></code> ）将尝试与它进行通信和交互。</p>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"85zse8vprpfdsr05rehd9rwsu\">默认值：true</p>\n\n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"scope\"></a>\n          <code class=\"\"><span class=\"member-name\">scope</span>?: string</code>\n        </td>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ace9dofrp3wbkqe3hzgjvr5vb\">定义 ServiceWorker 的注册范围的 URL；也就是说，它可以控制的 URL 范围。调用<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register\">ServiceWorkerContainer#register()</a>时将使用它。</p>\n          \n        </td>\n      </tr>\n      <tr class=\"instance-property\">\n        <td>\n          <a id=\"registrationStrategy\"></a>\n          <code class=\"\"><span class=\"member-name\">registrationStrategy</span>?: string | (() =&gt; Observable&lt;unknown&gt;)</code>\n        </td>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dtlhqngoc6h073fzsm52hnlrk\">定义 ServiceWorker 注册策略，该策略确定它将何时注册到浏览器。</p>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1p2m7ohqykpccjwuh9be279w0\">应用程序稳定后注册的默认行为（即一旦没有挂起的微任务和宏任务）旨在尽快注册 ServiceWorker，但不影响应用程序的首次加载。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"60ioamz17l2dxwfvu6av3haud\">不过，在某些情况下，你可能希望对 ServiceWorker 的注册时间进行更多控制（例如，可能会有长时间运行的超时或轮询间隔，以防止应用程序稳定）。可用的选项是：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dz1uq9c4jeb5h7vfpdye8jljv\"><code>registerWhenStable:&lt;timeout&gt;</code>：一旦应用程序稳定（没有挂起的微/宏任务）后注册，但不迟于 <code>&lt;timeout&gt;</code> 毫秒。如果应用程序在 <code>&lt;timeout&gt;</code> 毫秒后尚未稳定（例如，由于经常出现的异步任务），则 ServiceWorker 无论如何都会被注册。如果省略 <code>&lt;timeout&gt;</code>，则 ServiceWorker 将仅在应用稳定后才会注册。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3f03wysbm0s85re0mp9c6fq62\"><code>registerImmediately</code>：立即注册。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9hydryh1cz3footb9wtv8qhn3\"><code>registerWithDelay:&lt;timeout&gt;</code>：使用 <code>&lt;timeout&gt;</code> 毫秒的延迟进行注册。例如，使用 <code>registerWithDelay:5000</code> 在 5 秒后注册 ServiceWorker。如果省略 <code>&lt;timeout&gt;</code>，则默认为 <code>0</code>，一旦所有挂起的微任务完成，它将尽快注册 ServiceWorker，但仍然是异步的。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"867n22n315th1x35h3ejwnv7t\"><a href=\"guide/observables\">Observable</a>工厂函数：返回 <code>Observable</code> 的函数。该函数将在运行时用于获取和订阅 <code>Observable</code>，并且一旦发出第一个值，ServiceWorker 就会被注册。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9ltyw0j4y4ndb9wppggq1a0cb\">默认值：“registerWhenStable:30000”</p>\n\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</section>\n</div>\n</article>\n\n<!-- links to this doc:\n - api/service-worker\n - api/service-worker/ServiceWorkerModule\n - api/service-worker/provideServiceWorker\n - guide/service-worker-communications\n-->\n<!-- links from this doc:\n - /api\n - api/core/NgModule\n - api/platform-browser/BrowserModule\n - api/service-worker\n - api/service-worker/ServiceWorkerModule\n - api/service-worker/ServiceWorkerModule#register\n - api/service-worker/SwPush\n - api/service-worker/SwRegistrationOptions#description\n - api/service-worker/SwRegistrationOptions#enabled\n - api/service-worker/SwRegistrationOptions#instance-properties\n - api/service-worker/SwRegistrationOptions#registrationStrategy\n - api/service-worker/SwRegistrationOptions#scope\n - api/service-worker/SwRegistrationOptions#swregistrationoptions\n - api/service-worker/SwUpdate\n - guide/observables\n - https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/service-worker/src/provider.ts#L114-L173\n-->"}