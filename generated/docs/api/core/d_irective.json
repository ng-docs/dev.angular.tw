{"id":"api/core/Directive","title":"指令","contents":"<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.io/api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.io/api/core\", \"name\": \"@angular/core\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.io/api/core/Directive\", \"name\": \"Directive\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> &gt; <a href=\"api/core\">@angular/core</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L375-L376\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  <header class=\"api-header\">\n    <h1 id=\"directive\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1qejxun37dz68k5ig2h0hy3bw\">指令<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#directive\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label decorator\">decorator</label>\n  </header>\n  \n\n  <div class=\"api-body\">\n  <section class=\"short-description\">\n    <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2o9oj1s129ex3arbe0v6bp4s1\">将类标记为 Angular 指令的装饰器。你可以定义自己的指令，以将自定义行为附加到 DOM 中的元素。</p>\n\n    <p><a href=\"api/core/Directive#description\">查看更多...</a></p>\n  </section>\n<section class=\"decorator-overview\">\n  <table class=\"is-full-width list-table option-overview\">\n  <thead>\n  <tr>\n    <th>选项</th>\n    <th>说明</th>\n  </tr>\n  </thead>\n  <tbody>\n    <tr class=\"option\">\n      <td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1qaig7r0yva29gxjsfr1dzwrp\"><a class=\"code-anchor\" href=\"api/core/Directive#selector\"> <code>selector?</code> </a></td>\n      <td>\n\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d8fi7ccf1edtwqsayvh6mm6hj\">这个 CSS 选择器用于在模板中标记出该指令，并触发该指令的实例化。</p>\n\n      </td>\n    </tr>\n    <tr class=\"option\">\n      <td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"alu4ryc7rtohajiti0vqrurd7\"><a class=\"code-anchor\" href=\"api/core/Directive#inputs\"> <code>inputs?</code> </a></td>\n      <td>\n\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"elizlaqtphj4ype17d3pzyp6j\">列举某个指令的一组可供数据绑定的输入属性</p>\n\n      </td>\n    </tr>\n    <tr class=\"option\">\n      <td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3xkiwajn6st4i5nmppzswbnkl\"><a class=\"code-anchor\" href=\"api/core/Directive#outputs\"> <code>outputs?</code> </a></td>\n      <td>\n\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"arkbfu9xqvfmi8by7s1fs8e2s\">列举一组可供事件绑定的输出属性。</p>\n\n      </td>\n    </tr>\n    <tr class=\"option\">\n      <td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"hgrdiaubrsh8e5nxpefx6p9r\"><a class=\"code-anchor\" href=\"api/core/Directive#providers\"> <code>providers?</code> </a></td>\n      <td>\n\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1h7vrlh8vxhzgc846bx1oqdbg\">一组依赖注入令牌，它允许 DI 系统为这个指令或组件提供依赖。</p>\n\n      </td>\n    </tr>\n    <tr class=\"option\">\n      <td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2233t54wy53q8plg3qlx9wemj\"><a class=\"code-anchor\" href=\"api/core/Directive#exportAs\"> <code>exportAs?</code> </a></td>\n      <td>\n\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6nkz4tbhrxm4vhuboismt49k0\">定义一个名字，用于在模板中把该指令赋值给一个变量。</p>\n\n      </td>\n    </tr>\n    <tr class=\"option\">\n      <td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aopla479yxu06lo34ftnga8kv\"><a class=\"code-anchor\" href=\"api/core/Directive#queries\"> <code>queries?</code> </a></td>\n      <td>\n\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"96nqwwl1g4kle3zw75y5xho3w\">配置一些查询，它们将被注入到该指令中。</p>\n\n      </td>\n    </tr>\n    <tr class=\"option\">\n      <td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"16zkk8b7yfe7sj6ffyihm1xxi\"><a class=\"code-anchor\" href=\"api/core/Directive#host\"> <code>host?</code> </a></td>\n      <td>\n\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2d0ri2jc53xn6y3pjkjzyynta\">使用一组键-值对，把类的属性映射到宿主元素的绑定（Property、Attribute 和事件）。</p>\n\n      </td>\n    </tr>\n    <tr class=\"option\">\n      <td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"defbjmh49boglx0hsogfl6mwy\"><a class=\"code-anchor\" href=\"api/core/Directive#jit\"> <code>jit?</code> </a></td>\n      <td>\n\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"175rapszg4ohizzsadqs2y7q1\">如果存在，则该指令/组件将被 AOT 编译器忽略。它会保留在发布代码中，并且 JIT 编译器会尝试在运行时在浏览器中对其进行编译。为了确保其行为正确，该应用程序必须导入 <code>@angular/compiler</code>。</p>\n\n      </td>\n    </tr>\n    <tr class=\"option\">\n      <td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dtfh32wtwzh7ib2jx1sctbkfm\"><a class=\"code-anchor\" href=\"api/core/Directive#standalone\"> <code>standalone?</code> </a></td>\n      <td>\n\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2pueqh2tt1kr2zwbawd4dy42k\">标记为 <code>standalone</code> 的 Angular 指令不需要在 NgModule 中声明。此类指令不依赖于 NgModule 的任何“中间上下文”（例如配置的提供程序）。</p>\n\n      </td>\n    </tr>\n    <tr class=\"option\">\n      <td data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6kxz92m7tvipy6qlo5saeajm2\"><a class=\"code-anchor\" href=\"api/core/Directive#hostDirectives\"> <code>hostDirectives?</code> </a></td>\n      <td>\n\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dzhuo5e95yi2610qbflsf9gz2\">指令匹配时应该应用于宿主的独立指令。默认情况下，host 指令的任何输入或输出在宿主上都不可用，除非它们在 <code>inputs</code> 或 <code>outputs</code> 属性中指定。</p>\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n  \n  <div class=\"descendants decorator\">\n    <h2 id=\"子类\">子类<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#子类\"><i class=\"material-icons\">link</i></a></h2>\n    \n<ul>\n  <li>\n    <code><a href=\"api/core/Component\" class=\"code-anchor\">Component</a></code>\n    \n  </li>\n</ul>\n  </div>\n</section>\n\n<section class=\"description\">\n  <h2 id=\"description\">说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#description\"><i class=\"material-icons\">link</i></a></h2>\n  <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"419b88vdyfcnpxfgq2edqxt79\">像组件类一样，指令类也可以实现<a href=\"guide/lifecycle-hooks\">生命周期钩子</a>，以影响它们的配置和行为。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2ezxjtkpqirpnf6tmlxom49uj\">像组件类一样，指令类也可以实现<a href=\"guide/lifecycle-hooks\">生命周期钩子</a>，以影响它们的配置和行为。</p>\n  <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d02h2olwkievo9m027cio316x\">更多信息请参阅 \n<a href=\"api/core/Directive#usage-notes\">用法说明...</a></p>\n</section>\n\n<section class=\"decorator-options\">\n  <h2 id=\"options\">选项<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#options\"><i class=\"material-icons\">link</i></a></h2>\n  \n  \n  <a id=\"selector\"></a>\n  <table class=\"is-full-width option-table\">\n    <thead>\n      <tr>\n        <th>\n          <div class=\"with-github-links\">\n            <h3 id=\"selector\">selector<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#selector\"><i class=\"material-icons\">link</i></a></h3>\n            <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L118-L145\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d8fi7ccf1edtwqsayvh6mm6hj\">这个 CSS 选择器用于在模板中标记出该指令，并触发该指令的实例化。</p>\n\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">\n            selector?: string\n          </code-example>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6ftpa88t0vcr3qscdmltyiojd\">可使用下列形式之一：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3trus5nt33cfjy8c4on21sh8f\"><code>element-name</code>：根据元素名选取。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2sz6g553wu0q8z5kpfkk8otjs\"><code>.class</code>：根据类名选取。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cgf7ed0kakbnzc2x3lker1dht\"><code>[attribute]</code>：根据属性名选取。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c4ldrd4rjx56lttxvqlfvjix4\"><code>[attribute=value]</code>：根据属性名和属性值选取。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7sn1vsivdxofikgz11214dtjf\"><code>:not(sub_selector)</code>：只有当元素不匹配子选择器 <code>sub_selector</code> 的时候才选取。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7abf7bhxok397zn6graugwbeo\"><code>selector1, selector2</code>：无论 <code>selector1</code> 还是 <code>selector2</code> 匹配时都选取。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"baytqn3asjqg2lswnqslbdxkm\">对于下列模板 HTML，带有 <code>input[type=text]</code> 选择器的指令只会在 <code>&lt;input type=\"text\"&gt;</code> 元素上实例化。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9vzhdnk4mkmihx8pdepmfa5xw\">对于下列模板 HTML，带有 <code>input[type=text]</code> 选择器的指令只会在 <code>&lt;input type=\"text\"&gt;</code> 元素上实例化。</p>\n<code-example language=\"html\">\n&lt;form&gt;\n  &lt;input type=\"text\"&gt;\n  &lt;input type=\"radio\"&gt;\n&lt;form&gt;\n</code-example>\n\n          \n        </td>\n      </tr>\n      \n    </tbody>\n  </table>\n  \n  \n  \n  <a id=\"inputs\"></a>\n  <table class=\"is-full-width option-table\">\n    <thead>\n      <tr>\n        <th>\n          <div class=\"with-github-links\">\n            <h3 id=\"inputs\">inputs<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#inputs\"><i class=\"material-icons\">link</i></a></h3>\n            <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L146-L190\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"elizlaqtphj4ype17d3pzyp6j\">列举某个指令的一组可供数据绑定的输入属性</p>\n\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">\n            inputs?: ({\n    name: string;\n    alias?: string;\n    required?: boolean;\n    transform?: (value: any) =&gt; any;\n} | string)[]\n          </code-example>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8d98ffm90e1jl4fso1zlsayhu\">Angular 在变更检测期间自动更新输入属性。<code>inputs</code> 属性接受配置应作为输入公开的指令属性的字符串或对象文字。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dljanopley3qc55cx4h085907\">传入对象文字时，<code>name</code> 属性指示输入应写入类的哪个属性，而 <code>alias</code> 确定输入在模板绑定中可用的名称。<code>required</code> 属性指示输入是必需的，如果在使用指令时未传入，将触发编译时错误。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8jc2n0ummeo28i94tv4zbt3lj\">当一个字符串被传递到 <code>inputs</code> 数组时，它的格式可以是 <code>'name'</code> 或 <code>'name: alias'</code>，其中 <code>name</code> 是指令应该写入的类的属性，而 <code>alias</code> 确定输入的名称将在模板绑定中可用。假定基于字符串的输入定义是可选的。</p>\n\n          \n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"z0wgc2tdmfmygzh4nd0jza1r\">下面的例子创建了一个带有两个可绑定属性的组件。</p>\n<code-example language=\"typescript\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'bank-account',\n  inputs: ['bankName', {name: 'id', alias: 'account-id'}],\n  template: `\n    Bank Name: {{bankName}}\n    Account Id: {{id}}\n  `\n})\nclass BankAccount {\n  bankName: string;\n  id: string;\n}\n</code-example>\n\n          \n        </td>\n      </tr>\n      \n    </tbody>\n  </table>\n  \n  \n  \n  <a id=\"outputs\"></a>\n  <table class=\"is-full-width option-table\">\n    <thead>\n      <tr>\n        <th>\n          <div class=\"with-github-links\">\n            <h3 id=\"outputs\">outputs<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#outputs\"><i class=\"material-icons\">link</i></a></h3>\n            <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L191-L232\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"arkbfu9xqvfmi8by7s1fs8e2s\">列举一组可供事件绑定的输出属性。</p>\n\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">\n            outputs?: string[]\n          </code-example>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dppkgnt0vgbqgo9qbral2hk4i\"><code>outputs</code> 属性定义了一组从 <code>directiveProperty</code> 指向 <code>bindingProperty</code> 的配置项：</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9mhk28i0y5ueyzfmd5rpjkfrw\"><code>outputs</code> 属性定义了一组 <code>directiveProperty</code> 来 <code>alias</code> 配置：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dthems01sfhmp4vxdwgxs31g\"><code>directiveProperty</code> 用于指定要发出事件的指令属性。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6i4jkp2xnh0gfouuc1mce29ca\"><code>alias</code> 指定事件处理程序附加到的 DOM 属性。</li>\n</ul>\n\n          \n          <code-example language=\"typescript\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'child-dir',\n  outputs: [ 'bankNameChange' ],\n  template: `&lt;input (input)=\"bankNameChange.emit($event.target.value)\" /&gt;`\n})\nclass ChildDir {\n bankNameChange: <a href=\"api/core/EventEmitter\" class=\"code-anchor\">EventEmitter</a>&lt;string&gt; = new <a href=\"api/core/EventEmitter\" class=\"code-anchor\">EventEmitter</a>&lt;string&gt;();\n}\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'main',\n  template: `\n    {{ bankName }} &lt;child-dir (bankNameChange)=\"onBankNameChange($event)\"&gt;&lt;/child-dir&gt;\n  `\n})\nclass MainComponent {\n bankName: string;\n\n  onBankNameChange(bankName: string) {\n    this.bankName = bankName;\n  }\n}\n</code-example>\n\n          \n        </td>\n      </tr>\n      \n    </tbody>\n  </table>\n  \n  \n  \n  <a id=\"providers\"></a>\n  <table class=\"is-full-width option-table\">\n    <thead>\n      <tr>\n        <th>\n          <div class=\"with-github-links\">\n            <h3 id=\"providers\">providers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#providers\"><i class=\"material-icons\">link</i></a></h3>\n            <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L233-L239\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1h7vrlh8vxhzgc846bx1oqdbg\">一组依赖注入令牌，它允许 DI 系统为这个指令或组件提供依赖。</p>\n\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">\n            providers?: <a href=\"api/core/Provider\" class=\"code-anchor\">Provider</a>[]\n          </code-example>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  \n  \n  \n  <a id=\"exportAs\"></a>\n  <table class=\"is-full-width option-table\">\n    <thead>\n      <tr>\n        <th>\n          <div class=\"with-github-links\">\n            <h3 id=\"exportas\">exportAs<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#exportas\"><i class=\"material-icons\">link</i></a></h3>\n            <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L240-L263\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6nkz4tbhrxm4vhuboismt49k0\">定义一个名字，用于在模板中把该指令赋值给一个变量。</p>\n\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">\n            exportAs?: string\n          </code-example>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\">\n@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>({\n  selector: 'child-dir',\n  exportAs: 'child'\n})\nclass ChildDir {\n}\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'main',\n  template: `&lt;child-dir #c=\"child\"&gt;&lt;/child-dir&gt;`\n})\nclass MainComponent {\n}\n</code-example>\n\n          \n        </td>\n      </tr>\n      \n    </tbody>\n  </table>\n  \n  \n  \n  <a id=\"queries\"></a>\n  <table class=\"is-full-width option-table\">\n    <thead>\n      <tr>\n        <th>\n          <div class=\"with-github-links\">\n            <h3 id=\"queries\">queries<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#queries\"><i class=\"material-icons\">link</i></a></h3>\n            <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L264-L301\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"96nqwwl1g4kle3zw75y5xho3w\">配置一些查询，它们将被注入到该指令中。</p>\n\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">\n            queries?: {\n    [key: string]: any;\n}\n          </code-example>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9m9owf7ix3mi9npy1x4ptmvus\">下面的范例展示了如何定义这些查询以及到生命周期钩子中的哪个步骤才会有结果：</p>\n\n          \n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bxcmysawr19wefafpjxhz4clp\">下面的范例展示了如何定义这些查询以及到生命周期钩子中的哪个步骤才会有结果：</p>\n<code-example language=\"ts\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'someDir',\n  queries: {\n    <a href=\"api/core/contentChildren\" class=\"code-anchor\">contentChildren</a>: new <a href=\"api/core/ContentChildren\" class=\"code-anchor\">ContentChildren</a>(ChildDirective),\n    <a href=\"api/core/viewChildren\" class=\"code-anchor\">viewChildren</a>: new <a href=\"api/core/ViewChildren\" class=\"code-anchor\">ViewChildren</a>(ChildDirective)\n  },\n  template: '&lt;child-directive&gt;&lt;/child-directive&gt;'\n})\nclass SomeDir {\n  <a href=\"api/core/contentChildren\" class=\"code-anchor\">contentChildren</a>: <a href=\"api/core/QueryList\" class=\"code-anchor\">QueryList</a>&lt;ChildDirective&gt;,\n  <a href=\"api/core/viewChildren\" class=\"code-anchor\">viewChildren</a>: <a href=\"api/core/QueryList\" class=\"code-anchor\">QueryList</a>&lt;ChildDirective&gt;\n\n  ngAfterContentInit() {\n    // <a href=\"api/core/contentChildren\" class=\"code-anchor\">contentChildren</a> is set\n  }\n\n  ngAfterViewInit() {\n    // <a href=\"api/core/viewChildren\" class=\"code-anchor\">viewChildren</a> is set\n  }\n}\n</code-example>\n\n          \n        </td>\n      </tr>\n      \n    </tbody>\n  </table>\n  \n  \n  \n  <a id=\"host\"></a>\n  <table class=\"is-full-width option-table\">\n    <thead>\n      <tr>\n        <th>\n          <div class=\"with-github-links\">\n            <h3 id=\"host\">host<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#host\"><i class=\"material-icons\">link</i></a></h3>\n            <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L302-L325\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2d0ri2jc53xn6y3pjkjzyynta\">使用一组键-值对，把类的属性映射到宿主元素的绑定（Property、Attribute 和事件）。</p>\n\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">\n            host?: {\n    [key: string]: string;\n}\n          </code-example>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bibeyeb3uvp22g1g55v0xgrtf\">对于事件处理：</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3ojggpa8bzlgdpcigwrmi3tcc\">当键是宿主元素的属性时，属性值会传播到指定的 DOM 属性中。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8ftcb0phto883zy1mvzgjhrk\">当 key 是 DOM 中的静态 Attribute 时，这个 Attribute 值就会传播到宿主元素上指定的 Property 去。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2abcbr2b8y9nexv037gfvgo9t\">对于事件处理：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1njzh3g2tuduife4tl3ynacli\">  它的 key 就是该指令想要监听的 DOM 事件。\n要想监听全局事件，请把要监听的目标添加到事件名的前面。\n这个目标可以是 <code>window</code>、<code>document</code> 或 <code>body</code>。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ezi9396tg79oaek4nqibtfwtw\">  它的 value 就是当该事件发生时要执行的语句。如果该语句返回 <code>false</code>，那么就会调用这个 DOM 事件的 <code>preventDefault</code> 函数。\n这个语句中可以引用局部变量 <code>$event</code> 来获取事件数据。</li>\n</ul>\n\n          \n        </td>\n      </tr>\n      \n    </tbody>\n  </table>\n  \n  \n  \n  <a id=\"jit\"></a>\n  <table class=\"is-full-width option-table\">\n    <thead>\n      <tr>\n        <th>\n          <div class=\"with-github-links\">\n            <h3 id=\"jit\">jit<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#jit\"><i class=\"material-icons\">link</i></a></h3>\n            <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L326-L333\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"175rapszg4ohizzsadqs2y7q1\">如果存在，则该指令/组件将被 AOT 编译器忽略。它会保留在发布代码中，并且 JIT 编译器会尝试在运行时在浏览器中对其进行编译。为了确保其行为正确，该应用程序必须导入 <code>@angular/compiler</code>。</p>\n\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">\n            jit?: true\n          </code-example>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  \n  \n  \n  <a id=\"standalone\"></a>\n  <table class=\"is-full-width option-table\">\n    <thead>\n      <tr>\n        <th>\n          <div class=\"with-github-links\">\n            <h3 id=\"standalone\">standalone<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#standalone\"><i class=\"material-icons\">link</i></a></h3>\n            <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L334-L343\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2pueqh2tt1kr2zwbawd4dy42k\">标记为 <code>standalone</code> 的 Angular 指令不需要在 NgModule 中声明。此类指令不依赖于 NgModule 的任何“中间上下文”（例如配置的提供程序）。</p>\n\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">\n            standalone?: boolean\n          </code-example>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8m42bqxgsjcx2m3wxa5e55go9\">有关独立组件、指令和管道的更多信息，请参阅<a href=\"guide/standalone-components\">本指南</a>。</p>\n\n          \n        </td>\n      </tr>\n      \n    </tbody>\n  </table>\n  \n  \n  \n  \n  \n  <a id=\"hostDirectives\"></a>\n  <table class=\"is-full-width option-table\">\n    <thead>\n      <tr>\n        <th>\n          <div class=\"with-github-links\">\n            <h3 id=\"hostdirectives\">hostDirectives<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#hostdirectives\"><i class=\"material-icons\">link</i></a></h3>\n            <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L351-L366\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dzhuo5e95yi2610qbflsf9gz2\">指令匹配时应该应用于宿主的独立指令。默认情况下，host 指令的任何输入或输出在宿主上都不可用，除非它们在 <code>inputs</code> 或 <code>outputs</code> 属性中指定。</p>\n\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\">\n            hostDirectives?: (<a href=\"api/core/Type\" class=\"code-anchor\">Type</a>&lt;unknown&gt; | {\n    directive: <a href=\"api/core/Type\" class=\"code-anchor\">Type</a>&lt;unknown&gt;;\n    inputs?: string[];\n    outputs?: string[];\n})[]\n          </code-example>\n        </td>\n      </tr>\n      <tr>\n        <td>\n          <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"24qr34mgyvxxqr4i523a7dgfx\">你可以通过在原始输入或输出名称后面放一个冒号和别名来为输入和输出额外别名。例如，如果通过 <code>hostDirectives</code> 应用的指令定义了一个名为 <code>menuDisabled</code> 的 <code>inputs</code>，你可以通过将 <code>'menuDisabled: disabled'</code> <code>disabled</code> 条目添加到 sources 来将其别名为 enabled。</p>\n\n          \n        </td>\n      </tr>\n      \n    </tbody>\n  </table>\n  \n  \n</section>\n\n<section class=\"usage-notes\">\n  <h2 id=\"usage-notes\">使用说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#usage-notes\"><i class=\"material-icons\">link</i></a></h2>\n  <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"chbeyjl2rom96cmf202m7l5ub\">要想定义一个指令，请为该类加上此装饰器，并提供元数据。</p>\n<code-example language=\"ts\">\nimport {<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>} from '@angular/core';\n\n@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>({\n  selector: 'my-directive',\n})\nexport class MyDirective {\n...\n}\n</code-example>\n<h3 id=\"declaring-directives\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"168aglh9bbe6lhl88x2qpr69l\">声明指令<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/core/Directive#declaring-directives\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3tyer2qwnmqsdyshuo1dmk3ne\">为了使指令可用于你应用程序中的其他组件，你应该执行以下操作之一：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7bg85im1p0y9gfhu3mz2kkper\">要么将指令标记为<a href=\"guide/standalone-components\">Standalone</a>，</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"88qf6345wdekl2tkbxlvjtaiv\">或者通过将其添加到 <code>declarations</code> 和 <code>exports</code> 字段来在 NgModule 中声明它。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cr92z942wleind9gl75rc17xd\"><strong>将指令标记为独立的</strong></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3iqdjiy4mevepjuvoj5s6r4yz\">你可以将 <code>standalone: true</code> 标志添加到 Directive 装饰器元数据中，以将其声明为<a href=\"guide/standalone-components\">Standalone</a>：</p>\n<code-example language=\"ts\">\n@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>({\n  standalone: true,\n  selector: 'my-directive',\n})\nclass MyDirective {}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"f4cb4logiy7hk0clo01zquf50\">将指令标记为独立时，请确保该指令尚未在 NgModule 中声明。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"519qbj8fq9ycn1r1kdyiv1bhx\"><strong>在 NgModule 中声明指令</strong></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dv01gsfb0szbwbpn8tsvuw187\">另一种方法是在 NgModule 中声明一个指令：</p>\n<code-example language=\"ts\">\n@<a href=\"api/core/Directive\" class=\"code-anchor\">Directive</a>({\n  selector: 'my-directive',\n})\nclass MyDirective {}\n\n@<a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a>({\n  declarations: [MyDirective, SomeComponent],\n  exports: [MyDirective], // making it available outside of this module\n})\nclass SomeNgModule {}\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aq9cc6b4h8shtoa1ohrf1gw3z\">在 NgModule 中声明指令时，请确保：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6xyc4px88uopnbii429alhzvd\">该指令正好在一个 NgModule 中声明。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6yfa8jqdvmqkerws2xydfl7hs\">该指令不是独立的。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"clejztgv0aer3lg9yxj3s2n7c\">你不会重新声明从另一个模块导入的指令。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"24nsgt0oq9bmfppgl8mpq72ss\">如果你希望 <code>exports</code> 之外的组件可以访问此指令，则该指令也包含在 export 字段中。</li>\n</ul>\n\n</section></div>\n</article>\n\n<!-- links to this doc:\n - api/core\n - api/core/Attribute\n - api/core/Component\n - api/core/ContentChild\n - api/core/ContentChildren\n - api/core/Host\n - api/core/HostAttributeToken\n - api/core/HostBinding\n - api/core/HostListener\n - api/core/Injectable\n - api/core/InputFunction\n - api/core/ModelFunction\n - api/core/ViewChild\n - api/core/ViewChildren\n - api/core/ViewContainerRef\n - api/core/input\n - api/core/model\n - api/core/testing/TestBed\n - api/forms/AsyncValidator\n - api/forms/NG_ASYNC_VALIDATORS\n - api/forms/NG_VALIDATORS\n - api/forms/Validator\n - api/upgrade/static/UpgradeComponent\n - api/upgrade/static/testing/createAngularJSTestingModule\n - api/upgrade/static/testing/createAngularTestingModule\n - errors/NG0504\n - errors/NG0910\n - errors/NG1001\n - errors/NG8003\n - guide/architecture-components\n - guide/attribute-directives\n - guide/bootstrapping\n - guide/cheatsheet\n - guide/content-projection\n - guide/dependency-injection-in-action\n - guide/directive-composition-api\n - guide/elements\n - guide/form-validation\n - guide/forms\n - guide/glossary\n - guide/hierarchical-dependency-injection\n - guide/lifecycle-hooks\n - guide/model-inputs\n - guide/npm-packages\n - guide/standalone-components\n - guide/structural-directives\n - guide/styleguide\n - guide/testing-attribute-directives\n - guide/testing-utility-apis\n - guide/update-to-version-15\n - guide/upgrade\n - guide/what-is-angular\n-->\n<!-- links from this doc:\n - /api\n - api/core\n - api/core/Component\n - api/core/ContentChildren\n - api/core/Directive#declaring-directives\n - api/core/Directive#description\n - api/core/Directive#directive\n - api/core/Directive#exportAs\n - api/core/Directive#exportas\n - api/core/Directive#host\n - api/core/Directive#hostDirectives\n - api/core/Directive#hostdirectives\n - api/core/Directive#inputs\n - api/core/Directive#jit\n - api/core/Directive#options\n - api/core/Directive#outputs\n - api/core/Directive#providers\n - api/core/Directive#queries\n - api/core/Directive#selector\n - api/core/Directive#standalone\n - api/core/Directive#usage-notes\n - api/core/Directive#子类\n - api/core/EventEmitter\n - api/core/NgModule\n - api/core/Provider\n - api/core/QueryList\n - api/core/Type\n - api/core/ViewChildren\n - api/core/contentChildren\n - api/core/viewChildren\n - guide/glossary#di-token\n - guide/glossary#injector\n - guide/glossary#provider\n - guide/lifecycle-hooks\n - guide/standalone-components\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L118-L145\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L146-L190\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L191-L232\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L233-L239\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L240-L263\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L264-L301\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L302-L325\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L326-L333\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L334-L343\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L351-L366\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/core/src/metadata/directives.ts#L375-L376\n-->"}