{"id":"api/animations/transition","title":"transition","contents":"<article>\n  <div class=\"breadcrumb-container\">\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n            { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.io/api\", \"name\": \"API\" } },\n            { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.io/api/animations\", \"name\": \"@angular/animations\" } },\n            { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.io/api/animations/transition\", \"name\": \"transition\" } }\n          ]\n        }\n      </script>\n        <a href=\"/api\">API</a> &gt; <a href=\"api/animations\">@angular/animations</a>\n    </div>\n    <div class=\"github-links\">\n  <a href=\"https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/animations/src/animation_metadata.ts#L889-L1049\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n</div>\n  </div>\n  <header class=\"api-header\">\n    <h1 id=\"transition\">transition<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#transition\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label function\">function</label>\n  </header>\n  \n\n  <div class=\"api-body\">\n  <section class=\"short-description\">\n    <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"hnu0iivzcbch5b0xuf9vomko\">声明一个转场动画，以便在满足给定条件时运行一系列动画步骤。</p>\n\n  </section>\n\n  <div class=\"overload-info\">\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading\"> <span class=\"member-name\"><a href=\"api/animations/transition\" class=\"code-anchor\">transition</a></span>(stateChangeExpr: string | ((fromState: string, toState: string, element?: any, params?: { [key: string]: any; }) =&gt; boolean), steps: <a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a> | <a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a>[], options: <a href=\"api/animations/AnimationOptions\" class=\"code-anchor\">AnimationOptions</a> = null): <a href=\"api/animations/AnimationTransitionMetadata\" class=\"code-anchor\">AnimationTransitionMetadata</a></code-example>\n\n  <h6 class=\"no-anchor\" id=\"parameters\">参数</h6>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b2vulobj5uodezu1hg1qp3em7\"><a id=\"\"></a>\n        <code>stateChangeExpr</code></td>\n      <td class=\"param-type\"><code>string | ((fromState: string, toState: string, element?: any, params?: { [key: string]: any; }) =&gt; boolean)</code></td>\n      <td class=\"param-description\">\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3jxfyngyvujpguux2km7ca3ju\">具有特定格式的字符串或指定动画转换何时发生的函数（请参阅<a href=\"api/animations/transition#state-change-expression\">状态更改表达式</a>）。</p>\n\n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1l24iaddz2cb54iljef4fs3ja\"><a id=\"\"></a>\n        <code>steps</code></td>\n      <td class=\"param-type\"><code><a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a> | <a href=\"api/animations/AnimationMetadata\" class=\"code-anchor\">AnimationMetadata</a>[]</code></td>\n      <td class=\"param-description\">\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aq1mw06t0q617b4zm1mew8e1a\">表示动画操作指南的一个或多个动画对象。</p>\n\n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bctpqv6pe3qufag0kdnkhac2q\"><a id=\"\"></a>\n        <code>options</code></td>\n      <td class=\"param-type\"><code><a href=\"api/animations/AnimationOptions\" class=\"code-anchor\">AnimationOptions</a></code></td>\n      <td class=\"param-description\">\n        <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4yktpaea588zvz0v2wpbyvhnl\">可选值。默认值为 <code>null</code>。</p>\n\n        <p>可选值。默认值为 <code>null</code>。</p>\n\n      </td>\n    </tr>\n  </tbody>\n</table>\n  <h6 class=\"no-anchor\" id=\"returns\">返回值</h6>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"r3zix42cmix0ogiwtehmv8nj\">一个封装了转场数据的对象。</p>\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n</div>\n\n\n\n\n\n<section class=\"usage-notes\">\n  <h2 id=\"usage-notes\">使用说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#usage-notes\"><i class=\"material-icons\">link</i></a></h2>\n  <h3 id=\"state-change-expression\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"g6p46qvihea35zye6z4vd7zd\">状态更改表达式<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#state-change-expression\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1lm8eosu0g8znryeb1y6ti4xz\">状态更改表达式会指示 Angular 何时运行转换的动画，它可以是</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5lfi2hbmqhegmkqrq1vzihxtu\">具有特定语法的字符串</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1oy2sn84qeipp8fg7px6d4voz\">或一个比较前一个状态和当前状态（绑定到元素触发器的表达式的值）的函数，如果应该发生转换，则返回\n<code>true</code>，否则返回 <code>false</code></li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dr32td0zl10i9u4lospa9wzde\">字符串格式可以是：</p>\n<ul>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e9z7cozgd3qhwk916brjzow1t\"><code>fromState =&gt; toState</code>，这表明应该发生转换的动画，然后绑定到触发器元素的表达式从 <code>fromState</code>\n到 <code>toState</code></p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6qxrfrjmuaadyy9ecokyk3hik\"><em> 示例：</em></p>\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('open =&gt; closed', <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('.5s ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ height: 0 }) ))\n</code-example>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bbr06rj8j2bkz8nlg7sr6dmik\"><code>fromState &lt;=&gt; toState</code>，表示当触发器元素的表达式从\n<code>fromState</code>变为\n<code>toState</code>或反之时，过渡动画应发生。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6qxrfrjmuaadyy9ecokyk3hik\"><em> 示例：</em></p>\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('enabled &lt;=&gt; disabled', <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s cubic-bezier(0.8,0.3,0,1)'))\n</code-example>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7ed3vkvjr4ls03adwyij41pp6\"><code>:enter</code> / <code>:leave</code>，这表明转换的动画应该在元素进入或存在 DOM 时发生</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6qxrfrjmuaadyy9ecokyk3hik\"><em> 示例：</em></p>\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':enter', [\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0 }),\n    <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('500ms', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 1 }))\n  ])\n</code-example>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"33zaqw3ufs1l6m9b74q5g6zar\">  <code>:increment</code> / <code>:decrement</code>\n，表示当绑定到触发器元素的数值表达式的值增加或减少时，应该发生转换的动画</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6qxrfrjmuaadyy9ecokyk3hik\"><em> 示例：</em></p>\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':increment', <a href=\"api/animations/query\" class=\"code-anchor\">query</a>('@counter', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()))\n</code-example>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ewdi1oos45vfwxkzpc2zx9e8s\">上述任何一项的序列除以逗号，这表明只要状态更改表达式之一匹配，就应该发生转换的动画</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6qxrfrjmuaadyy9ecokyk3hik\"><em> 示例：</em></p>\n<code-example language=\"typescript\">\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':increment, * =&gt; enabled, :enter', <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s ease', <a href=\"api/animations/keyframes\" class=\"code-anchor\">keyframes</a>([\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'scale(1)', offset: 0}),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'scale(1.1)', offset: 0.7}),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'scale(1)', offset: 1})\n  ]))),\n</code-example>\n</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d2ptslk15tc2iohxoo2dgk5tw\">另请注意，在这种情况下：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3ikaso8seehvxpj3ev2b4bn7i\"><code>void</code> 可用于表明此元素的不存在</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dzuhmuqi28cl54a56buhyb2vw\">星号可以作为匹配任何状态的通配符</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"ahf6cxkeq2fca8rmvar79829u\">（由于上述原因，<code>void =&gt; *</code> 等效于 <code>:enter</code>，并且 <code>* =&gt; void</code> 等效于 <code>:leave</code> ）</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2nw74h85hcicee5w32ke8i7il\"><code>true</code> 和 <code>false</code> 也分别匹配表达式值 <code>1</code> 和 <code>0</code> （但不匹配 <em>truthy</em> 和 <em>falsy</em> 值）</li>\n</ul>\n<div class=\"alert is-helpful\">\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"22vv4s3jwbfkrlrp0ufd52dc6\">要小心进入和离开元素，因为它们的过渡对开发人员来说是一个常见的陷阱。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cicxo33t62g6rymqto0topst9\">请注意，当具有触发器的元素进入 DOM 时，其\n<code>:enter</code>过渡总是会执行，但如果该元素与其父元素一起被移除（因为在过渡有机会执行之前将被\"悄无声息\"地移除），则不会执行其\n<code>:leave</code>过渡（唯一可能发生该过渡的方式是元素独自从 DOM 中退出）。</p>\n</div>\n<h3 id=\"animating-to-a-final-state\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7gzz7wu6829lqptmkdyniyz7v\">把动画播放到最终状态<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#animating-to-a-final-state\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aucdhk4tzm6g16uehd95bumor\">如果转换中的最后一步是对使用不带 <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a></code> 数据的计时值的 <code><a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>()</code>\n的调用，则该步骤会自动被认为是最终动画弧，以使元素达到最终状态，在这种情况下，Angular\n会自动添加或删除 CSS 样式以确保元素处于正确的最终状态。</p>\n<h3 id=\"usage-examples\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8ad1f152n875z0ulirkmy33df\">使用范例<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/animations/transition#usage-examples\"><i class=\"material-icons\">link</i></a></h3>\n<ul>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cuf5en6ohsfndwouumdnr0ld8\">根据触发器的表达式值应用的过渡动画</p>\n<code-example language=\"HTML\">\n&lt;div [@myAnimationTrigger]=\"myStatusExp\"&gt;\n ...\n&lt;/div&gt;\n</code-example>\n<code-example language=\"typescript\">\n<a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>(\"myAnimationTrigger\", [\n  ..., // states\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(\"on =&gt; off, open =&gt; closed\", <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>(500)),\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(\"* &lt;=&gt; error\", <a href=\"api/animations/query\" class=\"code-anchor\">query</a>('.indicator', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()))\n])\n</code-example>\n</li>\n<li>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bmvrrzex14sstorv0cdeu5q8f\">根据自定义逻辑应用的过渡动画，具体取决于触发器的表达式值和提供的参数</p>\n<code-example language=\"HTML\">\n&lt;div [@myAnimationTrigger]=\"{\n value: stepName,\n params: { target: currentTarget }\n}\"&gt;\n ...\n&lt;/div&gt;\n</code-example>\n<code-example language=\"typescript\">\n<a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>(\"myAnimationTrigger\", [\n  ..., // states\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(\n    (fromState, toState, _element, params) =&gt;\n      ['firststep', 'laststep'].includes(fromState.toLowerCase())\n      &amp;&amp; toState === params?.['target'],\n    <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s')\n  )\n])\n</code-example>\n</li>\n</ul>\n\n</section></div>\n</article>\n\n<!-- links to this doc:\n - api/animations\n - api/animations/AnimationMetadataType\n - api/animations/AnimationOptions\n - api/animations/AnimationTransitionMetadata\n - api/animations/animate\n - api/animations/group\n - api/animations/query\n - api/animations/sequence\n - api/animations/stagger\n - api/animations/state\n - api/animations/trigger\n - api/core/Component\n - api/router/ViewTransitionInfo\n - guide/add-an-animation\n - guide/animation-api-summary\n - guide/animation-transition-timing\n - guide/animations\n - guide/animations-attach-to-html-template\n - guide/complex-animation-sequences\n - guide/elements\n - guide/reusable-animations\n - guide/route-animations\n - guide/router-tutorial-toh\n - guide/transition-and-triggers\n-->\n<!-- links from this doc:\n - /api\n - api/animations\n - api/animations/AnimationMetadata\n - api/animations/AnimationOptions\n - api/animations/AnimationTransitionMetadata\n - api/animations/animate\n - api/animations/animateChild\n - api/animations/keyframes\n - api/animations/query\n - api/animations/style\n - api/animations/transition#animating-to-a-final-state\n - api/animations/transition#state-change-expression\n - api/animations/transition#transition\n - api/animations/transition#usage-examples\n - api/animations/transition#usage-notes\n - api/animations/trigger\n - https://github.com/ng-docs/angular-cn/tree/17.3.0-next.1/packages/animations/src/animation_metadata.ts#L889-L1049\n-->"}