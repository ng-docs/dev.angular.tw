{"id":"errors/NG0602","title":"NG0602: 在回應式上下文中呼叫了一個不允許的函式。","contents":"<div class=\"content\">\n\n  <h1 id=\"ng0602-a-disallowed-function-is-called-inside-a-reactive-context\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"64a5jsalovnuw2j3s53j1xtme\">NG0602: 在回應式上下文中呼叫了一個不允許的函式。<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0602#ng0602-a-disallowed-function-is-called-inside-a-reactive-context\"><i class=\"material-icons\">link</i></a></h1>\n\n  \n  \n\n  <div class=\"error-description\">\n    <h2 id=\"description\">說明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0602#description\"><i class=\"material-icons\">link</i></a></h2>\n    <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9pam5wxdc2m4p8re71imfjv0g\">在回應式上下文中呼叫不允許在其中執行的函式。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"qatdwgp10utfyomsu8nn98as\">例如，\n<code><a href=\"api/core/effect\" class=\"code-anchor\">effect</a></code>不可從\n<code><a href=\"api/core/computed\" class=\"code-anchor\">computed</a></code>中排程，也不可從正在執行的effect中排程。避免在樣板表示式中呼叫諸如\n<code><a href=\"api/core/effect\" class=\"code-anchor\">effect</a></code>的函式，因為這些函式在自己的回應式上下文中執行。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9sbh8zh45t0o86wlmgjq41vax\">計算表示式應該是純的。 純的意思是表示式不會觸發任何副作用。 副作用是諸如排程 \n<code><a href=\"api/core/afterRender\" class=\"code-anchor\">afterRender</a></code>、建立新 \n<code><a href=\"api/core/effect\" class=\"code-anchor\">effect</a></code>，或訂閱可觀察者等操作。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"byfdrsvkrix56o249jv2tjtmk\">一些操作在回應式上下文中被明確禁止，以避免常見陷阱。 舉例來說，在 \n<code><a href=\"api/core/computed\" class=\"code-anchor\">computed</a></code> 中使用 \n<code><a href=\"api/core/afterRender\" class=\"code-anchor\">afterRender</a></code> 將會在每次計算表示式求值時安排新的渲染鉤子。 這很可能不是預期的行為，可能會降低應用程式效能。</p>\n<h3 id=\"fixing-the-error\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"63eun1v9nz40i6edbyrmabm2e\">修復錯誤<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0602#fixing-the-error\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"16b1mfr1vgvjz7tjnztvr4iea\">此錯誤指南並非窮盡。 它涵蓋了一些常見情況以及如何解決錯誤。</p>\n<h4 id=\"afterrender\"><code><a href=\"api/core/afterRender\" class=\"code-anchor\">afterRender</a></code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0602#afterrender\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6u24t1h84or1di0kmk0640wtq\">將對 \n<code><a href=\"api/core/afterRender\" class=\"code-anchor\">afterRender</a></code> 的呼叫移到回應式上下文之外。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"el8xyysufjkmb1aagyol2w1hx\">在元件的類建構式函式中安排渲染後鉤子是一個不錯的選擇。 或者，使用 \n<code><a href=\"api/core/untracked\" class=\"code-anchor\">untracked</a></code> 來離開回應式上下文，並明確選擇退出此錯誤。</p>\n<h4 id=\"effect\"><code><a href=\"api/core/effect\" class=\"code-anchor\">effect</a></code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0602#effect\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"3pyijsph8a200md01gxseksd7\">將對 \n<code><a href=\"api/core/effect\" class=\"code-anchor\">effect</a></code> 的呼叫移到回應式上下文之外。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"481sk8l8i8pmragrwir1ipgon\">在 \n<code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a></code> 的類建構式函式中安排效果是一個不錯的選擇。</p>\n<h4 id=\"tosignal\"><code><a href=\"api/core/rxjs-interop/toSignal\" class=\"code-anchor\">toSignal</a></code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0602#tosignal\"><i class=\"material-icons\">link</i></a></h4>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1ceca6x30cxxgxoqhzxu3so05\">將對 \n<code><a href=\"api/core/rxjs-interop/toSignal\" class=\"code-anchor\">toSignal</a></code> 的呼叫移到回應式上下文之外。</p>\n<code-example language=\"typescript\">\nresult = <a href=\"api/core/computed\" class=\"code-anchor\">computed</a>(() =&gt; {\n  const dataSignal = <a href=\"api/core/rxjs-interop/toSignal\" class=\"code-anchor\">toSignal</a>(dataObservable$);\n  return doSomething(dataSignal());\n});\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"12gs1qq8sy4ccwssejcrw5e4y\">可以重構為：</p>\n<code-example language=\"typescript\">\ndataSignal = <a href=\"api/core/rxjs-interop/toSignal\" class=\"code-anchor\">toSignal</a>(dataObservable$);\nresult = <a href=\"api/core/computed\" class=\"code-anchor\">computed</a>(() =&gt; doSomething(dataSignal()));\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"40vl0y6em77e07afanx74y6q0\">或者，如果這不可行，考慮手動訂閱可觀察者。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dp5ja626flz0i6uegks72n069\">作為最後的手段，使用 \n<code><a href=\"api/core/untracked\" class=\"code-anchor\">untracked</a></code> 來離開回應式上下文。 要小心，離開回應式上下文可能導致訊號讀取在 \n<code><a href=\"api/core/untracked\" class=\"code-anchor\">untracked</a></code> 中被忽略。</p>\n\n  </div>\n\n\n  \n  <br>\n\n  <div class=\"debugging\">\n    <h2 id=\"debugging-the-error\">如何排除本錯誤<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0602#debugging-the-error\"><i class=\"material-icons\">link</i></a></h2>\n    <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"22u056v1y0s4usgkbmhmvfhny\">錯誤訊息提到了意外呼叫的函式。 在應用程式碼中查詢這個函式呼叫。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"b3v3z4cwwod12pagcp4m9ayuo\">或者，瀏覽器的堆疊跟蹤將顯示函式被呼叫的位置以及其位置。</p>\n\n  </div>\n  \n</div>\n\n<!-- links to this doc:\n - errors\n-->\n<!-- links from this doc:\n - api/core/Component\n - api/core/afterRender\n - api/core/computed\n - api/core/effect\n - api/core/rxjs-interop/toSignal\n - api/core/untracked\n - errors/NG0602#afterrender\n - errors/NG0602#debugging-the-error\n - errors/NG0602#description\n - errors/NG0602#effect\n - errors/NG0602#fixing-the-error\n - errors/NG0602#ng0602-a-disallowed-function-is-called-inside-a-reactive-context\n - errors/NG0602#tosignal\n-->"}