{"id":"errors/NG0503","title":"NG0503: 在序列化過程中，Angular 檢測到在Angular上下文之外建立並用於內容投影的DOM節點。","contents":"<div class=\"content\">\n\n  <h1 id=\"ng0503-during-serialization-angular-detected-dom-nodes-that-were-created-outside-of-angulars-context-and-used-for-content-projection\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"e6zaqoerhxeyfl6a90cwshy0m\">NG0503: 在序列化過程中，Angular 檢測到在Angular上下文之外建立並用於內容投影的DOM節點。<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0503#ng0503-during-serialization-angular-detected-dom-nodes-that-were-created-outside-of-angulars-context-and-used-for-content-projection\"><i class=\"material-icons\">link</i></a></h1>\n\n  \n  \n\n  <div class=\"error-description\">\n    <h2 id=\"description\">說明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0503#description\"><i class=\"material-icons\">link</i></a></h2>\n    <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"45cx1awo5zzoybt9u2498bhkf\">這個錯誤意味著在服務端序列化過程中，Angular 遇到了在 Angular 上下文之外建立的節點（即使用原生 DOM API 建立的），並發現這些節點是作為可投影節點提供的。它們可能是使用 <code>ViewContainerRef.createComponent</code> 或 <code><a href=\"api/core/createComponent\" class=\"code-anchor\">createComponent</a></code> API 提供的。Angular 水合不支援這種用法。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7y3d3wqt0871xkjy4t3o0x73k\">有關水合的更多訊息，請參閱<a href=\"guide/hydration\">本指南</a>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"arzd8spphyexzbiuw3akgoz23\">以下範例將引發錯誤。</p>\n<code-example language=\"typescript\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  standalone: true,\n  selector: 'dynamic',\n  template: `\n  &lt;ng-content /&gt;\n`,\n})\nclass DynamicComponent {\n}\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  standalone: true,\n  selector: 'app',\n  template: `&lt;div #target&gt;&lt;/div&gt;`,\n})\nclass SimpleComponent {\n  @<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>('target', {read: <a href=\"api/core/ViewContainerRef\" class=\"code-anchor\">ViewContainerRef</a>}) vcr!: <a href=\"api/core/ViewContainerRef\" class=\"code-anchor\">ViewContainerRef</a>;\n  envInjector = inject(<a href=\"api/core/EnvironmentInjector\" class=\"code-anchor\">EnvironmentInjector</a>);\n\n  ngAfterViewInit() {\n    const div = document.createElement('div');\n    const p = document.createElement('p');\n    // In this test we create DOM nodes outside of Angular context\n    // (i.e. not using Angular APIs) and try to content-project them.\n    // This is an unsupported <a href=\"api/forms/PatternValidator\" class=\"code-anchor\">pattern</a> and an exception will be thrown.\n    const compRef = <a href=\"api/core/createComponent\" class=\"code-anchor\">createComponent</a>(DynamicComponent, {\n      environmentInjector: this.envInjector,\n      projectableNodes: [[div, p]]\n    });\n  }\n}\n</code-example>\n\n  </div>\n\n\n  \n  <br>\n\n  <div class=\"debugging\">\n    <h2 id=\"debugging-the-error\">如何排除本錯誤<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0503#debugging-the-error\"><i class=\"material-icons\">link</i></a></h2>\n    <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5w04axivaw5recxwq81g1ajti\">開發人員控制台中的錯誤訊息應包含有關導致問題的應用程式 DOM 結構的特定部分的訊息。檢查應用程式的那部分是否存在與水合相關的錯誤，例如使用原生 API 的直接 DOM 操作。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bn26rlofxteuk19mikbmqofl9\">可能的解決方案之一是，你可以將 <code>ngSkipHydration</code> 屬性新增到你的元件宿主節點。</p>\n\n  </div>\n  \n</div>\n\n<!-- links to this doc:\n - errors\n-->\n<!-- links from this doc:\n - api/core/Component\n - api/core/EnvironmentInjector\n - api/core/ViewChild\n - api/core/ViewContainerRef\n - api/core/createComponent\n - api/forms/PatternValidator\n - errors/NG0503#debugging-the-error\n - errors/NG0503#description\n - errors/NG0503#ng0503-during-serialization-angular-detected-dom-nodes-that-were-created-outside-of-angulars-context-and-used-for-content-projection\n - guide/hydration\n-->"}