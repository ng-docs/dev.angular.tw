{"id":"errors/NG0913","title":"NG0913: 在运行时检测到影响性能的图像元素。","contents":"<div class=\"content\">\n\n  <h1 id=\"ng0913-performance-harming-image-elements-detected-at-runtime\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bnpdppjxtg5iechyunajh1f1p\">NG0913: 在运行时检测到影响性能的图像元素。<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0913#ng0913-performance-harming-image-elements-detected-at-runtime\"><i class=\"material-icons\">link</i></a></h1>\n\n  \n  \n\n  <div class=\"error-description\">\n    <h2 id=\"description\">说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0913#description\"><i class=\"material-icons\">link</i></a></h2>\n    <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9wu8mmp4ry4k3v7vf5u71sb8k\">应用程序加载后，Angular 会检查包含的 \n<code>&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a>&gt;</code> 元素是否存在性能问题。这个警告可以通过两种方式触发：</p>\n<h3 id=\"oversized-images\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bryh9s5bi26gmhnm2njkou35g\">超大图像<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0913#oversized-images\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5zav3pkemnrje6fbgk2beiosm\">当图像加载时，下载文件的「固有尺寸」会与页面上图像的实际尺寸进行比较。实际尺寸是使用应用 CSS 的图像的「渲染尺寸」乘以 \n<a href=\"https://web.dev/codelab-density-descriptors/#pixel-density\">像素设备比例</a> 计算出来的。如果下载的图像尺寸过大（任一维度超过 1200px），将触发此警告。下载超大图像可能会减慢页面加载速度，并对 \n<a href=\"https://web.dev/vitals/\">核心 Web 要素</a> 产生负面影响。</p>\n<h3 id=\"lazy-loaded-lcp-element\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5euhcnweb5va1vauiy047zpwr\">延迟加载的 LCP 元素<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0913#lazy-loaded-lcp-element\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2q815oiioh78e5rjn38xwq7a2\">加载时页面上最大的内容元素被称为「LCP 元素」，它与 \n<a href=\"https://web.dev/lcp/\">最大内容绘制</a> 相关，是核心 Web 要素之一。延迟加载 LCP 元素会严重影响页面性能。使用此策略时，浏览器必须完成布局计算以确定元素是否在视口中，然后开始下载图像。因此，当 Angular 检测到 LCP 元素被赋予 \n<code>loading=\"lazy\"</code> 属性时，将触发警告。</p>\n\n  </div>\n\n\n  \n  <br>\n\n  <div class=\"debugging\">\n    <h2 id=\"debugging-the-error\">如何排除本错误<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0913#debugging-the-error\"><i class=\"material-icons\">link</i></a></h2>\n    <p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"37w80rv2njvmgyd0jzuwvt8d4\">使用控制台警告中提供的图像网址找到相关的 \n<code>&lt;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a>&gt;</code> 元素。</p>\n<h3 id=\"ways-to-fix-oversized-images\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"34xcn59nqr66wd4snw4mnn01n\">修复超大图片的方法<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0913#ways-to-fix-oversized-images\"><i class=\"material-icons\">link</i></a></h3>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5g7cxrpvhah7r600pgfe6tvq1\">使用较小的源图片</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"66hcxcr4zk10a8qi22tczz9po\">如果不同布局需要多种尺寸，可以添加 \n<a href=\"https://web.dev/learn/design/responsive-images/#responsive-images-with-srcset\"><code>srcset</code></a>。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"78fb2p94w66fomhnv4mapczyj\">切换到使用 Angular 的内置图像指令（\n<a href=\"https://angular.io/api/common/NgOptimizedImage\"><code>NgOptimizedImage</code></a>），该指令会自动生成 \n<a href=\"https://angular.io/guide/image-directive#request-images-at-the-correct-size-with-automatic-srcset\">srcset</a>。</li>\n</ul>\n<h3 id=\"ways-to-fix-lazy-loaded-lcp-element\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"8wbisrydhtozxysz14bkuan4a\">修复懒加载的 LCP 元素的方法<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0913#ways-to-fix-lazy-loaded-lcp-element\"><i class=\"material-icons\">link</i></a></h3>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"babk1temft2r09tp51gu3ipyl\">将 \n<code>loading</code> 属性更改为不同的值，如 \n<code>\"eager\"</code>。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"dahj2yyxn359uh5rn1cg9ykrz\">切换到使用 Angular 的内置图像指令（\n<a href=\"https://angular.io/api/common/NgOptimizedImage\"><code>NgOptimizedImage</code></a>），可以轻松地 \n<a href=\"https://angular.io/guide/image-directive#step-4-mark-images-as-priority\">优先处理 LCP 图像</a>。</li>\n</ul>\n<h3 id=\"disabling-image-performance-warnings\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"mv96o4xpaybqe7cchw44drt1\">禁用图像性能警告<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG0913#disabling-image-performance-warnings\"><i class=\"material-icons\">link</i></a></h3>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"nbatxnnjn0p1lrnco6oga1b3\">可以通过在应用程序根部提供者处逐个禁用这两个警告，从而在整个站点上禁用。</p>\n<code-example format=\"typescript\" language=\"typescript\">\nproviders: [\n  {\n    provide: <a href=\"api/common/IMAGE_CONFIG\" class=\"code-anchor\">IMAGE_CONFIG</a>,\n    useValue: {\n      disableImageSizeWarning: true, \n      disableImageLazyLoadWarning: true\n    }\n  },\n],\n</code-example>\n\n  </div>\n  \n</div>\n\n<!-- links to this doc:\n - api/common\n - api/common/ImageConfig\n - errors\n-->\n<!-- links from this doc:\n - api/common/IMAGE_CONFIG\n - api/common/NgOptimizedImage\n - errors/NG0913#debugging-the-error\n - errors/NG0913#description\n - errors/NG0913#disabling-image-performance-warnings\n - errors/NG0913#lazy-loaded-lcp-element\n - errors/NG0913#ng0913-performance-harming-image-elements-detected-at-runtime\n - errors/NG0913#oversized-images\n - errors/NG0913#ways-to-fix-lazy-loaded-lcp-element\n - errors/NG0913#ways-to-fix-oversized-images\n - https://angular.io/api/common/NgOptimizedImage\n - https://angular.io/guide/image-directive#request-images-at-the-correct-size-with-automatic-srcset\n - https://angular.io/guide/image-directive#step-4-mark-images-as-priority\n - https://web.dev/codelab-density-descriptors/#pixel-density\n - https://web.dev/lcp/\n - https://web.dev/learn/design/responsive-images/#responsive-images-with-srcset\n - https://web.dev/vitals/\n-->"}