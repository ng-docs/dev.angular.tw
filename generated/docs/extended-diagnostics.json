{"id":"extended-diagnostics","title":"扩展诊断","contents":"<div class=\"content\">\n  <h1 id=\"extended-diagnostics\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5zie6428ckc1avtsii8jo1bwo\">扩展诊断<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#extended-diagnostics\"><i class=\"material-icons\">link</i></a></h1>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cue84r1644tpfz29058ck10cf\">有许多编码模式在技术上对编译器或运行时来说都同样是有效的，但却可能有复杂的细微差别或警告。这些模式可能不会具有开发人员预期的效果，而这通常会导致错误。Angular 编译器包含“扩展诊断”，可以识别其中的许多模式，以警告开发人员潜在的问题并在代码库中强制执行通用的最佳实践。</p>\n<h2 id=\"diagnostics\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"38luuz7k85eawc9hh9dz7uzk9\">诊断<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#diagnostics\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"9l1zg89gd9k81a3vbn6lswl1d\">目前，Angular 支持以下扩展诊断：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"bhn95w3mr3u0xmjih6ppex4q8\"><a href=\"extended-diagnostics/NG8101\">NG8101 - <code>invalidBananaInBox</code></a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7e17lsui6eigsoc7yslrby8q5\"><a href=\"extended-diagnostics/NG8102\">NG8102 - <code>nullishCoalescingNotNullable</code></a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"5ocllkavxnqibguhequh00kqh\"><a href=\"extended-diagnostics/NG8103\">NG8103 - <code>missingControlFlowDirective</code></a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7ifevzbvdjwj4ml0lfylntanf\"><a href=\"extended-diagnostics/NG8104\">NG8104 - <code>textAttributeNotBinding</code></a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"4il77r0iend2ft433kbcqwlcc\"><a href=\"extended-diagnostics/NG8105\">NG8105 - <code>missingNgForOfLet</code></a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d6tkrtqdn3rdkcjtqi7dijcn5\"><a href=\"extended-diagnostics/NG8106\">NG8106 - <code>suffixNotSupported</code></a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7v8ek2dks6wu5a9cy9k1voeox\"><a href=\"extended-diagnostics/NG8107\">NG8107 - <code>optionalChainNotNullable</code></a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"86flsnlvzwto5d4o9d1d7i85y\"><a href=\"extended-diagnostics/NG8108\">NG8108 - <code>skipHydrationNotStatic</code></a></li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"59p6zd03gm67ewzxmg4tpr6q3\"><a href=\"extended-diagnostics/NG8109\">NG8109 - <code>interpolatedSignalNotInvoked</code></a></li>\n</ul>\n<h2 id=\"configuration\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"27io2zcn0syxgd4dfu8paj1a1\">配置<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#configuration\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"aioz62uegejpsellcf8bvi7oo\">默认情况下，扩展诊断是警告，并且不会阻止编译。每个诊断都可以配置为：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"21qjp8k69nvm8gtp51tqr1vb4\"><code>warning</code>（默认）-编译器将诊断作为警告发出，但不会阻止编译。即使发出了警告，编译器仍然会以状态代码 0 退出。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2g6wgwm2j380cv48d82ctukr7\"><code>error</code> - 编译器将诊断作为错误发出并且编译失败。如果发出一个或多个错误，编译器将使用非零状态代码退出。</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"51krn1ar4jcz0vq6n7pihk5r9\"><code>suppress</code> - 编译器根本<em>不会</em>发出诊断信息。</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7yh3d95zbxicbt801z75sfhra\">这种检查的严重性可以在项目的 <code>tsconfig.json</code> 文件中配置：</p>\n<code-example format=\"jsonc\" language=\"jsonc\">\n\n{\n  \"angularCompilerOptions\": {\n    \"extendedDiagnostics\": {\n      // The categories to use for specific diagnostics.\n      \"checks\": {\n        // Maps check name to its category.\n        \"invalidBananaInBox\": \"suppress\"\n      },\n\n      // The category to use for any diagnostics not listed in `checks` above.\n      \"defaultCategory\": \"error\"\n    }\n  }\n}\n\n</code-example>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"2udvzu1im63urodnw64cyxfco\"><code>checks</code> 字段将单个诊断的名称映射到它们的关联类别。有关扩展诊断的完整列表以及用于配置它们的名称，请参阅<a href=\"extended-diagnostics#diagnostics\">诊断</a>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d7qqbgc9gqtoygx8evyybf5u5\"><code>defaultCategory</code> 字段用于 <code>checks</code> 下未显式列出的任何诊断。如果未设置，则此类诊断将被视为 <code>warning</code>。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"31l2yfmaarxfiv7we5h6lzc4t\">启用 <a href=\"guide/template-typecheck#strict-mode\"><code>strictTemplates</code></a> 时，将发出扩展诊断。这是为了让编译器更好地了解 Angular 模板类型并提供准确和有意义的诊断。</p>\n<h2 id=\"semantic-versioning\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"c7a223nhbuejy7bcyfggowhih\">语义化版本控制<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#semantic-versioning\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"j5blfqjslt54zjrtefk4svv0\">Angular 团队打算在 Angular 的<strong>次要</strong>版本中添加或启用新的扩展诊断（请参阅<a href=\"https://docs.npmjs.com/about-semantic-versioning\">semver</a>）。这意味着升级 Angular 可能会在你现有的代码库中显示新的警告。这使团队能够更快地交付特性，并让开发人员更容易访问扩展诊断。</p>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"cfzz31z6jz8vx12c3c6tggiyp\">但是，设置 <code>\"defaultCategory\": \"error\"</code> 会将此类警告升级为硬错误。这可能会导致次要版本升级引入编译错误，这可能被视为不符合 semver 的重大更改。任何新诊断都可以通过上述<a href=\"extended-diagnostics#configuration\">配置</a>被抑制或降级为警告，因此新诊断的影响对于默认将扩展诊断视为错误的项目应该是最小的。默认为错误是一个非常强大的工具；在确定 <code>error</code> 是否是你项目的正确默认值时，请注意这个 semver 警告。</p>\n<h2 id=\"new-diagnostics\" data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7k2s8zssud1vmfcrvkg55qh8j\">新的诊断<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"extended-diagnostics#new-diagnostics\"><i class=\"material-icons\">link</i></a></h2>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"37r96int53t35ezxi4vo1ni8b\">Angular 团队始终乐于接受有关可以添加的新诊断器的建议。扩展诊断通常应该：</p>\n<ul>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1np0q4x9ltuout8pnoszmd4p4\">使用 Angular 模板检测常见的、不够明显的开发人员失误</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"di84v74b82o9xaiplwnc9uy0r\">清楚地阐明为什么这种模式会导致错误或意外行为</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"d5tpbskamf3qv76pap51k823\">建议一个或多个明确的解决方案</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"1mufo3tztxg1da2e6tvm4vez6\">假阳性率低（最好是零）</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"64kzlxfl8zmzqi18ny0wsw096\">适用于绝大多数 Angular 应用程序（不专属于非官方库）</li>\n<li data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"7cocxfqyge22van5zwslmrf8q\">提高程序的正确性或性能（而不是风格，风格由 linter 负责）</li>\n</ul>\n<p data-ng_translator_product=\"100\" data-ng_translator_ref_id=\"6q1su5ympxirunj75hi3yfvbr\">如果你对符合这些标准的编译器检查有一个想法，请考虑提交<a href=\"https://github.com/angular/angular/issues/new?template=2-feature-request.yaml\">特性请求</a>。</p>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最后复查时间：Mon Feb 28 2022</div>\n</div>\n\n\n<!-- links to this doc:\n - extended-diagnostics/NG8101\n - extended-diagnostics/NG8102\n - extended-diagnostics/NG8104\n - extended-diagnostics/NG8106\n - extended-diagnostics/NG8107\n - extended-diagnostics/NG8108\n-->\n<!-- links from this doc:\n - extended-diagnostics#configuration\n - extended-diagnostics#diagnostics\n - extended-diagnostics#extended-diagnostics\n - extended-diagnostics#new-diagnostics\n - extended-diagnostics#semantic-versioning\n - extended-diagnostics/NG8101\n - extended-diagnostics/NG8102\n - extended-diagnostics/NG8103\n - extended-diagnostics/NG8104\n - extended-diagnostics/NG8105\n - extended-diagnostics/NG8106\n - extended-diagnostics/NG8107\n - extended-diagnostics/NG8108\n - extended-diagnostics/NG8109\n - guide/template-typecheck#strict-mode\n - https://docs.npmjs.com/about-semantic-versioning\n - https://github.com/angular/angular/issues/new?template=2-feature-request.yaml\n-->"}