<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1" data-ng_translator_product="100" data-ng_translator_ref_id="auzf06u77cgnbgulfcijlo2yr">水合不支持投影 DOM 节点</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/reference/errors/NG0503.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="319sguetlk9wdvueudmugu8hz">此错误意味着在服务器端序列化过程中，Angular 遇到了在 Angular 上下文之外创建的节点（即使用原生 DOM API），并发现这些节点被提供为可投影节点。它们可能是使用 
<code>ViewContainerRef.createComponent</code> 或 
<code>createComponent</code> API 提供的。Angular 水合不支持此用例。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7y3d3wqt0871xkjy4t3o0x73k">有关水合的更多信息，请参阅<a href="guide/hydration">本指南</a>。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="arzd8spphyexzbiuw3akgoz23">以下示例将引发错误。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'dynamic'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">template</span>: <span class="hljs-string">`</span></div><div class="hljs-ln-line">  &lt;ng-content /&gt;</div><div class="hljs-ln-line">`,</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicComponent</span> {</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div #target&gt;&lt;/div&gt;`</span>,</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@ViewChild</span>(<span class="hljs-string">'target'</span>, {<span class="hljs-attr">read</span>: <span class="hljs-title class_">ViewContainerRef</span>}) vcr!: <span class="hljs-title class_">ViewContainerRef</span>;</div><div class="hljs-ln-line">  envInjector = <span class="hljs-title function_">inject</span>(<span class="hljs-title class_">EnvironmentInjector</span>);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">ngAfterViewInit</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);</div><div class="hljs-ln-line">    <span class="hljs-keyword">const</span> p = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'p'</span>);</div><div class="hljs-ln-line">    <span class="hljs-comment">// In this test we create DOM nodes outside of Angular context</span></div><div class="hljs-ln-line">    <span class="hljs-comment">// (i.e. not using Angular APIs) and try to content-project them.</span></div><div class="hljs-ln-line">    <span class="hljs-comment">// This is an unsupported pattern and an exception will be thrown.</span></div><div class="hljs-ln-line">    <span class="hljs-keyword">const</span> compRef = <span class="hljs-title function_">createComponent</span>(<span class="hljs-title class_">DynamicComponent</span>, {</div><div class="hljs-ln-line">      <span class="hljs-attr">environmentInjector</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">envInjector</span>,</div><div class="hljs-ln-line">      <span class="hljs-attr">projectableNodes</span>: [[div, p]]</div><div class="hljs-ln-line">    });</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div></code>
    </pre>
  </div>
  <h2 id="debugging-the-error">
    <a href="#debugging-the-error" class="docs-anchor" tabindex="-1" aria-label="Link to Debugging the error" data-ng_translator_product="100" data-ng_translator_ref_id="6rp3v2icazrcg6696buxdgjjo">调试此错误</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5w04axivaw5recxwq81g1ajti">开发人员控制台中的错误消息应包含有关导致问题的应用程序 DOM 结构的特定部分的信息。检查应用程序的那部分是否存在与水合相关的错误，例如使用原生 API 的直接 DOM 操作。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bn26rlofxteuk19mikbmqofl9">可能的解决方案之一是，你可以将 <code>ngSkipHydration</code> 属性添加到你的组件宿主节点。</p>
