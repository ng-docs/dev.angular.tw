<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1" data-ng_translator_product="100" data-ng_translator_ref_id="3q4t2vob8qvc0bj45iceb1d8">可延迟视图</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/tutorials/learn-angular/steps/10-deferrable-views/README.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="b4s3zmd4rbjexjfqv5n49i41p">有时在应用开发中，会有很多组件需要在应用中引用，但由于各种原因，其中一些不需要立即加载。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="d4g1g4gyva1290yj2s0l8yxis">可能它们在可见视窗以下，或者是一些较重的组件，直到稍后才会交互。在这种情况下，我们可以使用延迟视图来稍后加载这些资源。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="4tih5jfz4pxkli74ruu9ja022">在此活动中，你将学习如何使用延迟视图来延迟加载组件模板的某个部分。</p>
<hr>


    <ol class="docs-steps">
      
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="add-a-defer-block-around-the-comments-component">
    <a href="#add-a-defer-block-around-the-comments-component" class="docs-anchor" tabindex="-1" aria-label="Link to Add a <code>@defer</code> block around the comments component" data-ng_translator_product="100" data-ng_translator_ref_id="bsnqjd6166s2wr2dm26tgnvrq">在评论组件周围添加 
<code>@defer</code> 控制块</a>
  </h3>
  
      <p data-ng_translator_product="100" data-ng_translator_ref_id="behw8uq5ufw9azyrmv4wllmd8">在你的应用中，博客文章页面在文章详情后有一个评论组件。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="2nblz2y563s4qmy4ocuwze6p">用 
<code>@defer</code> 控制块包裹评论组件以延迟加载它。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">@defer {</div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">comments</span> /&gt;</span></div><div class="hljs-ln-line">}</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="1h4eaampcqsz9f98giewnc18i">上面的代码是如何使用基本 
<code>@defer</code> 控制块的示例。默认情况下，
<code>@defer</code> 会在浏览器空闲时加载 
<code>comments</code> 组件。</p>

    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="add-a-placeholder">
    <a href="#add-a-placeholder" class="docs-anchor" tabindex="-1" aria-label="Link to Add a placeholder" data-ng_translator_product="100" data-ng_translator_ref_id="6muecu4xv0vmtm7lp35h69ulm">添加占位符</a>
  </h3>
  
      <p data-ng_translator_product="100" data-ng_translator_ref_id="3eohsgd94wkznercu0740qu5f">在 
<code>@defer</code> 控制块中添加 
<code>@placeholder</code> 控制块。
<code>@placeholder</code> 控制块是你放置在延迟加载开始前显示的 HTML 的地方。
<code>@placeholder</code> 控制块中的内容是急性加载的。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">@defer {</div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">comments</span> /&gt;</span></div><div class="hljs-ln-line highlighted">} @placeholder {</div><div class="hljs-ln-line highlighted">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Future comments<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line highlighted">}</div></code>
    </pre>
  </div>
    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="add-a-loading-block">
    <a href="#add-a-loading-block" class="docs-anchor" tabindex="-1" aria-label="Link to Add a loading block" data-ng_translator_product="100" data-ng_translator_ref_id="5kyucja3a48u3r5afcevfe5h">添加加载块</a>
  </h3>
  
      <p data-ng_translator_product="100" data-ng_translator_ref_id="8hauxdbx6kt3sbs1st29ed2xy">在 
<code>@defer</code> 控制块中添加一个 
<code>@loading</code> 控制块。
<code>@loading</code> 控制块是用来放置在延迟内容正在获取但尚未完成<em>时</em>显示的 HTML 的地方。
<code>@loading</code> 控制块中的内容是急性加载的。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">@defer {</div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">comments</span> /&gt;</span></div><div class="hljs-ln-line">} @placeholder {</div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Future comments<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line highlighted">} @loading {</div><div class="hljs-ln-line highlighted">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading comments...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line highlighted">}</div></code>
    </pre>
  </div>
    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="add-a-minimum-duration">
    <a href="#add-a-minimum-duration" class="docs-anchor" tabindex="-1" aria-label="Link to Add a minimum duration" data-ng_translator_product="100" data-ng_translator_ref_id="cslcfq12bdjoa58fmxlveaz0p">添加最短持续时间</a>
  </h3>
  
      <p data-ng_translator_product="100" data-ng_translator_ref_id="7dwq1102ukdkni53pzp9q9ite"><code>@placeholder</code> 和 
<code>@loading</code> 部分都有可选参数，用于防止在加载快速发生时出现闪烁现象。
<code>@placeholder</code> 有 
<code>minimum</code> 参数，而 
<code>@loading</code> 有 
<code>minimum</code> 和 
<code>after</code> 参数。为 
<code>@loading</code> 控制块添加一个 
<code>minimum</code> 持续时间，以便它至少渲染 2 秒。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">@defer {</div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">comments</span> /&gt;</span></div><div class="hljs-ln-line">} @placeholder {</div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Future comments<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line highlighted">} @loading (minimum 2s) {</div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Loading comments...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line">}</div></code>
    </pre>
  </div>
    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="add-a-viewport-trigger">
    <a href="#add-a-viewport-trigger" class="docs-anchor" tabindex="-1" aria-label="Link to Add a viewport trigger" data-ng_translator_product="100" data-ng_translator_ref_id="d7a3ucjc9mjpatmj0ddb8z1i4">添加视口触发器</a>
  </h3>
  
      <p data-ng_translator_product="100" data-ng_translator_ref_id="5n5quwaw1l0nbf50f3fj05vmp">可延迟视图有多个触发选项。添加一个视口触发器，以便内容在进入视口后延迟加载。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line highlighted">@defer (on viewport) {</div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">comments</span> /&gt;</span></div><div class="hljs-ln-line">}</div></code>
    </pre>
  </div>
    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="add-content">
    <a href="#add-content" class="docs-anchor" tabindex="-1" aria-label="Link to Add content" data-ng_translator_product="100" data-ng_translator_ref_id="b5ge8rziz3iunu6inuhjguw1g">添加内容</a>
  </h3>
  
      <p data-ng_translator_product="100" data-ng_translator_ref_id="2g4g226vz1p7io1ggzreonxm9">当你延迟页面较远处的内容时，视口触发器是最好的选择。因此，让我们为博客文章添加一些内容。你可以自己写，也可以复制下面的内容并放入 
<code>&lt;article&gt;</code> 元素中。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line highlighted"><span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Angular is my favorite framework, and this is why. Angular has the coolest deferrable view feature that makes defer loading content the easiest and most ergonomic it could possibly be. The Angular community is also filled with amazing contributors and experts that create excellent content. The community is welcoming and friendly, and it really is the best community out there.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>I can't express enough how much I enjoy working with Angular. It offers the best developer experience I've ever had. I love that the Angular team puts their developers first and takes care to make us very happy. They genuinely want Angular to be the best framework it can be, and they're doing such an amazing job at it, too. This statement comes from my heart and is not at all copied and pasted. In fact, I think I'll say these exact same things again a few times.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Angular is my favorite framework, and this is why. Angular has the coolest deferrable view feature that makes defer loading content the easiest and most ergonomic it could possibly be. The Angular community is also filled with amazing contributors and experts that create excellent content. The community is welcoming and friendly, and it really is the best community out there.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>I can't express enough how much I enjoy working with Angular. It offers the best developer experience I've ever had. I love that the Angular team puts their developers first and takes care to make us very happy. They genuinely want Angular to be the best framework it can be, and they're doing such an amazing job at it, too. This statement comes from my heart and is not at all copied and pasted. In fact, I think I'll say these exact same things again a few times.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Angular is my favorite framework, and this is why. Angular has the coolest deferrable view feature that makes defer loading content the easiest and most ergonomic it could possibly be. The Angular community is also filled with amazing contributors and experts that create excellent content. The community is welcoming and friendly, and it really is the best community out there.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>I can't express enough how much I enjoy working with Angular. It offers the best developer experience I've ever had. I love that the Angular team puts their developers first and takes care to make us very happy. They genuinely want Angular to be the best framework it can be, and they're doing such an amazing job at it, too. This statement comes from my heart and is not at all copied and pasted.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="bu4t2bfiz11x8a7pju6p583qi">添加此代码后，向下滚动查看延迟内容何时加载到视口中。</p>

    </li>
    
    </ol>
    <p><span class="docs-emoji" data-ng_translator_product="100" data-ng_translator_ref_id="ap07j0cuu3o1ap6nh0ap2urjt">在活动中，你已经学会了如何在应用中使用可延迟视图。做得好。🙌</span></p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="ckqt03tflphyfc6rbx79u14id">你还可以做更多事情，比如不同的触发器、预取和 
<code>@error</code> 控制块。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="6ovmrg71xg65erts8i51hwprf">如果你想了解更多，请查看 
<a href="guide/defer">可延迟视图的文档</a>。</p>
