<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4pxrl56gk118fi6bfkg0onlw">使用通道進行變更檢測</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/pipes/change-detection.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="dr5qrkukeim7tpo4a1xewvsgn">通道通常與資料繫結值一起使用，這些值可能會根據使用者操作而改變。如果資料是一個原語輸入值（如 
<code>String</code> 或 
<code>Number</code>）或作為輸入的物件引用（如 
<code>Date</code> 或 
<code>Array</code>），Angular 就會在檢測到該值變化時執行通道。</p>
<div class="docs-code-multifile" path="adev/src/content/examples/pipes/src/app/power-booster.component.ts">
    <div class="docs-code" path="adev/src/content/examples/pipes/src/app/exponential-strength.pipe.ts" visiblelines="10,11,12,13,14,15,16,17,18" header="src/app/exponential-strength.pipe.ts">
    <div class="docs-code-header"><h3>src/app/exponential-strength.pipe.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Pipe</span>, <span class="hljs-title class_">PipeTransform</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-comment">/*</span></div><div class="hljs-ln-line"> * Raise the value exponentially</div><div class="hljs-ln-line"> * Takes an exponent argument that defaults to 1.</div><div class="hljs-ln-line"> * Usage:</div><div class="hljs-ln-line"> *   value | exponentialStrength:exponent</div><div class="hljs-ln-line"> * Example:</div><div class="hljs-ln-line"> *   {{ 2 | exponentialStrength:10 }}</div><div class="hljs-ln-line"> *   formats to: 1024</div><div class="hljs-ln-line"> */</div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">name</span>: <span class="hljs-string">'exponentialStrength'</span>,</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExponentialStrengthPipe</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PipeTransform</span> {</div><div class="hljs-ln-line highlighted">  <span class="hljs-title function_">transform</span>(<span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span>, exponent = <span class="hljs-number">1</span>): <span class="hljs-built_in">number</span> {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(value, exponent);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><div class="docs-code" path="adev/src/content/examples/pipes/src/app/power-booster.component.ts" header="src/app/power-booster.component.ts">
    <div class="docs-code-header"><h3>src/app/power-booster.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {Component} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {ExponentialStrengthPipe} <span class="hljs-keyword">from</span> <span class="hljs-string">'./exponential-strength.pipe'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">@Component({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  selector: <span class="hljs-string">'app-power-booster'</span>,</div><div class="hljs-ln-line">  template: `<span class="language-javascript"></span></div><div class="hljs-ln-line">    &lt;h2&gt;<span class="hljs-title class_">Power</span> <span class="hljs-title class_">Booster</span>&lt;/h2&gt;</div><div class="hljs-ln-line">    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Super power boost: {{2 | exponentialStrength: 10}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></div><div class="hljs-ln-line">  `,</div><div class="hljs-ln-line">  imports: [ExponentialStrengthPipe],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PowerBoosterComponent</span> {}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    </div><p data-ng_translator_product="100" data-ng_translator_ref_id="3582tfubltp7lv410w74ap3f8"><code>exponentialStrength</code> 通道在使用者更改值或指數時每次都會執行。請參見上面突出顯示的行。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3tjfetf3opzedk9414uqap4se">Angular 會檢測每次變更，並立即執行該通道。對於原始輸入值，這很好。但是，如果要在複合物件中更改某些<em>內部值</em>（比如日期中的月份、陣列中的元素或物件中的屬性），就需要瞭解變更檢測的工作原理，以及如何使用 <code>impure</code>（非純）通道。</p>

  <h2 id="how-change-detection-works">
    <a href="#how-change-detection-works" class="docs-anchor" tabindex="-1" aria-label="Link to How change detection works" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bbzojdcj45x3zth0q6q7xlk56">變更檢測的工作原理</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="c9st6a2n7zl2mnfx3cojm9c7y">Angular 在每次 DOM 事件後（每次按鍵、滑鼠移動、計時器滴答和伺服器回應）會在變更檢測過程中尋找資料繫結值的變化。以下範例不使用通道，展示了 Angular 如何使用其預設的變更檢測策略來監控並更新 
<code>heroes</code> 陣列中每個英雄的顯示。範例標籤顯示如下：</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left" data-ng_translator_product="100" data-ng_translator_ref_id="8n2c7wfntpyw9gnmnqx5bqxht">檔案</th>
<th align="left" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3prlgfrx5eo2xqncnnob4crxu">詳情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><code>flying-heroes.component.html (v1)</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="f0zzpk6wvu3z8z6f1ioumzjyc"><code>*ngFor</code> 重複器顯示英雄的名字。</td>
</tr>
<tr>
<td align="left"><code>flying-heroes.component.ts (v1)</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="1ewqiqo0qxa8oibjoi9adgvd9">提供英雄，將英雄新增到陣列中，並重置陣列。</td>
</tr>

      </tbody>
    </table>
  </div>
  <div class="docs-code-multifile">
    <div class="docs-code" path="adev/src/content/examples/pipes/src/app/flying-heroes.component.html" visiblelines="2,3,11,23,24,25" header="src/app/flying-heroes.component.html (v1)">
    <div class="docs-code-header"><h3>src/app/flying-heroes.component.html (v1)</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">title</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Create a new hero and press enter to add it to the list. <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"hero-name"</span>&gt;</span>New hero name: <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> #<span class="hljs-attr">box</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"hero-name"</span> (<span class="hljs-attr">keyup.enter</span>)=<span class="hljs-string">"addHero(box.value); box.value=''"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"hero name"</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"can-fly"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> [(<span class="hljs-attr">ngModel</span>)]=<span class="hljs-string">"canFly"</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"can-fly"</span>&gt;</span>Hero can fly<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mutate"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> [(<span class="hljs-attr">ngModel</span>)]=<span class="hljs-string">"mutate"</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"mutate"</span>&gt;</span>Mutate array<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"reset()"</span>&gt;</span>Reset list of heroes<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Heroes who fly (piped)<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flyers"</span>&gt;</span></div><div class="hljs-ln-line">  @for (hero of (heroes | flyingHeroes); track hero) {</div><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-template-variable">{{ <span class="hljs-name">hero.name</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>All Heroes (no pipe)<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"all"</span>&gt;</span></div><div class="hljs-ln-line">  @for (hero of heroes; track hero) {</div><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-template-variable">{{ <span class="hljs-name">hero.name</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><div class="docs-code" path="adev/src/content/examples/pipes/src/app/flying-heroes.component.ts" visiblelines="20,21,22,26,27,28,29,30,31,32,33,34,35,39,44,45,46,47,48,49" header="src/app/flying-heroes.component.ts (v1)">
    <div class="docs-code-header"><h3>src/app/flying-heroes.component.ts (v1)</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">CommonModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">FormsModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">FlyingHeroesPipe</span>, <span class="hljs-title class_">FlyingHeroesImpurePipe</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./flying-heroes.pipe'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-variable constant_">HEROES</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./heroes'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-flying-heroes'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./flying-heroes.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CommonModule</span>, <span class="hljs-title class_">FormsModule</span>, <span class="hljs-title class_">FlyingHeroesPipe</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">styles</span>: [</div><div class="hljs-ln-line">    <span class="hljs-string">`</span></div><div class="hljs-ln-line">    #flyers, #all {font-style: italic}</div><div class="hljs-ln-line">    button {display: block}</div><div class="hljs-ln-line">    input {margin: .25rem .25rem .5rem 0;}</div><div class="hljs-ln-line">  `,</div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlyingHeroesComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-attr">heroes</span>: <span class="hljs-built_in">any</span>[] = [];</div><div class="hljs-ln-line">  canFly = <span class="hljs-literal">true</span>;</div><div class="hljs-ln-line">  mutate = <span class="hljs-literal">true</span>;</div><div class="hljs-ln-line">  title = <span class="hljs-string">'Flying Heroes (pure pipe)'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reset</span>();</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">addHero</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {</div><div class="hljs-ln-line">    name = name.<span class="hljs-title function_">trim</span>();</div><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!name) {</div><div class="hljs-ln-line">      <span class="hljs-keyword">return</span>;</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">    <span class="hljs-keyword">const</span> hero = {name, <span class="hljs-attr">canFly</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">canFly</span>};</div><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutate</span>) {</div><div class="hljs-ln-line">      <span class="hljs-comment">// Pure pipe won't update display because heroes array reference is unchanged</span></div><div class="hljs-ln-line">      <span class="hljs-comment">// Impure pipe will display</span></div><div class="hljs-ln-line">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">heroes</span>.<span class="hljs-title function_">push</span>(hero);</div><div class="hljs-ln-line">    } <span class="hljs-keyword">else</span> {</div><div class="hljs-ln-line">      <span class="hljs-comment">// Pipe updates display because heroes array is a new object</span></div><div class="hljs-ln-line">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">heroes</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">heroes</span>.<span class="hljs-title function_">concat</span>(hero);</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">reset</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heroes</span> = <span class="hljs-variable constant_">HEROES</span>.<span class="hljs-title function_">slice</span>();</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-comment">////// Identical except for impure pipe //////</span></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-flying-heroes-impure'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./flying-heroes-impure.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CommonModule</span>, <span class="hljs-title class_">FormsModule</span>, <span class="hljs-title class_">FlyingHeroesImpurePipe</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">styles</span>: [</div><div class="hljs-ln-line">    <span class="hljs-string">'#flyers, #all {font-style: italic}'</span>,</div><div class="hljs-ln-line">    <span class="hljs-string">'button {display: block}'</span>,</div><div class="hljs-ln-line">    <span class="hljs-string">'input {margin: .25rem .25rem .5rem 0;}'</span>,</div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlyingHeroesImpureComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">FlyingHeroesComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-keyword">override</span> title = <span class="hljs-string">'Flying Heroes (impure pipe)'</span>;</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9s86ytsok49oqu6xu5qqsvlu3">每次使用者新增一個英雄時，Angular 都會更新顯示內容。如果使用者點選了 <strong>Reset</strong> 按鈕，Angular 就會用原來這些英雄組成的新陣列來替換 <code>heroes</code>，並更新顯示。如果你新增刪除或更改了某個英雄的能力，Angular 也會檢測這些變化並更新顯示。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="ajyrsh4yx75249elt1dr1yjfe">然而，如果對於每次更改都執行一個通道來更新顯示，就會降低你應用的效能。因此，Angular 會使用更快的變更檢測演算法來執行通道，如下一節所述。</p>

  <h2 id="detecting-pure-changes-to-primitives-and-object-references">
    <a href="#detecting-pure-changes-to-primitives-and-object-references" class="docs-anchor" tabindex="-1" aria-label="Link to Detecting pure changes to primitives and object references" data-ng_translator_product="100" data-ng_translator_ref_id="22of8qm26xosc9yxgzxgywv1u">檢測原始型別和物件引用的純變更</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="1gx03obvcw9vgqct0nic08bt3">預設情況下，通道被定義為
<em>純</em>的，這樣 Angular 只有在檢測到輸入值或引數的
<em>純變化</em>時才會執行通道。純變化要麼是對原語輸入值（如 
<code>String</code>、
<code>Number</code>、
<code>Boolean</code> 或 
<code>Symbol</code>）的變化，要麼是物件引用（如 
<code>Date</code>、
<code>Array</code>、
<code>Function</code> 或 
<code>Object</code>）的變化。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2f5x4nes859ke5pzcx5buybjm">純通道必須使用純函式，它能處理輸入並回傳沒有副作用的值。換句話說，給定相同的輸入，純函式應該總是回傳相同的輸出。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="d6zg96hpnkk6bqosd41e9q12n">對於純通道，Angular 會忽略物件和數組內部的變化，因為檢查原語值或物件引用比對物件內部的差異進行深度檢查要快得多。Angular 可以快速確定是否可以跳過執行通道和更新檢視。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="acv61xfg0y6cke9psah3uu88s">然而，輸入為數組的純通道可能不會按預期工作。為了說明這個問題，請將之前的範例更改為過濾出僅能飛行的英雄。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="afqbr3odahazkiykqrbwqx7t0">為此，請考慮我們在 
<code>*ngFor</code> 重複器中使用 
<code>FlyingHeroesPipe</code>，如以下程式碼所示。範例標籤顯示如下：</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left" data-ng_translator_product="100" data-ng_translator_ref_id="8n2c7wfntpyw9gnmnqx5bqxht">檔案</th>
<th align="left" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3prlgfrx5eo2xqncnnob4crxu">詳情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left">flying-heroes.component.html</td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="d8qa5aea48h54s8sut33l5s3j">使用新通道的範本。</td>
</tr>
<tr>
<td align="left">flying-heroes.pipe.ts</td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="2zwozm19kw8e9rwcuvwxroia">包含過濾飛行英雄的自定義通道的檔案。</td>
</tr>

      </tbody>
    </table>
  </div>
  <div class="docs-code-multifile">
    <div class="docs-code" path="adev/src/content/examples/pipes/src/app/flying-heroes.component.html" visiblelines="16,17,18" header="src/app/flying-heroes.component.html">
    <div class="docs-code-header"><h3>src/app/flying-heroes.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">title</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Create a new hero and press enter to add it to the list. <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"hero-name"</span>&gt;</span>New hero name: <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> #<span class="hljs-attr">box</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"hero-name"</span> (<span class="hljs-attr">keyup.enter</span>)=<span class="hljs-string">"addHero(box.value); box.value=''"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"hero name"</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"can-fly"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> [(<span class="hljs-attr">ngModel</span>)]=<span class="hljs-string">"canFly"</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"can-fly"</span>&gt;</span>Hero can fly<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mutate"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> [(<span class="hljs-attr">ngModel</span>)]=<span class="hljs-string">"mutate"</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"mutate"</span>&gt;</span>Mutate array<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"reset()"</span>&gt;</span>Reset list of heroes<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Heroes who fly (piped)<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flyers"</span>&gt;</span></div><div class="hljs-ln-line">  @for (hero of (heroes | flyingHeroes); track hero) {</div><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-template-variable">{{ <span class="hljs-name">hero.name</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>All Heroes (no pipe)<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"all"</span>&gt;</span></div><div class="hljs-ln-line">  @for (hero of heroes; track hero) {</div><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-template-variable">{{ <span class="hljs-name">hero.name</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><div class="docs-code" path="adev/src/content/examples/pipes/src/app/flying-heroes.pipe.ts" visiblelines="0,1,2,3,4,5,6,7,8,9,10,11,12" header="src/app/flying-heroes.pipe.ts">
    <div class="docs-code-header"><h3>src/app/flying-heroes.pipe.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">Pipe</span>, <span class="hljs-type">PipeTransform</span>} from '<span class="hljs-meta">@angular</span>/core';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">Hero</span>} from './heroes';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  name: 'flyingHeroes',</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyingHeroesPipe</span> <span class="hljs-title">implements</span> <span class="hljs-title">PipeTransform</span> </span>{</div><div class="hljs-ln-line">  transform(allHeroes: <span class="hljs-type">Hero</span>[]) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> allHeroes.filter((hero) =&gt; hero.canFly);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-comment">/////// Identical except for the pure flag</span></div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  name: 'flyingHeroesImpure',</div><div class="hljs-ln-line">  pure: <span class="hljs-literal">false</span>,</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyingHeroesImpurePipe</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FlyingHeroesPipe</span> </span>{}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    </div><p data-ng_translator_product="100" data-ng_translator_ref_id="1i2odorpt39ulmdngms7cjrql">現在應用表現出意外行為：當用戶新增飛行英雄時，沒有一個出現在「能飛的英雄」下。這是因為新增英雄的程式碼是透過將其推入作為 
<code>flyingHeroes</code> 通道輸入的 
<code>heroes</code> 陣列中。</p>
<div class="docs-code" path="adev/src/content/examples/pipes/src/app/flying-heroes.component.ts" visiblelines="39" header="src/app/flying-heroes.component.ts">
    <div class="docs-code-header"><h3>src/app/flying-heroes.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">CommonModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">FormsModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">FlyingHeroesPipe</span>, <span class="hljs-title class_">FlyingHeroesImpurePipe</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./flying-heroes.pipe'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-variable constant_">HEROES</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./heroes'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-flying-heroes'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./flying-heroes.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CommonModule</span>, <span class="hljs-title class_">FormsModule</span>, <span class="hljs-title class_">FlyingHeroesPipe</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">styles</span>: [</div><div class="hljs-ln-line">    <span class="hljs-string">`</span></div><div class="hljs-ln-line">    #flyers, #all {font-style: italic}</div><div class="hljs-ln-line">    button {display: block}</div><div class="hljs-ln-line">    input {margin: .25rem .25rem .5rem 0;}</div><div class="hljs-ln-line">  `,</div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlyingHeroesComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-attr">heroes</span>: <span class="hljs-built_in">any</span>[] = [];</div><div class="hljs-ln-line">  canFly = <span class="hljs-literal">true</span>;</div><div class="hljs-ln-line">  mutate = <span class="hljs-literal">true</span>;</div><div class="hljs-ln-line">  title = <span class="hljs-string">'Flying Heroes (pure pipe)'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reset</span>();</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">addHero</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {</div><div class="hljs-ln-line">    name = name.<span class="hljs-title function_">trim</span>();</div><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!name) {</div><div class="hljs-ln-line">      <span class="hljs-keyword">return</span>;</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">    <span class="hljs-keyword">const</span> hero = {name, <span class="hljs-attr">canFly</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">canFly</span>};</div><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">mutate</span>) {</div><div class="hljs-ln-line">      <span class="hljs-comment">// Pure pipe won't update display because heroes array reference is unchanged</span></div><div class="hljs-ln-line">      <span class="hljs-comment">// Impure pipe will display</span></div><div class="hljs-ln-line">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">heroes</span>.<span class="hljs-title function_">push</span>(hero);</div><div class="hljs-ln-line">    } <span class="hljs-keyword">else</span> {</div><div class="hljs-ln-line">      <span class="hljs-comment">// Pipe updates display because heroes array is a new object</span></div><div class="hljs-ln-line">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">heroes</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">heroes</span>.<span class="hljs-title function_">concat</span>(hero);</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">reset</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">heroes</span> = <span class="hljs-variable constant_">HEROES</span>.<span class="hljs-title function_">slice</span>();</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-comment">////// Identical except for impure pipe //////</span></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-flying-heroes-impure'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./flying-heroes-impure.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CommonModule</span>, <span class="hljs-title class_">FormsModule</span>, <span class="hljs-title class_">FlyingHeroesImpurePipe</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">styles</span>: [</div><div class="hljs-ln-line">    <span class="hljs-string">'#flyers, #all {font-style: italic}'</span>,</div><div class="hljs-ln-line">    <span class="hljs-string">'button {display: block}'</span>,</div><div class="hljs-ln-line">    <span class="hljs-string">'input {margin: .25rem .25rem .5rem 0;}'</span>,</div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlyingHeroesImpureComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">FlyingHeroesComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-keyword">override</span> title = <span class="hljs-string">'Flying Heroes (impure pipe)'</span>;</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="7knrnx8ghiqgvshak4hkkh7gz">變更檢測器忽略了陣列元素內部的變化，因此通道不會執行。Angular 忽略陣列元素變化的原因是陣列的
<em>引用</em>沒有改變。因為陣列是相同的，Angular 不會更新顯示。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="eetxjsoonwn60su3awpewj79j">獲得所需行為的方法之一是更改物件引用本身。可以用一個包含新更改過的元素的新陣列替換該陣列，然後把這個新陣列作為輸入傳給通道。在上面的例子中，你可以建立一個附加了新英雄的陣列，並把它賦值給 <code>heroes</code>。Angular 檢測到了這個陣列引用的變化，並執行了該通道。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="cab5n6u7lxpojp8qmxz2zmllo">總結一下，如果你變更輸入陣列，純通道不會執行。如果你
<em>替換</em>輸入陣列，通道會執行並更新顯示。作為替代方案，可以使用
<em>非純</em>通道來檢測複合物件（如數組）內部的變化，具體請參見下一節。</p>

  <h2 id="detecting-impure-changes-within-composite-objects">
    <a href="#detecting-impure-changes-within-composite-objects" class="docs-anchor" tabindex="-1" aria-label="Link to Detecting impure changes within composite objects" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="80ydb5lyb6qfa13b6810naahj">檢測複合物件中的非純變更</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="147tz57km9jwdpe3y93thvhqt">要在複合物件<em>內部</em>（例如陣列的一個元素）發生變化後執行自定義通道，你需要將通道定義為
<code>impure</code>以檢測非純變化。Angular 每次檢測到變化時（例如每次按鍵或滑鼠事件）都會執行非純通道。</p>

    <div class="docs-alert docs-alert-important">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="9ql96bkfcunq5nlb1d7do193e"><strong>重要：</strong>雖然非純通道可能很有用，但要小心使用。 一個長時間執行的非純通道可能會顯著拖慢你的應用。</p>

    </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7yo5vbppn0adok3sfup5b6l6m">透過把 <code>pure</code> 標誌設定為 <code>false</code> 來把通道設定成非純的：</p>
<div class="docs-code" path="adev/src/content/examples/pipes/src/app/flying-heroes.pipe.ts" visiblelines="15,16,17,18,19" header="src/app/flying-heroes.pipe.ts">
    <div class="docs-code-header"><h3>src/app/flying-heroes.pipe.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">Pipe</span>, <span class="hljs-type">PipeTransform</span>} from '<span class="hljs-meta">@angular</span>/core';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">Hero</span>} from './heroes';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  name: 'flyingHeroes',</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyingHeroesPipe</span> <span class="hljs-title">implements</span> <span class="hljs-title">PipeTransform</span> </span>{</div><div class="hljs-ln-line">  transform(allHeroes: <span class="hljs-type">Hero</span>[]) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> allHeroes.filter((hero) =&gt; hero.canFly);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-comment">/////// Identical except for the pure flag</span></div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  name: 'flyingHeroesImpure',</div><div class="hljs-ln-line highlighted">  pure: <span class="hljs-literal">false</span>,</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyingHeroesImpurePipe</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FlyingHeroesPipe</span> </span>{}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="1gkbs92jx50ph1oq2mmy0q4g6">下面的程式碼顯示了 <code>FlyingHeroesImpurePipe</code> 的完整實現，它擴充套件了 <code>FlyingHeroesPipe</code> 以繼承其屬性。這個例子表明你不需要修改其他任何東西 - 唯一的區別就是在通道元資料中把 <code>pure</code> 標誌設定為 <code>false</code>。</p>
<div class="docs-code-multifile">
    <div class="docs-code" path="adev/src/content/examples/pipes/src/app/flying-heroes.pipe.ts" visiblelines="15,16,17,18,19,20" header="src/app/flying-heroes.pipe.ts (FlyingHeroesImpurePipe)">
    <div class="docs-code-header"><h3>src/app/flying-heroes.pipe.ts (FlyingHeroesImpurePipe)</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">Pipe</span>, <span class="hljs-type">PipeTransform</span>} from '<span class="hljs-meta">@angular</span>/core';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">Hero</span>} from './heroes';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  name: 'flyingHeroes',</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyingHeroesPipe</span> <span class="hljs-title">implements</span> <span class="hljs-title">PipeTransform</span> </span>{</div><div class="hljs-ln-line">  transform(allHeroes: <span class="hljs-type">Hero</span>[]) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> allHeroes.filter((hero) =&gt; hero.canFly);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-comment">/////// Identical except for the pure flag</span></div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  name: 'flyingHeroesImpure',</div><div class="hljs-ln-line">  pure: <span class="hljs-literal">false</span>,</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyingHeroesImpurePipe</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FlyingHeroesPipe</span> </span>{}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><div class="docs-code" path="adev/src/content/examples/pipes/src/app/flying-heroes.pipe.ts" visiblelines="0,1,2,3,4,5,6,7,8,9,10,11,12" header="src/app/flying-heroes.pipe.ts (FlyingHeroesPipe)">
    <div class="docs-code-header"><h3>src/app/flying-heroes.pipe.ts (FlyingHeroesPipe)</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">Pipe</span>, <span class="hljs-type">PipeTransform</span>} from '<span class="hljs-meta">@angular</span>/core';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">Hero</span>} from './heroes';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  name: 'flyingHeroes',</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyingHeroesPipe</span> <span class="hljs-title">implements</span> <span class="hljs-title">PipeTransform</span> </span>{</div><div class="hljs-ln-line">  transform(allHeroes: <span class="hljs-type">Hero</span>[]) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> allHeroes.filter((hero) =&gt; hero.canFly);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-comment">/////// Identical except for the pure flag</span></div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  name: 'flyingHeroesImpure',</div><div class="hljs-ln-line">  pure: <span class="hljs-literal">false</span>,</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyingHeroesImpurePipe</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FlyingHeroesPipe</span> </span>{}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    </div><p data-ng_translator_product="100" data-ng_translator_ref_id="5dvpopo78k4i79jluc575rwb9"><code>FlyingHeroesImpurePipe</code>是一個合理的非純通道候選者，因為
<code>transform</code>函式是簡單且快速的：</p>
<div class="docs-code" path="adev/src/content/examples/pipes/src/app/flying-heroes.pipe.ts" visiblelines="10" header="src/app/flying-heroes.pipe.ts (filter)">
    <div class="docs-code-header"><h3>src/app/flying-heroes.pipe.ts (filter)</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">Pipe</span>, <span class="hljs-type">PipeTransform</span>} from '<span class="hljs-meta">@angular</span>/core';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">Hero</span>} from './heroes';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  name: 'flyingHeroes',</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyingHeroesPipe</span> <span class="hljs-title">implements</span> <span class="hljs-title">PipeTransform</span> </span>{</div><div class="hljs-ln-line">  transform(allHeroes: <span class="hljs-type">Hero</span>[]) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> allHeroes.filter((hero) =&gt; hero.canFly);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-comment">/////// Identical except for the pure flag</span></div><div class="hljs-ln-line"><span class="hljs-meta">@Pipe</span>({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  name: 'flyingHeroesImpure',</div><div class="hljs-ln-line">  pure: <span class="hljs-literal">false</span>,</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FlyingHeroesImpurePipe</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FlyingHeroesPipe</span> </span>{}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8wras6tu5oymhfblfmykvisxf">你可以從 <code>FlyingHeroesComponent</code> 派生一個 <code>FlyingHeroesImpureComponent</code>。如下麵的程式碼所示，只有範本中的通道發生了變化。</p>
<div class="docs-code" path="adev/src/content/examples/pipes/src/app/flying-heroes-impure.component.html" visiblelines="16,17,18" header="src/app/flying-heroes-impure.component.html (excerpt)">
    <div class="docs-code-header"><h3 data-ng_translator_product="100" data-ng_translator_ref_id="4bmutjbgfj6wr9d5drcew3l0r">src/app/flying-heroes-impure.component.html (片段)</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span></span><span class="hljs-template-variable">{{ <span class="hljs-name">title</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"hero-name"</span>&gt;</span>New hero: <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"hero-name"</span> #<span class="hljs-attr">box</span> (<span class="hljs-attr">keyup.enter</span>)=<span class="hljs-string">"addHero(box.value); box.value=''"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"hero name"</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"can-fly"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> [(<span class="hljs-attr">ngModel</span>)]=<span class="hljs-string">"canFly"</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"can-fly"</span>&gt;</span>can fly<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mutate"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> [(<span class="hljs-attr">ngModel</span>)]=<span class="hljs-string">"mutate"</span>&gt;</span>Mutate array</div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"reset()"</span>&gt;</span>Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Heroes who fly (piped)<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flyers"</span>&gt;</span></div><div class="hljs-ln-line">  @for (hero of (heroes | flyingHeroesImpure); track hero) {</div><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-template-variable">{{ <span class="hljs-name">hero.name</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>All Heroes (no pipe)<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"all"</span>&gt;</span></div><div class="hljs-ln-line">  @for (hero of heroes; track hero) {</div><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-template-variable">{{ <span class="hljs-name">hero.name</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>