<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1" data-ng_translator_product="100" data-ng_translator_ref_id="3dusl85b8uq8bewp993jz4y5q">信号输入</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/signals/inputs.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="ya9zgz97r1tvd3ubmfk2ucym">信号输入允许从父组件绑定值。这些值使用 
<code>Signal</code> 暴露，并且可以在组件的生命周期内发生变化。</p>

    <div class="docs-alert docs-alert-helpful">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="70tbr7i7alzipfdzdr1a76h7a"><strong>提示：</strong>信号输入目前处于 
<a href="/reference/releases#developer-preview">开发者预览</a> 阶段。</p>

    </div>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="5rdn0kyjnlii2ipy2u2dvsxog">Angular 支持两种输入变体：</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="817x91ekcnofjvld8abyj73vh"><strong>可选输入</strong> 输入默认是可选的，除非你使用 
<code>input.required</code>。你可以指定一个明确的初始值，否则 Angular 将隐式使用 
<code>undefined</code>。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="4sxk4weav8l2cppwopfc9zv5s"><strong>必要输入</strong> 必要输入始终具有给定输入类型的值。它们使用 
<code>input.required</code> 函数声明。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>, input} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({...})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComp</span> {</div><div class="hljs-ln-line">  <span class="hljs-comment">// optional</span></div><div class="hljs-ln-line">  firstName = input&lt;<span class="hljs-built_in">string</span>&gt;();         <span class="hljs-comment">// InputSignal&lt;string|undefined&gt;</span></div><div class="hljs-ln-line">  age = <span class="hljs-title function_">input</span>(<span class="hljs-number">0</span>);                      <span class="hljs-comment">// InputSignal&lt;number&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-comment">// required</span></div><div class="hljs-ln-line">  lastName = input.<span class="hljs-property">required</span>&lt;<span class="hljs-built_in">string</span>&gt;(); <span class="hljs-comment">// InputSignal&lt;string&gt;</span></div><div class="hljs-ln-line">}</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="4mrols8mwm090uh6cj2vzhztd">每当你使用 
<code>input</code> 或 
<code>input.required</code> 函数作为类成员的初始化器时，Angular 会自动识别输入。</p>

  <h2 id="aliasing-an-input">
    <a href="#aliasing-an-input" class="docs-anchor" tabindex="-1" aria-label="Link to Aliasing an input" data-ng_translator_product="100" data-ng_translator_ref_id="4bqi2fpzb1ksywzc5ygbbkg8w">为输入设别名</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="d5wrizptsinkuq23fxljm6c98">Angular 使用类成员名称作为输入名称。你可以为输入设别名，以使它们的公开名称不同。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentDirective</span> {</div><div class="hljs-ln-line">  age = <span class="hljs-title function_">input</span>(<span class="hljs-number">0</span>, {<span class="hljs-attr">alias</span>: <span class="hljs-string">'studentAge'</span>});</div><div class="hljs-ln-line">}</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="dgwmvx3d5g3t862os8mmqmqnl">这允许用户使用 
<code>[studentAge]</code> 绑定到你的输入，同时在你的组件内部，你可以使用 
<code>this.age</code> 访问输入值。</p>

  <h2 id="using-in-templates">
    <a href="#using-in-templates" class="docs-anchor" tabindex="-1" aria-label="Link to Using in templates" data-ng_translator_product="100" data-ng_translator_ref_id="7c8ptqg50lt0wk8it42p7q5kq">在模板中使用</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="2m85vm0inu4nvhme7m1m4dazd">信号输入是只读信号。与通过 
<code>signal()</code> 声明的信号一样，你可以通过调用输入信号来访问当前的输入值。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>First name: {{firstName()}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Last name: {{lastName()}}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="dcvf7dno7t5zg4wdpd446a68m">这种对值的访问会在响应式上下文中被捕获，并且可以在输入值变化时通知活动消费者（如 Angular 本身）。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="48uws1c8l78lin53w1jzjo1yc">实际上，输入信号是你从
<a href="guide/signals">信号指南</a>中了解到的信号的一个简单扩展。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InputSignal</span>&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Signal</span>&lt;T&gt; { ... }<span class="hljs-string">`.</span></div></code>
    </pre>
  </div>
  <h2 id="deriving-values">
    <a href="#deriving-values" class="docs-anchor" tabindex="-1" aria-label="Link to Deriving values" data-ng_translator_product="100" data-ng_translator_ref_id="140olfp11p27pflws0qt91kwp">派生值</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="atpkgkmgjkchfekzmhgynub4h">与信号一样，你可以使用 
<code>computed</code> 从输入中派生值。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>, input, computed} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({...})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComp</span> {</div><div class="hljs-ln-line">  age = <span class="hljs-title function_">input</span>(<span class="hljs-number">0</span>);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-comment">// age multiplied by two.</span></div><div class="hljs-ln-line">  ageMultiplied = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">age</span>() * <span class="hljs-number">2</span>);</div><div class="hljs-ln-line">}</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="3py6rolhf4xjpxlreh9eea98l">计算信号会记忆值。查看
<a href="guide/signals#computed-signals">关于 computed 的专门章节</a>了解更多细节。</p>

  <h2 id="monitoring-changes">
    <a href="#monitoring-changes" class="docs-anchor" tabindex="-1" aria-label="Link to Monitoring changes" data-ng_translator_product="100" data-ng_translator_ref_id="bwi75eyis0to52f12dsu1buum">监控变化</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="779vy97u889d009k059ilu7ud">使用信号输入，用户可以利用 
<code>effect</code> 函数。该函数将在输入变化时执行。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="3l5uu3ws4jpch7vp3vngivu4h">考虑以下示例。每当 
<code>firstName</code> 输入变化时，新值都会被打印到控制台。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {input, effect} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComp</span> {</div><div class="hljs-ln-line">  firstName = input.<span class="hljs-property">required</span>&lt;<span class="hljs-built_in">string</span>&gt;();</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {</div><div class="hljs-ln-line">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">firstName</span>());</div><div class="hljs-ln-line">    });</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="9u9u5hmc81l5xbibmu8nf4lsz">每次 
<code>firstName</code> 输入变化时，都会调用 
<code>console.log</code> 函数。这将在 
<code>firstName</code> 可用时立即发生，并在 
<code>MyComp</code> 的生命周期内的后续变化时发生。</p>

  <h2 id="value-transforms">
    <a href="#value-transforms" class="docs-anchor" tabindex="-1" aria-label="Link to Value transforms" data-ng_translator_product="100" data-ng_translator_ref_id="8hfhy2kpwzakj3kahd2v6uaij">值转换</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="b2wb9tra424docfeemxj4g8e5">你可能想在不改变输入意义的情况下强制或解析输入值。转换会将原始值从父模板转换为预期的输入类型。转换应该是
<a href="https://en.wikipedia.org/wiki/Pure_function" target="_blank">纯函数</a>。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComp</span> {</div><div class="hljs-ln-line">  disabled = <span class="hljs-title function_">input</span>(<span class="hljs-literal">false</span>, {</div><div class="hljs-ln-line">    <span class="hljs-attr">transform</span>: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">boolean</span>|<span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'string'</span> ? value === <span class="hljs-string">''</span> : value,</div><div class="hljs-ln-line">  });</div><div class="hljs-ln-line">}</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="6o4t06p0s066dior1hrxsfyxj">在上述示例中，你声明了一个名为 
<code>disabled</code> 的输入，它接受 
<code>boolean</code> 和 
<code>string</code> 类型的值。这通过 
<code>transform</code> 选项中 
<code>value</code> 的显式参数类型捕获。这些值随后通过转换被解析为 
<code>boolean</code>，结果为布尔值。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="4si3v3ax2xy6hgzz9xsgr6g5d">这样，当调用 
<code>this.disabled()</code> 时，你在组件内部只处理 
<code>boolean</code>，而你的组件用户可以传递一个空字符串作为标记组件为禁用的简写。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">my-custom-comp</span> <span class="hljs-attr">disabled</span>&gt;</span></div></code>
    </pre>
  </div>
    <div class="docs-alert docs-alert-important">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="979580yksusmmxoebvny3x5kw"><strong>重要：</strong>如果转换改变了输入的意义，或者如果它们是
<a href="https://en.wikipedia.org/wiki/Pure_function#Impure_functions" target="_blank">非纯函数</a>，请不要使用转换。相反，对于具有不同意义的转换，使用 
<code>computed</code>，或者对于在输入变化时应运行的非纯代码，使用 
<code>effect</code>。</p>

    </div>
    
  <h2 id="why-should-we-use-signal-inputs-and-not-input">
    <a href="#why-should-we-use-signal-inputs-and-not-input" class="docs-anchor" tabindex="-1" aria-label="Link to Why should we use signal inputs and not <code>@Input()</code>?" data-ng_translator_product="100" data-ng_translator_ref_id="ezl5y9890qzidvdc9g00ujio9">为什么我们应该使用信号输入而不是 
<code>@Input()</code>？</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="3ynj4nj81d8cjifaekw7apkwr">信号输入是基于装饰器的 
<code>@Input()</code> 的响应式替代方案。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="cc2z5zzaeuk66cfxv47hom7hm">与基于装饰器的 
<code>@Input</code> 相比，信号输入提供了许多好处：</p>

    <ol class="docs-ordered-list">
      <li data-ng_translator_product="100" data-ng_translator_ref_id="6qt2jx2rplp9vd218ytfvu99w">信号输入具有更强的
<strong>类型安全性</strong>： 
<br>• 必要的输入不需要初始值，也不需要使用技巧来告诉 TypeScript 某个输入
<em>始终</em>有值。 
<br>• 转换会自动检查以匹配接受的输入值。</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="ca3q02v9yumulxgzgekkawj1d">在模板中使用信号输入时，会
<strong>自动</strong>将 
<code>OnPush</code> 组件标记为脏。</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="o7398e1x87ie85cc4nzytzft">使用 
<code>computed</code> 可以在输入变化时轻松
<strong>派生</strong>值。</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="9q7ye9cvqugoszu4umq5h4eqd">使用 
<code>effect</code> 而不是 
<code>ngOnChanges</code> 或 setters 更容易且更局部地监控输入。</li>

    </ol>
    