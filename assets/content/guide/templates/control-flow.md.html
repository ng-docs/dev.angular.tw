<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">控制流</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/templates/control-flow.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p>Angular 範本支援控制流控制區塊，它們允許你根據條件顯示、隱藏和重複元素。</p>

    <div class="docs-alert docs-alert-note">
    <p><strong>注意：</strong> 以前，這是透過 *ngIf、*ngFor 和 *ngSwitch 指令完成的。</p>

    </div>
    
  <h2 id="conditionally-display-content-with-if-else-if-and-else">
    <a href="#conditionally-display-content-with-if-else-if-and-else" class="docs-anchor" tabindex="-1" aria-label="Link to Conditionally display content with <code>@if</code>, <code>@else-if</code> and <code>@else</code>">使用 <code>@if</code>、<code>@else-if</code> 和 <code>@else</code> 有條件地顯示內容</a>
  </h2>
  <p>當 <code>@if</code> 控制區塊的條件表示式為真值時，它會根據條件顯示其內容：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> b) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;{{a}} is greater than {{b}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>如果你想顯示備用內容，你可以透過提供任意數量的 <code>@else if</code> 控制區塊和一個單獨的 <code>@else</code> 控制區塊來實現。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> b) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {{a}} is greater than {{b}}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@else if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> a) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {{a}} is less than {{b}}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {{a}} is equal to {{b}}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div>
  <h3 id="referencing-the-conditional-expressions-result">
    <a href="#referencing-the-conditional-expressions-result" class="docs-anchor" tabindex="-1" aria-label="Link to Referencing the conditional expression's result">引用條件表示式的結果</a>
  </h3>
  <p><code>@if</code> 條件語句支援將條件表示式的結果儲存到一個變數中，以便在控制區塊內部複用。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (user.profile.settings.startDate; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> startDate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {{ startDate }}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>這對於引用較長的表示式非常有用，這些表示式在範本中更易於閱讀和維護。</p>

  <h2 id="repeat-content-with-the-for-block">
    <a href="#repeat-content-with-the-for-block" class="docs-anchor" tabindex="-1" aria-label="Link to Repeat content with the <code>@for</code> block">使用 <code>@for</code> 控制區塊重複內容</a>
  </h2>
  <p><code>@for</code> 控制區塊會迴圈訪問一個集合並重復渲染控制區塊的內容。該集合可以是任何 JavaScript <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Iteration_protocols" target="_blank">可迭代者</a>，但 Angular 針對 <code>Array</code> 值進行了額外的效能最佳化。</p>
<p>一個典型的 <code>@for</code> 迴圈看起來像這樣：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> items; track item.id) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {{ item.name }}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>Angular 的 <code>@for</code> 控制區塊不支援像 JavaScript 的 <code>continue</code> 或 <code>break</code> 這樣的流控制語句。</p>

  <h3 id="why-is-track-in-for-blocks-important">
    <a href="#why-is-track-in-for-blocks-important" class="docs-anchor" tabindex="-1" aria-label="Link to Why is <code>track</code> in <code>@for</code> blocks important?">為什麼 <code>@for</code> 控制塊中的 <code>track</code> 很重要？</a>
  </h3>
  <p><code>track</code> 表示式允許 Angular 維護你的資料和頁面上的 DOM 節點之間的關係。這允許 Angular 透過在資料更改時執行最少的必要 DOM 操作來最佳化效能。</p>
<p>在迴圈訪問資料集合時，有效地使用 track 可以顯著提高應用的渲染效能。</p>
<p>在 <code>track</code> 表示式中選擇一個唯一標識每個條目的屬性（Property）。如果你的資料模型包含一個唯一標識屬性（通常是 <code>id</code> 或 <code>uuid</code>），請使用此值。如果你的資料不包含這樣的欄位，請強烈考慮新增一個。</p>
<p>對於從不更改的靜態集合，你可以使用 <code>$index</code> 來告訴 Angular 透過集合中每個條目的索引來跟蹤它。</p>
<p>如果沒有其他選項可用，你可以指定 <code>identity</code>。這告訴 Angular 使用三等號運算符 (<code>===</code>) 透過條目的引用標識來跟蹤它。儘可能避免使用此選項，因為它可能導致渲染更新速度顯著降低，因為 Angular 無法對映哪個資料條目對應於哪個 DOM 節點。</p>

  <h3 id="contextual-variables-in-for-blocks">
    <a href="#contextual-variables-in-for-blocks" class="docs-anchor" tabindex="-1" aria-label="Link to Contextual variables in <code>@for</code> blocks"><code>@for</code> 控制塊中的上下文變數</a>
  </h3>
  <p>在 <code>@for</code> 控制區塊內部，始終有幾個隱式變數可用：</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th>變數</th>
<th>含義</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td><code>$count</code></td>
<td>迭代集合中的條目數</td>
</tr>
<tr>
<td><code>$index</code></td>
<td>當前行的索引</td>
</tr>
<tr>
<td><code>$first</code></td>
<td>當前行是否為第一行</td>
</tr>
<tr>
<td><code>$last</code></td>
<td>當前行是否為最後一行</td>
</tr>
<tr>
<td><code>$even</code></td>
<td>當前行索引是否為偶數</td>
</tr>
<tr>
<td><code>$odd</code></td>
<td>當前行索引是否為奇數</td>
</tr>

      </tbody>
    </table>
  </div>
  <p>這些變數始終以這些名稱提供，但可以透過 <code>let</code> 段進行別名：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> items; track item.id; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> idx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $index, e </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> $even) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Item #{{ idx }}: {{ item.name }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>當巢狀 <code>@for</code> 控制區塊時，別名非常有用，它允許你從內部 <code>@for</code> 控制區塊讀取外部 <code>@for</code> 控制區塊的變數。</p>

  <h3 id="providing-a-fallback-for-for-blocks-with-the-empty-block">
    <a href="#providing-a-fallback-for-for-blocks-with-the-empty-block" class="docs-anchor" tabindex="-1" aria-label="Link to Providing a fallback for <code>@for</code> blocks with the <code>@empty</code> block">使用 <code>@empty</code> 控制區塊為 <code>@for</code> 控制區塊提供備用方案</a>
  </h3>
  <p>你可以選擇在 <code>@for</code> 控制區塊內容之後立即包含一個 <code>@empty</code> 部分。當沒有條目時，將顯示 <code>@empty</code> 控制區塊的內容：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> items; track item.name) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; {{ item.name }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@empty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> aria-hidden</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"true"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; There are no items. &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div>
  <h2 id="conditionally-display-content-with-the-switch-block">
    <a href="#conditionally-display-content-with-the-switch-block" class="docs-anchor" tabindex="-1" aria-label="Link to Conditionally display content with the <code>@switch</code> block">使用 <code>@switch</code> 控制區塊有條件地顯示內容</a>
  </h2>
  <p>雖然 <code>@if</code> 控制區塊在大多數情況下都很棒，但 <code>@switch</code> 控制區塊提供了另一種有條件渲染資料的語法。它的語法與 JavaScript 的 <code>switch</code> 語句非常相似。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">@switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (userPermissions) {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  @case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'admin'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-admin-dashboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  @case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'reviewer'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-reviewer-dashboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  @case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'editor'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-editor-dashboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-viewer-dashboard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>條件表示式的值使用三等號 (<code>===</code>) 運算符與 case 表示式進行比較。</p>
<p><strong><code>@switch</code> 沒有貫穿 (fallthrough) 行為</strong>，因此你不需要在控制塊中使用等效於 <code>break</code> 或 <code>return</code> 語句的語句。</p>
<p>你可以選擇包含一個 <code>@default</code> 控制區塊。如果前面的 case 表示式均不與 switch 值對應，則顯示 <code>@default</code> 控制區塊的內容。</p>
<p>如果沒有 <code>@case</code> 與表示式對應，並且沒有 <code>@default</code> 控制區塊，則不顯示任何內容。</p>
