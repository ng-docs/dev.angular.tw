<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">分層注入器</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/di/hierarchical-dependency-injection.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p>Angular 中的注入器有一些規則，你可以利用這些規則在你的應用中實現可注入物件的期望可見性。透過理解這些規則，你可以確定是在應用級別、元件中還是指令中宣告提供者。</p>
<p>你使用 Angular 建立的應用可能會變得非常龐大，管理這種複雜性的一種方法是將應用拆分成一個定義良好的元件樹。</p>
<p>你的頁面中可能存在一些區域，它們以完全獨立於應用其餘部分的方式工作，並擁有自己本地的服務副本和所需的其他依賴項。這些應用區域使用的一些服務可能會與其他應用部分或元件樹中更靠上的父元件共享，而其他依賴項則應該是私有的。</p>
<p>透過分層依賴注入，你可以隔離應用的各個部分，併為它們提供不與應用其餘部分共享的私有依賴項，或者讓父元件僅與其子元件共享某些依賴項，而不與元件樹的其餘部分共享，等等。分層依賴注入使你能夠在應用的不同部分之間僅在需要時共享依賴項。</p>

  <h2 id="types-of-injector-hierarchies">
    <a href="#types-of-injector-hierarchies" class="docs-anchor" tabindex="-1" aria-label="Link to Types of injector hierarchies">注入器分層的型別</a>
  </h2>
  <p>Angular 有兩個注入器分層：</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">注入器分層</th>
<th align="left">詳情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><code>EnvironmentInjector</code> 分層結構</td>
<td align="left">在此分層結構中使用 <code>@Injectable()</code> 或 <code>ApplicationConfig</code> 中的 <code>providers</code> 陣列設定一個 <code>EnvironmentInjector</code>。</td>
</tr>
<tr>
<td align="left"><code>ElementInjector</code> 分層結構</td>
<td align="left">在每個 DOM 元素上隱式建立。除非你在 <code>@Directive()</code> 或 <code>@Component()</code> 的 <code>providers</code> 屬性中設定它，否則 <code>ElementInjector</code> 預設是空的。</td>
</tr>

      </tbody>
    </table>
  </div>
  
    <div class="docs-callout docs-callout-helpful">
      <h3>基於 NgModule 的應用</h3>
      <p>對於基於 <code>NgModule</code> 的應用，你可以使用 <code>@NgModule()</code> 或 <code>@Injectable()</code> 註解，透過 <code>ModuleInjector</code> 分層結構提供依賴項。</p>

    </div>
    
  <h3 id="environmentinjector">
    <a href="#environmentinjector" class="docs-anchor" tabindex="-1" aria-label="Link to <code>EnvironmentInjector</code>"><code>EnvironmentInjector</code></a>
  </h3>
  <p><code>EnvironmentInjector</code> 可以透過以下兩種方式之一進行設定：</p>

  <ul class="docs-list">
    <li><code>@Injectable()</code> 的 <code>providedIn</code> 屬性，用於引用 <code>root</code> 或 <code>platform</code></li>
<li><code>ApplicationConfig</code> 的 <code>providers</code> 陣列</li>

  </ul>
  
    <div class="docs-callout docs-callout-helpful">
      <h3>搖樹最佳化和 @Injectable()</h3>
      <p>使用 <code>@Injectable()</code> 的 <code>providedIn</code> 屬性比使用 <code>ApplicationConfig</code> 的 <code>providers</code> 陣列更可取。使用 <code>@Injectable()</code> 的 <code>providedIn</code>，最佳化工具可以執行搖樹最佳化，從而移除你的應用未使用的服務。這會減小捆綁包大小。</p>
<p>搖樹最佳化對於函式庫尤其有用，因為使用該函式庫的應用可能不需要注入它。</p>

    </div>
    <p><code>EnvironmentInjector</code> 由 <code>ApplicationConfig.providers</code> 設定。</p>
<p>使用 <code>@Injectable()</code> 的 <code>providedIn</code> 提供服務，如下所示：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Injectable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providedIn: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'root'</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // &lt;--provides this service in the root EnvironmentInjector</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ItemService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'telephone'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p><code>@Injectable()</code> 裝飾器標識一個服務類別。<code>providedIn</code> 屬性設定一個特定的 <code>EnvironmentInjector</code>，這裡是 <code>root</code>，這使得該服務在 <code>root</code> <code>EnvironmentInjector</code> 中可用。</p>

  <h3 id="moduleinjector">
    <a href="#moduleinjector" class="docs-anchor" tabindex="-1" aria-label="Link to ModuleInjector">ModuleInjector</a>
  </h3>
  <p>對於基於 <code>NgModule</code> 的應用，ModuleInjector 可以透過以下兩種方式之一進行設定：</p>

  <ul class="docs-list">
    <li><code>@Injectable()</code> 的 <code>providedIn</code> 屬性，用於引用 <code>root</code> 或 <code>platform</code></li>
<li><code>@NgModule()</code> 的 <code>providers</code> 陣列</li>

  </ul>
  <p><code>ModuleInjector</code> 由 <code>@NgModule.providers</code> 和 <code>NgModule.imports</code> 屬性設定。<code>ModuleInjector</code> 是透過遞迴跟蹤 <code>NgModule.imports</code> 可以訪問的所有 providers 陣列的扁平化結果。</p>
<p>當延遲載入其他 <code>@NgModules</code> 時，會建立子 <code>ModuleInjector</code> 分層結構。</p>

  <h3 id="platform-injector">
    <a href="#platform-injector" class="docs-anchor" tabindex="-1" aria-label="Link to Platform injector">平台注入器</a>
  </h3>
  <p>在 <code>root</code> 之上有兩個更多的注入器，一個額外的 <code>EnvironmentInjector</code> 和 <code>NullInjector()</code>。</p>
<p>考慮 Angular 如何使用 <code>main.ts</code> 中的以下內容引導應用：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">bootstrapApplication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(AppComponent, appConfig);</span></span></code></pre>
    </pre>
  </div><p><code>bootstrapApplication()</code> 方法建立一個平台注入器的子注入器，該子注入器由 <code>ApplicationConfig</code> 實例設定。這就是 <code>root</code> <code>EnvironmentInjector</code>。</p>
<p><code>platformBrowserDynamic()</code> 方法建立一個由 <code>PlatformModule</code> 設定的注入器，其中包含特定於平台的依賴項。這允許多個應用共享一個平台設定。例如，無論你執行多少個應用，瀏覽器都只有一個 URL 欄。你可以透過使用 <code>platformBrowser()</code> 函式提供 <code>extraProviders</code>，在平台級別設定額外的特定於平台的提供者。</p>
<p>分層結構中的下一個父注入器是 <code>NullInjector()</code>，它是樹的頂部。如果你在樹中向上查詢服務直到 <code>NullInjector()</code>，你將會收到一個錯誤，除非你使用了 <code>@Optional()</code>，因為最終，一切都止於 <code>NullInjector()</code>，它會回傳一個錯誤，或者在使用 <code>@Optional()</code> 的情況下，回傳 <code>null</code>。有關 <code>@Optional()</code> 的更多訊息，請參閱本指南的 <a href="#optional"><code>@Optional()</code> 部分</a>。</p>
<p>下圖表示 <code>root</code> <code>EnvironmentInjector</code> 與其父注入器之間的關係，如前幾段所述。</p>
<svg aria-roledescription="stateDiagram" role="graphics-document document" viewBox="0 0 232 548" style="max-width: 232px;" class="statediagram" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-generated-diagram"><style>#mermaid-generated-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-generated-diagram .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-generated-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-generated-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-generated-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-generated-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-generated-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-generated-diagram .marker{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .marker.cross{stroke:#0b0b0b;}#mermaid-generated-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-generated-diagram p{margin:0;}#mermaid-generated-diagram defs #statediagram-barbEnd{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram g.stateGroup text{fill:hsl(40.5882352941, 60%, 83.3333333333%);stroke:none;font-size:10px;}#mermaid-generated-diagram g.stateGroup text{fill:#333;stroke:none;font-size:10px;}#mermaid-generated-diagram g.stateGroup .state-title{font-weight:bolder;fill:#333;}#mermaid-generated-diagram g.stateGroup rect{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);}#mermaid-generated-diagram g.stateGroup line{stroke:#0b0b0b;stroke-width:1;}#mermaid-generated-diagram .transition{stroke:#0b0b0b;stroke-width:1;fill:none;}#mermaid-generated-diagram .stateGroup .composit{fill:#f4f4f4;border-bottom:1px;}#mermaid-generated-diagram .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#mermaid-generated-diagram .state-note{stroke:hsl(52.6829268293, 60%, 73.9215686275%);fill:#fff5ad;}#mermaid-generated-diagram .state-note text{fill:#333;stroke:none;font-size:10px;}#mermaid-generated-diagram .stateLabel .box{stroke:none;stroke-width:0;fill:#fff4dd;opacity:0.5;}#mermaid-generated-diagram .edgeLabel .label rect{fill:#fff4dd;opacity:0.5;}#mermaid-generated-diagram .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .edgeLabel p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .edgeLabel .label text{fill:#333;}#mermaid-generated-diagram .label div .edgeLabel{color:#333;}#mermaid-generated-diagram .stateLabel text{fill:#333;font-size:10px;font-weight:bold;}#mermaid-generated-diagram .node circle.state-start{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .node .fork-join{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .node circle.state-end{fill:hsl(40.5882352941, 60%, 83.3333333333%);stroke:#f4f4f4;stroke-width:1.5;}#mermaid-generated-diagram .end-state-inner{fill:#f4f4f4;stroke-width:1.5;}#mermaid-generated-diagram .node rect{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .node polygon{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram #statediagram-barbEnd{fill:#0b0b0b;}#mermaid-generated-diagram .statediagram-cluster rect{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .cluster-label,#mermaid-generated-diagram .nodeLabel{color:#333;}#mermaid-generated-diagram .statediagram-cluster rect.outer{rx:5px;ry:5px;}#mermaid-generated-diagram .statediagram-state .divider{stroke:hsl(40.5882352941, 60%, 83.3333333333%);}#mermaid-generated-diagram .statediagram-state .title-state{rx:5px;ry:5px;}#mermaid-generated-diagram .statediagram-cluster.statediagram-cluster .inner{fill:#f4f4f4;}#mermaid-generated-diagram .statediagram-cluster.statediagram-cluster-alt .inner{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .statediagram-cluster .inner{rx:0;ry:0;}#mermaid-generated-diagram .statediagram-state rect.basic{rx:5px;ry:5px;}#mermaid-generated-diagram .statediagram-state rect.divider{stroke-dasharray:10,10;fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .note-edge{stroke-dasharray:5;}#mermaid-generated-diagram .statediagram-note rect{fill:#fff5ad;stroke:hsl(52.6829268293, 60%, 73.9215686275%);stroke-width:1px;rx:0;ry:0;}#mermaid-generated-diagram .statediagram-note rect{fill:#fff5ad;stroke:hsl(52.6829268293, 60%, 73.9215686275%);stroke-width:1px;rx:0;ry:0;}#mermaid-generated-diagram .statediagram-note text{fill:#333;}#mermaid-generated-diagram .statediagram-note .nodeLabel{color:#333;}#mermaid-generated-diagram .statediagram .edgeLabel{color:red;}#mermaid-generated-diagram #dependencyStart,#mermaid-generated-diagram #dependencyEnd{fill:#0b0b0b;stroke:#0b0b0b;stroke-width:1;}#mermaid-generated-diagram .statediagramTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-generated-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><defs><marker orient="auto" markerUnits="userSpaceOnUse" markerHeight="14" markerWidth="20" refY="7" refX="19" id="mermaid-generated-diagram_stateDiagram-barbEnd"><path d="M 19,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge0" d="M116,356L116,351.833C116,347.667,116,339.333,116,331C116,322.667,116,314.333,116,310.167L116,306"></path><path marker-end="url(#mermaid-generated-diagram_stateDiagram-barbEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid transition" id="edge1" d="M116,170L116,165.833C116,161.667,116,153.333,116,145C116,136.667,116,128.333,116,124.167L116,120"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(116, 238)" id="state-elementInjector-1" class="node  statediagram-state"><rect height="136" width="216" y="-68" x="-108" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-100, -60)" style="" class="label"><rect></rect><foreignObject height="120" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>EnvironmentInjector<br>(configured by Angular)<br>has special things like DomSanitizer =&gt; providedIn 'platform'</p></span></div></foreignObject></g></g><g transform="translate(116, 448)" id="state-rootInjector-0" class="node  statediagram-state"><rect height="184" width="216" y="-92" x="-108" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-100, -84)" style="" class="label"><rect></rect><foreignObject height="168" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>root EnvironmentInjector<br>(configured by AppConfig)<br>has things for your app =&gt; bootstrapApplication(..., AppConfig)</p></span></div></foreignObject></g></g><g transform="translate(116, 64)" id="state-nullInjector-1" class="node  statediagram-state"><rect height="112" width="216" y="-56" x="-108" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-100, -48)" style="" class="label"><rect></rect><foreignObject height="96" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>NullInjector<br>always throws an error unless<br>you use @Optional()</p></span></div></foreignObject></g></g></g></g></g></svg><p>雖然名稱 <code>root</code> 是一個特殊的別名，但其他 <code>EnvironmentInjector</code> 分層結構沒有別名。每當建立動態載入的元件時，你都可以選擇建立 <code>EnvironmentInjector</code> 分層結構，例如使用 Router，它將建立子 <code>EnvironmentInjector</code> 分層結構。</p>
<p>所有請求都轉發到根注入器，無論你是使用傳遞給 <code>bootstrapApplication()</code> 方法的 <code>ApplicationConfig</code> 實例設定它，還是在你自己的服務中向 <code>root</code> 註冊了所有提供者。</p>

    <div class="docs-callout docs-callout-helpful">
      <h3>@Injectable() 與 ApplicationConfig</h3>
      <p>如果你在 <code>bootstrapApplication</code> 的 <code>ApplicationConfig</code> 中設定了一個應用範圍的提供者，它將覆蓋在 <code>@Injectable()</code> 元資料中為 <code>root</code> 設定的提供者。你可以這樣做來設定一個與多個應用共享的服務的非預設提供者。</p>
<p>這是一個範例，其中元件路由器設定透過在 <code>ApplicationConfig</code> 的 <code>providers</code> 清單中列出其提供者，包含了非預設的 <a href="guide/routing#location-strategy">位置策略</a>。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  { provide: LocationStrategy, useClass: HashLocationStrategy }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span></code></pre>
    </pre>
  </div><p>對於基於 <code>NgModule</code> 的應用，在 <code>AppModule</code> 的 <code>providers</code> 中設定應用範圍的提供者。</p>

    </div>
    
  <h3 id="elementinjector">
    <a href="#elementinjector" class="docs-anchor" tabindex="-1" aria-label="Link to <code>ElementInjector</code>"><code>ElementInjector</code></a>
  </h3>
  <p>Angular 為每個 DOM 元素隱式地建立 <code>ElementInjector</code> 分層結構。</p>
<p>在 <code>@Component()</code> 裝飾器中使用其 <code>providers</code> 或 <code>viewProviders</code> 屬性提供服務會設定一個 <code>ElementInjector</code>。例如，以下 <code>TestComponent</code> 透過如下方式提供服務來設定 <code>ElementInjector</code>：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  …</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [{ provide: ItemService, useValue: { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'lamp'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } }]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> TestComponent</span></span></code></pre>
    </pre>
  </div>
    <div class="docs-alert docs-alert-helpful">
    <p><strong>提示：</strong> 請參閱<a href="#resolution-rules">解析規則</a>部分，以瞭解 <code>EnvironmentInjector</code> 樹、<code>ModuleInjector</code> 和 <code>ElementInjector</code> 樹之間的關係。</p>

    </div>
    <p>當你在元件中提供服務時，該服務透過該組件實例的 <code>ElementInjector</code> 可用。根據<a href="#resolution-rules">解析規則</a>部分中描述的可見性規則，它也可能在子元件/指令中可見。</p>
<p>當元件實例被銷燬時，該服務實例也會被銷燬。</p>

  <h4 id="directive-and-component">
    <a href="#directive-and-component" class="docs-anchor" tabindex="-1" aria-label="Link to <code>@Directive()</code> and <code>@Component()</code>"><code>@Directive()</code> 和 <code>@Component()</code></a>
  </h4>
  <p>元件是一種特殊型別的指令，這意味著正如 <code>@Directive()</code> 具有 <code>providers</code> 屬性一樣，<code>@Component()</code> 也是如此。這意味著指令以及元件都可以使用 <code>providers</code> 屬性設定提供者。當你使用 <code>providers</code> 屬性為元件或指令設定提供者時，該提供者屬於該組件或指令的 <code>ElementInjector</code>。同一元素上的元件和指令共享一個注入器。</p>

  <h2 id="resolution-rules">
    <a href="#resolution-rules" class="docs-anchor" tabindex="-1" aria-label="Link to Resolution rules">解析規則</a>
  </h2>
  <p>當為元件/指令解析令牌時，Angular 分兩個階段解析它：</p>

    <ol class="docs-ordered-list">
      <li>相對於 <code>ElementInjector</code> 分層結構中的父注入器。</li>
<li>相對於 <code>EnvironmentInjector</code> 分層結構中的父注入器。</li>

    </ol>
    <p>當元件宣告依賴時，Angular 嘗試使用自己的 <code>ElementInjector</code> 來滿足該依賴。
如果元件的注入器缺少提供者，它會將請求傳遞給父元件的 <code>ElementInjector</code>。</p>
<p>請求會一直向上轉發，直到 Angular 找到可以處理該請求的注入器，或者耗盡了祖先 <code>ElementInjector</code> 分層結構。</p>
<p>如果 Angular 在任何 <code>ElementInjector</code> 分層結構中都找不到提供者，它會回到請求的起始元素，並在 <code>EnvironmentInjector</code> 分層結構中查詢。
如果 Angular 仍然找不到提供者，它會丟擲一個錯誤。</p>
<p>如果你在不同的層級為同一個 DI 令牌註冊了提供者，Angular 遇到的第一個提供者就是它用來求解依賴的提供者。
例如，如果在一個需要服務的元件中本地註冊了一個提供者，
Angular 就不會再查詢同一服務的另一個提供者。</p>

    <div class="docs-alert docs-alert-helpful">
    <p><strong>提示：</strong> 對於基於 <code>NgModule</code> 的應用，如果 Angular 在 <code>ElementInjector</code> 分層結構中找不到提供者，它將搜尋 <code>ModuleInjector</code> 分層結構。</p>

    </div>
    
  <h2 id="resolution-modifiers">
    <a href="#resolution-modifiers" class="docs-anchor" tabindex="-1" aria-label="Link to Resolution modifiers">解析修飾符</a>
  </h2>
  <p>Angular 的解析行為可以使用 <code>optional</code>、<code>self</code>、<code>skipSelf</code> 和 <code>host</code> 進行修改。
從 <code>@angular/core</code> 匯入它們中的每一個，並在注入服務時在 <code>inject</code> 設定中使用。</p>

  <h3 id="types-of-modifiers">
    <a href="#types-of-modifiers" class="docs-anchor" tabindex="-1" aria-label="Link to Types of modifiers">修飾符的型別</a>
  </h3>
  <p>解析修飾符分為三類：</p>

  <ul class="docs-list">
    <li>如果 Angular 找不到你要查詢的內容，該怎麼辦？那就是 <code>optional</code></li>
<li>從哪裡開始查詢？那就是 <code>skipSelf</code></li>
<li>在哪裡停止查詢？<code>host</code> 和 <code>self</code></li>

  </ul>
  <p>預設情況下，Angular 總是從當前的 <code>Injector</code> 開始，並一直向上搜尋。
修飾符允許你更改起始位置（即<em>self</em> 位置）和結束位置。</p>
<p>此外，你可以組合除以下之外的所有修飾符：</p>

  <ul class="docs-list">
    <li><code>host</code> 和 <code>self</code></li>
<li><code>skipSelf</code> 和 <code>self</code>。</li>

  </ul>
  
  <h3 id="optional">
    <a href="#optional" class="docs-anchor" tabindex="-1" aria-label="Link to <code>optional</code>"><code>optional</code></a>
  </h3>
  <p><code>optional</code> 允許 Angular 將你注入的服務視為可選的。
這樣，如果在執行時無法求解，Angular 會將該服務求解為 <code>null</code>，而不是丟擲錯誤。
在以下範例中，服務 <code>OptionalService</code> 未在服務、<code>ApplicationConfig</code>、<code>@NgModule()</code> 或元件類別中提供，因此它在應用的任何地方都不可用。</p>
<div class="docs-code" header="src/app/optional/optional.component.ts">
    <div class="docs-code-header"><h3>src/app/optional/optional.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> OptionalComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  public</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> optional</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(OptionalService, {optional: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div>
  <h3 id="self">
    <a href="#self" class="docs-anchor" tabindex="-1" aria-label="Link to <code>self</code>"><code>self</code></a>
  </h3>
  <p>使用 <code>self</code>，以便 Angular 只檢視當前元件或指令的 <code>ElementInjector</code>。</p>
<p><code>self</code> 的一個好的用例是注入一個服務，但前提是它在當前宿主元素上可用。
為了避免在這種情況下出錯，請將 <code>self</code> 與 <code>optional</code> 結合使用。</p>
<p>例如，在下面的 <code>SelfNoDataComponent</code> 中，請注意作為屬性注入的 <code>LeafService</code>。</p>
<div class="docs-code" header="src/app/self-no-data/self-no-data.component.ts">
    <div class="docs-code-header"><h3>src/app/self-no-data/self-no-data.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-self-no-data'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  templateUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./self-no-data.component.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  styleUrls: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./self-no-data.component.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SelfNoDataComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line highlighted"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  public</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> leaf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(LeafService, {optional: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, self: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>在此範例中，有一個父提供者，注入服務將回傳該值；但是，使用 <code>self</code> 和 <code>optional</code> 注入服務將回傳 <code>null</code>，因為 <code>self</code> 告訴注入器停止在當前宿主元素中搜索。</p>
<p>另一個範例顯示了帶有 <code>FlowerService</code> 提供者的元件類別。
在這種情況下，注入器不會在當前的 <code>ElementInjector</code> 之外查詢，因為它找到了 <code>FlowerService</code> 並回傳了鬱金香 <code><span class="docs-emoji">🌷</span></code>。</p>
<div class="docs-code" path="adev/src/content/examples/resolution-modifiers/src/app/self/self.component.ts" visiblelines="3,4,5,6,7,8,9,10,11" header="src/app/self/self.component.ts">
    <div class="docs-code-header"><h3>src/app/self/self.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {Component, Self} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {FlowerService} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../flower.service'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-self'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  templateUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./self.component.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  styleUrls: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./self.component.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [{provide: FlowerService, useValue: {emoji: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'🌷'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}}],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SelfComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">public</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> flower</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FlowerService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// This component provides the FlowerService so the injector</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// doesn't have to look further up the injector tree</span></span><span class="line"></span></code></pre>
    </pre>
  </div>
  <h3 id="skipself">
    <a href="#skipself" class="docs-anchor" tabindex="-1" aria-label="Link to <code>skipSelf</code>"><code>skipSelf</code></a>
  </h3>
  <p><code>skipSelf</code> 與 <code>self</code> 相反。
使用 <code>skipSelf</code>，Angular 會在其父 <code>ElementInjector</code> 中開始搜尋服務，而不是在當前的 <code>ElementInjector</code> 中。
因此，如果父 <code>ElementInjector</code> 對 <code>emoji</code> 使用 fern <code><span class="docs-emoji">🌿</span></code> 值，但你在元件的 <code>providers</code> 陣列中使用了 maple leaf <code><span class="docs-emoji">🍁</span></code>，則 Angular 將忽略 maple leaf <code><span class="docs-emoji">🍁</span></code> 並使用 fern <code><span class="docs-emoji">🌿</span></code>。</p>
<p>要在程式碼中看到這一點，假設以下 <code>emoji</code> 值是父元件正在使用的值，如下服務所示：</p>
<div class="docs-code" header="src/app/leaf.service.ts">
    <div class="docs-code-header"><h3>src/app/leaf.service.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> LeafService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  emoji</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '🌿'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>假設在子元件中，你有一個不同的值，楓葉 <code><span class="docs-emoji">🍁</span></code>，但你想使用父元件的值。
這時你就可以使用 <code>skipSelf</code>：</p>
<div class="docs-code" header="src/app/skipself/skipself.component.ts">
    <div class="docs-code-header"><h3>src/app/skipself/skipself.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-skipself'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  templateUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./skipself.component.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  styleUrls: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./skipself.component.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // Angular would ignore this LeafService instance</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [{ provide: LeafService, useValue: { emoji: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'🍁'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } }]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SkipselfComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // Use skipSelf as inject option</span></span><span class="line highlighted"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  public</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> leaf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(LeafService, {skipSelf: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>在這種情況下，你為 <code>emoji</code> 獲取的值將是蕨類植物 <code><span class="docs-emoji">🌿</span></code>，而不是楓葉 <code><span class="docs-emoji">🍁</span></code>。</p>

  <h4 id="skipself-option-with-optional">
    <a href="#skipself-option-with-optional" class="docs-anchor" tabindex="-1" aria-label="Link to <code>skipSelf</code> option with <code>optional</code>">帶有 <code>optional</code> 的 <code>skipSelf</code> 選項</a>
  </h4>
  <p>將 <code>skipSelf</code> 選項與 <code>optional</code> 結合使用，以防止值是 <code>null</code> 時出錯。</p>
<p>在以下範例中，<code>Person</code> 服務在屬性初始化期間被注入。
<code>skipSelf</code> 告訴 Angular 跳過當前的注入器，而 <code>optional</code> 將防止在 <code>Person</code> 服務為 <code>null</code> 時出錯。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Person, {optional: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, skipSelf: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div>
  <h3 id="host">
    <a href="#host" class="docs-anchor" tabindex="-1" aria-label="Link to <code>host</code>"><code>host</code></a>
  </h3>
  <!-- TODO: Remove ambiguity between host and self. -->

<p>在搜尋提供者時，<code>host</code> 允許你將元件指定為注入器樹中的最後一站。</p>
<p>即使樹的更上方有服務實例，Angular 也不會繼續查詢。
按如下方式使用 <code>host</code>：</p>
<div class="docs-code" header="src/app/host/host.component.ts">
    <div class="docs-code-header"><h3>src/app/host/host.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-host'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  templateUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./host.component.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  styleUrls: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./host.component.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  //  provide the service</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [{ provide: FlowerService, useValue: { emoji: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'🌷'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } }]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HostComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // use host when injecting the service</span></span><span class="line highlighted"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  flower</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FlowerService, {host: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, optional: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>由於 <code>HostComponent</code> 具有 <code>host</code> 選項，無論 <code>HostComponent</code> 的父元件可能有什麼樣的 <code>flower.emoji</code> 值，<code>HostComponent</code> 都將使用鬱金香 <code><span class="docs-emoji">🌷</span></code>。</p>

  <h3 id="modifiers-with-constructor-injection">
    <a href="#modifiers-with-constructor-injection" class="docs-anchor" tabindex="-1" aria-label="Link to Modifiers with constructor injection">帶有建構式函式注入的修飾符</a>
  </h3>
  <p>與之前介紹的類似，建構式函式注入的行為可以使用 <code>@Optional()</code>、<code>@Self()</code>、<code>@SkipSelf()</code> 和 <code>@Host()</code> 進行修改。</p>
<p>從 <code>@angular/core</code> 匯入它們中的每一個，並在注入服務時在元件類別建構式函式中使用。</p>
<div class="docs-code" header="src/app/self-no-data/self-no-data.component.ts">
    <div class="docs-code-header"><h3>src/app/self-no-data/self-no-data.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SelfNoDataComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Optional</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">public</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> leaf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> LeafService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) { }</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div>
  <h2 id="logical-structure-of-the-template">
    <a href="#logical-structure-of-the-template" class="docs-anchor" tabindex="-1" aria-label="Link to Logical structure of the template">樣板的邏輯結構</a>
  </h2>
  <p>當你在元件類別中提供服務時，服務在 <code>ElementInjector</code> 樹中是可見的，這取決於你提供這些服務的位置和方式。</p>
<p>理解 Angular 樣板的底層邏輯結構將為你設定服務奠定基礎，進而控制它們的可視性。</p>
<p>元件在你的樣板中使用，如下例所示：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div>
    <div class="docs-alert docs-alert-helpful">
    <p><strong>提示：</strong> 通常，你在單獨的檔案中宣告元件及其樣板。
為了理解注入系統的工作原理，從組合邏輯樹的角度來看待它們很有用。
術語<em>邏輯</em>將其與渲染樹（即應用的 DOM 樹）區分開來。
為了標記元件樣板所在的位置，本指南使用 <code>&lt;#VIEW&gt;</code> 偽元素，該偽元素實際上並不存在於渲染樹中，僅出於心智模型目的而存在。</p>

    </div>
    <p>以下範例說明了 <code>&lt;app-root&gt;</code> 和 <code>&lt;app-child&gt;</code> 檢視樹如何組合成單個邏輯樹：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">     &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">       …content goes here…</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">     &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>當你在元件類別中設定服務時，理解 <code>&lt;#VIEW&gt;</code> 劃界的概念尤為重要。</p>

  <h2 id="example-providing-services-in-component">
    <a href="#example-providing-services-in-component" class="docs-anchor" tabindex="-1" aria-label="Link to Example: Providing services in <code>@Component()</code>">範例：在 <code>@Component()</code> 中提供服務</a>
  </h2>
  <p>你如何使用 <code>@Component()</code>（或 <code>@Directive()</code>）裝飾器提供服務決定了它們的可視性。
以下各節示範了 <code>providers</code> 和 <code>viewProviders</code>，以及使用 <code>skipSelf</code> 和 <code>host</code> 修改服務可見性的方法。</p>
<p>元件類別可以透過兩種方式提供服務：</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">陣列</th>
<th align="left">詳情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left">使用 <code>providers</code> 陣列</td>
<td align="left"><code>@Component({ providers: [SomeService] })</code></td>
</tr>
<tr>
<td align="left">使用 <code>viewProviders</code> 陣列</td>
<td align="left"><code>@Component({ viewProviders: [SomeService] })</code></td>
</tr>

      </tbody>
    </table>
  </div>
  <p>在下面的範例中，你將看到 Angular 應用的邏輯樹。
為了說明注入器如何在樣板上下文中工作，邏輯樹將表示應用的 HTML 結構。
例如，邏輯樹將顯示 <code>&lt;child-component&gt;</code> 是 <code>&lt;parent-component&gt;</code> 的直接子元件。</p>
<p>在邏輯樹中，你將看到特殊的屬性（Attribute）：<code>@Provide</code>、<code>@Inject</code> 和 <code>@ApplicationConfig</code>。
這些不是真實的屬性（Attribute），而是為了示範底層發生了什麼。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">Angular 服務屬性（Attribute）</th>
<th align="left">詳情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><code>@Inject(Token)=&gt;Value</code></td>
<td align="left">如果 <code>Token</code> 在邏輯樹的這個位置被注入，它的值將是 <code>Value</code>。</td>
</tr>
<tr>
<td align="left"><code>@Provide(Token=Value)</code></td>
<td align="left">表明 <code>Token</code> 在邏輯樹的這個位置透過 <code>Value</code> 提供。</td>
</tr>
<tr>
<td align="left"><code>@ApplicationConfig</code></td>
<td align="left">示範了在此位置應使用回退 <code>EnvironmentInjector</code>。</td>
</tr>

      </tbody>
    </table>
  </div>
  
  <h3 id="example-app-structure">
    <a href="#example-app-structure" class="docs-anchor" tabindex="-1" aria-label="Link to Example app structure">範例應用結構</a>
  </h3>
  <p>此範例應用在 <code>root</code> 中提供了一個 <code>FlowerService</code>，其 <code>emoji</code> 值為紅色芙蓉花 <code><span class="docs-emoji">🌺</span></code>。</p>
<div class="docs-code" header="src/app/flower.service.ts">
    <div class="docs-code-header"><h3>src/app/flower.service.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providedIn: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'root'</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FlowerService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  emoji</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '🌺'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>考慮一個僅包含 <code>AppComponent</code> 和 <code>ChildComponent</code> 的應用。
最基本的渲染檢視看起來會像如下巢狀的 HTML 元素一樣：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- AppComponent selector --&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- ChildComponent selector --&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>但是，在幕後，Angular 在求解注入請求時使用如下邏輯檢視表示：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- AppComponent selector --&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- ChildComponent selector --&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>這裡的 <code>&lt;#VIEW&gt;</code> 表示樣板的一個實例。
請注意，每個元件都有自己的 <code>&lt;#VIEW&gt;</code>。</p>
<p>瞭解此結構可以幫助你瞭解如何提供和注入服務，並使你完全控制服務的可見性。</p>
<p>現在，假設 <code>&lt;app-root&gt;</code> 注入了 <code>FlowerService</code>：</p>
<div class="docs-code" header="src/app/app.component.ts">
    <div class="docs-code-header"><h3>src/app/app.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> AppComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  flower</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FlowerService);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>向 <code>&lt;app-root&gt;</code> 樣板新增一個繫結以視覺化結果：</p>
<div class="docs-code" header="src/app/app.component.html">
    <div class="docs-code-header"><h3>src/app/app.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from FlowerService: {{flower.emoji}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>檢視中的輸出將是：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Emoji</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> FlowerService:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 🌺</span></span></code></pre>
    </pre>
  </div><p>在邏輯樹中，這將表示為如下形式：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @ApplicationConfig</span></span><span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        @Inject(FlowerService)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> flower</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🌺"&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from FlowerService: {{flower.emoji}} (🌺)&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>當 <code>&lt;app-root&gt;</code> 請求 <code>FlowerService</code> 時，注入器的任務是求解 <code>FlowerService</code> 令牌。
令牌的求解分兩個階段進行：</p>

    <ol class="docs-ordered-list">
      <li><p>注入器確定邏輯樹中的起始位置和搜尋的結束位置。
 注入器從起始位置開始，並在邏輯樹中的每個檢視級別查詢令牌。
 如果找到令牌，則回傳它。</p>
</li>
<li><p>如果未找到令牌，則注入器將查詢最近的父 <code>EnvironmentInjector</code> 以將請求委託給它。</p>
</li>

    </ol>
    <p>在此範例中，約束條件為：</p>

    <ol class="docs-ordered-list">
      <li><p>從屬於 <code>&lt;app-root&gt;</code> 的 <code>&lt;#VIEW&gt;</code> 開始，到 <code>&lt;app-root&gt;</code> 結束。</p>

  <ul class="docs-list">
    <li>通常，搜尋的起點位於注入點。
  但是，在本例中，<code>&lt;app-root&gt;</code> 是一個元件。<code>@Component</code> 是特殊的，因為它們還包括自己的 <code>viewProviders</code>，這就是為什麼搜尋從屬於 <code>&lt;app-root&gt;</code> 的 <code>&lt;#VIEW&gt;</code> 開始的原因。
  對於在同一位置對應的指令，情況並非如此。</li>
<li>結束位置恰好與元件本身相同，因為它是此應用中最頂層的元件。</li>

  </ul>
  </li>
<li><p>當在 <code>ElementInjector</code> 層級結構中找不到注入令牌時，由 <code>ApplicationConfig</code> 提供的 <code>EnvironmentInjector</code> 充當回退注入器。</p>
</li>

    </ol>
    
  <h3 id="using-the-providers-array">
    <a href="#using-the-providers-array" class="docs-anchor" tabindex="-1" aria-label="Link to Using the <code>providers</code> array">使用 <code>providers</code> 陣列</a>
  </h3>
  <p>現在，在 <code>ChildComponent</code> 類別中，為 <code>FlowerService</code> 新增一個提供者，以示範後續章節中更復雜的求解規則：</p>
<div class="docs-code" header="src/app/child.component.ts">
    <div class="docs-code-header"><h3>src/app/child.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-child'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  templateUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./child.component.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  styleUrls: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./child.component.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span><span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // use the providers array to provide a service</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [{ provide: FlowerService, useValue: { emoji: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'🌻'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } }]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ChildComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // inject the service</span></span><span class="line highlighted"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  flower</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FlowerService);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>現在 <code>FlowerService</code> 已在 <code>@Component()</code> 裝飾器中提供，當 <code>&lt;app-child&gt;</code> 請求該服務時，注入器只需檢視 <code>&lt;app-child&gt;</code> 中的 <code>ElementInjector</code> 即可。
它不必在注入器樹中繼續進一步搜尋。</p>
<p>下一步是將繫結新增到 <code>ChildComponent</code> 樣板。</p>
<div class="docs-code" header="src/app/child.component.html">
    <div class="docs-code-header"><h3>src/app/child.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from FlowerService: {{flower.emoji}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>要渲染新值，請將 <code>&lt;app-child&gt;</code> 新增到 <code>AppComponent</code> 樣板的底部，以便檢視也顯示向日葵：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Child</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> Component</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Emoji</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> FlowerService:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 🌻</span></span></code></pre>
    </pre>
  </div><p>在邏輯樹中，這表示為如下形式：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @ApplicationConfig</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        @Inject(FlowerService)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> flower</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🌺"&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from FlowerService: {{flower.emoji}} (🌺)&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @Provide(FlowerService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"🌻"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">)</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">               @Inject(FlowerService)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🌻"&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- search ends here --&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- search starts here --&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Child Component&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from FlowerService: {{flower.emoji}} (🌻)&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>當 <code>&lt;app-child&gt;</code> 請求 <code>FlowerService</code> 時，注入器從屬於 <code>&lt;app-child&gt;</code> 的 <code>&lt;#VIEW&gt;</code> 開始搜尋（包含 <code>&lt;#VIEW&gt;</code> 是因為它從 <code>@Component()</code> 注入），並以 <code>&lt;app-child&gt;</code> 結束。
在本例中，<code>FlowerService</code> 在 <code>&lt;app-child&gt;</code> 的 <code>providers</code> 陣列中使用向日葵 <code><span class="docs-emoji">🌻</span></code> 求解。
注入器不必在注入器樹中進一步查詢。
它在找到 <code>FlowerService</code> 後立即停止，並且永遠不會看到紅色芙蓉花 <code><span class="docs-emoji">🌺</span></code>。</p>

  <h3 id="using-the-viewproviders-array">
    <a href="#using-the-viewproviders-array" class="docs-anchor" tabindex="-1" aria-label="Link to Using the <code>viewProviders</code> array">使用 <code>viewProviders</code> 陣列</a>
  </h3>
  <p>使用 <code>viewProviders</code> 陣列作為在 <code>@Component()</code> 裝飾器中提供服務的另一種方式。
使用 <code>viewProviders</code> 使服務在 <code>&lt;#VIEW&gt;</code> 中可見。</p>

    <div class="docs-alert docs-alert-helpful">
    <p><strong>提示：</strong> 這些步驟與使用 <code>providers</code> 陣列相同，唯一的區別是使用 <code>viewProviders</code> 陣列。</p>

    </div>
    <p>有關分步說明，請繼續閱讀本節。
如果你可以自行建立，請跳至<a href="#visibility-of-provided-tokens">修改服務可用性</a>。</p>
<p>為了示範，我們正在建立一個 <code>AnimalService</code> 以示範 <code>viewProviders</code>。
首先，建立一個 <code>AnimalService</code>，其 <code>emoji</code> 屬性為鯨魚 <code><span class="docs-emoji">🐳</span></code>：</p>
<div class="docs-code" header="src/app/animal.service.ts">
    <div class="docs-code-header"><h3>src/app/animal.service.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Injectable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providedIn: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'root'</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> AnimalService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  emoji</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '🐳'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>按照與 <code>FlowerService</code> 相同的模式，在 <code>AppComponent</code> 類別中注入 <code>AnimalService</code>：</p>
<div class="docs-code" header="src/app/app.component.ts">
    <div class="docs-code-header"><h3>src/app/app.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> AppComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    public</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> flower</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FlowerService);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    public</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> animal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(AnimalService);</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div>
    <div class="docs-alert docs-alert-helpful">
    <p><strong>提示：</strong> 你可以保留所有與 <code>FlowerService</code> 相關的程式碼，因為它允許與 <code>AnimalService</code> 進行比較。</p>

    </div>
    <p>新增一個 <code>viewProviders</code> 陣列，並在 <code>&lt;app-child&gt;</code> 類別中也注入 <code>AnimalService</code>，但為 <code>emoji</code> 提供不同的值。
在這裡，它的值為狗 <code><span class="docs-emoji">🐶</span></code>。</p>
<div class="docs-code" header="src/app/child.component.ts">
    <div class="docs-code-header"><h3>src/app/child.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-child'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  templateUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./child.component.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  styleUrls: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./child.component.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // provide services</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [{ provide: FlowerService, useValue: { emoji: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'🌻'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } }],</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  viewProviders: [{ provide: AnimalService, useValue: { emoji: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'🐶'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } }]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ChildComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // inject services</span></span><span class="line highlighted"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  flower</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FlowerService); </span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  animal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(AnimalService)</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>將繫結新增到 <code>ChildComponent</code> 和 <code>AppComponent</code> 樣板。
在 <code>ChildComponent</code> 樣板中，新增以下繫結：</p>
<div class="docs-code" header="src/app/child.component.html">
    <div class="docs-code-header"><h3>src/app/child.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from AnimalService: {{animal.emoji}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>此外，將相同的繫結新增到 <code>AppComponent</code> 樣板：</p>
<div class="docs-code" header="src/app/app.component.html">
    <div class="docs-code-header"><h3>src/app/app.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from AnimalService: {{animal.emoji}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;s</span></span></code></pre>
    </pre>
  </div><p>現在你應該在瀏覽器中看到這兩個值：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">AppComponent</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Emoji</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> AnimalService:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 🐳</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Child</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> Component</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Emoji</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> AnimalService:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 🐶</span></span></code></pre>
    </pre>
  </div><p>此 <code>viewProviders</code> 範例的邏輯樹如下所示：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @ApplicationConfig</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">         @Inject(AnimalService)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> animal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🐳"&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW @Provide(AnimalService="🐶")</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            @Inject(AnimalService=&gt;"🐶")&gt;</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">       &lt;!-- ^^using viewProviders means AnimalService is available in &lt;#VIEW&gt;--&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">       &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from AnimalService: {{animal.emoji}} (🐶)&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>與 <code>FlowerService</code> 範例一樣，<code>AnimalService</code> 在 <code>&lt;app-child&gt;</code> <code>@Component()</code> 裝飾器中提供。
這意味著，由於注入器首先在元件的 <code>ElementInjector</code> 中查詢，因此它會找到 <code>AnimalService</code> 的值，即狗 <code><span class="docs-emoji">🐶</span></code>。
它無需繼續搜尋 <code>ElementInjector</code> 樹，也無需搜尋 <code>ModuleInjector</code>。</p>

  <h3 id="providers-vs-viewproviders">
    <a href="#providers-vs-viewproviders" class="docs-anchor" tabindex="-1" aria-label="Link to <code>providers</code> vs. <code>viewProviders</code>"><code>providers</code> 與 <code>viewProviders</code></a>
  </h3>
  <p><code>viewProviders</code> 欄位在概念上類似於 <code>providers</code>，但有一個明顯的區別。
<code>viewProviders</code> 中設定的提供者對於最終成為元件邏輯子項的投影內容不可見。</p>
<p>要檢視使用 <code>providers</code> 和 <code>viewProviders</code> 之間的區別，請向範例新增另一個元件並將其命名為 <code>InspectorComponent</code>。
<code>InspectorComponent</code> 將是 <code>ChildComponent</code> 的子元件。
在 <code>inspector.component.ts</code> 中，在屬性初始化期間注入 <code>FlowerService</code> 和 <code>AnimalService</code>：</p>
<div class="docs-code" header="src/app/inspector/inspector.component.ts">
    <div class="docs-code-header"><h3>src/app/inspector/inspector.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> InspectorComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  flower</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FlowerService);</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  animal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(AnimalService);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>你不需要 <code>providers</code> 或 <code>viewProviders</code> 陣列。
接下來，在 <code>inspector.component.html</code> 中，新增與先前元件相同的標記：</p>
<div class="docs-code" header="src/app/inspector/inspector.component.html">
    <div class="docs-code-header"><h3>src/app/inspector/inspector.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from FlowerService: {{flower.emoji}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from AnimalService: {{animal.emoji}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>請記住將 <code>InspectorComponent</code> 新增到 <code>ChildComponent</code> 的 <code>imports</code> 陣列中。</p>
<div class="docs-code" header="src/app/child/child.component.ts">
    <div class="docs-code-header"><h3>src/app/child/child.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  ...</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  imports: [InspectorComponent]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
    </pre>
  </div><p>接下來，將以下內容新增到 <code>child.component.html</code>：</p>
<div class="docs-code" header="src/app/child/child.component.html">
    <div class="docs-code-header"><h3>src/app/child/child.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">...</span></span><span class="line"></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"container"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Content projection&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Inside the view&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line highlighted"></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-inspector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-inspector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p><code>&lt;ng-content&gt;</code> 允許你投影內容，而 <code>ChildComponent</code> 樣板內的 <code>&lt;app-inspector&gt;</code> 使 <code>InspectorComponent</code> 成為 <code>ChildComponent</code> 的子元件。</p>
<p>接下來，將以下內容新增到 <code>app.component.html</code> 以利用內容投影。</p>
<div class="docs-code" header="src/app/app.component.html">
    <div class="docs-code-header"><h3>src/app/app.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-inspector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-inspector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>現在，瀏覽器渲染以下內容，為簡潔起見，省略了之前的範例：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">...</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Content</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> projection</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Emoji</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> FlowerService:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 🌻</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Emoji</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> AnimalService:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 🐳</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Emoji</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> FlowerService:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 🌻</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Emoji</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> AnimalService:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 🐶</span></span></code></pre>
    </pre>
  </div><p>這四個繫結示範了 <code>providers</code> 和 <code>viewProviders</code> 之間的區別。
請記住，小狗表情符號 <code><span class="docs-emoji">🐶</span></code> 在 <code>ChildComponent</code> 的 <code>&lt;#VIEW&gt;</code> 內部宣告，並且對於投影內容是不可見的。
相反，投影內容看到的是鯨魚 <code><span class="docs-emoji">🐳</span></code>。</p>
<p>然而，在接下來的輸出部分中，儘管 <code>InspectorComponent</code> 是 <code>ChildComponent</code> 的實際子元件，但 <code>InspectorComponent</code> 位於 <code>&lt;#VIEW&gt;</code> 內部，因此當它請求 <code>AnimalService</code> 時，它會看到小狗 <code><span class="docs-emoji">🐶</span></code>。</p>
<p>邏輯樹中的 <code>AnimalService</code> 看起來會像這樣：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @ApplicationConfig</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">         @Inject(AnimalService)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> animal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🐳"&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW @Provide(AnimalService="🐶")</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            @Inject(AnimalService=&gt;"🐶")&gt;</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        &lt;!-- ^^using viewProviders means AnimalService is available in &lt;#VIEW&gt;--&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from AnimalService: {{animal.emoji}} (🐶)&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"container"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Content projection&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-inspector</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @Inject(AnimalService)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> animal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🐳"&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from AnimalService: {{animal.emoji}} (🐳)&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-inspector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-inspector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">          &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW @Inject(AnimalService) animal=&gt;"🐶"&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Emoji from AnimalService: {{animal.emoji}} (🐶)&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">          &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-inspector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p><code>&lt;app-inspector&gt;</code> 的投影內容看到的是鯨魚 <code><span class="docs-emoji">🐳</span></code>，而不是小狗 <code><span class="docs-emoji">🐶</span></code>，因為小狗 <code><span class="docs-emoji">🐶</span></code> 在 <code>&lt;app-child&gt;</code> 的 <code>&lt;#VIEW&gt;</code> 內部。
只有當 <code>&lt;app-inspector&gt;</code> 也位於 <code>&lt;#VIEW&gt;</code> 中時，它才能看到小狗 <code><span class="docs-emoji">🐶</span></code>。</p>

  <h3 id="visibility-of-provided-tokens">
    <a href="#visibility-of-provided-tokens" class="docs-anchor" tabindex="-1" aria-label="Link to Visibility of provided tokens">所提供令牌的可見性</a>
  </h3>
  <p>可見性裝飾器會影響在邏輯樹中，對注入令牌的搜尋從哪裡開始以及在哪裡結束。
為此，請將可見性設定放在注入點，即呼叫 <code>inject()</code> 時，而不是在物件宣告點。</p>
<p>要更改注入器開始查詢 <code>FlowerService</code> 的位置，請將 <code>skipSelf</code> 新增到 <code>&lt;app-child&gt;</code> 的 <code>inject()</code> 呼叫中，在該呼叫中注入了 <code>FlowerService</code>。
此呼叫是 <code>&lt;app-child&gt;</code> 的屬性初始化器，如 <code>child.component.ts</code> 中所示：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">flower </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FlowerService, { skipSelf: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span></code></pre>
    </pre>
  </div><p>使用 <code>skipSelf</code>，<code>&lt;app-child&gt;</code> 注入器不會在自身中查詢 <code>FlowerService</code>。
相反，注入器開始在 <code>&lt;app-root&gt;</code> 的 <code>ElementInjector</code> 中查詢 <code>FlowerService</code>，但一無所獲。
然後，它回傳到 <code>&lt;app-child&gt;</code> 的 <code>ModuleInjector</code> 並找到紅色芙蓉花 <code><span class="docs-emoji">🌺</span></code> 值，該值可用，因為 <code>&lt;app-child&gt;</code> 和 <code>&lt;app-root&gt;</code> 共享同一個 <code>ModuleInjector</code>。
UI 渲染以下內容：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Emoji</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> FlowerService:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 🌺</span></span></code></pre>
    </pre>
  </div><p>在邏輯樹中，相同的概念可能看起來像這樣：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @ApplicationConfig</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        @Inject(FlowerService)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> flower</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🌺"&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @Provide(FlowerService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"🌻"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW @Inject(FlowerService, SkipSelf)=&gt;"🌺"&gt;</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        &lt;!-- With SkipSelf, the injector looks to the next injector up the tree (app-root) --&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>儘管 <code>&lt;app-child&gt;</code> 提供了向日葵 <code><span class="docs-emoji">🌻</span></code>，但應用渲染的是紅色芙蓉花 <code><span class="docs-emoji">🌺</span></code>，因為 <code>skipSelf</code> 導致當前注入器 (<code>app-child</code>) 跳過自身並查詢其父級。</p>
<p>如果現在新增 <code>host</code>（除了 <code>skipSelf</code> 之外），結果將為 <code>null</code>。
這是因為 <code>host</code> 將搜尋的上限限制為 <code>app-child</code> 的 <code>&lt;#VIEW&gt;</code>。
以下是邏輯樹中的概念：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @ApplicationConfig</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        @Inject(FlowerService)</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> flower</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🌺"&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- end search here with null--&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @Provide(FlowerService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"🌻"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- start search here --&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW inject(FlowerService, {skipSelf: true, host: true, optional:true})=&gt;null&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-parent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>這裡，服務及其值是相同的，但是 <code>host</code> 阻止注入器在 <code>&lt;#VIEW&gt;</code> 之外進一步查詢 <code>FlowerService</code>，因此它找不到並回傳 <code>null</code>。</p>

  <h3 id="skipself-and-viewproviders">
    <a href="#skipself-and-viewproviders" class="docs-anchor" tabindex="-1" aria-label="Link to <code>skipSelf</code> and <code>viewProviders</code>"><code>skipSelf</code> 和 <code>viewProviders</code></a>
  </h3>
  <p>請記住，<code>&lt;app-child&gt;</code> 在 <code>viewProviders</code> 陣列中提供了 <code>AnimalService</code>，其值為小狗 <code><span class="docs-emoji">🐶</span></code>。
由於注入器只需要檢視 <code>&lt;app-child&gt;</code> 的 <code>ElementInjector</code> 以查詢 <code>AnimalService</code>，因此它永遠不會看到鯨魚 <code><span class="docs-emoji">🐳</span></code>。</p>
<p>與 <code>FlowerService</code> 範例中一樣，如果將 <code>skipSelf</code> 新增到 <code>AnimalService</code> 的 <code>inject()</code> 中，則注入器將不會在當前 <code>&lt;app-child&gt;</code> 的 <code>ElementInjector</code> 中查詢 <code>AnimalService</code>。
相反，注入器將從 <code>&lt;app-root&gt;</code> 的 <code>ElementInjector</code> 開始。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-child'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  …</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  viewProviders: [</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    { provide: AnimalService, useValue: { emoji: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'🐶'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
    </pre>
  </div><p>在 <code>&lt;app-child&gt;</code> 中使用 <code>skipSelf</code> 時，邏輯樹看起來像這樣：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @ApplicationConfig</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">          @Inject(AnimalService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🐳")&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- search begins here --&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW @Provide(AnimalService="🐶")</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">             @Inject(AnimalService, SkipSelf=&gt;"🐳")&gt;</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">        &lt;!--Add skipSelf --&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>在 <code>&lt;app-child&gt;</code> 中使用 <code>skipSelf</code> 時，注入器開始在 <code>&lt;app-root&gt;</code> 的 <code>ElementInjector</code> 中搜索 <code>AnimalService</code>，並找到鯨魚 <code><span class="docs-emoji">🐳</span></code>。</p>

  <h3 id="host-and-viewproviders">
    <a href="#host-and-viewproviders" class="docs-anchor" tabindex="-1" aria-label="Link to <code>host</code> and <code>viewProviders</code>"><code>host</code> 和 <code>viewProviders</code></a>
  </h3>
  <p>如果你只使用 <code>host</code> 來注入 <code>AnimalService</code>，結果是小狗 <code><span class="docs-emoji">🐶</span></code>，因為注入器在 <code>&lt;app-child&gt;</code> 的 <code>&lt;#VIEW&gt;</code> 本身中找到了 <code>AnimalService</code>。
<code>ChildComponent</code> 設定了 <code>viewProviders</code>，以便將小狗表情符號作為 <code>AnimalService</code> 值提供。
你還可以看到 <code>host</code> 的 <code>inject()</code>：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-child'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  …</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  viewProviders: [</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    { provide: AnimalService, useValue: { emoji: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'🐶'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ChildComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line highlighted"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  animal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(AnimalService, { host: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> })</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p><code>host: true</code> 導致注入器一直查詢，直到遇到 <code>&lt;#VIEW&gt;</code> 的邊緣。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @ApplicationConfig</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">          @Inject(AnimalService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🐳")&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW @Provide(AnimalService="🐶")</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">             inject(AnimalService, {host: true}=&gt;"🐶")&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- host stops search here --&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p>將包含第三種動物——刺蝟 <code><span class="docs-emoji">🦔</span></code> 的 <code>viewProviders</code> 陣列新增到 <code>app.component.ts</code> 的 <code>@Component()</code> 元資料中：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-root'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  templateUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./app.component.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  styleUrls: [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./app.component.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  viewProviders: [</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    { provide: AnimalService, useValue: { emoji: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'🦔'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> } },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span></code></pre>
    </pre>
  </div><p>接下來，將 <code>skipSelf</code> 與 <code>host</code> 一起新增到 <code>child.component.ts</code> 中 <code>AnimalService</code> 注入的 <code>inject()</code> 中。
以下是 <code>animal</code> 屬性初始化中的 <code>host</code> 和 <code>skipSelf</code>：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ChildComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  animal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(AnimalService, { host: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, skipSelf: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> });</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><!-- TODO: This requires a rework. It seems not well explained what `viewProviders`/`injectors` is here
  and how `host` works.
 -->

<p>當 <code>host</code> 和 <code>skipSelf</code> 應用於 <code>providers</code> 陣列中的 <code>FlowerService</code> 時，結果為 <code>null</code>，因為 <code>skipSelf</code> 在 <code>&lt;app-child&gt;</code> 注入器中開始搜尋，但 <code>host</code> 在 <code>&lt;#VIEW&gt;</code> 處停止搜尋——那裡沒有 <code>FlowerService</code>。
在邏輯樹中，你可以看到 <code>FlowerService</code> 在 <code>&lt;app-child&gt;</code> 中是可見的，而不是在其 <code>&lt;#VIEW&gt;</code> 中。</p>
<p>但是，在 <code>AppComponent</code> 的 <code>viewProviders</code> 陣列中提供的 <code>AnimalService</code> 是可見的。</p>
<p>邏輯樹表示顯示了原因：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> @ApplicationConfig</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        @Inject(AnimalService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=&gt;"🐳")&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW @Provide(AnimalService="🦔")</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">         @Inject(AnimalService, @Optional)=&gt;"🦔"&gt;</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    &lt;!-- ^^skipSelf starts here,  host stops here^^ --&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#VIEW @Provide(AnimalService="🐶")</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">             inject(AnimalService, {skipSelf:true, host: true, optional: true})=&gt;"🦔"&gt;</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">               &lt;!-- Add skipSelf ^^--&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">      &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-child</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic">  &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/#VIEW&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">app-root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
    </pre>
  </div><p><code>skipSelf</code> 導致注入器在 <code>&lt;app-root&gt;</code> 而不是請求發起的 <code>&lt;app-child&gt;</code> 處開始搜尋 <code>AnimalService</code>，而 <code>host</code> 會在 <code>&lt;app-root&gt;</code> <code>&lt;#VIEW&gt;</code> 處停止搜尋。
由於 <code>AnimalService</code> 是透過 <code>viewProviders</code> 陣列提供的，因此注入器在 <code>&lt;#VIEW&gt;</code> 中找到了 hedgehog <code><span class="docs-emoji">🦔</span></code>。</p>

  <h2 id="example-elementinjector-use-cases">
    <a href="#example-elementinjector-use-cases" class="docs-anchor" tabindex="-1" aria-label="Link to Example: <code>ElementInjector</code> use cases">範例：<code>ElementInjector</code> 用例</a>
  </h2>
  <p>在不同級別設定一個或多個提供者的能力開闢了有用的可能性。</p>

  <h3 id="scenario-service-isolation">
    <a href="#scenario-service-isolation" class="docs-anchor" tabindex="-1" aria-label="Link to Scenario: service isolation">場景：服務隔離</a>
  </h3>
  <p>架構方面的原因可能會導致你限制對服務的訪問，使其只能在它所屬的應用域內訪問。
例如，假設我們建立了一個 <code>VillainsListComponent</code>，用於顯示惡棍清單。
它從 <code>VillainsService</code> 獲取這些惡棍。</p>
<p>如果在根 <code>AppModule</code> 中提供 <code>VillainsService</code>，它將使 <code>VillainsService</code> 在應用的任何地方都可見。
如果你稍後修改 <code>VillainsService</code>，你可能會破壞其他元件中的某些內容，這些元件可能在不經意間開始依賴此服務。</p>
<p>相反，你應該像這樣在 <code>VillainsListComponent</code> 的 <code>providers</code> 元資料中提供 <code>VillainsService</code>：</p>
<div class="docs-code" header="src/app/villains-list.component.ts (metadata)">
    <div class="docs-code-header"><h3>src/app/villains-list.component.ts (元資料)</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-villains-list'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  templateUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./villains-list.component.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [VillainsService]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> VillainsListComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span></code></pre>
    </pre>
  </div><p>透過在 <code>VillainsListComponent</code> 元資料中提供 <code>VillainsService</code> 且不在其他任何地方提供，該服務僅在 <code>VillainsListComponent</code> 及其子元件樹中可用。</p>
<p><code>VillainService</code> 相對於 <code>VillainsListComponent</code> 是單例的，因為正是在那裡宣告的。
只要 <code>VillainsListComponent</code> 沒有被銷燬，它將是 <code>VillainService</code> 的同一個實例，但是如果存在 <code>VillainsListComponent</code> 的多個實例，則 <code>VillainsListComponent</code> 的每個實例都將擁有自己的 <code>VillainService</code> 實例。</p>

  <h3 id="scenario-multiple-edit-sessions">
    <a href="#scenario-multiple-edit-sessions" class="docs-anchor" tabindex="-1" aria-label="Link to Scenario: multiple edit sessions">場景：多個編輯會話</a>
  </h3>
  <p>許多應用允許使用者同時處理多個開啟的任務。
例如，在稅務準備應用中，準備人員可以處理多個納稅申報表，並在一天中在它們之間切換。</p>
<p>為了示範該場景，請想象一個 <code>HeroListComponent</code>，它顯示超級英雄的清單。</p>
<p>要開啟英雄的納稅申報表，準備人員單擊英雄姓名，這將開啟一個元件來編輯該申報表。
每個選定的英雄納稅申報表都在其自己的元件中開啟，並且可以同時開啟多個申報表。</p>
<p>每個納稅申報表元件都具有以下特徵：</p>

  <ul class="docs-list">
    <li>是其自己的納稅申報表編輯會話</li>
<li>可以更改納稅申報表，而不會影響另一個元件中的申報表</li>
<li>能夠儲存對其納稅申報表的更改或取消它們</li>

  </ul>
  <p>假設 <code>HeroTaxReturnComponent</code> 具有管理和恢復更改的邏輯。
對於英雄納稅申報表來說，這將是一項簡單的任務。
但在現實世界中，對於具有豐富納稅申報表資料模型的應用，變更管理將非常棘手。
你可以將該管理委託給輔助服務，如本例所示。</p>
<p><code>HeroTaxReturnService</code> 快取單個 <code>HeroTaxReturn</code>，跟蹤對該申報表的更改，並且可以儲存或恢復它。
它還委託給應用範圍內的單例 <code>HeroService</code>，它透過依賴注入獲得該服務。</p>
<div class="docs-code" header="src/app/hero-tax-return.service.ts">
    <div class="docs-code-header"><h3>src/app/hero-tax-return.service.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Injectable } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { HeroTaxReturn } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './hero'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { HeroesService } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './heroes.service'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HeroTaxReturnService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> currentTaxReturn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HeroTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> originalTaxReturn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HeroTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> heroService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(HeroesService);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  set</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> taxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">htr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HeroTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.originalTaxReturn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htr;</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.currentTaxReturn  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">clone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> taxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HeroTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.currentTaxReturn;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  restoreTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.taxReturn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.originalTaxReturn;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  saveTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.taxReturn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.currentTaxReturn;</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.heroService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">saveTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.currentTaxReturn).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">subscribe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>這是使用 <code>HeroTaxReturnService</code> 的 <code>HeroTaxReturnComponent</code>。</p>
<div class="docs-code" header="src/app/hero-tax-return.component.ts">
    <div class="docs-code-header"><h3>src/app/hero-tax-return.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Component, EventEmitter, Input, Output } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { HeroTaxReturn } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './hero'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { HeroTaxReturnService } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './hero-tax-return.service'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-hero-tax-return'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  templateUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./hero-tax-return.component.html'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  styleUrls: [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'./hero-tax-return.component.css'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [ HeroTaxReturnService ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HeroTaxReturnComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">close</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> taxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HeroTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.heroTaxReturnService.taxReturn;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  set</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> taxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">htr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> HeroTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.heroTaxReturnService.taxReturn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> htr;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> heroTaxReturnService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(HeroTaxReturnService);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  onCanceled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()  {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">flashMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Canceled'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.heroTaxReturnService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">restoreTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  onClose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.close.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(); }</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  onSaved</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">flashMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Saved'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.heroTaxReturnService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">saveTaxReturn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  flashMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">msg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> msg;</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.message </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p><em>要編輯的納稅申報表</em> 透過 <code>@Input()</code> 屬性傳入，該屬性使用 getter 和 setter 實現。
Setter 使用傳入的申報表初始化元件自身 <code>HeroTaxReturnService</code> 的實例。
Getter 始終回傳該服務所說的英雄的當前狀態。
該組件還要求該服務儲存和恢復此納稅申報表。</p>
<p>如果該服務是應用範圍內的單例，這將不起作用。
每個元件都將共享同一個服務實例，並且每個元件都將覆蓋屬於另一個英雄的納稅申報表。</p>
<p>為了防止這種情況，請設定 <code>HeroTaxReturnComponent</code> 的元件級注入器以提供該服務，方法是在元件元資料中使用 <code>providers</code> 屬性。</p>
<div class="docs-code" header="src/app/hero-tax-return.component.ts (providers)">
    <div class="docs-code-header"><h3>src/app/hero-tax-return.component.ts (提供者)</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [HeroTaxReturnService]</span></span></code></pre>
    </pre>
  </div><p><code>HeroTaxReturnComponent</code> 元件有自己的 <code>HeroTaxReturnService</code> 提供者。
回想一下，每個元件<em>實例</em>都有自己的注入器。
在元件級別提供此服務可確保元件的<em>每個</em>實例都獲得該服務的私有實例。這樣可以確保不會覆蓋任何納稅申報表。</p>

    <div class="docs-alert docs-alert-helpful">
    <p><strong>提示：</strong> 場景程式碼的其餘部分依賴於其他 Angular 屬性和技術，你可以在文件的其他地方瞭解它們。</p>

    </div>
    
  <h3 id="scenario-specialized-providers">
    <a href="#scenario-specialized-providers" class="docs-anchor" tabindex="-1" aria-label="Link to Scenario: specialized providers">場景：專用提供者</a>
  </h3>
  <p>在另一個級別再次提供服務的另一個原因是，為了在元件樹的更深層替換該服務的<em>更專用</em>實現。</p>
<p>例如，考慮一個 <code>Car</code> 元件，它包含輪胎服務訊息，並依賴於其他服務來提供關於汽車的更多詳情。</p>
<p>根注入器（標記為 A）對關於 <code>CarService</code> 和 <code>EngineService</code> 的詳情使用了<em>通用</em>提供者。</p>

    <ol class="docs-ordered-list">
      <li><p><code>Car</code> 元件 (A)。元件 (A) 顯示關於汽車的輪胎服務資料，並指定通用服務以提供關於汽車的更多訊息。</p>
</li>
<li><p>子元件 (B)。元件 (B) 為 <code>CarService</code> 和 <code>EngineService</code> 定義了自己的<em>專用</em>提供者，這些提供者具有適用於元件 (B) 中正在發生的事情的特殊功能。</p>
</li>
<li><p>子元件 (C) 作為元件 (B) 的子元件。元件 (C) 為 <code>CarService</code> 定義了它自己的，甚至<em>更專用</em>的提供者。</p>
</li>

    </ol>
    <svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 355.15625 215" style="max-width: 355.15625px;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-generated-diagram"><style>#mermaid-generated-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-generated-diagram .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-generated-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-generated-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-generated-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-generated-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-generated-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-generated-diagram .marker{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .marker.cross{stroke:#0b0b0b;}#mermaid-generated-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-generated-diagram p{margin:0;}#mermaid-generated-diagram .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-generated-diagram .cluster-label text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span p{background-color:transparent;}#mermaid-generated-diagram .label text,#mermaid-generated-diagram span{fill:#333;color:#333;}#mermaid-generated-diagram .node rect,#mermaid-generated-diagram .node circle,#mermaid-generated-diagram .node ellipse,#mermaid-generated-diagram .node polygon,#mermaid-generated-diagram .node path{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .rough-node .label text,#mermaid-generated-diagram .node .label text,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-anchor:middle;}#mermaid-generated-diagram .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-generated-diagram .rough-node .label,#mermaid-generated-diagram .node .label,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-align:center;}#mermaid-generated-diagram .node.clickable{cursor:pointer;}#mermaid-generated-diagram .root .anchor path{fill:#0b0b0b!important;stroke-width:0;stroke:#0b0b0b;}#mermaid-generated-diagram .arrowheadPath{fill:#0b0b0b;}#mermaid-generated-diagram .edgePath .path{stroke:#0b0b0b;stroke-width:2.0px;}#mermaid-generated-diagram .flowchart-link{stroke:#0b0b0b;fill:none;}#mermaid-generated-diagram .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .edgeLabel p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .labelBkg{background-color:rgba(243.9999999999, 220.9999999998, 255, 0.5);}#mermaid-generated-diagram .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .cluster text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(220.5882352941, 100%, 98.3333333333%);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-generated-diagram .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-generated-diagram rect.text{fill:none;stroke-width:0;}#mermaid-generated-diagram .icon-shape,#mermaid-generated-diagram .image-shape{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .icon-shape p,#mermaid-generated-diagram .image-shape p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);padding:2px;}#mermaid-generated-diagram .icon-shape rect,#mermaid-generated-diagram .image-shape rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-generated-diagram .noShadow>*{filter:none!important;}#mermaid-generated-diagram .noShadow span{filter:none!important;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="COMPONENT_A" class="cluster noShadow"><rect height="199" width="339.15625" y="8" x="8" style="filter:none !important;fill:#BDD7EE !important"></rect><g transform="translate(123.1171875, 8)" class="cluster-label"><foreignObject height="24" width="108.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Component A</p></span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(35, 37.5)" class="root"><g class="clusters"><g data-look="classic" id="COMPONENT_B" class="cluster noShadow"><rect height="124" width="269.15625" y="8" x="8" style="filter:none !important;fill:#FFE699 !important"></rect><g transform="translate(88.1015625, 8)" class="cluster-label"><foreignObject height="24" width="108.953125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Component B</p></span></div></foreignObject></g></g></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(142.578125, 70)" id="flowchart-COMPONENT_C-0" class="node default noShadow"><rect height="54" width="169.15625" y="-27" x="-84.578125" style="filter:none !important;fill:#A9D18E !important" class="basic label-container"></rect><g transform="translate(-54.578125, -12)" style="color:#000 !important" class="label"><rect></rect><foreignObject height="24" width="109.15625"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#000 !important"><p>Component C</p></span></div></foreignObject></g></g></g></g></g></g></g></g></g></svg><p>在幕後，每個元件都建立了自己的注入器，其中包含為該組件自身定義的零個、一個或多個提供者。</p>
<p>當你在最深層的元件 (C) 中求解 <code>Car</code> 的實例時，它的注入器會產生：</p>

  <ul class="docs-list">
    <li>由注入器 (C) 求解的 <code>Car</code> 實例</li>
<li>由注入器 (B) 求解的 <code>Engine</code></li>
<li>它的 <code>Tires</code> 由根注入器 (A) 求解。</li>

  </ul>
  <svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 596.359375 604" style="max-width: 596.359375px;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-generated-diagram"><style>#mermaid-generated-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-generated-diagram .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-generated-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-generated-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-generated-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-generated-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-generated-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-generated-diagram .marker{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .marker.cross{stroke:#0b0b0b;}#mermaid-generated-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-generated-diagram p{margin:0;}#mermaid-generated-diagram .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-generated-diagram .cluster-label text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span p{background-color:transparent;}#mermaid-generated-diagram .label text,#mermaid-generated-diagram span{fill:#333;color:#333;}#mermaid-generated-diagram .node rect,#mermaid-generated-diagram .node circle,#mermaid-generated-diagram .node ellipse,#mermaid-generated-diagram .node polygon,#mermaid-generated-diagram .node path{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .rough-node .label text,#mermaid-generated-diagram .node .label text,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-anchor:middle;}#mermaid-generated-diagram .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-generated-diagram .rough-node .label,#mermaid-generated-diagram .node .label,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-align:center;}#mermaid-generated-diagram .node.clickable{cursor:pointer;}#mermaid-generated-diagram .root .anchor path{fill:#0b0b0b!important;stroke-width:0;stroke:#0b0b0b;}#mermaid-generated-diagram .arrowheadPath{fill:#0b0b0b;}#mermaid-generated-diagram .edgePath .path{stroke:#0b0b0b;stroke-width:2.0px;}#mermaid-generated-diagram .flowchart-link{stroke:#0b0b0b;fill:none;}#mermaid-generated-diagram .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .edgeLabel p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .labelBkg{background-color:rgba(243.9999999999, 220.9999999998, 255, 0.5);}#mermaid-generated-diagram .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .cluster text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(220.5882352941, 100%, 98.3333333333%);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-generated-diagram .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-generated-diagram rect.text{fill:none;stroke-width:0;}#mermaid-generated-diagram .icon-shape,#mermaid-generated-diagram .image-shape{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .icon-shape p,#mermaid-generated-diagram .image-shape p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);padding:2px;}#mermaid-generated-diagram .icon-shape rect,#mermaid-generated-diagram .image-shape rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g data-look="classic" id="C" class="cluster noShadow"><rect height="104" width="466.5625" y="388" x="13.3359375" style=""></rect><g transform="translate(246.6171875, 388)" class="cluster-label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject></g></g><g data-look="classic" id="B" class="cluster noShadow"><rect height="128" width="580.359375" y="210" x="8" style=""></rect><g transform="translate(298.1796875, 210)" class="cluster-label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject></g></g><g data-look="classic" id="A" class="cluster noShadow"><rect height="152" width="565.359375" y="8" x="15.5" style=""></rect><g transform="translate(298.1796875, 8)" class="cluster-label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_car_ChildInjector_0" d="M143.18,542L143.18,537.833C143.18,533.667,143.18,525.333,143.18,517C143.18,508.667,143.18,500.333,143.18,492.667C143.18,485,143.18,478,143.18,474.5L143.18,471"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ChildInjector_ParentInjector_0" d="M143.18,413L143.18,408.833C143.18,404.667,143.18,396.333,143.18,388C143.18,379.667,143.18,371.333,143.18,363C143.18,354.667,143.18,346.333,143.18,336.667C143.18,327,143.18,316,143.18,310.5L143.18,305"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ParentInjector_RootInjector_0" d="M143.18,247L143.18,240.833C143.18,234.667,143.18,222.333,143.18,212C143.18,201.667,143.18,193.333,143.18,185C143.18,176.667,143.18,168.333,143.18,156.667C143.18,145,143.18,130,143.18,122.5L143.18,115"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(143.1796875, 84)" id="flowchart-RootInjector-0" class="node default noShadow"><rect height="54" width="185.359375" y="-27" x="-92.6796875" style="fill:#BDD7EE !important" class="basic label-container"></rect><g transform="translate(-62.6796875, -12)" style="color:#000 !important" class="label"><rect></rect><foreignObject height="24" width="125.359375"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#000 !important"><p>(A) RootInjector</p></span></div></foreignObject></g></g><g transform="translate(415.859375, 84)" id="flowchart-ServicesA-1" class="node default noShadow"><rect height="102" width="260" y="-51" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -36)" style="" class="label"><rect></rect><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CarService, EngineService, TiresService</p></span></div></foreignObject></g></g><g transform="translate(143.1796875, 274)" id="flowchart-ParentInjector-2" class="node default noShadow"><rect height="54" width="200.359375" y="-27" x="-100.1796875" style="fill:#FFE699 !important" class="basic label-container"></rect><g transform="translate(-70.1796875, -12)" style="color:#000 !important" class="label"><rect></rect><foreignObject height="24" width="140.359375"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#000 !important"><p>(B) ParentInjector</p></span></div></foreignObject></g></g><g transform="translate(423.359375, 274)" id="flowchart-ServicesB-3" class="node default noShadow"><rect height="78" width="260" y="-39" x="-130" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CarService2, EngineService2</p></span></div></foreignObject></g></g><g transform="translate(143.1796875, 440)" id="flowchart-ChildInjector-4" class="node default noShadow"><rect height="54" width="189.6875" y="-27" x="-94.84375" style="fill:#A9D18E !important" class="basic label-container"></rect><g transform="translate(-64.84375, -12)" style="color:#000 !important" class="label"><rect></rect><foreignObject height="24" width="129.6875"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#000 !important"><p>(C) ChildInjector</p></span></div></foreignObject></g></g><g transform="translate(366.4609375, 440)" id="flowchart-ServicesC-5" class="node default noShadow"><rect height="54" width="156.875" y="-27" x="-78.4375" style="" class="basic label-container"></rect><g transform="translate(-48.4375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="96.875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>CarService3</p></span></div></foreignObject></g></g><g transform="translate(143.1796875, 569)" id="flowchart-car-6" class="node default noShadow"><rect height="54" width="116.296875" y="-27" x="-58.1484375" style="fill:#A9D18E !important" class="basic label-container"></rect><g transform="translate(-28.1484375, -12)" style="color:#000 !important" class="label"><rect></rect><foreignObject height="24" width="56.296875"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#000 !important"><p>(C) Car</p></span></div></foreignObject></g></g><g transform="translate(323.0234375, 569)" id="flowchart-engine-7" class="node default noShadow"><rect height="54" width="143.390625" y="-27" x="-71.6953125" style="fill:#FFE699 !important" class="basic label-container"></rect><g transform="translate(-41.6953125, -12)" style="color:#000 !important" class="label"><rect></rect><foreignObject height="24" width="83.390625"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#000 !important"><p>(B) Engine</p></span></div></foreignObject></g></g><g transform="translate(508.046875, 569)" id="flowchart-tires-8" class="node default noShadow"><rect height="54" width="126.65625" y="-27" x="-63.328125" style="fill:#BDD7EE !important" class="basic label-container"></rect><g transform="translate(-33.328125, -12)" style="color:#000 !important" class="label"><rect></rect><foreignObject height="24" width="66.65625"><div xmlns="http://www.w3.org/1999/xhtml" style="color: rgb(0, 0, 0) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#000 !important"><p>(A) Tires</p></span></div></foreignObject></g></g></g></g></g></svg>
  <h2 id="more-on-dependency-injection">
    <a href="#more-on-dependency-injection" class="docs-anchor" tabindex="-1" aria-label="Link to More on dependency injection">更多關於依賴注入的內容</a>
  </h2>
  
    <nav class="docs-pill-row">
      
    <a class="docs-pill" href="/guide/di/dependency-injection-providers">DI 提供者</a>
    

    </nav>
    