<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1" data-ng_translator_product="100" data-ng_translator_ref_id="aqaxfplp6qxrifboo3fit1xgq">构建动态表单</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/forms/dynamic-forms.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8bb67cdj5yzx3py93io7phyky">许多表单（比如问卷）可能在格式和意图上都非常相似。为了更快更轻松地生成这种表单的不同版本，你可以根据描述业务对象模型的元数据来创建<em>动态表单模板</em>。然后就可以根据数据模型中的变化，使用该模板自动生成新的表单。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7pbw86bxfbfwfmqyvkcsug1j6">如果你有这样一种表单，其内容必须经常更改以满足快速变化的业务需求和监管需求，该技术就特别有用。一个典型的例子就是问卷。你可能需要在不同的上下文中获取用户的意见。用户要看到的表单格式和样式应该保持不变，而你要提的实际问题则会因上下文而异。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2n4fee4wdbap5mkl03qcy2eqa">在本教程中，你会构建一个渲染基本问卷的动态表单。你要为正在找工作的英雄们建立一个在线应用。英雄管理局会不断修补应用流程，但是借助动态表单，你可以动态创建新的表单，而无需修改应用代码。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5jd1bfnfz46dayfz87rs41abg">本教程将指导你完成以下步骤。</p>

    <ol class="docs-ordered-list">
      <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="d66rx3b8pfwfkioypqqs1exk1">为项目启用响应式表单。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="16z7gjkzana2h14l1yia5y47g">建立一个数据模型来表示表单控件。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7cbcbzq5hgvq6nokjqc82aao7">使用范例数据填充模型。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2miiy83x8wq2ebgz21pltnqkc">开发一个组件来动态创建表单控件。</li>

    </ol>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7iimyn93ypmi90cfopw4butoz">你创建的表单会使用输入验证和样式来改善用户体验。它有一个 Submit 按钮，这个按钮只会在所有的用户输入都有效时启用，并用色彩和一些错误信息来标记出无效输入。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2y35bsb1vcj2al43qe5engnsi">这个基本版可以不断演进，以支持更多的问题类型、更优雅的渲染体验以及更高大上的用户体验。</p>

  <h2 id="enable-reactive-forms-for-your-project">
    <a href="#enable-reactive-forms-for-your-project" class="docs-anchor" tabindex="-1" aria-label="Link to Enable reactive forms for your project" data-ng_translator_product="100" data-ng_translator_ref_id="6tbevbc12oy6rz8uurfwjqzxv">为项目启用响应式表单</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="er6cgny8qq6l9waizhhd04pud">动态表单是基于响应式表单的。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="6w9ongd1fv5srdyxaoxa9n3a4">为了让应用访问响应式表单指令，从
<code>@angular/forms</code>库中导入
<code>ReactiveFormsModule</code>到必要的组件中。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3s9dl2g3xc4w52poq1gh6o72c">以下代码展示了此范例在根模块中所做的设置。</p>
<div class="docs-code-multifile">
    <div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/dynamic-form.component.ts" header="dynamic-form.component.ts">
    <div class="docs-code-header"><h3>dynamic-form.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">OnInit</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">CommonModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">FormGroup</span>, <span class="hljs-title class_">ReactiveFormsModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">DynamicFormQuestionComponent</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./dynamic-form-question.component'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">QuestionBase</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-base'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">QuestionControlService</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-control.service'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-dynamic-form'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./dynamic-form.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">QuestionControlService</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CommonModule</span>, <span class="hljs-title class_">DynamicFormQuestionComponent</span>, <span class="hljs-title class_">ReactiveFormsModule</span>],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicFormComponent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OnInit</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input</span>() <span class="hljs-attr">questions</span>: <span class="hljs-title class_">QuestionBase</span>&lt;<span class="hljs-built_in">string</span>&gt;[] | <span class="hljs-literal">null</span> = [];</div><div class="hljs-ln-line">  form!: <span class="hljs-title class_">FormGroup</span>;</div><div class="hljs-ln-line">  payLoad = <span class="hljs-string">''</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> qcs: QuestionControlService</span>) {}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">ngOnInit</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">form</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">qcs</span>.<span class="hljs-title function_">toFormGroup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">questions</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">QuestionBase</span>&lt;<span class="hljs-built_in">string</span>&gt;[]);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">onSubmit</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">payLoad</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">form</span>.<span class="hljs-title function_">getRawValue</span>());</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/dynamic-form-question.component.ts" header="dynamic-form-question.component.ts">
    <div class="docs-code-header"><h3>dynamic-form-question.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>, <span class="hljs-title class_">Input</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">FormGroup</span>, <span class="hljs-title class_">ReactiveFormsModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">CommonModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">QuestionBase</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-base'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-question'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./dynamic-form-question.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CommonModule</span>, <span class="hljs-title class_">ReactiveFormsModule</span>],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicFormQuestionComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input</span>() question!: <span class="hljs-title class_">QuestionBase</span>&lt;<span class="hljs-built_in">string</span>&gt;;</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input</span>() form!: <span class="hljs-title class_">FormGroup</span>;</div><div class="hljs-ln-line">  <span class="hljs-keyword">get</span> <span class="hljs-title function_">isValid</span>() {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">form</span>.<span class="hljs-property">controls</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">question</span>.<span class="hljs-property">key</span>].<span class="hljs-property">valid</span>;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    </div>
  <h2 id="create-a-form-object-model">
    <a href="#create-a-form-object-model" class="docs-anchor" tabindex="-1" aria-label="Link to Create a form object model" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="a7w7wngysiep2zf5xbh4hdm8g">创建表单对象模型</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="1eqxoza05v8ezkh7atmeq5sxa">一个动态表单需要一个对象模型，该模型可以描述表单功能所需的所有场景。示例英雄应用中的表单是一组问题 — 即表单中的每个控件必须提出一个问题并接受一个答案。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="1z90smvcfkrbd1v50ylk1vwxv">这种类型表单的数据模型必须代表一个问题。示例中包含
<code>DynamicFormQuestionComponent</code>，它将问题定义为模型中的基本对象。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="79rdaglhcztrjy3alre4u0q8c">这个 <code>QuestionBase</code> 是一组控件的基类，可以在表单中表示问题及其答案。</p>
<div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/question-base.ts" header="src/app/question-base.ts">
    <div class="docs-code-header"><h3>src/app/question-base.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QuestionBase</span>&lt;T&gt; {</div><div class="hljs-ln-line">  <span class="hljs-attr">value</span>: T | <span class="hljs-literal">undefined</span>;</div><div class="hljs-ln-line">  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>;</div><div class="hljs-ln-line">  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>;</div><div class="hljs-ln-line">  <span class="hljs-attr">required</span>: <span class="hljs-built_in">boolean</span>;</div><div class="hljs-ln-line">  <span class="hljs-attr">order</span>: <span class="hljs-built_in">number</span>;</div><div class="hljs-ln-line">  <span class="hljs-attr">controlType</span>: <span class="hljs-built_in">string</span>;</div><div class="hljs-ln-line">  <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span>;</div><div class="hljs-ln-line">  <span class="hljs-attr">options</span>: {<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>}[];</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span></div><div class="hljs-ln-line">    options: {</div><div class="hljs-ln-line">      value?: T;</div><div class="hljs-ln-line">      key?: <span class="hljs-built_in">string</span>;</div><div class="hljs-ln-line">      label?: <span class="hljs-built_in">string</span>;</div><div class="hljs-ln-line">      required?: <span class="hljs-built_in">boolean</span>;</div><div class="hljs-ln-line">      order?: <span class="hljs-built_in">number</span>;</div><div class="hljs-ln-line">      controlType?: <span class="hljs-built_in">string</span>;</div><div class="hljs-ln-line">      <span class="hljs-keyword">type</span>?: <span class="hljs-built_in">string</span>;</div><div class="hljs-ln-line">      options?: {key: <span class="hljs-built_in">string</span>; value: <span class="hljs-built_in">string</span>}[];</div><div class="hljs-ln-line">    } = {},</div><div class="hljs-ln-line">  ) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = options.<span class="hljs-property">value</span>;</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = options.<span class="hljs-property">key</span> || <span class="hljs-string">''</span>;</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">label</span> = options.<span class="hljs-property">label</span> || <span class="hljs-string">''</span>;</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">required</span> = !!options.<span class="hljs-property">required</span>;</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">order</span> = options.<span class="hljs-property">order</span> === <span class="hljs-literal">undefined</span> ? <span class="hljs-number">1</span> : options.<span class="hljs-property">order</span>;</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controlType</span> = options.<span class="hljs-property">controlType</span> || <span class="hljs-string">''</span>;</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">type</span> = options.<span class="hljs-property">type</span> || <span class="hljs-string">''</span>;</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = options.<span class="hljs-property">options</span> || [];</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
  <h3 id="define-control-classes">
    <a href="#define-control-classes" class="docs-anchor" tabindex="-1" aria-label="Link to Define control classes" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dijsuxtfg25zvw12fq9h5gsgp">定义控件类</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cvfdnu55ou37qqh2p0oznu8bz">此范例从这个基类派生出两个新类，<code>TextboxQuestion</code> 和 <code>DropdownQuestion</code>，分别代表不同的控件类型。当你在下一步中创建表单模板时，你会实例化这些具体的问题类，以便动态渲染相应的控件。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="38zpf0mor84nnqoc1nirfldst"><code>TextboxQuestion</code>控件类型在表单模板中使用
<code>&lt;input&gt;</code>元素表示。它提出一个问题并让用户输入。元素的
<code>type</code>属性基于
<code>options</code>参数中指定的
<code>type</code>字段定义（例如
<code>text</code>、
<code>email</code>、
<code>url</code>）。</p>
<div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/question-textbox.ts" header="question-textbox.ts">
    <div class="docs-code-header"><h3>question-textbox.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">QuestionBase</span>} from './question-base';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TextboxQuestion</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">QuestionBase&lt;string&gt;</span> </span>{</div><div class="hljs-ln-line">  <span class="hljs-keyword">override</span> controlType = 'textbox';</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="7nlat8nnaee0m4f2z9ad64l2u"><code>DropdownQuestion</code>控件类型在选择框中显示一个选择列表。</p>
<div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/question-dropdown.ts" header="question-dropdown.ts">
    <div class="docs-code-header"><h3>question-dropdown.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-type">QuestionBase</span>} from './question-base';</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DropdownQuestion</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">QuestionBase&lt;string&gt;</span> </span>{</div><div class="hljs-ln-line">  <span class="hljs-keyword">override</span> controlType = 'dropdown';</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
  <h3 id="compose-form-groups">
    <a href="#compose-form-groups" class="docs-anchor" tabindex="-1" aria-label="Link to Compose form groups" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5cp207aq696qpb6gb1oi83urn">合成表单组</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="db8of61j3ea9sv718yom6wwin">动态表单使用服务根据表单模型创建输入控件的分组集。以下
<code>QuestionControlService</code>收集一组
<code>FormGroup</code>实例，这些实例使用问题模型中的元数据。你可以指定默认值和验证规则。</p>
<div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/question-control.service.ts" header="src/app/question-control.service.ts">
    <div class="docs-code-header"><h3>src/app/question-control.service.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Injectable</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">FormControl</span>, <span class="hljs-title class_">FormGroup</span>, <span class="hljs-title class_">Validators</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">QuestionBase</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-base'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Injectable</span>()</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">QuestionControlService</span> {</div><div class="hljs-ln-line">  <span class="hljs-title function_">toFormGroup</span>(<span class="hljs-params">questions: QuestionBase&lt;<span class="hljs-built_in">string</span>&gt;[]</span>) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">const</span> <span class="hljs-attr">group</span>: <span class="hljs-built_in">any</span> = {};</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    questions.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">question</span>) =&gt;</span> {</div><div class="hljs-ln-line">      group[question.<span class="hljs-property">key</span>] = question.<span class="hljs-property">required</span></div><div class="hljs-ln-line">        ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormControl</span>(question.<span class="hljs-property">value</span> || <span class="hljs-string">''</span>, <span class="hljs-title class_">Validators</span>.<span class="hljs-property">required</span>)</div><div class="hljs-ln-line">        : <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormControl</span>(question.<span class="hljs-property">value</span> || <span class="hljs-string">''</span>);</div><div class="hljs-ln-line">    });</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormGroup</span>(group);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
  <h2 id="compose-dynamic-form-contents">
    <a href="#compose-dynamic-form-contents" class="docs-anchor" tabindex="-1" aria-label="Link to Compose dynamic form contents" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="ck8b0173q7ku3r97i6pc36ftt">动态表单内容分组</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2xkb4xcpx1bbniiy7pdbtchbp">动态表单本身就是一个容器组件，稍后你会添加它。每个问题都会在表单组件的模板中用一个 <code>&lt;app-question&gt;</code> 标签表示，该标签会匹配 <code>DynamicFormQuestionComponent</code> 中的一个实例。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="9ijwaj7oomf902vdc9kdayta1"><code>DynamicFormQuestionComponent</code>负责根据数据绑定的问题对象中的值渲染单个问题的详细信息。表单依赖于
<a href="api/forms/FormGroupDirective" title="API" reference><code>[formGroup]</code>指令</a>将模板 HTML 连接到底层控件对象。
<code>DynamicFormQuestionComponent</code>创建表单组，并根据问题模型中定义的控件填充它们，指定显示和验证规则。</p>
<div class="docs-code-multifile">
    <div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/dynamic-form-question.component.html" header="dynamic-form-question.component.html">
    <div class="docs-code-header"><h3>dynamic-form-question.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> [<span class="hljs-attr">formGroup</span>]=<span class="hljs-string">"form"</span>&gt;</span></span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">label</span> [<span class="hljs-attr">attr.for</span>]=<span class="hljs-string">"question.key"</span>&gt;</span><span class="hljs-template-variable">{{ <span class="hljs-name">question.label</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line">    @switch (question.controlType) {</div><div class="hljs-ln-line">      @case ('textbox') {</div><div class="hljs-ln-line">        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> [<span class="hljs-attr">formControlName</span>]=<span class="hljs-string">"question.key"</span> [<span class="hljs-attr">id</span>]=<span class="hljs-string">"question.key"</span> [<span class="hljs-attr">type</span>]=<span class="hljs-string">"question.type"</span>&gt;</span></div><div class="hljs-ln-line">      } @case ('dropdown') {</div><div class="hljs-ln-line">        <span class="hljs-tag">&lt;<span class="hljs-name">select</span> [<span class="hljs-attr">id</span>]=<span class="hljs-string">"question.key"</span> [<span class="hljs-attr">formControlName</span>]=<span class="hljs-string">"question.key"</span>&gt;</span></div><div class="hljs-ln-line">        @for (opt of question.options; track opt) {</div><div class="hljs-ln-line">          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> [<span class="hljs-attr">value</span>]=<span class="hljs-string">"opt.key"</span>&gt;</span><span class="hljs-template-variable">{{ <span class="hljs-name">opt.value</span> }}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span></div><div class="hljs-ln-line">        }</div><div class="hljs-ln-line">        <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div><div class="hljs-ln-line">      }</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  @if (!isValid) {<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"errorMessage"</span>&gt;</span><span class="hljs-template-variable">{{ <span class="hljs-name">question.label</span> }}</span><span class="language-xml"> is required<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/dynamic-form-question.component.ts" header="dynamic-form-question.component.ts">
    <div class="docs-code-header"><h3>dynamic-form-question.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>, <span class="hljs-title class_">Input</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">FormGroup</span>, <span class="hljs-title class_">ReactiveFormsModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">CommonModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">QuestionBase</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-base'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-question'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./dynamic-form-question.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CommonModule</span>, <span class="hljs-title class_">ReactiveFormsModule</span>],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicFormQuestionComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input</span>() question!: <span class="hljs-title class_">QuestionBase</span>&lt;<span class="hljs-built_in">string</span>&gt;;</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input</span>() form!: <span class="hljs-title class_">FormGroup</span>;</div><div class="hljs-ln-line">  <span class="hljs-keyword">get</span> <span class="hljs-title function_">isValid</span>() {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">form</span>.<span class="hljs-property">controls</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">question</span>.<span class="hljs-property">key</span>].<span class="hljs-property">valid</span>;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    </div><p data-ng_translator_product="100" data-ng_translator_ref_id="4ejqohlfvdgf98bwb4vsben7z"><code>DynamicFormQuestionComponent</code>的目标是呈现模型中定义的问题类型。目前你只有两种问题类型，但可以想象更多。模板中的
<code>ngSwitch</code>语句决定显示哪种类型的问题。该切换使用带有
<a href="api/forms/FormControlName" title="FormControlName" directive api reference><code>formControlName</code></a>和
<a href="api/forms/FormGroupDirective" title="FormGroupDirective" api reference><code>formGroup</code></a>选择器的指令。两者都在
<code>ReactiveFormsModule</code>中定义。</p>

  <h3 id="supply-data">
    <a href="#supply-data" class="docs-anchor" tabindex="-1" aria-label="Link to Supply data" data-ng_translator_product="100" data-ng_translator_ref_id="e4dy2ufbimugdsfxnxhoucbgq">提供数据</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8iwpexu0jf236ufwmudgny5j8">还要另外一项服务来提供一组具体的问题，以便构建出一个单独的表单。在本练习中，你将创建 <code>QuestionService</code> 以从硬编码的范例数据中提供这组问题。在真实世界的应用中，该服务可能会从后端获取数据。重点是，你可以完全通过 <code>QuestionService</code> 返回的对象来控制英雄的求职申请问卷。要想在需求发生变化时维护问卷，你只需要在 <code>questions</code> 数组中添加、更新和删除对象。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="95cr6v3sg5kkwhre4o0ijw0hi"><code>QuestionService</code> 提供一组以数组形式绑定到 
<code>@Input()</code> questions 的问题。</p>
<div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/question.service.ts" header="src/app/question.service.ts">
    <div class="docs-code-header"><h3>src/app/question.service.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">import {Injectable} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">import {DropdownQuestion} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-dropdown'</span>;</div><div class="hljs-ln-line">import {QuestionBase} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-base'</span>;</div><div class="hljs-ln-line">import {TextboxQuestion} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-textbox'</span>;</div><div class="hljs-ln-line">import {of} <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">@Injectable()</div><div class="hljs-ln-line">export class QuestionService {</div><div class="hljs-ln-line">  // TODO: get <span class="hljs-keyword">from</span> a remote source of question metadata</div><div class="hljs-ln-line">  getQuestions() {</div><div class="hljs-ln-line">    const questions: QuestionBase&lt;string&gt;[] = [</div><div class="hljs-ln-line">      new DropdownQuestio<span class="hljs-meta">n</span>({</div><div class="hljs-ln-line">        <span class="hljs-keyword">key</span>: <span class="hljs-string">'favoriteAnimal'</span>,</div><div class="hljs-ln-line">        <span class="hljs-keyword">label</span>: <span class="hljs-string">'Favorite Animal'</span>,</div><div class="hljs-ln-line">        <span class="hljs-keyword">options</span>: [</div><div class="hljs-ln-line">          {<span class="hljs-keyword">key</span>: <span class="hljs-string">'cat'</span>, value: <span class="hljs-string">'Cat'</span>},</div><div class="hljs-ln-line">          {<span class="hljs-keyword">key</span>: <span class="hljs-string">'dog'</span>, value: <span class="hljs-string">'Dog'</span>},</div><div class="hljs-ln-line">          {<span class="hljs-keyword">key</span>: <span class="hljs-string">'horse'</span>, value: <span class="hljs-string">'Horse'</span>},</div><div class="hljs-ln-line">          {<span class="hljs-keyword">key</span>: <span class="hljs-string">'capybara'</span>, value: <span class="hljs-string">'Capybara'</span>},</div><div class="hljs-ln-line">        ],</div><div class="hljs-ln-line">        <span class="hljs-keyword">order</span>: 3,</div><div class="hljs-ln-line">      }),</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">      new TextboxQuestio<span class="hljs-meta">n</span>({</div><div class="hljs-ln-line">        <span class="hljs-keyword">key</span>: <span class="hljs-string">'firstName'</span>,</div><div class="hljs-ln-line">        <span class="hljs-keyword">label</span>: <span class="hljs-string">'First name'</span>,</div><div class="hljs-ln-line">        value: <span class="hljs-string">'Alex'</span>,</div><div class="hljs-ln-line">        required: true,</div><div class="hljs-ln-line">        <span class="hljs-keyword">order</span>: 1,</div><div class="hljs-ln-line">      }),</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">      new TextboxQuestio<span class="hljs-meta">n</span>({</div><div class="hljs-ln-line">        <span class="hljs-keyword">key</span>: <span class="hljs-string">'emailAddress'</span>,</div><div class="hljs-ln-line">        <span class="hljs-keyword">label</span>: <span class="hljs-string">'Email'</span>,</div><div class="hljs-ln-line">        type: <span class="hljs-string">'email'</span>,</div><div class="hljs-ln-line">        <span class="hljs-keyword">order</span>: 2,</div><div class="hljs-ln-line">      }),</div><div class="hljs-ln-line">    ];</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> of(questions.sort((a, b) =&gt; a.<span class="hljs-keyword">order</span> - b.<span class="hljs-keyword">order</span>));</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
  <h2 id="create-a-dynamic-form-template">
    <a href="#create-a-dynamic-form-template" class="docs-anchor" tabindex="-1" aria-label="Link to Create a dynamic form template" data-ng_translator_product="100" data-ng_translator_ref_id="4fkafw9rdgutpwejmlktptm2o">创建动态表单模板</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="29cdtrnogmioykoa2pdvpupw1"><code>DynamicFormComponent</code> 组件是表单的入口点和主容器，它在模板中用 <code>&lt;app-dynamic-form&gt;</code> 表示。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="18alem0gb50567b5gmvzqz5lx"><code>DynamicFormComponent</code> 组件通过把每个问题都绑定到一个匹配 <code>DynamicFormQuestionComponent</code> 的 <code>&lt;app-question&gt;</code> 元素来渲染问题列表。</p>
<div class="docs-code-multifile">
    <div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/dynamic-form.component.html" header="dynamic-form.component.html">
    <div class="docs-code-header"><h3>dynamic-form.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> (<span class="hljs-attr">ngSubmit</span>)=<span class="hljs-string">"onSubmit()"</span> [<span class="hljs-attr">formGroup</span>]=<span class="hljs-string">"form"</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    @for (question of questions; track question) {</div><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-row"</span>&gt;</span></div><div class="hljs-ln-line">        <span class="hljs-tag">&lt;<span class="hljs-name">app-question</span> [<span class="hljs-attr">question</span>]=<span class="hljs-string">"question"</span> [<span class="hljs-attr">form</span>]=<span class="hljs-string">"form"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">app-question</span>&gt;</span></div><div class="hljs-ln-line">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-row"</span>&gt;</span></div><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> [<span class="hljs-attr">disabled</span>]=<span class="hljs-string">"!form.valid"</span>&gt;</span>Save<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></div><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  @if (payLoad) {</div><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-row"</span>&gt;</span></div><div class="hljs-ln-line">      <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Saved the following values<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-template-variable">{{ <span class="hljs-name">payLoad</span> }}</span><span class="language-xml"></span></div><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/dynamic-form.component.ts" header="dynamic-form.component.ts">
    <div class="docs-code-header"><h3>dynamic-form.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>, <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">OnInit</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">CommonModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">FormGroup</span>, <span class="hljs-title class_">ReactiveFormsModule</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/forms'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">DynamicFormQuestionComponent</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./dynamic-form-question.component'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">QuestionBase</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-base'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">QuestionControlService</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-control.service'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-dynamic-form'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./dynamic-form.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">QuestionControlService</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CommonModule</span>, <span class="hljs-title class_">DynamicFormQuestionComponent</span>, <span class="hljs-title class_">ReactiveFormsModule</span>],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicFormComponent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OnInit</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input</span>() <span class="hljs-attr">questions</span>: <span class="hljs-title class_">QuestionBase</span>&lt;<span class="hljs-built_in">string</span>&gt;[] | <span class="hljs-literal">null</span> = [];</div><div class="hljs-ln-line">  form!: <span class="hljs-title class_">FormGroup</span>;</div><div class="hljs-ln-line">  payLoad = <span class="hljs-string">''</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> qcs: QuestionControlService</span>) {}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">ngOnInit</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">form</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">qcs</span>.<span class="hljs-title function_">toFormGroup</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">questions</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">QuestionBase</span>&lt;<span class="hljs-built_in">string</span>&gt;[]);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">onSubmit</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">payLoad</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">form</span>.<span class="hljs-title function_">getRawValue</span>());</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    </div>
  <h3 id="display-the-form">
    <a href="#display-the-form" class="docs-anchor" tabindex="-1" aria-label="Link to Display the form" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="e0ec33w3oq87ujti7ugsyly6a">显示表单</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9bs38v0a8h4aslj7rxbi2nu5i">要显示动态表单的一个实例，<code>AppComponent</code> 外壳模板会把一个 <code>QuestionService</code> 返回的 <code>questions</code> 数组传给表单容器组件 <code>&lt;app-dynamic-form&gt;</code>。</p>
<div class="docs-code" path="adev/src/content/examples/dynamic-form/src/app/app.component.ts" header="app.component.ts">
    <div class="docs-code-header"><h3>app.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {Component} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {AsyncPipe} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/common'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {DynamicFormComponent} <span class="hljs-keyword">from</span> <span class="hljs-string">'./dynamic-form.component'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {QuestionService} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question.service'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {QuestionBase} <span class="hljs-keyword">from</span> <span class="hljs-string">'./question-base'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {Observable} <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">@Component({</div><div class="hljs-ln-line">  standalone: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  selector: <span class="hljs-string">'app-root'</span>,</div><div class="hljs-ln-line">  template: `<span class="language-javascript"></span></div><div class="hljs-ln-line">    &lt;div&gt;</div><div class="hljs-ln-line">      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Job Application for Heroes<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></div><div class="hljs-ln-line">      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">app-dynamic-form</span> [<span class="hljs-attr">questions</span>]=<span class="hljs-string">"questions$ | async"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">app-dynamic-form</span>&gt;</span></span></div><div class="hljs-ln-line">    &lt;/div&gt;</div><div class="hljs-ln-line">  `,</div><div class="hljs-ln-line">  providers: [QuestionService],</div><div class="hljs-ln-line">  imports: [AsyncPipe, DynamicFormComponent],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppComponent</span> {</div><div class="hljs-ln-line">  questions$: Observable&lt;QuestionBase&lt;any&gt;[]&gt;;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  constructor(service: QuestionService) {</div><div class="hljs-ln-line">    this.questions$ = service.getQuestions();</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="7l1alkhbo8t6q1tsq20f94via">这种模型和数据的分离让你可以将组件重新用于任何类型的调查，只要它与 
<em>question</em> 对象模型兼容。</p>

  <h3 id="ensuring-valid-data">
    <a href="#ensuring-valid-data" class="docs-anchor" tabindex="-1" aria-label="Link to Ensuring valid data" data-ng_translator_product="100" data-ng_translator_ref_id="1y39ojn5z98a6ne0k0nxys0ev">确保数据有效</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8hg002p0zz2kh9ztm4mwfssyh">表单模板使用元数据的动态数据绑定来渲染表单，而不用做任何与具体问题有关的硬编码。它动态添加了控件元数据和验证标准。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="9og5wndr1g8tzzq1mv7exvksw">为了确保输入有效，在表单处于有效状态之前，
<em>保存</em> 按钮是禁用的。当表单有效时，点击 
<em>保存</em>，应用会将当前表单值渲染为 JSON。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="e6zwuu5dnhi7g29sjepls67mz">最终的表单如下图所示。</p>
<img alt="Dynamic-Form" src="assets/images/guide/dynamic-form/dynamic-form.png">


  <h2 id="next-steps">
    <a href="#next-steps" class="docs-anchor" tabindex="-1" aria-label="Link to Next steps" data-ng_translator_product="100" data-ng_translator_ref_id="c4pkljueu68ifjoi5994e9l8o">后续步骤</a>
  </h2>
  
    <nav class="docs-pill-row">
      
    <a class="docs-pill" href="guide/forms/reactive-forms#validating-form-input" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2ys8tp2jiy8zpozvpneyv1mcf">验证表单输入</a>
    
    <a class="docs-pill" href="guide/forms/form-validation" data-ng_translator_product="100" data-ng_translator_ref_id="4bb4box3qg4dqja63gcz4wpg1">表单验证指南</a>
    

    </nav>
    