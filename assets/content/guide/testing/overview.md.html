<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="etpgj6p39fywtmcrsphy8qrcg">测试</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/testing/overview.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dtoha25m910v3325wxkzl8c55">测试你的 Angular 应用可以帮助你检查此应用是否正常运行。</p>

  <h2 id="set-up-testing">
    <a href="#set-up-testing" class="docs-anchor" tabindex="-1" aria-label="Link to Set up testing" data-ng_translator_product="100" data-ng_translator_ref_id="edicl79awnv03trzhz9yfom1o">建立环境</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="8xcdy0xo3d9dhz0zwbd4ez2h9">Angular CLI 下载并安装测试 Angular 应用所需的一切，包括 
<a href="https://jasmine.github.io" target="_blank">Jasmine 测试框架</a>。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="n73ve7p3gz8brbfwvlv181qt">你使用 CLI 创建的项目是可以立即用于测试的。运行 CLI 命令 <a href="cli/test"><code>ng test</code></a> 即可：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">ng test</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="dyblhfgelog9hvzry4h27070x"><code>ng test</code> 命令在
<em>监视模式</em>下构建应用，并启动 
<a href="https://karma-runner.github.io" target="_blank">Karma 测试运行器</a>。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="b03lp4eq6aqu8624uv1mp8gjo">控制台输出如下：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">02 11 2022 09:08:28.605:INFO [karma-server]: Karma v6.4.1 server started at http://localhost:9876/</div><div class="hljs-ln-line">02 11 2022 09:08:28.607:INFO [launcher]: Launching browsers Chrome with concurrency unlimited</div><div class="hljs-ln-line">02 11 2022 09:08:28.620:INFO [launcher]: Starting browser Chrome</div><div class="hljs-ln-line">02 11 2022 09:08:31.312:INFO [Chrome]: Connected on socket -LaEYvD2R7MdcS0-AAAB with id 31534482</div><div class="hljs-ln-line">Chrome: Executed 3 of 3 SUCCESS (0.193 secs / 0.172 secs)</div><div class="hljs-ln-line">TOTAL: 3 SUCCESS</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="ezenbfo7fgv3ucmd32f9o8afa">日志的最后一行显示 Karma 运行了三个测试，这些测试都通过了。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="3lnjvxigoaz9w7gkg9esiif3s">测试输出使用 
<a href="https://github.com/dfederm/karma-jasmine-html-reporter" target="_blank">Karma Jasmine HTML Reporter</a> 在浏览器中显示。</p>
<img alt="Jasmine HTML Reporter in the browser" src="assets/images/guide/testing/initial-jasmine-html-reporter.png">

<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="c8rc7xggj9xxj96xw1264rzx2">可以点击某一行测试，来单独重跑这个测试，或者点击一行描述信息来重跑所选测试组（“测试套件”）中的那些测试。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="1rj5tiit5ellz0r8ysi7rpicu">同时，<code>ng test</code> 命令还会监听这些变化。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6h090eu20dackksclavpk66ki">要查看它的实际效果，就对 <code>app.component.ts</code> 做一个小修改，并保存它。这些测试就会重新运行，浏览器也会刷新，然后新的测试结果就出现了。</p>

  <h2 id="configuration">
    <a href="#configuration" class="docs-anchor" tabindex="-1" aria-label="Link to Configuration" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="27io2zcn0syxgd4dfu8paj1a1">配置</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bz57jbvt3r6qfqd6n0jv9bpo5">Angular CLI 会为你处理 Jasmine 和 Karma 配置。它根据 <code>angular.json</code> 文件中指定的选项在内存中构建完整配置。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="ecipaazwpymkekjlzp3i645rm">如果你想自定义 Karma，你可以通过运行以下命令创建一个 <code>karma.conf.js</code>：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">ng generate config karma</div></code>
    </pre>
  </div>
    <div class="docs-alert docs-alert-helpful">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="fnbqu3hf4bkvm654q1u2hlqx"><strong>有帮助：</strong>在 
<a href="http://karma-runner.github.io/6.4/config/configuration-file.html" target="_blank">Karma 配置指南</a> 中了解更多有关 Karma 配置信息。</p>

    </div>
    
  <h3 id="other-test-frameworks">
    <a href="#other-test-frameworks" class="docs-anchor" tabindex="-1" aria-label="Link to Other test frameworks" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="drmoxmvux9pu6iqyppujewc6n">其他测试框架</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="e0imts06tg8mf7lk32venpu09">你还可以使用其它的测试库和测试运行器来对 Angular 应用进行单元测试。每个库和运行器都有自己特有的安装过程、配置项和语法。</p>

  <h3 id="test-file-name-and-location">
    <a href="#test-file-name-and-location" class="docs-anchor" tabindex="-1" aria-label="Link to Test file name and location" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6cerb1mtf9nx0obt7rpcge4a7">测试文件名及其位置</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dbjde75p51n1rvxeujg10e2uz">在 <code>src/app</code> 目录中，CLI 为 <code>AppComponent</code> 生成了一个名叫 <code>app.component.spec.ts</code> 的测试文件。</p>

    <div class="docs-alert docs-alert-important">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="3fdatouzl4dm5jzmgjcgfqfvh"><strong>重要：</strong>测试文件的扩展名
<strong>必须是 <code>.spec.ts</code></strong>，这样工具才能将其识别为包含测试的文件（也称为
<em>spec</em>文件）。</p>

    </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6yrd6x5pz3t2o1yuumv2pt6gv"><code>app.component.ts</code> 和 <code>app.component.spec.ts</code> 文件位于同一个文件夹中，而且相邻。其根文件名部分（<code>app.component</code>）都是一样的。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="b7hqspxutkt7z1vb19zl70drd">请在你的项目中对<em>任意类型</em>的测试文件都坚持这两条约定。</p>

  <h4 id="place-your-spec-file-next-to-the-file-it-tests">
    <a href="#place-your-spec-file-next-to-the-file-it-tests" class="docs-anchor" tabindex="-1" aria-label="Link to Place your spec file next to the file it tests" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="574nnwg8yc6bbjxl79gfirzi3">把测试规约（spec）文件放在它要测试的文件旁边</a>
  </h4>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="1w6h4s3byl6lkb9eziur1dzxy">最好把单元测试规约文件放到与它们测试的应用源码文件相同的文件夹中：</p>

  <ul class="docs-list">
    <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bcnm8rwnax2j186oy1zt6807t">这些测试很容易找到。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cnswkkr7dbefmenhnlyhxv92h">你一眼就能看到应用中是否缺少一些测试。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7ooyq3vve01imdyk6m7p6bnd">临近的测试可以揭示一个部件会如何在上下文中工作。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bwbgrrue4nw87pocd2i8p8an8">当移动源代码时（在所难免），你不会忘了同时移动测试。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2bb4dpwfhuxyj43ug4r3ygo4s">当重命名源文件时（在所难免），你不会忘了重命名测试文件。</li>

  </ul>
  
  <h4 id="place-your-spec-files-in-a-test-folder">
    <a href="#place-your-spec-files-in-a-test-folder" class="docs-anchor" tabindex="-1" aria-label="Link to Place your spec files in a test folder" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cjbw4yjrubbfc412p5wqcgqg6">把 spec 文件放到 test 目录下</a>
  </h4>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="c65r6dw3b922y9gk4sfd2we3g">应用的集成测试规范可以测试跨文件夹和模块的多个部分之间的交互。它们并不属于任何一个特定的部分，所以把它们放在任何一个文件旁都很不自然。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8dur4tu2f3hv2gydei57rqnmy">最好在 <code>tests</code> 目录下为它们创建一个合适的文件夹。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="byv0pfv3h0bcohahbdnchd4lt">当然，用来测试那些测试助手的规约也位于 <code>test</code> 目录下，紧挨着相应的测试助手文件。</p>

  <h2 id="testing-in-continuous-integration">
    <a href="#testing-in-continuous-integration" class="docs-anchor" tabindex="-1" aria-label="Link to Testing in continuous integration" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="47v9jkjdv1d2o866rbyqsn5qi">建立持续集成环境</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2i8nzffvt1lfz9lu9n2eigeuq">保持项目无错误的最佳方法之一是通过测试套件，但你可能会忘记一直运行测试。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8akwisdymeqvxyadxxsnfvpl3">避免项目出 BUG 的最佳方式之一，就是使用测试套件。但是很容易忘了一直运行它。持续集成（CI）服务器让你可以配置项目的代码仓库，以便每次提交和收到 Pull Request 时就会运行你的测试。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bdmrgs0xyry18yxwg1c604rp8">要在持续集成 (CI) 中测试你的 Angular CLI 应用程序，请运行以下命令：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">ng test --no-watch --no-progress --browsers=ChromeHeadless</div></code>
    </pre>
  </div>
  <h2 id="more-information-on-testing">
    <a href="#more-information-on-testing" class="docs-anchor" tabindex="-1" aria-label="Link to More information on testing" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7838f80a0ysxladw99799isth">关于测试的更多信息</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4xxb806cvgsy9y0ihrr9s2od9">当你设置准备好测试环境之后，可能会发现以下测试指南很有用。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left"></th>
<th align="left" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3prlgfrx5eo2xqncnnob4crxu">详情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><a href="guide/testing/code-coverage" data-ng_translator_product="100" data-ng_translator_ref_id="8e70z9wdp8xlyi8x7dcvxvlvn">代码覆盖率</a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="68gb8d40vgp1dygkwn38zr6d6">你的测试覆盖了应用的多少部分，以及如何指定必要的覆盖量。</td>
</tr>
<tr>
<td align="left"><a href="guide/testing/services" data-ng_translator_product="100" data-ng_translator_ref_id="chimgir564h319oeuoiq25652">测试服务</a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="7vy8pk98tc5upmchmuk22728u">如何测试应用所使用的服务。</td>
</tr>
<tr>
<td align="left"><a href="guide/testing/components-basics" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="1s9f16r2wc6phj8bf3kodn08h">测试组件的基础知识</a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="95suvuqwzzuw9xi8tu2a75tew">Angular 组件测试的基础。</td>
</tr>
<tr>
<td align="left"><a href="guide/testing/components-scenarios" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="a5jpibp6n1zq28ouc6cp4r5kw">组件测试场景</a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="2f76x68lcqwm5ossqcjk6m50v">各种组件测试场景和用例。</td>
</tr>
<tr>
<td align="left"><a href="guide/testing/attribute-directives" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="d5r302io1unhek5owl5mmmim6">测试属性型指令</a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="cahzo9hqvjzcibfx0pfh5h721">如何测试你的属性型指令。</td>
</tr>
<tr>
<td align="left"><a href="guide/testing/pipes" data-ng_translator_product="100" data-ng_translator_ref_id="2rd1a1ojmss4oail990ywl1yl">测试管道</a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="exl37e6zp8i5yzvgetx09ngyu">如何测试管道。</td>
</tr>
<tr>
<td align="left"><a href="guide/testing/debugging" data-ng_translator_product="100" data-ng_translator_ref_id="2kx6z68crpwhp9sh1v064d71z">调试测试代码</a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="9jv0iyys15gw4tpmr6pieu3qv">常见的测试错误。</td>
</tr>
<tr>
<td align="left"><a href="guide/testing/utility-apis" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="74afaf4tim8sju2jgp9o2v9o8">测试工具 API</a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="f1q3mmrkn65rty2sx6s93y8qk">Angular 测试特性。</td>
</tr>

      </tbody>
    </table>
  </div>
  