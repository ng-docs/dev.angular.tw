<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bx5grkcsai72ub0it7jyx847m">Angular 动画简介</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/animations/overview.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3b8zbqyxijtg1igxd02uji4o1">动画用于提供运动的幻觉：HTML 元素随着时间改变样式。精心设计的动画可以让你的应用更有趣，更易用，但它们不仅仅是装饰性的。动画可以通过几种方式改善你的应用和用户体验：</p>

  <ul class="docs-list">
    <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4v5l8p9ewk2rpzloon951k5dk">没有动画，Web 页面的过渡就会显得突兀、不协调</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5vtng5o4wn7x842r2i12mmlwi">运动能极大地提升用户体验，因此动画可以让用户察觉到应用对他们的操作做出了响应</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7mflvab1vt9l5fzmk56gtp6w0">良好的动画可以直观的把用户的注意力吸引到要留意的地方</li>

  </ul>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="bzjvpfwkl6bbl4cij3hee9aht">通常，动画涉及多个样式的
<em>变换</em>，随时间变化。HTML 元素可以移动、改变颜色、变大或变小、淡入淡出或滑出页面。这些变化可以同时或依次发生。你可以控制每个变换的时序。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="29worc5uk742zndtao3nmyt3q">Angular 的动画系统建立在 CSS 功能之上，这意味着你可以对浏览器认为可动画的任何属性进行动画处理。这包括位置、尺寸、变换、颜色、边框等。W3C 在其
<a href="https://www.w3.org/TR/css-transitions-1" target="_blank">CSS 过渡</a>页面上维护了一个可动画属性的列表。</p>

  <h2 id="about-this-guide">
    <a href="#about-this-guide" class="docs-anchor" tabindex="-1" aria-label="Link to About this guide" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cymus2clh055bn4ep9j2kvh1u">关于本指南</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="94xgjndayk9afr79okaowze1u">本指南覆盖了基本的 Angular 动画特性，让你能开始为你的项目添加 Angular 动画。</p>

  <h2 id="getting-started">
    <a href="#getting-started" class="docs-anchor" tabindex="-1" aria-label="Link to Getting started" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="c1ec4dv7ru8g390agopg2loxb">快速上手</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="ajwgrr6ojtebjg5qbr8dufmz1">用于动画的主要 Angular 模块是
<code>@angular/animations</code>和
<code>@angular/platform-browser</code>。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cfvh0qjr6g1tllrhe7c0o506v">为了把 Angular 动画添加到你的项目中，把这些与动画相关的模块和标准的 Angular 功能一起导入进来。</p>

    <ol class="docs-steps">
      
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="enabling-the-animations-module">
    <a href="#enabling-the-animations-module" class="docs-anchor" tabindex="-1" aria-label="Link to Enabling the animations module" data-ng_translator_product="100" data-ng_translator_ref_id="100k2qyzj1la7m8jqeadxr52m">启用动画模块</a>
  </h3>
  
      <p data-ng_translator_product="100" data-ng_translator_ref_id="d2iqq6cs8vif1os34jf3gvtwk">从
<code>@angular/platform-browser/animations/async</code>中导入
<code>provideAnimationsAsync</code>，并将其添加到
<code>bootstrapApplication</code>函数调用的提供者列表中。</p>
<div class="docs-code" header="Enabling Animations">
    <div class="docs-code-header"><h3 data-ng_translator_product="100" data-ng_translator_ref_id="68vz6pnlku1wnigdyizz92guq">启用动画</h3></div>
    <pre class="docs-mini-scroll-track">      <code><span role="presentation" class="hljs-ln-number">1</span><div class="hljs-ln-line"><span class="hljs-title function_">bootstrapApplication</span>(<span class="hljs-title class_">AppComponent</span>, {</div><span role="presentation" class="hljs-ln-number">2</span><div class="hljs-ln-line">  <span class="hljs-attr">providers</span>: [</div><span role="presentation" class="hljs-ln-number">3</span><div class="hljs-ln-line">    <span class="hljs-title function_">provideAnimationsAsync</span>(),</div><span role="presentation" class="hljs-ln-number">4</span><div class="hljs-ln-line">  ]</div><span role="presentation" class="hljs-ln-number">5</span><div class="hljs-ln-line">});</div></code>
    </pre>
  </div>
    <div class="docs-callout docs-callout-important">
      <h3 data-ng_translator_product="100" data-ng_translator_ref_id="4rdgcblt6xs67yjlhdja4wvuy">如果你的应用需要立即执行动画</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="azpabrib9hi5ik3koavqx8gzt">如果你需要在应用加载时立即发生动画，则需要切换到急性加载动画模块。从 
<code>@angular/platform-browser/animations</code> 导入 
<code>provideAnimations</code>，并在 
<code>bootstrapApplication</code> 函数调用中用 
<code>provideAnimations</code> 
<strong>替换</strong> 
<code>provideAnimationsAsync</code>。</p>

    </div>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="8g47gh8cns23ew895qw4zokiy">对于基于
<code>NgModule</code>的应用程序，请导入
<code>BrowserAnimationsModule</code>，它将为你的 Angular 根应用程序模块引入动画功能。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/app.module.1.ts" header="src/app/app.module.ts">
    <div class="docs-code-header"><h3>src/app/app.module.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {NgModule} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {BrowserModule} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {BrowserAnimationsModule} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">@NgModule({</div><div class="hljs-ln-line">  imports: [BrowserModule, BrowserAnimationsModule],</div><div class="hljs-ln-line">  declarations: [],</div><div class="hljs-ln-line">  bootstrap: [],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="importing-animation-functions-into-component-files">
    <a href="#importing-animation-functions-into-component-files" class="docs-anchor" tabindex="-1" aria-label="Link to Importing animation functions into component files" data-ng_translator_product="100" data-ng_translator_ref_id="hlag6p00xbl8voczqnh3nrjc">将动画函数导入组件文件</a>
  </h3>
  
      <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8xt2h2guykc8r207tl4j63hdg">如果你准备在组件文件中使用特定的动画函数，请从 <code>@angular/animations</code> 中导入这些函数。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/app.component.ts" visiblelines="0,1,2,3,4,5,6,7,8,9" header="src/app/app.component.ts">
    <div class="docs-code-header"><h3>src/app/app.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>, <span class="hljs-title class_">HostBinding</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {</div><div class="hljs-ln-line">  trigger,</div><div class="hljs-ln-line">  state,</div><div class="hljs-ln-line">  style,</div><div class="hljs-ln-line">  animate,</div><div class="hljs-ln-line">  transition,</div><div class="hljs-ln-line">  <span class="hljs-comment">// ...</span></div><div class="hljs-ln-line">} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">ChildrenOutletContexts</span>, <span class="hljs-title class_">RouterLink</span>, <span class="hljs-title class_">RouterOutlet</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {slideInAnimation} <span class="hljs-keyword">from</span> <span class="hljs-string">'./animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-root'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'app.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'app.component.css'</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">RouterLink</span>, <span class="hljs-title class_">RouterOutlet</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">animations</span>: [</div><div class="hljs-ln-line">    slideInAnimation,</div><div class="hljs-ln-line">    <span class="hljs-comment">// animation triggers go here</span></div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@HostBinding</span>(<span class="hljs-string">'@.disabled'</span>)</div><div class="hljs-ln-line">  <span class="hljs-keyword">public</span> animationsDisabled = <span class="hljs-literal">false</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> contexts: ChildrenOutletContexts</span>) {}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">getRouteAnimationData</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">contexts</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'primary'</span>)?.<span class="hljs-property">route</span>?.<span class="hljs-property">snapshot</span>?.<span class="hljs-property">data</span>?.[<span class="hljs-string">'animation'</span>];</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">toggleAnimations</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationsDisabled</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">animationsDisabled</span>;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="e7umr9nyabm32oeiba533at5j">在本指南末尾查看所有
<a href="guide/animations#animations-api-summary">可用的动画函数</a>。</p>

    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="adding-the-animation-metadata-property">
    <a href="#adding-the-animation-metadata-property" class="docs-anchor" tabindex="-1" aria-label="Link to Adding the animation metadata property" data-ng_translator_product="100" data-ng_translator_ref_id="bxokr1b6kf54przgf4d0kfmti">添加动画元数据属性</a>
  </h3>
  
      <p data-ng_translator_product="100" data-ng_translator_ref_id="5gd70kdc5x5lql6vkpo46mqh0">在组件文件中，添加一个名为
<code>animations:</code>的元数据属性，在
<code>@Component()</code>装饰器内。 将定义动画的触发器放在
<code>animations</code>元数据属性中。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/app.component.ts" visiblelines="13,14,15,16,17,18,19,21,22,23" header="src/app/app.component.ts">
    <div class="docs-code-header"><h3>src/app/app.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>, <span class="hljs-title class_">HostBinding</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {</div><div class="hljs-ln-line">  trigger,</div><div class="hljs-ln-line">  state,</div><div class="hljs-ln-line">  style,</div><div class="hljs-ln-line">  animate,</div><div class="hljs-ln-line">  transition,</div><div class="hljs-ln-line">  <span class="hljs-comment">// ...</span></div><div class="hljs-ln-line">} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">ChildrenOutletContexts</span>, <span class="hljs-title class_">RouterLink</span>, <span class="hljs-title class_">RouterOutlet</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {slideInAnimation} <span class="hljs-keyword">from</span> <span class="hljs-string">'./animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-root'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'app.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'app.component.css'</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">RouterLink</span>, <span class="hljs-title class_">RouterOutlet</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">animations</span>: [</div><div class="hljs-ln-line">    slideInAnimation,</div><div class="hljs-ln-line">    <span class="hljs-comment">// animation triggers go here</span></div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@HostBinding</span>(<span class="hljs-string">'@.disabled'</span>)</div><div class="hljs-ln-line">  <span class="hljs-keyword">public</span> animationsDisabled = <span class="hljs-literal">false</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> contexts: ChildrenOutletContexts</span>) {}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">getRouteAnimationData</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">contexts</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'primary'</span>)?.<span class="hljs-property">route</span>?.<span class="hljs-property">snapshot</span>?.<span class="hljs-property">data</span>?.[<span class="hljs-string">'animation'</span>];</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">toggleAnimations</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationsDisabled</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">animationsDisabled</span>;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    </li>
    
    </ol>
    
  <h2 id="animating-a-transition">
    <a href="#animating-a-transition" class="docs-anchor" tabindex="-1" aria-label="Link to Animating a transition" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="1hmao4jko0a161jttsq27tlft">播放过渡动画</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="21n0tdypr8wruoxo1yzygfu8f">我们来做一个简单的过渡动作，它把单个 HTML 元素从一个状态变成另一个状态。比如，你可以指定按钮根据用户的最后一个动作显示成<strong>Open</strong>或<strong>Closed</strong>状态。当按钮处于 <code>open</code> 状态时，它是可见的，并且是黄色的。当它处于 <code>closed</code> 状态时，它是透明的，并且是蓝色的。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="8gbzy29q7kdle6yq98h7pshu">在 HTML 中，这些属性使用普通的 CSS 样式进行设置，比如颜色和透明度。 在 Angular 中，使用
<code>style()</code>函数来指定一组用于动画的 CSS 样式。 收集一组样式在动画状态中，并给状态取一个名称，比如
<code>open</code>或
<code>closed</code>。</p>

    <div class="docs-alert docs-alert-helpful">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="2dv5rd212hht2y8plekw374lu"><strong>有帮助:</strong> 让我们创建一个新的
<code>open-close</code>组件，用简单的过渡效果进行动画处理。</p>

    </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="erpk1mzed9d8bo9lt80hnjr32">在终端窗口运行下列命令以生成该组件：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">ng g component open-close</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bsocs1k9c9u22w8ez1rmtuj1m">这会在 <code>src/app/open-close.component.ts</code> 下创建此组件。</p>

  <h3 id="animation-state-and-styles">
    <a href="#animation-state-and-styles" class="docs-anchor" tabindex="-1" aria-label="Link to Animation state and styles" data-ng_translator_product="100" data-ng_translator_ref_id="d4t5izinnsmo0fipr9zbptkqn">动画状态和样式</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="c1ro1xx82iptnej1s4w1nvaxv">使用 Angular 的
<a href="api/animations/state"><code>state()</code></a>函数来定义在每个过渡结束时调用的不同状态。 该函数接受两个参数：一个唯一的名称，如
<code>open</code>或
<code>closed</code>，以及一个
<code>style()</code>函数。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="eppq5pm6d6tsqs5nodbj238eo">使用
<code>style()</code>函数来定义一组与给定状态名称关联的样式。 对于包含连字符的样式属性，必须使用
<em>驼峰命名法</em>，比如
<code>backgroundColor</code>，或者用引号包裹起来，比如
<code>'background-color'</code>。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="247nh4mq37cwgdqcrbqil2j0o">让我们看看 Angular 的
<a href="api/animations/state"><code>state()</code></a>函数如何与
<code>style⁣­(⁠)</code>函数一起工作，设置 CSS 样式属性。 在这段代码片段中，同时为状态设置了多个样式属性。 在
<code>open</code>状态下，按钮的高度为200像素，不透明度为1，背景颜色为黄色。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/open-close.component.ts" visiblelines="8,9,10,11,12,13,14,15,16" header="src/app/open-close.component.ts">
    <div class="docs-code-header"><h3>src/app/open-close.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {Component, Input} from <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {trigger, transition, state, animate, style, AnimationEvent} from <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component({</span></div><div class="hljs-ln-line">  standalone: true,</div><div class="hljs-ln-line">  selector: <span class="hljs-string">'app-open-close'</span>,</div><div class="hljs-ln-line">  animations: [</div><div class="hljs-ln-line">    trigger(<span class="hljs-string">'openClose'</span>, [</div><div class="hljs-ln-line">      // ...</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'open'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'200px'</span>,</div><div class="hljs-ln-line">          opacity: 1,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'yellow'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'closed'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'100px'</span>,</div><div class="hljs-ln-line">          opacity: 0.8,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'blue'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'closed =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open &lt;=&gt; closed'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'1s'</span>, style({opacity: <span class="hljs-string">'*'</span>}))]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; *'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">  templateUrl: <span class="hljs-string">'open-close.component.html'</span>,</div><div class="hljs-ln-line">  styleUrls: [<span class="hljs-string">'open-close.component.css'</span>],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line">export <span class="hljs-keyword">class</span> <span class="hljs-title class_">OpenCloseComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input()</span> logging = <span class="hljs-literal">false</span>;</div><div class="hljs-ln-line">  isOpen = <span class="hljs-literal">true</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  toggle() {</div><div class="hljs-ln-line">    <span class="hljs-keyword">this</span>.isOpen = !<span class="hljs-keyword">this</span>.isOpen;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  onAnimationEvent(event: AnimationEvent) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.logging) {</div><div class="hljs-ln-line">      <span class="hljs-keyword">return</span>;</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">    <span class="hljs-comment">// openClose is trigger name in this example</span></div><div class="hljs-ln-line">    console.warn(`Animation Trigger: ${event.triggerName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// phaseName is "start" or "done"</span></div><div class="hljs-ln-line">    console.warn(`Phase: ${event.phaseName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, totalTime is 1000 (number of milliseconds in a second)</span></div><div class="hljs-ln-line">    console.warn(`Total time: ${event.totalTime}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, fromState is either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`From: ${event.fromState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, toState either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`To: ${event.toState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// the HTML element itself, the button in this case</span></div><div class="hljs-ln-line">    console.warn(`Element: ${event.element}`);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="85mc0xekdcu2pnsgikfd6gp7e">在下面这个 <code>closed</code> 状态中，按钮的高度是 100 像素，透明度是 0.8，背景色是蓝色。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/open-close.component.ts" visiblelines="17,18,19,20,21,22,23,24" header="src/app/open-close.component.ts">
    <div class="docs-code-header"><h3>src/app/open-close.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {Component, Input} from <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {trigger, transition, state, animate, style, AnimationEvent} from <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component({</span></div><div class="hljs-ln-line">  standalone: true,</div><div class="hljs-ln-line">  selector: <span class="hljs-string">'app-open-close'</span>,</div><div class="hljs-ln-line">  animations: [</div><div class="hljs-ln-line">    trigger(<span class="hljs-string">'openClose'</span>, [</div><div class="hljs-ln-line">      // ...</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'open'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'200px'</span>,</div><div class="hljs-ln-line">          opacity: 1,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'yellow'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'closed'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'100px'</span>,</div><div class="hljs-ln-line">          opacity: 0.8,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'blue'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'closed =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open &lt;=&gt; closed'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'1s'</span>, style({opacity: <span class="hljs-string">'*'</span>}))]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; *'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">  templateUrl: <span class="hljs-string">'open-close.component.html'</span>,</div><div class="hljs-ln-line">  styleUrls: [<span class="hljs-string">'open-close.component.css'</span>],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line">export <span class="hljs-keyword">class</span> <span class="hljs-title class_">OpenCloseComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input()</span> logging = <span class="hljs-literal">false</span>;</div><div class="hljs-ln-line">  isOpen = <span class="hljs-literal">true</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  toggle() {</div><div class="hljs-ln-line">    <span class="hljs-keyword">this</span>.isOpen = !<span class="hljs-keyword">this</span>.isOpen;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  onAnimationEvent(event: AnimationEvent) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.logging) {</div><div class="hljs-ln-line">      <span class="hljs-keyword">return</span>;</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">    <span class="hljs-comment">// openClose is trigger name in this example</span></div><div class="hljs-ln-line">    console.warn(`Animation Trigger: ${event.triggerName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// phaseName is "start" or "done"</span></div><div class="hljs-ln-line">    console.warn(`Phase: ${event.phaseName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, totalTime is 1000 (number of milliseconds in a second)</span></div><div class="hljs-ln-line">    console.warn(`Total time: ${event.totalTime}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, fromState is either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`From: ${event.fromState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, toState either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`To: ${event.toState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// the HTML element itself, the button in this case</span></div><div class="hljs-ln-line">    console.warn(`Element: ${event.element}`);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
  <h3 id="transitions-and-timing">
    <a href="#transitions-and-timing" class="docs-anchor" tabindex="-1" aria-label="Link to Transitions and timing" data-ng_translator_product="100" data-ng_translator_ref_id="aj7q0l7mt26fiii4h9x56q5sp">过渡与时序</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="e47udfvcwghyjqw0dxtowoqnu">在 Angular 中，你可以设置多个样式而不必用动画。不过，如果没有进一步细化，按钮的转换会立即完成 —— 没有渐隐、没有收缩，也没有其它的可视化效果来指出正在发生变化。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="e214u309ht8m81bruh8ktylhh">为了使变化不那么突兀，需要定义一个动画
<em>过渡</em>，指定一个时间段内在一个状态和另一个状态之间发生的变化。 
<code>transition()</code>函数接受两个参数：第一个参数接受一个表达式，定义两个过渡状态之间的方向，第二个参数接受一个或一系列
<code>animate()</code>步骤。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="6krk2jx7zt9205mdu45lrnh1z">使用 
<code>animate()</code> 函数定义过渡的持续时间、延迟和缓动，并指定样式函数以定义过渡期间的样式。使用 
<code>animate()</code> 函数定义 
<code>keyframes()</code> 函数以实现多步动画。这些定义放在 
<code>animate()</code> 函数的第二个参数中。</p>

  <h4 id="animation-metadata-duration-delay-and-easing">
    <a href="#animation-metadata-duration-delay-and-easing" class="docs-anchor" tabindex="-1" aria-label="Link to Animation metadata: duration, delay, and easing" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cuftglbsnx9kx43v2mann1vt2">动画元数据：持续时间、延迟和缓动效果</a>
  </h4>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="f1avtvj9rcdry2gzs45he2bp1"><code>animate()</code>函数（过渡函数的第二个参数）接受
<code>timings</code>和
<code>styles</code>输入参数。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="97jr7u8ef7egl1rkjj0lflmxw"><code>timings</code> 参数可以接受一个数字或由三部分组成的字符串。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">animate (duration)</div></code>
    </pre>
  </div><p>or</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">animate (<span class="hljs-string">'duration delay easing'</span>)</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="d2lqcpzy7h9uteruoyh15u8dv">第一部分 <code>duration</code>（持续时间）是必须的。这个持续时间可以表示成一个不带引号的纯数字（表示毫秒），或一个带引号的有单位的时间（表示秒数）。比如，0.1 秒的持续时间有如下表示方式：</p>

  <ul class="docs-list">
    <li><p data-ng_translator_product="100" data-ng_translator_ref_id="dzux47szdph3joed59jk0b9lx">作为纯数字，以毫秒表示：
<code>100</code></p>
</li>
<li><p data-ng_translator_product="100" data-ng_translator_ref_id="8b891mo8umytvtu43tzmc0sen">作为字符串，以毫秒表示：
<code>'100ms'</code></p>
</li>
<li><p data-ng_translator_product="100" data-ng_translator_ref_id="ewpsupy9s40ib1x9clku5ade4">作为字符串，以秒表示：
<code>'0.1s'</code></p>
</li>

  </ul>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4nksn60i1fcud2gm49vre9l56">第二个参数 <code>delay</code> 的语法和 <code>duration</code> 一样。比如：</p>

  <ul class="docs-list">
    <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bqno0hba7nyn7hmborne2kt0y">等待 100 毫秒，然后运行 200 毫秒表示为：<code>'0.2s 100ms'</code></li>

  </ul>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="cetnoqsnz42elg6i3hrxj9be2">第三个参数 
<code>easing</code> 控制动画在运行时如何
<a href="https://easings.net" target="_blank">加速和减速</a>。例如，
<code>ease-in</code> 使动画开始时缓慢，随着进展逐渐加速。</p>

  <ul class="docs-list">
    <li><p data-ng_translator_product="100" data-ng_translator_ref_id="8sdv9lmqcoc9b361fx39dmzgq">等待100毫秒，运行200毫秒。 使用减速曲线，从快速开始，缓慢减速到一个静止点：
<code>'0.2s 100ms ease-out'</code></p>
</li>
<li><p data-ng_translator_product="100" data-ng_translator_ref_id="6iq11l3lyfwtfiy6oqfby9zb9">运行200毫秒，无延迟。 使用标准曲线，开始缓慢，中间加速，然后在结束时缓慢减速：
<code>'0.2s ease-in-out'</code></p>
</li>
<li><p data-ng_translator_product="100" data-ng_translator_ref_id="bjxvwp55ea65q7u9j5ehwik4l">立即开始，运行200毫秒。 使用加速曲线，开始缓慢，最后以全速结束：
<code>'0.2s ease-in'</code></p>
</li>

  </ul>
  
    <div class="docs-alert docs-alert-helpful">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="dlnw02wsde2twz26r0bcs1m2c"><strong>提示：</strong>查看 Material Design 网站关于
<a href="https://material.io/design/motion/speed.html#easing" target="_blank">自然缓动曲线</a>的主题，了解有关缓动曲线的一般信息。</p>

    </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="alfklg4mie2hbvp8f7l387vlq">下面的例子提供了一个从 <code>open</code> 到 <code>closed</code> 的持续一秒的状态过渡。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/open-close.component.ts" visiblelines="25" header="src/app/open-close.component.ts">
    <div class="docs-code-header"><h3>src/app/open-close.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {Component, Input} from <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {trigger, transition, state, animate, style, AnimationEvent} from <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component({</span></div><div class="hljs-ln-line">  standalone: true,</div><div class="hljs-ln-line">  selector: <span class="hljs-string">'app-open-close'</span>,</div><div class="hljs-ln-line">  animations: [</div><div class="hljs-ln-line">    trigger(<span class="hljs-string">'openClose'</span>, [</div><div class="hljs-ln-line">      // ...</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'open'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'200px'</span>,</div><div class="hljs-ln-line">          opacity: 1,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'yellow'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'closed'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'100px'</span>,</div><div class="hljs-ln-line">          opacity: 0.8,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'blue'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'closed =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open &lt;=&gt; closed'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'1s'</span>, style({opacity: <span class="hljs-string">'*'</span>}))]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; *'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">  templateUrl: <span class="hljs-string">'open-close.component.html'</span>,</div><div class="hljs-ln-line">  styleUrls: [<span class="hljs-string">'open-close.component.css'</span>],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line">export <span class="hljs-keyword">class</span> <span class="hljs-title class_">OpenCloseComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input()</span> logging = <span class="hljs-literal">false</span>;</div><div class="hljs-ln-line">  isOpen = <span class="hljs-literal">true</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  toggle() {</div><div class="hljs-ln-line">    <span class="hljs-keyword">this</span>.isOpen = !<span class="hljs-keyword">this</span>.isOpen;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  onAnimationEvent(event: AnimationEvent) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.logging) {</div><div class="hljs-ln-line">      <span class="hljs-keyword">return</span>;</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">    <span class="hljs-comment">// openClose is trigger name in this example</span></div><div class="hljs-ln-line">    console.warn(`Animation Trigger: ${event.triggerName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// phaseName is "start" or "done"</span></div><div class="hljs-ln-line">    console.warn(`Phase: ${event.phaseName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, totalTime is 1000 (number of milliseconds in a second)</span></div><div class="hljs-ln-line">    console.warn(`Total time: ${event.totalTime}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, fromState is either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`From: ${event.fromState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, toState either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`To: ${event.toState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// the HTML element itself, the button in this case</span></div><div class="hljs-ln-line">    console.warn(`Element: ${event.element}`);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="ee78imm13mf4gdvgcadqzw8sn">在上述代码片段中，
<code>=&gt;</code> 运算符表示单向转换，而 
<code>&lt;=&gt;</code> 则表示双向转换。 在转换中，
<code>animate()</code> 指定了转换所需的时间。 在此示例中，从 
<code>open</code> 到 
<code>closed</code> 的状态变化需要 1 秒，在这里表示为 
<code>1s</code>。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3bo2mp90czvcyxoi8rggpyekv">下面的例子添加了一个从 <code>closed</code> 到 <code>open</code> 的状态过渡，过渡动画持续 0.5 秒。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/open-close.component.ts" visiblelines="26" header="src/app/open-close.component.ts">
    <div class="docs-code-header"><h3>src/app/open-close.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {Component, Input} from <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {trigger, transition, state, animate, style, AnimationEvent} from <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component({</span></div><div class="hljs-ln-line">  standalone: true,</div><div class="hljs-ln-line">  selector: <span class="hljs-string">'app-open-close'</span>,</div><div class="hljs-ln-line">  animations: [</div><div class="hljs-ln-line">    trigger(<span class="hljs-string">'openClose'</span>, [</div><div class="hljs-ln-line">      // ...</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'open'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'200px'</span>,</div><div class="hljs-ln-line">          opacity: 1,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'yellow'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'closed'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'100px'</span>,</div><div class="hljs-ln-line">          opacity: 0.8,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'blue'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'closed =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open &lt;=&gt; closed'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'1s'</span>, style({opacity: <span class="hljs-string">'*'</span>}))]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; *'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">  templateUrl: <span class="hljs-string">'open-close.component.html'</span>,</div><div class="hljs-ln-line">  styleUrls: [<span class="hljs-string">'open-close.component.css'</span>],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line">export <span class="hljs-keyword">class</span> <span class="hljs-title class_">OpenCloseComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input()</span> logging = <span class="hljs-literal">false</span>;</div><div class="hljs-ln-line">  isOpen = <span class="hljs-literal">true</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  toggle() {</div><div class="hljs-ln-line">    <span class="hljs-keyword">this</span>.isOpen = !<span class="hljs-keyword">this</span>.isOpen;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  onAnimationEvent(event: AnimationEvent) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.logging) {</div><div class="hljs-ln-line">      <span class="hljs-keyword">return</span>;</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">    <span class="hljs-comment">// openClose is trigger name in this example</span></div><div class="hljs-ln-line">    console.warn(`Animation Trigger: ${event.triggerName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// phaseName is "start" or "done"</span></div><div class="hljs-ln-line">    console.warn(`Phase: ${event.phaseName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, totalTime is 1000 (number of milliseconds in a second)</span></div><div class="hljs-ln-line">    console.warn(`Total time: ${event.totalTime}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, fromState is either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`From: ${event.fromState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, toState either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`To: ${event.toState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// the HTML element itself, the button in this case</span></div><div class="hljs-ln-line">    console.warn(`Element: ${event.element}`);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    <div class="docs-alert docs-alert-helpful">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="26izzk5gkiu1bn4wldhx1i28c"><strong>提示：</strong>关于在
<a href="api/animations/state"><code>state</code></a>和
<code>transition</code>函数中使用样式的一些额外说明。</p>

    </div>
    
  <ul class="docs-list">
    <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4y6ouf7rq9wtlifj7gieko8s6">请用 <a href="api/animations/state"><code>state()</code></a> 来定义那些每个过渡结束时的样式，这些样式在动画完成后仍会保留</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="4gtm6ry6pecjgl2uzy3tkvdw0">使用
<code>transition()</code>来定义中间样式，从而在动画期间产生运动的错觉</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="3etwdq3ui3qd7neau2m0qqso4">当动画被禁用时，
<code>transition()</code> 样式可以被跳过，但 
<a href="api/animations/state"><code>state()</code></a> 样式不能。</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="9bk1bw4ftlf5ahb2pzfbkxgzm">在同一个
<code>transition()</code>参数中包含多个状态对：
<div class="docs-code"> 
 <pre class="docs-mini-scroll-track">      <code>
   <div class="hljs-ln-line">
    <span class="hljs-title function_">transition</span>( 
    <span class="hljs-string">'on =&gt; off, off =&gt; void'</span> )
   </div></code>
    </pre> 
</div></li>

  </ul>
  
  <h3 id="triggering-the-animation">
    <a href="#triggering-the-animation" class="docs-anchor" tabindex="-1" aria-label="Link to Triggering the animation" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8x5y5ynh5nb659qpg2ph0uf04">触发动画</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="dfvyxvfqdmgl9b8o2by5cd2yv">动画需要一个
<em>触发器</em>，以便知道何时开始。 
<code>trigger()</code>函数收集状态和转换，并为动画命名，使你可以将其附加到 HTML 模板中的触发元素上。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="exnrjln0urdjmt04jmf60d7oq"><code>trigger()</code>函数描述要监视更改的属性名称。 当发生更改时，触发器会启动其定义中包含的操作。 这些操作可以是转换或其他函数，稍后我们会看到。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="e1julbea332vvogy9pwg5eqyg">在这个例子中，我们将触发器命名为 
<code>openClose</code>，并将其附着到 
<code>button</code> 元素上。触发器描述了打开和关闭的状态，以及两种过渡的时序。</p>

    <div class="docs-alert docs-alert-helpful">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="d5s6eb6tadhbhxpp4ighrv732"><strong>提示：</strong>在每个
<code>trigger()</code>函数调用中，元素一次只能处于一个状态。 但是，可以同时激活多个触发器。</p>

    </div>
    
  <h3 id="defining-animations-and-attaching-them-to-the-html-template">
    <a href="#defining-animations-and-attaching-them-to-the-html-template" class="docs-anchor" tabindex="-1" aria-label="Link to Defining animations and attaching them to the HTML template" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3f8e5mbkm7jk4e848dupmraqf">定义动画，并把它们附加到 HTML 模板中</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="b5aejnb59sai05v220c352kjd">动画是在控制要进行动画处理的 HTML 元素的组件的元数据中定义的。 将定义动画的代码放在
<code>@Component()</code>装饰器中的
<code>animations:</code>属性下。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/open-close.component.ts" visiblelines="3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,32,33,34,35,36,37,39,40,41,42,43,44,67" header="src/app/open-close.component.ts">
    <div class="docs-code-header"><h3>src/app/open-close.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {Component, Input} from <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {trigger, transition, state, animate, style, AnimationEvent} from <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component({</span></div><div class="hljs-ln-line">  standalone: true,</div><div class="hljs-ln-line">  selector: <span class="hljs-string">'app-open-close'</span>,</div><div class="hljs-ln-line">  animations: [</div><div class="hljs-ln-line">    trigger(<span class="hljs-string">'openClose'</span>, [</div><div class="hljs-ln-line">      // ...</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'open'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'200px'</span>,</div><div class="hljs-ln-line">          opacity: 1,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'yellow'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'closed'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'100px'</span>,</div><div class="hljs-ln-line">          opacity: 0.8,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'blue'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'closed =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open &lt;=&gt; closed'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'1s'</span>, style({opacity: <span class="hljs-string">'*'</span>}))]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; *'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">  templateUrl: <span class="hljs-string">'open-close.component.html'</span>,</div><div class="hljs-ln-line">  styleUrls: [<span class="hljs-string">'open-close.component.css'</span>],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line">export <span class="hljs-keyword">class</span> <span class="hljs-title class_">OpenCloseComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input()</span> logging = <span class="hljs-literal">false</span>;</div><div class="hljs-ln-line">  isOpen = <span class="hljs-literal">true</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  toggle() {</div><div class="hljs-ln-line">    <span class="hljs-keyword">this</span>.isOpen = !<span class="hljs-keyword">this</span>.isOpen;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  onAnimationEvent(event: AnimationEvent) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.logging) {</div><div class="hljs-ln-line">      <span class="hljs-keyword">return</span>;</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">    <span class="hljs-comment">// openClose is trigger name in this example</span></div><div class="hljs-ln-line">    console.warn(`Animation Trigger: ${event.triggerName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// phaseName is "start" or "done"</span></div><div class="hljs-ln-line">    console.warn(`Phase: ${event.phaseName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, totalTime is 1000 (number of milliseconds in a second)</span></div><div class="hljs-ln-line">    console.warn(`Total time: ${event.totalTime}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, fromState is either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`From: ${event.fromState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, toState either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`To: ${event.toState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// the HTML element itself, the button in this case</span></div><div class="hljs-ln-line">    console.warn(`Element: ${event.element}`);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7teb14r5yqm6zx81fgcbkdoa8">为组件定义好这些动画触发器之后，你可以给触发器名称加上 <code>@</code> 前缀并包在方括号里，来把它附加到组件模板中的元素上。然后，你可以使用 Angular 的标准属性绑定语法（如下所示），来把这个触发器绑定到模板表达式上。这里的 <code>triggerName</code> 就是触发器的名称，而 <code>expression</code> 的求值结果是前面定义过的动画状态之一。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">&lt;div [<span class="hljs-meta">@triggerName</span>]=<span class="hljs-string">"expression"</span>&gt;…&lt;/div&gt;;</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="224onj073z4i6z0hxorrxjsz6">当该表达式的值变成了新的状态时，动画就会执行或者叫触发。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bv1ofmcvkewk66me116fgz9j3">下列代码片段把该触发器绑定到了 <code>isOpen</code> 属性的值上。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/open-close.component.1.html" visiblelines="0,1,2,3,4,5,6" header="src/app/open-close.component.html">
    <div class="docs-code-header"><h3>src/app/open-close.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span></span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"toggle()"</span>&gt;</span>Toggle Open/Close<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> [@<span class="hljs-attr">openClose</span>]=<span class="hljs-string">"isOpen ? 'open' : 'closed'"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"open-close-container"</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>The box is now <span class="hljs-template-variable">{{ <span class="hljs-name">isOpen</span> ? <span class="hljs-string">'Open'</span> : <span class="hljs-string">'Closed'</span> }}</span><span class="language-xml">!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6f36x9whsug5m8xswzbhkn4i1">在这个例子中，当 <code>isOpen</code> 表达式求值为一个已定义状态 <code>open</code> 或 <code>closed</code> 时，就会通知 <code>openClose</code> 触发器说状态变化了。然后，就由 <code>openClose</code> 中的代码来处理状态变更，并启动状态变更动画。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="7t7c30frw54iiu6rsc6vleqyn">对于进入或离开页面的元素（从 DOM 中插入或移除），你可以使动画条件化。 例如，在 HTML 模板中使用
<code>*ngIf</code>与动画触发器。</p>

    <div class="docs-alert docs-alert-helpful">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="o987mxbv8zloivzk277h0c1n"><strong>提示：</strong>在组件文件中，将定义动画的触发器设置为
<code>@Component()</code>装饰器中
<code>animations:</code>属性的值。</p>

    </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cno4aia9g8d97ppcqbelyartb">在 HTML 模板文件中，使用这个触发器的名称来把所定义的这些动画附加到想要添加动画的 HTML 元素上。</p>

  <h3 id="code-review">
    <a href="#code-review" class="docs-anchor" tabindex="-1" aria-label="Link to Code review" data-ng_translator_product="100" data-ng_translator_ref_id="74vloiv02qvwcs03uvd8dy3bk">代码回顾</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4tb7e9dp8tys7tm4ia9i67aes">下面是过渡动画范例中讨论过的代码文件。</p>
<div class="docs-code-multifile">
    <div class="docs-code" path="adev/src/content/examples/animations/src/app/open-close.component.ts" visiblelines="3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,32,33,34,35,36,37,39,40,41,42,43,44,67" header="src/app/open-close.component.ts">
    <div class="docs-code-header"><h3>src/app/open-close.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {Component, Input} from <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {trigger, transition, state, animate, style, AnimationEvent} from <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component({</span></div><div class="hljs-ln-line">  standalone: true,</div><div class="hljs-ln-line">  selector: <span class="hljs-string">'app-open-close'</span>,</div><div class="hljs-ln-line">  animations: [</div><div class="hljs-ln-line">    trigger(<span class="hljs-string">'openClose'</span>, [</div><div class="hljs-ln-line">      // ...</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'open'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'200px'</span>,</div><div class="hljs-ln-line">          opacity: 1,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'yellow'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      state(</div><div class="hljs-ln-line">        <span class="hljs-string">'closed'</span>,</div><div class="hljs-ln-line">        style({</div><div class="hljs-ln-line">          height: <span class="hljs-string">'100px'</span>,</div><div class="hljs-ln-line">          opacity: 0.8,</div><div class="hljs-ln-line">          backgroundColor: <span class="hljs-string">'blue'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'closed =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; closed'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'open &lt;=&gt; closed'</span>, [animate(<span class="hljs-string">'0.5s'</span>)]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; open'</span>, [animate(<span class="hljs-string">'1s'</span>, style({opacity: <span class="hljs-string">'*'</span>}))]),</div><div class="hljs-ln-line">      transition(<span class="hljs-string">'* =&gt; *'</span>, [animate(<span class="hljs-string">'1s'</span>)]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">  templateUrl: <span class="hljs-string">'open-close.component.html'</span>,</div><div class="hljs-ln-line">  styleUrls: [<span class="hljs-string">'open-close.component.css'</span>],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line">export <span class="hljs-keyword">class</span> <span class="hljs-title class_">OpenCloseComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@Input()</span> logging = <span class="hljs-literal">false</span>;</div><div class="hljs-ln-line">  isOpen = <span class="hljs-literal">true</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  toggle() {</div><div class="hljs-ln-line">    <span class="hljs-keyword">this</span>.isOpen = !<span class="hljs-keyword">this</span>.isOpen;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  onAnimationEvent(event: AnimationEvent) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.logging) {</div><div class="hljs-ln-line">      <span class="hljs-keyword">return</span>;</div><div class="hljs-ln-line">    }</div><div class="hljs-ln-line">    <span class="hljs-comment">// openClose is trigger name in this example</span></div><div class="hljs-ln-line">    console.warn(`Animation Trigger: ${event.triggerName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// phaseName is "start" or "done"</span></div><div class="hljs-ln-line">    console.warn(`Phase: ${event.phaseName}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, totalTime is 1000 (number of milliseconds in a second)</span></div><div class="hljs-ln-line">    console.warn(`Total time: ${event.totalTime}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, fromState is either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`From: ${event.fromState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// in our example, toState either "open" or "closed"</span></div><div class="hljs-ln-line">    console.warn(`To: ${event.toState}`);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">    <span class="hljs-comment">// the HTML element itself, the button in this case</span></div><div class="hljs-ln-line">    console.warn(`Element: ${event.element}`);</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><div class="docs-code" path="adev/src/content/examples/animations/src/app/open-close.component.1.html" visiblelines="0,1,2,3,4,5,6" header="src/app/open-close.component.html">
    <div class="docs-code-header"><h3>src/app/open-close.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span></span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">"toggle()"</span>&gt;</span>Toggle Open/Close<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> [@<span class="hljs-attr">openClose</span>]=<span class="hljs-string">"isOpen ? 'open' : 'closed'"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"open-close-container"</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>The box is now <span class="hljs-template-variable">{{ <span class="hljs-name">isOpen</span> ? <span class="hljs-string">'Open'</span> : <span class="hljs-string">'Closed'</span> }}</span><span class="language-xml">!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><div class="docs-code" path="adev/src/content/examples/animations/src/app/open-close.component.css" header="src/app/open-close.component.css">
    <div class="docs-code-header"><h3>src/app/open-close.component.css</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-selector-pseudo">:host</span> {</div><div class="hljs-ln-line">  <span class="hljs-attribute">display</span>: block;</div><div class="hljs-ln-line">  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1rem</span>;</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-selector-class">.open-close-container</span> {</div><div class="hljs-ln-line">  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#dddddd</span>;</div><div class="hljs-ln-line">  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1em</span>;</div><div class="hljs-ln-line">  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">20px</span> <span class="hljs-number">0px</span> <span class="hljs-number">20px</span>;</div><div class="hljs-ln-line">  <span class="hljs-attribute">color</span>: <span class="hljs-number">#000000</span>;</div><div class="hljs-ln-line">  <span class="hljs-attribute">font-weight</span>: bold;</div><div class="hljs-ln-line">  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
    </div>
  <h3 id="summary">
    <a href="#summary" class="docs-anchor" tabindex="-1" aria-label="Link to Summary" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2fflknbbur8ttwdtn3o9w4vat">总结</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="6mc0abmhrjs7wruuufs4ynwxt">你学会了在两个状态之间添加动画过渡，使用
<code>style()</code>和
<a href="api/animations/state"><code>state()</code></a>以及
<code>animate()</code>来设置时序。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="dw1cw5zusvd8ue8wrz5ucznt8">了解更多关于 Angular 动画的高级功能，请查看动画部分，从
<a href="guide/animations/transition-and-triggers">过渡和触发器</a>中的高级技术开始。</p>

  <h2 id="animations-api-summary">
    <a href="#animations-api-summary" class="docs-anchor" tabindex="-1" aria-label="Link to Animations API summary" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9bfmn4karxlz0kla0qjxw8vdm">动画 API 摘要</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="f0randn3650gamokw3pree8ap">由
<code>@angular/animations</code>模块提供的功能 API 提供了在 Angular 应用程序中创建和控制动画的领域特定语言（DSL）。 请查看
<a href="api#animations">API 参考</a>，了解核心函数和相关数据结构的完整列表和语法详细信息。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left" data-ng_translator_product="100" data-ng_translator_ref_id="85oi3tq4pzopk40jjdlqyy0cq">函数名称</th>
<th align="left" data-ng_translator_product="100" data-ng_translator_ref_id="ahluelivcbmz75ycwe771tv33">它的作用</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><code>trigger()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="5utewxumc0xsz71kyrtlfxpgq">触发动画并作为所有其他动画函数调用的容器。HTML 模板绑定到 
<code>triggerName</code>。使用第一个参数声明唯一的触发器名称。使用数组语法。</td>
</tr>
<tr>
<td align="left"><code>style()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="1auzelhs2dk9xyeaxudporvfk">定义一个或多个用于动画的 CSS 样式。在动画期间控制 HTML 元素的视觉外观。使用对象语法。</td>
</tr>
<tr>
<td align="left"><a href="api/animations/state"><code>state()</code></a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="4e807tr15fe73dccwke1lbczs">创建一个命名的 CSS 样式集，应用于成功转换到给定状态时。然后可以在其他动画函数中通过名称引用该状态。</td>
</tr>
<tr>
<td align="left"><code>animate()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="a6992kqc0u3ldxfhmz09lsyy1">指定转换的时间信息。
<code>delay</code> 和 
<code>easing</code> 的可选值。可以包含 
<code>style()</code> 调用。</td>
</tr>
<tr>
<td align="left"><code>transition()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="18nhl1yi07n85u0xpnym7yxtf">定义两个命名状态之间的动画序列。使用数组语法。</td>
</tr>
<tr>
<td align="left"><code>keyframes()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="5cq5sxl39npr753m0kd5k4c6w">允许在指定时间间隔内顺序更改样式。在 
<code>animate()</code> 中使用。可以在每个 
<code>keyframe()</code> 内包含多个 
<code>style()</code> 调用。使用数组语法。</td>
</tr>
<tr>
<td align="left"><a href="api/animations/group"><code>group()</code></a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="4e1e308mf7z79sptnrtatihsv">指定一组并行运行的动画步骤（
<em>内部动画</em>）。动画仅在所有内部动画步骤完成后继续。在 
<code>sequence()</code> 或 
<code>transition()</code> 中使用。</td>
</tr>
<tr>
<td align="left"><code>query()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="ci2hkjva0cmvb6v69694jhdv1">在当前元素内查找一个或多个内部 HTML 元素。</td>
</tr>
<tr>
<td align="left"><code>sequence()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="2c78o2yli3v4kguonrlon3p08">指定按顺序运行的动画步骤列表。</td>
</tr>
<tr>
<td align="left"><code>stagger()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="i1xxw8jglezmbf39ycuozg7k">为多个元素的动画启动时间错开。</td>
</tr>
<tr>
<td align="left"><code>animation()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="82mzva9o5olnysi2g5yo88aej">生成一个可重用的动画，可以从其他位置调用。与 
<code>useAnimation()</code> 一起使用。</td>
</tr>
<tr>
<td align="left"><code>useAnimation()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="c42niwfesvuqi661w0lklohfh">激活一个可重用的动画。与 
<code>animation()</code> 一起使用。</td>
</tr>
<tr>
<td align="left"><code>animateChild()</code></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="5eraa5x30xg9wtjiykjywtfvh">允许子组件上的动画与父级在同一时间框架内运行。</td>
</tr>

      </tbody>
    </table>
  </div>
  


  <h2 id="more-on-angular-animations">
    <a href="#more-on-angular-animations" class="docs-anchor" tabindex="-1" aria-label="Link to More on Angular animations" data-ng_translator_product="100" data-ng_translator_ref_id="a26kagk7mrtsdtdkoro0iswgp">关于 Angular 动画的更多知识</a>
  </h2>
  
    <div class="docs-alert docs-alert-helpful">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="epr5lvmlhlaffcmviv1mj8r2k"><strong>有用信息:</strong> 查看 2017 年 11 月在 AngularConnect 大会上展示的这个 
<a href="https://www.youtube.com/watch?v=rnTK9meY5us" target="_blank">演示</a>，以及相关的 
<a href="https://github.com/matsko/animationsftw.in" target="_blank">源代码</a>。</p>

    </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="1oolgylns9kaynftarwog49tq">你可能还对下列内容感兴趣：</p>

    <nav class="docs-pill-row">
      
    <a class="docs-pill" href="guide/animations/transition-and-triggers" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3rydsupe7krnv6vnfnf00p2ir">过渡与触发器</a>
    
    <a class="docs-pill" href="guide/animations/complex-sequences" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="du34zltlw8k7aengvl00xfek0">复杂动画序列</a>
    
    <a class="docs-pill" href="guide/animations/reusable-animations" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2voxtsmz3cy504712cdddfint">可复用动画</a>
    
    <a class="docs-pill" href="guide/animations/route-animations" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3wpy14odnjxcm6qf09abby2sa">路由过渡动画</a>
    

    </nav>
    