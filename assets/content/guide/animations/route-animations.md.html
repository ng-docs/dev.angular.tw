<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="b2h4w8cevwqcn0j6g4njkmexd">路由过渡动画</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/animations/route-animations.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="dvq5rxv5290kbb7nk2a4bxxu5">路由使用户能够在应用程序中导航到不同的路由之间。</p>

  <h2 id="enable-routing-transition-animation">
    <a href="#enable-routing-transition-animation" class="docs-anchor" tabindex="-1" aria-label="Link to Enable routing transition animation" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dlb5b7gt6y4ldpm1fdupelpfb">启用路由过渡动画</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="49ihe3vnuae5iatfs2xbtielh">路由能让用户在应用中的不同路由之间导航。当用户从一个路由导航到另一个路由时，Angular 路由器会把这个 URL 映射到一个相关的组件，并显示其视图。为这种路由转换添加动画，将极大地提升用户体验。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5qm2ld5nz9t27o0ye0dtrs219">Angular 路由器天生带有高级动画功能，它可以让你为在路由变化时为视图之间设置过渡动画。要想在路由切换时生成动画序列，你需要首先定义出嵌套的动画序列。从宿主视图的顶层组件开始，在这些内嵌视图的宿主组件中嵌套动画。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5zax9tmvvy71bpx1iszdznwya">要启用路由过渡动画，需要做如下步骤：</p>

    <ol class="docs-ordered-list">
      <li data-ng_translator_product="100" data-ng_translator_ref_id="6ic76emg4h7almgf0f60dejsm">创建一个路由配置，定义可能的路由。对于基于 NgModule 的应用程序，这将包括创建一个
<code>RouterModule</code>并将其添加到主
<code>AppModule</code>中。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9ljo8q61b1fakmc13twfkvdgl">添加路由器出口，来告诉 Angular 路由器要把激活的组件放在 DOM 中的什么位置。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9a2ldd3c3muuvi34cb6zt71vh">定义动画。</li>

    </ol>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="53ptvrg7q7tv4s2acf1qbzbnz">让我们以两个路由之间的导航过程来解释一下路由过渡动画，<em>Home</em> 和 <em>About</em> 分别与 <code>HomeComponent</code> 和 <code>AboutComponent</code> 的视图相关联。所有这些组件视图都是顶层视图的子节点，其宿主是 <code>AppComponent</code>。接下来将实现路由器过渡动画，该动画会在出现新视图时向右滑动，并当在两个路由之间导航时把旧视图滑出。</p>
<img alt="Animations in action" width="440" src="assets/images/guide/animations/route-animation.gif">


  <h2 id="route-configuration">
    <a href="#route-configuration" class="docs-anchor" tabindex="-1" aria-label="Link to Route configuration" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cjoiilyxck80vg1h8mq3rg4w1">路由配置</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="7cc4wefa9qxw7gbhs7o0u8cqr">首先，配置一组路由。此路由配置告诉路由器如何导航。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="vop7nrrwfz0l8ye5r0x2xl7f">创建一个
<code>Routes</code>数组来定义一组路由。将这些路由添加到
<code>main.ts</code>中的
<code>bootstrapApplication</code>函数调用的提供者数组中的
<code>provideRouter</code>函数中。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-title function_">bootstrapApplication</span>(<span class="hljs-title class_">AppComponent</span>, {</div><div class="hljs-ln-line">  <span class="hljs-attr">providers</span>: [</div><div class="hljs-ln-line">    <span class="hljs-title function_">provideRouter</span>(appRoutes),</div><div class="hljs-ln-line">  ]</div><div class="hljs-ln-line">});</div></code>
    </pre>
  </div>
    <div class="docs-alert docs-alert-note">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="ax5iwg5sz0fah5x3owyudfcfy"><strong>注意：</strong>对于基于
<code>NgModule</code>的应用程序： 使用
<code>RouterModule.forRoot</code>方法来定义一组路由。 同时，将
<code>RouterModule</code>添加到主模块
<code>AppModule</code>的
<code>imports</code>数组中。</p>

    </div>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="c4jpq75x812l46oa3yeew31pn">在根模块
<code>AppModule</code>中使用
<code>RouterModule.forRoot</code>方法来注册顶级应用程序路由和提供者。 对于特性模块，应使用
<code>RouterModule.forChild</code>方法。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3x0r7ox4w5bixzftd8cfegiag">下列配置定义了应用程序中可能的路由。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/app.routes.ts" visiblelines="13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70" header="src/app/app.routes.ts">
    <div class="docs-code-header"><h3>src/app/app.routes.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {Routes} from <span class="hljs-string">'@angular/router'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {OpenClosePageComponent} from <span class="hljs-string">'./open-close-page.component'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {StatusSliderPageComponent} from <span class="hljs-string">'./status-slider-page.component'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {ToggleAnimationsPageComponent} from <span class="hljs-string">'./toggle-animations-page.component'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {HeroListPageComponent} from <span class="hljs-string">'./hero-list-page.component'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {HeroListGroupPageComponent} from <span class="hljs-string">'./hero-list-group-page.component'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {HeroListEnterLeavePageComponent} from <span class="hljs-string">'./hero-list-enter-leave-page.component'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {HeroListAutoCalcPageComponent} from <span class="hljs-string">'./hero-list-auto-page.component'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {InsertRemoveComponent} from <span class="hljs-string">'./insert-remove.component'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {QueryingComponent} from <span class="hljs-string">'./querying.component'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {HomeComponent} from <span class="hljs-string">'./home.component'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {AboutComponent} from <span class="hljs-string">'./about.component'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">export const routes: Routes = [</div><div class="hljs-ln-line">  <span class="hljs-built_in">{path</span>: <span class="hljs-string">''</span>, pathMatch: <span class="hljs-string">'full'</span>, redirectTo: <span class="hljs-string">'/enter-leave'</span>},</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'open-close'</span>,</div><div class="hljs-ln-line">    component: OpenClosePageComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'openClosePage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'status'</span>,</div><div class="hljs-ln-line">    component: StatusSliderPageComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'statusPage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'toggle'</span>,</div><div class="hljs-ln-line">    component: ToggleAnimationsPageComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'togglePage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'heroes'</span>,</div><div class="hljs-ln-line">    component: HeroListPageComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'filterPage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'hero-groups'</span>,</div><div class="hljs-ln-line">    component: HeroListGroupPageComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'heroGroupPage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'enter-leave'</span>,</div><div class="hljs-ln-line">    component: HeroListEnterLeavePageComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'enterLeavePage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'auto'</span>,</div><div class="hljs-ln-line">    component: HeroListAutoCalcPageComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'autoPage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'insert-remove'</span>,</div><div class="hljs-ln-line">    component: InsertRemoveComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'insertRemovePage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'querying'</span>,</div><div class="hljs-ln-line">    component: QueryingComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'queryingPage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'home'</span>,</div><div class="hljs-ln-line">    component: HomeComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'HomePage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">  {</div><div class="hljs-ln-line">   <span class="hljs-built_in"> path</span>: <span class="hljs-string">'about'</span>,</div><div class="hljs-ln-line">    component: AboutComponent,</div><div class="hljs-ln-line">    data: {animation: <span class="hljs-string">'AboutPage'</span>},</div><div class="hljs-ln-line">  },</div><div class="hljs-ln-line">];</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="41ntvnd74zptotg86mqyxzns4"><code>home</code> 和 <code>about</code> 路径分别关联着 <code>HomeComponent</code> 和 <code>AboutComponent</code> 视图。该路由配置告诉 Angular 路由器当导航匹配了相应的路径时，就实例化 <code>HomeComponent</code> 和 <code>AboutComponent</code> 视图。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="p0v22f4iws3oaeantwsj56du">每个路由定义中的 <code>data</code> 属性也定义了与此路由有关的动画配置。当路由变化时，<code>data</code> 属性的值就会传给 <code>AppComponent</code>。</p>

    <div class="docs-alert docs-alert-helpful">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="awmgeh96mggxt6u9pasnwjivm"><strong>提示：</strong>你使用的
<code>data</code>属性名称可以是任意的。 例如，在上面的示例中使用的名称
<em>animation</em>是任意选择的。</p>

    </div>
    
  <h2 id="router-outlet">
    <a href="#router-outlet" class="docs-anchor" tabindex="-1" aria-label="Link to Router outlet" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="p01zmizatizt251ebpyqzn4d">路由出口</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="62onikohf5eg93uc5el203unk">配置完路由后，在根
<code>AppComponent</code>模板中添加一个
<code>&lt;router-outlet&gt;</code>。 
<code>&lt;router-outlet&gt;</code>指令告诉 Angular 路由器在匹配路由时在何处渲染视图。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="azkyettodk03b706ox8lc6747"><code>ChildrenOutletContexts</code>保存有关出口和激活路由的信息。 每个
<code>Route</code>的
<code>data</code>属性可用于动画路由过渡。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/app.component.html" visiblelines="22,23,24" header="src/app/app.component.html">
    <div class="docs-code-header"><h3>src/app/app.component.html</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Animations<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span></span></div><div class="hljs-ln-line">       <span class="hljs-attr">id</span>=<span class="hljs-string">"animation-toggle"</span></div><div class="hljs-ln-line">       [<span class="hljs-attr">checked</span>]=<span class="hljs-string">"!animationsDisabled"</span></div><div class="hljs-ln-line">       (<span class="hljs-attr">click</span>)=<span class="hljs-string">"toggleAnimations()"</span>&gt;</div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"animation-toggle"</span>&gt;</span>Toggle All Animations<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"home"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/home"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"about"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/about"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"open-close"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/open-close"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>Open/Close<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"status"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/status"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>Status Slider<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"toggle"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/toggle"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>Toggle Animations<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"enter-leave"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/enter-leave"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>Enter/Leave<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"auto"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/auto"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>Auto Calculation<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"heroes"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/heroes"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>Filter/Stagger<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"hero-groups"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/hero-groups"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>Hero Groups<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"insert-remove"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/insert-remove"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>Insert/Remove<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"querying"</span> <span class="hljs-attr">routerLink</span>=<span class="hljs-string">"/querying"</span> <span class="hljs-attr">routerLinkActive</span>=<span class="hljs-string">"active"</span> <span class="hljs-attr">ariaCurrentWhenActive</span>=<span class="hljs-string">"page"</span>&gt;</span>Querying<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> [@<span class="hljs-attr">routeAnimations</span>]=<span class="hljs-string">"getRouteAnimationData()"</span>&gt;</span></div><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">router-outlet</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-outlet</span>&gt;</span></div><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8u51h8z4t3brl6zki07ohfdpg"><code>AppComponent</code> 中定义了一个可以检测视图何时发生变化的方法，该方法会基于路由配置的 <code>data</code> 属性值，将动画状态值赋值给动画触发器（<code>@routeAnimation</code>）。下面就是一个 <code>AppComponent</code> 中的范例方法，用于检测路由在何时发生了变化。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/app.component.ts" visiblelines="28,29,30,31,32" header="src/app/app.component.ts">
    <div class="docs-code-header"><h3>src/app/app.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>, <span class="hljs-title class_">HostBinding</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {</div><div class="hljs-ln-line">  trigger,</div><div class="hljs-ln-line">  state,</div><div class="hljs-ln-line">  style,</div><div class="hljs-ln-line">  animate,</div><div class="hljs-ln-line">  transition,</div><div class="hljs-ln-line">  <span class="hljs-comment">// ...</span></div><div class="hljs-ln-line">} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">ChildrenOutletContexts</span>, <span class="hljs-title class_">RouterLink</span>, <span class="hljs-title class_">RouterOutlet</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {slideInAnimation} <span class="hljs-keyword">from</span> <span class="hljs-string">'./animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-root'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'app.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'app.component.css'</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">RouterLink</span>, <span class="hljs-title class_">RouterOutlet</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">animations</span>: [</div><div class="hljs-ln-line">    slideInAnimation,</div><div class="hljs-ln-line">    <span class="hljs-comment">// animation triggers go here</span></div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@HostBinding</span>(<span class="hljs-string">'@.disabled'</span>)</div><div class="hljs-ln-line">  <span class="hljs-keyword">public</span> animationsDisabled = <span class="hljs-literal">false</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> contexts: ChildrenOutletContexts</span>) {}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">getRouteAnimationData</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">contexts</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'primary'</span>)?.<span class="hljs-property">route</span>?.<span class="hljs-property">snapshot</span>?.<span class="hljs-property">data</span>?.[<span class="hljs-string">'animation'</span>];</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">toggleAnimations</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationsDisabled</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">animationsDisabled</span>;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="3bbat1nrbhcldbndwoiy9gexf"><code>getRouteAnimationData()</code> 方法获取出口的值。它返回一个字符串，表示基于当前活动路由的自定义数据的动画状态。使用这些数据控制每个路由的过渡。</p>

  <h2 id="animation-definition">
    <a href="#animation-definition" class="docs-anchor" tabindex="-1" aria-label="Link to Animation definition" data-ng_translator_product="100" data-ng_translator_ref_id="2obk3gyfy8m8tzsu7kwky5rur">动画定义</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7cqvftiw0linke07fiqpnv0ie">动画可以直接在组件中定义。对于此范例，我们会在独立的文件中定义动画，这让我们可以复用这些动画。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2xl3xt4va22dkdfh545dho1in">下面的代码片段定义了一个名叫 <code>slideInAnimation</code> 的可复用动画。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/animations.ts" visiblelines="21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64" header="src/app/animations.ts">
    <div class="docs-code-header"><h3>src/app/animations.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">import {</div><div class="hljs-ln-line">  animation,</div><div class="hljs-ln-line">  trigger,</div><div class="hljs-ln-line">  animateChild,</div><div class="hljs-ln-line">  group,</div><div class="hljs-ln-line">  transition,</div><div class="hljs-ln-line">  animate,</div><div class="hljs-ln-line">  style,</div><div class="hljs-ln-line">  query,</div><div class="hljs-ln-line">} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">export <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">transitionAnimation</span> = <span class="hljs-title function_ invoke__">animation</span>([</div><div class="hljs-ln-line">  <span class="hljs-title function_ invoke__">style</span>({</div><div class="hljs-ln-line">    <span class="hljs-attr">height</span>: <span class="hljs-string">'{{ height }}'</span>,</div><div class="hljs-ln-line">    <span class="hljs-attr">opacity</span>: <span class="hljs-string">'{{ opacity }}'</span>,</div><div class="hljs-ln-line">    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'{{ backgroundColor }}'</span>,</div><div class="hljs-ln-line">  }),</div><div class="hljs-ln-line">  <span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'{{ time }}'</span>),</div><div class="hljs-ln-line">]);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-comment">// Routable animations</span></div><div class="hljs-ln-line">export <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">slideInAnimation</span> =</div><div class="hljs-ln-line">  <span class="hljs-title function_ invoke__">trigger</span>(<span class="hljs-string">'routeAnimations'</span>, [</div><div class="hljs-ln-line">    <span class="hljs-title function_ invoke__">transition</span>(<span class="hljs-string">'HomePage &lt;=&gt; AboutPage'</span>, [</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">position</span>: <span class="hljs-string">'relative'</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter, :leave'</span>, [</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">style</span>({</div><div class="hljs-ln-line">          <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,</div><div class="hljs-ln-line">          <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">          <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">          <span class="hljs-attr">width</span>: <span class="hljs-string">'100%'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ]),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'-100%'</span>})], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, <span class="hljs-title function_ invoke__">animateChild</span>(), {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">group</span>([</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'300ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'100%'</span>}))], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'300ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'0%'</span>}))], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      ]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">    <span class="hljs-title function_ invoke__">transition</span>(<span class="hljs-string">'* &lt;=&gt; *'</span>, [</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">position</span>: <span class="hljs-string">'relative'</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(</div><div class="hljs-ln-line">        <span class="hljs-string">':enter, :leave'</span>,</div><div class="hljs-ln-line">        [</div><div class="hljs-ln-line">          <span class="hljs-title function_ invoke__">style</span>({</div><div class="hljs-ln-line">            <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,</div><div class="hljs-ln-line">            <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">            <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">            <span class="hljs-attr">width</span>: <span class="hljs-string">'100%'</span>,</div><div class="hljs-ln-line">          }),</div><div class="hljs-ln-line">        ],</div><div class="hljs-ln-line">        {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>},</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'-100%'</span>})], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, <span class="hljs-title function_ invoke__">animateChild</span>(), {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">group</span>([</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'200ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'100%'</span>, <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>}))], {</div><div class="hljs-ln-line">          <span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'300ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'0%'</span>}))], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">'@*'</span>, <span class="hljs-title function_ invoke__">animateChild</span>(), {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      ]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">  ]);</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3m9a695u8k6l10ng48fksqucz">该动画定义做了如下事情：</p>

  <ul class="docs-list">
    <li data-ng_translator_product="100" data-ng_translator_ref_id="cslrj3kyj4cuibi7kh0pji5ds">定义两个转换（一个单一的
<code>trigger</code>可以定义多个状态和转换）</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9u5xeaq5nmz80a7cis0neiph6">调整宿主视图和子视图的样式，以便在过渡期间，控制它们的相对位置</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="d6xwbdmq5pyyphxcp6shopolv">使用
<code>query()</code>确定哪个子视图正在进入，哪个正在离开宿主视图</li>

  </ul>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6993q37s5ok5i0ne5p7u3s90v">路由的变化会激活这个动画触发器，并应用一个与该状态变更相匹配的过渡</p>

    <div class="docs-alert docs-alert-helpful">
    <p data-ng_translator_product="100" data-ng_translator_ref_id="7uaen4atn3x8y1h7wdn6t20ra"><strong>提示：</strong>转换状态必须与路由配置中定义的
<code>data</code>属性值匹配。</p>

    </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="61ilyghnfous0lcpvnihv54vx">通过将可复用动画 <code>slideInAnimation</code> 添加到 <code>AppComponent</code> 的 <code>animations</code> 元数据中，可以让此动画定义能用在你的应用中。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/app.component.ts" visiblelines="13,14,15,16,17,18,19,20,22,23" header="src/app/app.component.ts">
    <div class="docs-code-header"><h3>src/app/app.component.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">Component</span>, <span class="hljs-title class_">HostBinding</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {</div><div class="hljs-ln-line">  trigger,</div><div class="hljs-ln-line">  state,</div><div class="hljs-ln-line">  style,</div><div class="hljs-ln-line">  animate,</div><div class="hljs-ln-line">  transition,</div><div class="hljs-ln-line">  <span class="hljs-comment">// ...</span></div><div class="hljs-ln-line">} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">ChildrenOutletContexts</span>, <span class="hljs-title class_">RouterLink</span>, <span class="hljs-title class_">RouterOutlet</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/router'</span>;</div><div class="hljs-ln-line"><span class="hljs-keyword">import</span> {slideInAnimation} <span class="hljs-keyword">from</span> <span class="hljs-string">'./animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</div><div class="hljs-ln-line">  <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-root'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'app.component.html'</span>,</div><div class="hljs-ln-line">  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'app.component.css'</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">RouterLink</span>, <span class="hljs-title class_">RouterOutlet</span>],</div><div class="hljs-ln-line">  <span class="hljs-attr">animations</span>: [</div><div class="hljs-ln-line">    slideInAnimation,</div><div class="hljs-ln-line">    <span class="hljs-comment">// animation triggers go here</span></div><div class="hljs-ln-line">  ],</div><div class="hljs-ln-line">})</div><div class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppComponent</span> {</div><div class="hljs-ln-line">  <span class="hljs-meta">@HostBinding</span>(<span class="hljs-string">'@.disabled'</span>)</div><div class="hljs-ln-line">  <span class="hljs-keyword">public</span> animationsDisabled = <span class="hljs-literal">false</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> contexts: ChildrenOutletContexts</span>) {}</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">getRouteAnimationData</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">contexts</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'primary'</span>)?.<span class="hljs-property">route</span>?.<span class="hljs-property">snapshot</span>?.<span class="hljs-property">data</span>?.[<span class="hljs-string">'animation'</span>];</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">  <span class="hljs-title function_">toggleAnimations</span>(<span class="hljs-params"></span>) {</div><div class="hljs-ln-line">    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationsDisabled</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">animationsDisabled</span>;</div><div class="hljs-ln-line">  }</div><div class="hljs-ln-line">}</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
  <h3 id="style-the-host-and-child-components">
    <a href="#style-the-host-and-child-components" class="docs-anchor" tabindex="-1" aria-label="Link to Style the host and child components" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="ojbmy0rkh51f1kg5c8goaxap">为宿主组件和子组件添加样式</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="epxbi6p0w58nz1cbum41bnyhp">在过渡期间，新视图将直接插入在旧视图后面，并且这两个元素会同时出现在屏幕上。要防止这种行为，就要修改宿主视图，改用相对定位。然后，把已移除或已插入的子视图改用绝对定位。在这些视图中添加样式，就可以让容器就地播放动画，并防止某个视图影响页面中其它视图的位置。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/animations.ts" visiblelines="22,23,24,25,26,27,28,29,30,31,32" header="src/app/animations.ts (excerpt)">
    <div class="docs-code-header"><h3 data-ng_translator_product="100" data-ng_translator_ref_id="77rbqmtjfbsnop0wrx0mg8d77">src/app/animations.ts（摘录）</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">import {</div><div class="hljs-ln-line">  animation,</div><div class="hljs-ln-line">  trigger,</div><div class="hljs-ln-line">  animateChild,</div><div class="hljs-ln-line">  group,</div><div class="hljs-ln-line">  transition,</div><div class="hljs-ln-line">  animate,</div><div class="hljs-ln-line">  style,</div><div class="hljs-ln-line">  query,</div><div class="hljs-ln-line">} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">export <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">transitionAnimation</span> = <span class="hljs-title function_ invoke__">animation</span>([</div><div class="hljs-ln-line">  <span class="hljs-title function_ invoke__">style</span>({</div><div class="hljs-ln-line">    <span class="hljs-attr">height</span>: <span class="hljs-string">'{{ height }}'</span>,</div><div class="hljs-ln-line">    <span class="hljs-attr">opacity</span>: <span class="hljs-string">'{{ opacity }}'</span>,</div><div class="hljs-ln-line">    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'{{ backgroundColor }}'</span>,</div><div class="hljs-ln-line">  }),</div><div class="hljs-ln-line">  <span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'{{ time }}'</span>),</div><div class="hljs-ln-line">]);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-comment">// Routable animations</span></div><div class="hljs-ln-line">export <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">slideInAnimation</span> =</div><div class="hljs-ln-line">  <span class="hljs-title function_ invoke__">trigger</span>(<span class="hljs-string">'routeAnimations'</span>, [</div><div class="hljs-ln-line">    <span class="hljs-title function_ invoke__">transition</span>(<span class="hljs-string">'HomePage &lt;=&gt; AboutPage'</span>, [</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">position</span>: <span class="hljs-string">'relative'</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter, :leave'</span>, [</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">style</span>({</div><div class="hljs-ln-line">          <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,</div><div class="hljs-ln-line">          <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">          <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">          <span class="hljs-attr">width</span>: <span class="hljs-string">'100%'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ]),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'-100%'</span>})], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, <span class="hljs-title function_ invoke__">animateChild</span>(), {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">group</span>([</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'300ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'100%'</span>}))], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'300ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'0%'</span>}))], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      ]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">    <span class="hljs-title function_ invoke__">transition</span>(<span class="hljs-string">'* &lt;=&gt; *'</span>, [</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">position</span>: <span class="hljs-string">'relative'</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(</div><div class="hljs-ln-line">        <span class="hljs-string">':enter, :leave'</span>,</div><div class="hljs-ln-line">        [</div><div class="hljs-ln-line">          <span class="hljs-title function_ invoke__">style</span>({</div><div class="hljs-ln-line">            <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,</div><div class="hljs-ln-line">            <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">            <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">            <span class="hljs-attr">width</span>: <span class="hljs-string">'100%'</span>,</div><div class="hljs-ln-line">          }),</div><div class="hljs-ln-line">        ],</div><div class="hljs-ln-line">        {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>},</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'-100%'</span>})], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, <span class="hljs-title function_ invoke__">animateChild</span>(), {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">group</span>([</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'200ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'100%'</span>, <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>}))], {</div><div class="hljs-ln-line">          <span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'300ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'0%'</span>}))], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">'@*'</span>, <span class="hljs-title function_ invoke__">animateChild</span>(), {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      ]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">  ]);</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div>
  <h3 id="query-the-view-containers">
    <a href="#query-the-view-containers" class="docs-anchor" tabindex="-1" aria-label="Link to Query the view containers" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dyeycyw6sqrmnejmr6w2auf7u">查询视图的容器</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="7nhsyf694jogsgaeahwu9f5ys">使用
<code>query()</code>方法查找并对当前宿主组件中的元素进行动画处理。 
<code>query(":enter")</code>语句返回正在插入的视图，
<code>query(":leave")</code>返回正在移除的视图。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="25zucd7iexp5i0wm6bkzt0qh7">假设你从
<em>主页 =&gt; 关于</em>进行路由。</p>
<div class="docs-code" path="adev/src/content/examples/animations/src/app/animations.ts" visiblelines="33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63" header="src/app/animations.ts (excerpt)">
    <div class="docs-code-header"><h3 data-ng_translator_product="100" data-ng_translator_ref_id="77rbqmtjfbsnop0wrx0mg8d77">src/app/animations.ts（摘录）</h3></div>
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">import {</div><div class="hljs-ln-line">  animation,</div><div class="hljs-ln-line">  trigger,</div><div class="hljs-ln-line">  animateChild,</div><div class="hljs-ln-line">  group,</div><div class="hljs-ln-line">  transition,</div><div class="hljs-ln-line">  animate,</div><div class="hljs-ln-line">  style,</div><div class="hljs-ln-line">  query,</div><div class="hljs-ln-line">} <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/animations'</span>;</div><div class="hljs-ln-line"></div><div class="hljs-ln-line">export <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">transitionAnimation</span> = <span class="hljs-title function_ invoke__">animation</span>([</div><div class="hljs-ln-line">  <span class="hljs-title function_ invoke__">style</span>({</div><div class="hljs-ln-line">    <span class="hljs-attr">height</span>: <span class="hljs-string">'{{ height }}'</span>,</div><div class="hljs-ln-line">    <span class="hljs-attr">opacity</span>: <span class="hljs-string">'{{ opacity }}'</span>,</div><div class="hljs-ln-line">    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'{{ backgroundColor }}'</span>,</div><div class="hljs-ln-line">  }),</div><div class="hljs-ln-line">  <span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'{{ time }}'</span>),</div><div class="hljs-ln-line">]);</div><div class="hljs-ln-line"></div><div class="hljs-ln-line"><span class="hljs-comment">// Routable animations</span></div><div class="hljs-ln-line">export <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">slideInAnimation</span> =</div><div class="hljs-ln-line">  <span class="hljs-title function_ invoke__">trigger</span>(<span class="hljs-string">'routeAnimations'</span>, [</div><div class="hljs-ln-line">    <span class="hljs-title function_ invoke__">transition</span>(<span class="hljs-string">'HomePage &lt;=&gt; AboutPage'</span>, [</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">position</span>: <span class="hljs-string">'relative'</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter, :leave'</span>, [</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">style</span>({</div><div class="hljs-ln-line">          <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,</div><div class="hljs-ln-line">          <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">          <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">          <span class="hljs-attr">width</span>: <span class="hljs-string">'100%'</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">      ]),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'-100%'</span>})], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, <span class="hljs-title function_ invoke__">animateChild</span>(), {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">group</span>([</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'300ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'100%'</span>}))], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'300ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'0%'</span>}))], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      ]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">    <span class="hljs-title function_ invoke__">transition</span>(<span class="hljs-string">'* &lt;=&gt; *'</span>, [</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">position</span>: <span class="hljs-string">'relative'</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(</div><div class="hljs-ln-line">        <span class="hljs-string">':enter, :leave'</span>,</div><div class="hljs-ln-line">        [</div><div class="hljs-ln-line">          <span class="hljs-title function_ invoke__">style</span>({</div><div class="hljs-ln-line">            <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,</div><div class="hljs-ln-line">            <span class="hljs-attr">top</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">            <span class="hljs-attr">left</span>: <span class="hljs-number">0</span>,</div><div class="hljs-ln-line">            <span class="hljs-attr">width</span>: <span class="hljs-string">'100%'</span>,</div><div class="hljs-ln-line">          }),</div><div class="hljs-ln-line">        ],</div><div class="hljs-ln-line">        {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>},</div><div class="hljs-ln-line">      ),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'-100%'</span>})], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, <span class="hljs-title function_ invoke__">animateChild</span>(), {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      <span class="hljs-title function_ invoke__">group</span>([</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':leave'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'200ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'100%'</span>, <span class="hljs-attr">opacity</span>: <span class="hljs-number">0</span>}))], {</div><div class="hljs-ln-line">          <span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>,</div><div class="hljs-ln-line">        }),</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">':enter'</span>, [<span class="hljs-title function_ invoke__">animate</span>(<span class="hljs-string">'300ms ease-out'</span>, <span class="hljs-title function_ invoke__">style</span>({<span class="hljs-attr">left</span>: <span class="hljs-string">'0%'</span>}))], {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">        <span class="hljs-title function_ invoke__">query</span>(<span class="hljs-string">'@*'</span>, <span class="hljs-title function_ invoke__">animateChild</span>(), {<span class="hljs-attr">optional</span>: <span class="hljs-literal">true</span>}),</div><div class="hljs-ln-line">      ]),</div><div class="hljs-ln-line">    ]),</div><div class="hljs-ln-line">  ]);</div><div class="hljs-ln-line"></div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="q3uo85d1tc138jgpjhlbdew6">在设置了视图的样式之后，动画代码会执行如下操作：</p>

    <ol class="docs-ordered-list">
      <li><p data-ng_translator_product="100" data-ng_translator_ref_id="7x3zezwkfkw72mo65eumc4pch"><code>query(':enter', style({ left: '-100%' }))</code>匹配要添加的视图，并通过将其定位到最左边隐藏新添加的视图。</p>
</li>
<li><p data-ng_translator_product="100" data-ng_translator_ref_id="2nz9vvdhe6hs9eqin8p2zset9">在离开的视图上调用
<code>animateChild()</code>，以运行其子动画。</p>
</li>
<li><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8c068tk3etjk0b80e5ny8jjlv">使用<a href="api/animations/group"><code>group()</code></a>函数使内部动画并行运行。</p>
</li>
<li><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6k5pchdte1hmwpcku9p9g9myf">在 <a href="api/animations/group"><code>group()</code></a> 函数中：</p>

    <ol class="docs-ordered-list">
      <li><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="1ynayr8j4xnx2yinp3umdhtlf">查询已移除的视图，并让它从右侧滑出。</p>
</li>
<li><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2u63o9s2yqftski8brxj4h5yt">使用缓动函数和持续时间定义的动画，让这个新视图滑入。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="57inruqt30m8zs649wv31rqyd">此动画将导致 <code>about</code> 视图从左侧划入。</p>
</li>

    </ol>
    </li>
<li><p data-ng_translator_product="100" data-ng_translator_ref_id="9bgewk2q9twggliiv95q4eq3w">在主动画完成后，对新视图调用
<code>animateChild()</code>方法以运行其子动画。</p>
</li>

    </ol>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="61fjai4o59zdyrot8gni4iift">你现在有了一个基本的路由动画，可以在从一个视图路由到另一个视图时播放动画。</p>

  <h2 id="more-on-angular-animations">
    <a href="#more-on-angular-animations" class="docs-anchor" tabindex="-1" aria-label="Link to More on Angular animations" data-ng_translator_product="100" data-ng_translator_ref_id="a26kagk7mrtsdtdkoro0iswgp">关于 Angular 动画的更多知识</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="1oolgylns9kaynftarwog49tq">你可能还对下列内容感兴趣：</p>

    <nav class="docs-pill-row">
      
    <a class="docs-pill" href="guide/animations" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8efkbqfn0ftsqxrt3qijmnwej">Angular 动画简介</a>
    
    <a class="docs-pill" href="guide/animations/transition-and-triggers" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3rydsupe7krnv6vnfnf00p2ir">过渡与触发器</a>
    
    <a class="docs-pill" href="guide/animations/complex-sequences" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="du34zltlw8k7aengvl00xfek0">复杂动画序列</a>
    
    <a class="docs-pill" href="guide/animations/reusable-animations" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2voxtsmz3cy504712cdddfint">可复用动画</a>
    

    </nav>
    