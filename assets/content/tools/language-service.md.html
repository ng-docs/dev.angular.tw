<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">Angular 語言服務</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/tools/language-service.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p>Angular 語言服務為程式碼編輯器提供了一種在 Angular 樣板中獲取程式碼完成、錯誤、提示和導向的方法。
它適用於獨立 HTML 檔案中的外部樣板，也適用於行內樣板。</p>

  <h2 id="configuring-compiler-options-for-the-angular-language-service">
    <a href="#configuring-compiler-options-for-the-angular-language-service" class="docs-anchor" tabindex="-1" aria-label="Link to Configuring compiler options for the Angular Language Service">為 Angular 語言服務設定編譯器選項</a>
  </h2>
  <p>要啟用最新的語言服務屬性，請在 <code>tsconfig.json</code> 中設定 <code>strictTemplates</code> 選項，方法是將 <code>strictTemplates</code> 設定為 <code>true</code>，如下例所示：</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"angularCompilerOptions"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "strictTemplates"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>欲知詳情，參閱<a href="reference/configs/angular-compiler-options">Angular 編譯器選項</a>指南。</p>

  <h2 id="features">
    <a href="#features" class="docs-anchor" tabindex="-1" aria-label="Link to Features">屬性</a>
  </h2>
  <p>你的編輯器會自動檢測到你正在開啟 Angular 檔案。
然後，它會使用 Angular 語言服務讀取你的 <code>tsconfig.json</code> 檔案，找到你的應用中的所有樣板，然後為你開啟的任何樣板提供語言服務。</p>
<p>語言服務包括：</p>

  <ul class="docs-list">
    <li>程式碼完成清單</li>
<li>AoT 診斷訊息</li>
<li>快速訊息</li>
<li>轉到定義</li>

  </ul>
  
  <h3 id="autocompletion">
    <a href="#autocompletion" class="docs-anchor" tabindex="-1" aria-label="Link to Autocompletion">自動完成</a>
  </h3>
  <p>自動完成可以透過在你鍵入時為你提供上下文可能性和提示來加快你的開發時間。
此範例展示了內嵌中的自動完成。
當你鍵入時，可以按 Tab 鍵完成。</p>
<img alt="autocompletion" src="assets/images/guide/language-service/language-completion.gif">

<p>元素中也有程式碼完成。
你作為元件選擇器擁有的任何元素都將顯示在程式碼完成清單中。</p>

  <h3 id="error-checking">
    <a href="#error-checking" class="docs-anchor" tabindex="-1" aria-label="Link to Error checking">錯誤檢查</a>
  </h3>
  <p>Angular 語言服務可以預先警告你程式碼中的錯誤。
在本範例中，Angular 不知道 <code>orders</code> 是什麼或來自哪裡。</p>
<img alt="error checking" src="assets/images/guide/language-service/language-error.gif">


  <h3 id="quick-info-and-navigation">
    <a href="#quick-info-and-navigation" class="docs-anchor" tabindex="-1" aria-label="Link to Quick info and navigation">快速訊息和導向</a>
  </h3>
  <p>快速訊息功能使你可以懸停以檢視元件、指令和模組的來源。
然後，你可以單擊『轉到定義』或按 F12 直接轉到定義。</p>
<img alt="navigation" src="assets/images/guide/language-service/language-navigation.gif">


  <h2 id="angular-language-service-in-your-editor">
    <a href="#angular-language-service-in-your-editor" class="docs-anchor" tabindex="-1" aria-label="Link to Angular Language Service in your editor">編輯器中的 Angular 語言服務</a>
  </h2>
  <p>Angular 語言服務目前以擴充套件形式提供，用於 <a href="https://code.visualstudio.com" target="_blank">Visual Studio Code</a>、<a href="https://www.jetbrains.com/webstorm" target="_blank">WebStorm</a>、<a href="https://www.sublimetext.com" target="_blank">Sublime Text</a> 和 <a href="https://www.eclipse.org/eclipseide" target="_blank">Eclipse IDE</a>。</p>

  <h3 id="visual-studio-code">
    <a href="#visual-studio-code" class="docs-anchor" tabindex="-1" aria-label="Link to Visual Studio Code">Visual Studio Code</a>
  </h3>
  <p>在 <a href="https://code.visualstudio.com" target="_blank">Visual Studio Code</a> 中，從 <a href="https://marketplace.visualstudio.com/items?itemName=Angular.ng-template" target="_blank">Extensions: Marketplace</a> 安裝擴充套件。
使用左側選單窗格上的『擴充套件』圖示從編輯器開啟 Marketplace，或使用 VS 快速開啟（Mac 上為 ⌘+P，Windows 上為 CTRL+P）並鍵入『? ext』。
在 Marketplace 中，搜尋 Angular Language Service 擴充套件，然後單擊『<strong>安裝</strong>』按鈕。</p>
<p>Visual Studio Code 與 Angular 語言服務的整合由 Angular 團隊維護和分發。</p>

  <h3 id="visual-studio">
    <a href="#visual-studio" class="docs-anchor" tabindex="-1" aria-label="Link to Visual Studio">Visual Studio</a>
  </h3>
  <p>在 <a href="https://visualstudio.microsoft.com" target="_blank">Visual Studio</a> 中，從 <a href="https://marketplace.visualstudio.com/items?itemName=TypeScriptTeam.AngularLanguageService" target="_blank">Extensions: Marketplace</a> 安裝擴充套件。
透過在頂部選單窗格上選擇『擴充套件』，然後選擇『管理擴充套件』從編輯器開啟 Marketplace。
在 Marketplace 中，搜尋 Angular Language Service 擴充套件，然後單擊『<strong>安裝</strong>』按鈕。</p>
<p>Visual Studio 與 Angular 語言服務的整合由 Microsoft 維護和分發，並得到 Angular 團隊的幫助。
請<a href="https://github.com/microsoft/vs-ng-language-service" target="_blank">在此處</a>檢視專案。</p>

  <h3 id="webstorm">
    <a href="#webstorm" class="docs-anchor" tabindex="-1" aria-label="Link to WebStorm">WebStorm</a>
  </h3>
  <p>在 <a href="https://www.jetbrains.com/webstorm" target="_blank">WebStorm</a> 中，啟用外掛 <a href="https://plugins.jetbrains.com/plugin/6971-angular-and-angularjs" target="_blank">Angular and AngularJS</a>。</p>
<p>自 WebStorm 2019.1 起，不再需要 <code>@angular/language-service</code>，應從你的 <code>package.json</code> 中刪除。</p>

  <h3 id="sublime-text">
    <a href="#sublime-text" class="docs-anchor" tabindex="-1" aria-label="Link to Sublime Text">Sublime Text</a>
  </h3>
  <p>在 <a href="https://www.sublimetext.com" target="_blank">Sublime Text</a> 中，語言服務僅在作為外掛安裝時才支援行內樣板。
你需要一個自定義的 Sublime 外掛（或對當前外掛的修改）才能在 HTML 檔案中實現程式碼完成。</p>
<p>要將語言服務用於行內樣板，你必須首先新增一個擴充套件以允許 TypeScript，然後安裝 Angular Language Service 外掛。
從 TypeScript 2.3 開始，TypeScript 具有語言服務可以使用的外掛模型。</p>

    <ol class="docs-ordered-list">
      <li><p>在本地 <code>node_modules</code> 目錄中安裝最新版本的 TypeScript：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --save-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> typescript</span></span></code></pre>
    </pre>
  </div></li>
<li><p>在同一位置安裝 Angular Language Service 套件：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --save-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @angular/language-service</span></span></code></pre>
    </pre>
  </div></li>
<li><p>安裝軟體套件後，將以下內容新增到專案 <code>tsconfig.json</code> 的 <code>"compilerOptions"</code> 部分。</p>
<div class="docs-code" header="tsconfig.json">
    <div class="docs-code-header"><h3>tsconfig.json</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"plugins"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">     {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"name"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"@angular/language-service"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ]</span></span></code></pre>
    </pre>
  </div></li>
<li><p>在編輯器的使用者首選項（<code>Cmd+,</code> 或 <code>Ctrl+,</code>）中，新增以下內容：</p>
<div class="docs-code" header="Sublime Text user preferences">
    <div class="docs-code-header"><h3>Sublime Text 使用者偏好設定</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"typescript-tsdk"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"&lt;path to your folder&gt;/node_modules/typescript/lib"</span></span></code></pre>
    </pre>
  </div></li>

    </ol>
    <p>這使 Angular 語言服務可以在 <code>.ts</code> 檔案中提供診斷和程式碼完成。</p>

  <h3 id="eclipse-ide">
    <a href="#eclipse-ide" class="docs-anchor" tabindex="-1" aria-label="Link to Eclipse IDE">Eclipse IDE</a>
  </h3>
  <p>可以直接安裝包含 Angular Language Server 的『Eclipse IDE for Web and JavaScript developers』軟體套件，或者從其他 Eclipse IDE 軟體套件中使用『Help &gt; Eclipse Marketplace』查詢並安裝 <a href="https://marketplace.eclipse.org/content/wild-web-developer-html-css-javascript-typescript-nodejs-angular-json-yaml-kubernetes-xml" target="_blank">Eclipse Wild Web Developer</a>。</p>

  <h3 id="neovim">
    <a href="#neovim" class="docs-anchor" tabindex="-1" aria-label="Link to Neovim">Neovim</a>
  </h3>
  <p>Angular 語言服務可以透過使用 <a href="https://github.com/neovim/nvim-lspconfig" target="_blank">nvim-lspconfig</a> 外掛與 Neovim 一起使用。</p>

    <ol class="docs-ordered-list">
      <li><p><a href="https://github.com/neovim/nvim-lspconfig?tab=readme-ov-file#install" target="_blank">安裝 nvim-lspconfig</a></p>
</li>
<li><p><a href="https://github.com/neovim/nvim-lspconfig/blob/master/doc/configs.md#angularls" target="_blank">設定 angularls 以用於 nvim-lspconfig</a></p>
</li>

    </ol>
    
  <h2 id="how-the-language-service-works">
    <a href="#how-the-language-service-works" class="docs-anchor" tabindex="-1" aria-label="Link to How the Language Service works">語言服務工作原理</a>
  </h2>
  <p>當你在編輯器中使用語言服務時，編輯器會啟動一個單獨的語言服務程序，並透過 <a href="https://en.wikipedia.org/wiki/Remote_procedure_call" target="_blank">RPC</a>，使用 <a href="https://microsoft.github.io/language-server-protocol" target="_blank">Language Server Protocol</a> 與之通訊。
當你在編輯器中輸入時，編輯器會將訊息傳送到語言服務程序，以跟蹤你的專案狀態。</p>
<p>當你在樣板中觸發補全清單時，編輯器首先將樣板解析為 HTML <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank">抽象語法樹 (AST)</a>。
Angular 編譯器會解釋該樹以確定上下文：樣板所屬的模組、當前作用域、元件選擇器以及游標在樣板 AST 中的位置。
然後，它可以確定可能位於該位置的符號。</p>
<p>如果你在內嵌中，情況會稍微複雜一些。
如果你在 <code>div</code> 中有一個 <code>{{data.---}}</code> 的內嵌，並且需要在 <code>data.---</code> 之後獲得補全清單，那麼編譯器就無法使用 HTML AST 來找到答案。
HTML AST 只能告訴編譯器，這裡有一些文字，其字元為 "<code>{{data.---}}</code>"。
這時，樣板解析器會生成一個表示式 AST，它位於樣板 AST 中。
然後，Angular 語言服務會檢視上下文中的 <code>data.---</code>，詢問 TypeScript 語言服務 <code>data</code> 的成員是什麼，並回傳可能的清單。</p>

  <h2 id="more-information">
    <a href="#more-information" class="docs-anchor" tabindex="-1" aria-label="Link to More information">更多訊息</a>
  </h2>
  
  <ul class="docs-list">
    <li>有關實現的更多深入訊息，請參閱 <a href="https://github.com/angular/angular/blob/main/packages/language-service/src" target="_blank">Angular 語言服務原始碼</a></li>
<li>有關設計考慮和意圖的更多訊息，請參閱 <a href="https://github.com/angular/vscode-ng-language-service/wiki/Design" target="_blank">此處的設計文件</a></li>

  </ul>
  