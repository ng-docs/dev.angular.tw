<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">編寫原理圖</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/tools/cli/schematics-authoring.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p>你可以建立自己的原理圖來操作 Angular 專案。
函式庫開發人員通常將原理圖與其函式庫打包在一起，以便將它們與 Angular CLI 整合。
你還可以建立獨立的原理圖來操縱 Angular 應用中的檔案和構造，以便為你的開發環境自定義它們，並使它們符合你的標準和約束。
原理圖可以鏈式處理，執行其他原理圖以執行複雜的操作。</p>
<p>操縱應用中的程式碼可能非常強大，但也相應地非常危險。
例如，建立一個已經存在的檔案將是一個錯誤，如果立即應用它，它將丟棄到目前為止應用的所有其他更改。
Angular 原理圖工具透過建立虛擬檔案系統來防止副作用和錯誤。
原理圖描述了一個可以應用於虛擬檔案系統的轉換通道。
當原理圖執行時，轉換會記錄在記憶體中，並且只有在確認它們有效後才應用於真實檔案系統。</p>

  <h2 id="schematics-concepts">
    <a href="#schematics-concepts" class="docs-anchor" tabindex="-1" aria-label="Link to Schematics concepts">原理圖概念</a>
  </h2>
  <p>原理圖的公共 API 定義了一些類別，這些類別代表了基本概念。</p>

  <ul class="docs-list">
    <li><p>虛擬檔案系統由 <code>Tree</code> 表示。<code>Tree</code> 資料結構包含一個<em>基</em>（一組已經存在的檔案）和一個<em>暫存區</em>（要應用於基的更改清單）。在進行修改時，你實際上並沒有更改基，而是將這些修改新增到暫存區。</p>
</li>
<li><p><code>Rule</code> 物件定義了一個函式，該函式接受一個 <code>Tree</code>，應用轉換，並回傳一個新的 <code>Tree</code>。原理圖的主檔案 <code>index.ts</code> 定義了一組規則，這些規則實現了原理圖的邏輯。</p>
</li>
<li><p>轉換由 <code>Action</code> 表示。共有四種操作型別：<code>Create</code>、<code>Rename</code>、<code>Overwrite</code> 和 <code>Delete</code>。</p>
</li>
<li><p>每個原理圖都在上下文中執行，該上下文由 <code>SchematicContext</code> 物件表示。</p>
</li>

  </ul>
  <p>傳遞到規則中的上下文物件提供了對實用函式和元資料的訪問，原理圖可能需要使用這些實用函式和元資料，包括用於幫助除錯的日誌記錄 API。上下文還定義了一個<em>合併策略</em>，該策略確定如何將更改從暫存樹合併到基樹中。可以接受或忽略更改，或者丟擲異常。</p>

  <h3 id="defining-rules-and-actions">
    <a href="#defining-rules-and-actions" class="docs-anchor" tabindex="-1" aria-label="Link to Defining rules and actions">定義規則和操作</a>
  </h3>
  <p>當你使用 <a href="#schematics-cli">Schematics CLI</a> 建立新的空白原理圖時，生成的入口函式是一個<em>規則工廠</em>。<code>RuleFactory</code> 物件定義了一個建立 <code>Rule</code> 的高階函式。</p>
<div class="docs-code" header="index.ts">
    <div class="docs-code-header"><h3>index.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { Rule, SchematicContext, Tree } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular-devkit/schematics'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// You don't have to export the function as default.</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// You can also have more than one rule factory per file.</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> helloWorld</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Rule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">tree</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Tree</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SchematicContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">   return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> tree;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> };</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>你的規則可以透過呼叫外部工具和實現邏輯來更改你的專案。例如，你需要一個規則來定義如何將原理圖中的範本合併到宿主專案中。</p>
<p>規則可以使用 <code>@schematics/angular</code> 套件提供的實用程式。查詢用於處理模組、依賴項、TypeScript、AST、JSON、Angular CLI 工作區和專案等的輔助函式。</p>
<div class="docs-code" header="index.ts">
    <div class="docs-code-header"><h3>index.ts</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  JsonAstObject,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  JsonObject,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  JsonValue,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  Path,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  normalize,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  parseJsonAst,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  strings,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular-devkit/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre>
    </pre>
  </div>
  <h3 id="defining-input-options-with-a-schema-and-interfaces">
    <a href="#defining-input-options-with-a-schema-and-interfaces" class="docs-anchor" tabindex="-1" aria-label="Link to Defining input options with a schema and interfaces">使用模式和介面定義輸入選項</a>
  </h3>
  <p>規則可以從呼叫者那裡收集選項值，並將它們注入到範本中。你的規則可用的選項及其允許的值和預設值在原理圖的 JSON 模式檔案 <code>&lt;schematic&gt;/schema.json</code> 中定義。使用 TypeScript 介面為模式定義變數或列舉資料型別。</p>
<p>模式定義了原理圖中使用的變數的型別和預設值。例如，假設的『Hello World』原理圖可能具有以下模式。</p>
<div class="docs-code" header="src/hello-world/schema.json">
    <div class="docs-code-header"><h3>src/hello-world/schema.json</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "properties"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "name"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"string"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "minLength"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "default"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"world"</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "useColor"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"boolean"</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>有關 Angular CLI 指令原理圖的模式檔案範例，請參閱 <a href="https://github.com/angular/angular-cli/blob/main/packages/schematics/angular/application/schema.json" target="_blank"><code>@schematics/angular</code></a>。</p>

  <h3 id="schematic-prompts">
    <a href="#schematic-prompts" class="docs-anchor" tabindex="-1" aria-label="Link to Schematic prompts">原理圖提示</a>
  </h3>
  <p>原理圖<em>提示</em>將使用者互動引入原理圖執行。設定原理圖選項以向用戶顯示可自定義的問題。提示在原理圖執行之前顯示，然後使用回應作為選項的值。這使用戶可以指導原理圖的操作，而無需深入瞭解所有可用選項。</p>
<p>例如，『Hello World』原理圖可能會詢問使用者的姓名，並顯示該姓名以代替預設名稱『world』。要定義這樣的提示，請將 <code>x-prompt</code> 屬性新增到 <code>name</code> 變數的模式中。</p>
<p>同樣，你可以新增一個提示，讓使用者決定原理圖在執行其 hello 操作時是否使用顏色。包含這兩個提示的模式如下所示。</p>
<div class="docs-code" header="src/hello-world/schema.json">
    <div class="docs-code-header"><h3>src/hello-world/schema.json</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "properties"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "name"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"string"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "minLength"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "default"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"world"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "x-prompt"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"What is your name?"</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        },</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "useColor"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"boolean"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "x-prompt"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Would you like the response in color?"</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div>
  <h4 id="prompt-short-form-syntax">
    <a href="#prompt-short-form-syntax" class="docs-anchor" tabindex="-1" aria-label="Link to Prompt short-form syntax">提示簡寫語法</a>
  </h4>
  <p>這些範例使用了提示語法的簡寫形式，僅提供問題的文字。在大多數情況下，這就是所需要的全部內容。但是請注意，這兩個提示需要不同型別的輸入。當使用簡寫形式時，會根據屬性的模式自動選擇最合適的型別。在範例中，<code>name</code> 提示使用 <code>input</code> 型別，因為它是一個字串屬性。<code>useColor</code> 提示使用 <code>confirmation</code> 型別，因為它是一個布林屬性。在這種情況下，『yes』對應於 <code>true</code>，『no』對應於 <code>false</code>。</p>
<p>有三種受支援的輸入型別。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">輸入型別</th>
<th align="left">詳情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left">confirmation</td>
<td align="left">是或否問題；非常適合布林選項。</td>
</tr>
<tr>
<td align="left">input</td>
<td align="left">文字輸入；非常適合字串或數字選項。</td>
</tr>
<tr>
<td align="left">list</td>
<td align="left">一組預定義的允許值。</td>
</tr>

      </tbody>
    </table>
  </div>
  <p>在簡寫形式中，型別是從屬性的型別和約束推斷出來的。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">屬性模式</th>
<th align="left">提示型別</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left">『type』：『boolean』</td>
<td align="left">confirmation （『yes』=<code>true</code>，『no』=<code>false</code>）</td>
</tr>
<tr>
<td align="left">『type』：『string』</td>
<td align="left">input</td>
</tr>
<tr>
<td align="left">『type』：『number』</td>
<td align="left">input（僅接受有效數字）</td>
</tr>
<tr>
<td align="left">『type』：『integer』</td>
<td align="left">input（僅接受有效數字）</td>
</tr>
<tr>
<td align="left">『enum』：[…]</td>
<td align="left">list（列舉成員變為清單選擇）</td>
</tr>

      </tbody>
    </table>
  </div>
  <p>在以下範例中，該屬性採用列舉值，因此原理圖會自動選擇清單型別，並從可能的值建立一個選單。</p>
<div class="docs-code" header="schema.json">
    <div class="docs-code-header"><h3>schema.json</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"style"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "description"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"The file extension or preprocessor to use for style files."</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"string"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "default"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"css"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "enum"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "css"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "scss"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "sass"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "less"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "styl"</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "x-prompt"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Which stylesheet format would you like to use?"</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div><p>提示執行時會自動根據 JSON 模式中提供的約束驗證提供的回應。如果該值不可接受，則會提示使用者輸入新值。這確保了傳遞給原理圖的任何值都符合原理圖實現的預期，因此你無需在原理圖的程式碼中新增額外的檢查。</p>

  <h4 id="prompt-long-form-syntax">
    <a href="#prompt-long-form-syntax" class="docs-anchor" tabindex="-1" aria-label="Link to Prompt long-form syntax">提示長格式語法</a>
  </h4>
  <p><code>x-prompt</code> 欄位語法支援長格式，用於需要對提示進行額外自定義和控制的情況。在這種形式中，<code>x-prompt</code> 欄位值是一個 JSON 物件，其中包含自定義提示行為的子欄位。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">欄位</th>
<th align="left">資料值</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left">型別</td>
<td align="left"><code>confirmation</code>、<code>input</code> 或 <code>list</code>（在簡短形式中自動選擇）</td>
</tr>
<tr>
<td align="left">message</td>
<td align="left">字串（必要）</td>
</tr>
<tr>
<td align="left">items</td>
<td align="left">字串和/或標籤/值物件對（僅在 <code>list</code> 型別中有效）</td>
</tr>

      </tbody>
    </table>
  </div>
  <p>以下長格式的範例來自原理圖的 JSON 模式，CLI 使用該模式來<a href="https://github.com/angular/angular-cli/blob/ba8a6ea59983bb52a6f1e66d105c5a77517f062e/packages/schematics/angular/application/schema.json#L56" target="_blank">生成應用</a>。
它定義了提示，讓使用者可以選擇他們想要為正在建立的應用使用哪種樣式預處理器。
透過使用長格式，原理圖可以為選單選項提供更明確的格式。</p>
<div class="docs-code" header="package/schematics/angular/application/schema.json">
    <div class="docs-code-header"><h3>package/schematics/angular/application/schema.json</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"style"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "description"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"The file extension or preprocessor to use for style files."</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"string"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "default"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"css"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "enum"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "css"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "scss"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "sass"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">    "less"</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ],</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "x-prompt"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "message"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Which stylesheet format would you like to use?"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"list"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "items"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"value"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"css"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"label"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"CSS"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"value"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"scss"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"label"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"SCSS   [ https://sass-lang.com/documentation/syntax#scss                ]"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"value"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"sass"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"label"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Sass   [ https://sass-lang.com/documentation/syntax#the-indented-syntax ]"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"value"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"less"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"label"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"Less   [ https://lesscss.org/                                            ]"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">},</span></span></code></pre>
    </pre>
  </div>
  <h4 id="x-prompt-schema">
    <a href="#x-prompt-schema" class="docs-anchor" tabindex="-1" aria-label="Link to x-prompt schema">x-prompt 模式</a>
  </h4>
  <p>定義原理圖選項的 JSON 模式支援擴充套件，以允許對提示及其各自的行為進行宣告式定義。
原理圖的程式碼不需要額外的邏輯或更改即可支援提示。
以下 JSON 模式是對 <code>x-prompt</code> 欄位的長格式語法的完整描述。</p>
<div class="docs-code" header="x-prompt schema">
    <div class="docs-code-header"><h3>x-prompt 模式</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "oneOf"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"string"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"object"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "properties"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"string"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "message"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"string"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                "items"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                    "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"array"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                    "items"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                        "oneOf"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                            { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"string"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                            {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                                "type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"object"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                                "properties"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                                    "label"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">"type"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"string"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                                    "value"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: { }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                                },</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">                                "required"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"value"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                            }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                        ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                    }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">                }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            },</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "required"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"message"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div>
  <h2 id="schematics-cli">
    <a href="#schematics-cli" class="docs-anchor" tabindex="-1" aria-label="Link to Schematics CLI">原理圖 CLI</a>
  </h2>
  <p>原理圖自帶指令行工具。
使用 Node 6.9 或更高版本，全域安裝原理圖指令行工具：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @angular-devkit/schematics-cli</span></span></code></pre>
    </pre>
  </div><p>這將安裝 <code>schematics</code> 可執行檔案，你可以使用它在自己的專案資料夾中建立新的原理圖集合，將新的原理圖新增到現有集合，或擴充套件現有原理圖。</p>
<p>在以下各節中，你將使用 CLI 建立一個新的原理圖集合，以介紹檔案和檔案結構，以及一些基本概念。</p>
<p>然而，原理圖最常見的用途是將 Angular 函式庫與 Angular CLI 整合。
透過在 Angular 工作區中的函式庫專案中直接建立原理圖檔案來實現這一點，而無需使用原理圖 CLI。
請參閱<a href="tools/cli/schematics-for-libraries">函式庫的原理圖</a>。</p>

  <h3 id="creating-a-schematics-collection">
    <a href="#creating-a-schematics-collection" class="docs-anchor" tabindex="-1" aria-label="Link to Creating a schematics collection">建立原理圖集合</a>
  </h3>
  <p>以下指令在同名的新專案資料夾中建立一個名為 <code>hello-world</code> 的新原理圖。</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">schematics</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> blank</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --name=hello-world</span></span></code></pre>
    </pre>
  </div><p><code>blank</code> 原理圖由原理圖 CLI 提供。
該指令建立一個新的專案資料夾（集合的根資料夾）和集合中的初始命名原理圖。</p>
<p>轉到集合資料夾，安裝你的 npm 依賴項，並在你喜歡的編輯器中開啟你的新集合以檢視生成的檔案。
例如，如果你正在使用 VS Code：</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> hello-world</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> install</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> build</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">code</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> .</span></span></code></pre>
    </pre>
  </div><p>初始原理圖與專案資料夾同名，並在 <code>src/hello-world</code> 中生成。
將相關的原理圖新增到此集合，並修改生成的骨架程式碼以定義你的原理圖的功能。
每個原理圖名稱在集合中必須是唯一的。</p>

  <h3 id="running-a-schematic">
    <a href="#running-a-schematic" class="docs-anchor" tabindex="-1" aria-label="Link to Running a schematic">執行原理圖</a>
  </h3>
  <p>使用 <code>schematics</code> 指令來執行命名的原理圖。
以以下格式提供專案資料夾的路徑、原理圖名稱和任何強制性選項。</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">schematics</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">path-to-schematics-projec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">schematics-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">required-option</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">&gt;</span></span></code></pre>
    </pre>
  </div><p>路徑可以是絕對路徑，也可以是相對於執行指令的當前工作目錄的相對路徑。
例如，要執行你剛剛生成的原理圖（它沒有必需的選項），請使用以下指令。</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">schematics</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> .:hello-world</span></span></code></pre>
    </pre>
  </div>
  <h3 id="adding-a-schematic-to-a-collection">
    <a href="#adding-a-schematic-to-a-collection" class="docs-anchor" tabindex="-1" aria-label="Link to Adding a schematic to a collection">向集合新增原理圖</a>
  </h3>
  <p>要將原理圖新增到現有集合，請使用與啟動新的原理圖專案相同的指令，但在專案資料夾內執行該指令。</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> hello-world</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">schematics</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> blank</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --name=goodbye-world</span></span></code></pre>
    </pre>
  </div><p>該指令在你的集合中生成新的命名原理圖，其中包含一個主 <code>index.ts</code> 檔案及其關聯的測試規範。
它還將新原理圖的名稱、描述和工廠函式新增到 <code>collection.json</code> 檔案中集合的模式。</p>

  <h2 id="collection-contents">
    <a href="#collection-contents" class="docs-anchor" tabindex="-1" aria-label="Link to Collection contents">集合內容</a>
  </h2>
  <p>集合的根專案資料夾的頂層包含設定檔案、一個 <code>node_modules</code> 資料夾和一個 <code>src/</code> 資料夾。
<code>src/</code> 資料夾包含集合中命名原理圖的子資料夾，以及一個模式 <code>collection.json</code>，它描述了收集的原理圖。
每個原理圖都使用名稱、描述和工廠函式建立。</p>
<div class="docs-code">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "$schema"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">     "../node_modules/@angular-devkit/schematics/collection-schema.json"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "schematics"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "hello-world"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "description"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"A blank schematic."</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "factory"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"./hello-world/index#helloWorld"</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
    </pre>
  </div>
  <ul class="docs-list">
    <li><p><code>$schema</code> 屬性指定 CLI 用於驗證的模式。</p>
</li>
<li><p><code>schematics</code> 屬性列出了屬於此集合的命名原理圖。
每個原理圖都有一個純文字描述，並指向主檔案中的生成入口函式。</p>
</li>
<li><p><code>factory</code> 屬性指向生成的入口函式。
在此範例中，你透過呼叫 <code>helloWorld()</code> 工廠函式來呼叫 <code>hello-world</code> 原理圖。</p>
</li>
<li><p>可選的 <code>schema</code> 屬性指向一個 JSON 模式檔案，該檔案定義了可用於原理圖的指令行選項。</p>
</li>
<li><p>可選的 <code>aliases</code> 陣列指定一個或多個可用於呼叫原理圖的字串。
例如，Angular CLI 『generate』 指令的原理圖有一個別名 『g』，它允許你使用指令 <code>ng g</code>。</p>
</li>

  </ul>
  
  <h3 id="named-schematics">
    <a href="#named-schematics" class="docs-anchor" tabindex="-1" aria-label="Link to Named schematics">命名原理圖</a>
  </h3>
  <p>當你使用原理圖 CLI 建立一個空白原理圖專案時，新的空白原理圖是集合的第一個成員，並且與集合同名。
當你向此集合新增新的命名原理圖時，它會自動新增到 <code>collection.json</code> 模式中。</p>
<p>除了名稱和描述之外，每個原理圖都有一個 <code>factory</code> 屬性，用於標識原理圖的入口點。
在此範例中，你透過呼叫主檔案 <code>hello-world/index.ts</code> 中的 <code>helloWorld()</code> 函式來呼叫原理圖的已定義功能。</p>
<img alt="overview" src="assets/images/guide/schematics/collection-files.gif">

<p>集合中的每個命名原理圖都具有以下主要部分。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">部分</th>
<th align="left">詳情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><code>index.ts</code></td>
<td align="left">定義命名原理圖的轉換邏輯的程式碼。</td>
</tr>
<tr>
<td align="left"><code>schema.json</code></td>
<td align="left">原理圖變數定義。</td>
</tr>
<tr>
<td align="left"><code>schema.d.ts</code></td>
<td align="left">原理圖變數。</td>
</tr>
<tr>
<td align="left"><code>files/</code></td>
<td align="left">要複製的可選元件/範本檔案。</td>
</tr>

      </tbody>
    </table>
  </div>
  <p>原理圖有可能在 <code>index.ts</code> 檔案中提供其所有邏輯，而無需額外的範本。
但是，你可以透過在 <code>files</code> 資料夾中提供元件和範本（如獨立 Angular 專案中的元件和範本）來為 Angular 建立動態原理圖。
索引檔案中的邏輯透過定義注入資料和修改變數的規則來設定這些範本。</p>
