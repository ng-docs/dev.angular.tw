<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dv5xyx954f4euqqbhzcw4cntn">部署</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/tools/cli/deployment.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="mg9nvr8natec96tcnh0jnvl3">当你准备将你的 Angular 应用部署到远程服务器时，有多种选择。</p>

  <h2 id="automatic-deployment-with-the-cli">
    <a href="#automatic-deployment-with-the-cli" class="docs-anchor" tabindex="-1" aria-label="Link to Automatic deployment with the CLI" data-ng_translator_product="100" data-ng_translator_ref_id="djqzyeys0ugqez6d80swl559i">使用 CLI 进行自动部署</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="6nmcqa3gnx69w2dnv08mbuq1u">Angular CLI 命令 
<code>ng deploy</code> 执行与你的项目相关联的 
<code>deploy</code> 
<a href="tools/cli/cli-builder">CLI 构建器</a>。 许多第三方构建器实现了对不同平台的部署功能。 你可以使用 
<code>ng add</code> 将它们添加到你的项目中。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="9b8pciygwz6oxwrx9wj9tyvbr">当你添加一个具有部署功能的软件包时，它会自动更新你的工作区配置文件（
<code>angular.json</code> 文件）中的 
<code>deploy</code> 部分。 然后你可以使用 
<code>ng deploy</code> 命令来部署该项目。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="7zoz0clmfvj8ygy6xzvolpo8r">例如，以下命令会将项目自动部署到 
<a href="https://firebase.google.com/" target="_blank">Firebase</a>。</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">ng add @angular/fire</div><div class="hljs-ln-line">ng deploy</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="7912luhepsbykvn1krpdubbnl">该命令是交互式的。 在这种情况下，你必须拥有或创建一个 Firebase 账户并使用它进行身份验证。 该命令提示你选择一个 Firebase 项目进行部署，然后构建你的应用并将生产资产上传到 Firebase。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="4ye0aigpf2dtxtm50vr1vbuw5">下表列出了实现了不同平台部署功能的工具。 每个包的 
<code>deploy</code> 命令可能需要不同的命令行选项。 你可以通过点击下表中的包名称链接阅读更多内容：</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left" data-ng_translator_product="100" data-ng_translator_ref_id="2z393y96ullrkhsmsr4bv7wo8">部署到</th>
<th align="left" data-ng_translator_product="100" data-ng_translator_ref_id="eglx6drs93q0ojtz9w8i1ht0l">设置命令</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><a href="https://firebase.google.com/docs/hosting" target="_blank" data-ng_translator_product="100" data-ng_translator_ref_id="9q47qc57h6huthlwr5asxerrr">Firebase 托管</a></td>
<td align="left"><a href="https://npmjs.org/package/@angular/fire" target="_blank"><code>ng add @angular/fire</code></a></td>
</tr>
<tr>
<td align="left"><a href="https://vercel.com/solutions/angular" target="_blank">Vercel</a></td>
<td align="left"><a href="https://github.com/vercel/vercel/tree/main/examples/angular" target="_blank"><code>vercel init angular</code></a></td>
</tr>
<tr>
<td align="left"><a href="https://www.netlify.com" target="_blank">Netlify</a></td>
<td align="left"><a href="https://npmjs.org/package/@netlify-builder/deploy" target="_blank"><code>ng add @netlify-builder/deploy</code></a></td>
</tr>
<tr>
<td align="left"><a href="https://pages.github.com" target="_blank">GitHub pages</a></td>
<td align="left"><a href="https://npmjs.org/package/angular-cli-ghpages" target="_blank"><code>ng add angular-cli-ghpages</code></a></td>
</tr>
<tr>
<td align="left"><a href="https://aws.amazon.com/s3/?nc2=h_ql_prod_st_s3" target="_blank">Amazon Cloud S3</a></td>
<td align="left"><a href="https://www.npmjs.com/package/@jefiozie/ngx-aws-deploy" target="_blank"><code>ng add @jefiozie/ngx-aws-deploy</code></a></td>
</tr>

      </tbody>
    </table>
  </div>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="9ri9u7i3u4i99sakx1yll6nbd">如果你要部署到自管理的服务器，或者没有适用于你喜欢的云平台的构建器，你可以 
<a href="tools/cli/cli-builder">创建一个构建器</a> 以便使用 
<code>ng deploy</code> 命令，或者阅读本指南以了解如何手动部署你的应用。</p>

  <h2 id="manual-deployment-to-a-remote-server">
    <a href="#manual-deployment-to-a-remote-server" class="docs-anchor" tabindex="-1" aria-label="Link to Manual deployment to a remote server" data-ng_translator_product="100" data-ng_translator_ref_id="a90vmy7wb5qgv821weeofalf">手动部署到远程服务器</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="ezi9sp2mnre8eu1d11avt2yza">要手动部署你的应用，创建一个生产构建并将输出目录复制到 Web 服务器或内容分发网络（CDN）。 默认情况下，
<code>ng build</code> 使用 
<code>production</code> 配置。 如果你自定义了构建配置，可能需要确认 
<a href="tools/cli/deployment#production-optimizations">生产优化</a> 在部署前已应用。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="aljwnq3qv08me08q94dlkk8sl"><code>ng build</code> 默认将构建的产物输出到 
<code>dist/my-app/</code>，不过可以通过 
<code>@angular-devkit/build-angular:browser</code> 构建器中的 
<code>outputPath</code> 选项配置此路径。 将此目录复制到服务器并配置其服务该目录。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="ct0de1f62p22eok037livbbxp">虽然这是一个最简化的部署解决方案，但服务器需要满足一些要求才能正确服务你的 Angular 应用。</p>

  <h2 id="server-configuration">
    <a href="#server-configuration" class="docs-anchor" tabindex="-1" aria-label="Link to Server configuration" data-ng_translator_product="100" data-ng_translator_ref_id="cus25l7be89usrqmjupkn8lo3">服务端配置</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="1qkejp3hzpnv2b66y3p50a6o1">本节介绍你在服务器上运行 Angular 应用时可能需要进行的配置更改。</p>

  <h3 id="routed-apps-must-fall-back-to-indexhtml">
    <a href="#routed-apps-must-fall-back-to-indexhtml" class="docs-anchor" tabindex="-1" aria-label="Link to Routed apps must fall back to <code>index.html</code>" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="65wi3y6wgao593e6pixh3c7o8">带路由的应用必须以 <code>index.html</code> 作为后备页面</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="f0x97rllwop6kkzmli2u8uryp">客户端渲染的 Angular 应用是使用静态 HTML 服务器服务的完美候选者，因为所有内容都是静态的并在构建时生成。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="h8zlavfaqiruoi2x2np5pn8i">如果该应用使用 Angular 路由器，你就必须配置服务器，让它对不存在的文件返回应用的宿主页（<code>index.html</code>）。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="ebxhrfwaybd7d223hmve2bug0">路由应用应该支持「深链接」。 
<em>深链接</em> 是一个指定应用内组件路径的 URL。例如，
<code>http://my-app.test/users/42</code> 是一个指向显示 ID 为 
<code>42</code> 的用户详情页面的 
<em>深链接</em>。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="3m8ushh1d76aftggqmumhgour">当用户最初加载索引页面然后从运行的客户端导航到该 URL 时没有问题。 Angular 路由器在 
<em>客户端</em> 执行导航，不会请求新的 HTML 页面。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="9mnwn93pee6vrs53z2qnaw82x">但点击邮件中的深链接，在浏览器地址栏中输入它，或者即便在已打开深链接页面时刷新浏览器，都会由浏览器本身处理，
<em>在</em> 运行应用之外。 浏览器直接向服务器请求 
<code>/users/42</code>，绕过了 Angular 的路由器。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="djv1koigqk1x2odty4v9ryrg3">静态服务器通常在收到 
<code>http://my-app.test/</code> 请求时返回 
<code>index.html</code>。 但大多数服务器默认会拒绝 
<code>http://my-app.test/users/42</code> 并返回 
<code>404 - Not Found</code> 错误，
<em>除非</em> 它被配置为返回 
<code>index.html</code>。 为服务器配置回退路由或 404 页面到 
<code>index.html</code>，这样 Angular 可以为深链接提供服务并显示正确的路由。 一些服务器称这种回退行为为「单页应用（SPA）模式」。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="cto3qxe26y9u8x0je2o0xm5ts">一旦浏览器加载了应用，Angular 路由器会读取 URL 以确定所在页面并正确显示 
<code>/users/42</code>。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="alhtx3vb9unwi8bj5h5yrh1qn">对于「真正的」404 页面，例如 
<code>http://my-app.test/does-not-exist</code>，服务器不需要任何额外配置。 
<a href="guide/routing/common-router-tasks#displaying-a-404-page">Angular 路由器中实现的 404 页面</a> 将会正确显示。</p>

  <h3 id="requesting-data-from-a-different-server-cors">
    <a href="#requesting-data-from-a-different-server-cors" class="docs-anchor" tabindex="-1" aria-label="Link to Requesting data from a different server (CORS)" data-ng_translator_product="100" data-ng_translator_ref_id="c0ssvpjnwzsu3xdi3rljiupwi">从不同的服务器请求数据（CORS）</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="3h5mmfeeq6dppeew1x3o6t3md">当 Web 开发者向一个非应用宿主服务器的服务器发起网络请求时，可能会遇到 
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" title="跨域资源共享" target="_blank"><em>跨域资源共享</em></a> 错误。浏览器会禁止此类请求，除非服务器明确允许这些请求。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="974fj0yvojewitkt79e3k7a0j">对于这些错误，Angular 或客户端应用没有任何办法。
<em>服务器</em>必须配置为接受应用的请求。关于如何为特定服务器启用 CORS，请参阅 
<a href="https://enable-cors.org/server.html" title="启用 cors 服务器" target="_blank">enable-cors.org</a>。</p>

  <h2 id="production-optimizations">
    <a href="#production-optimizations" class="docs-anchor" tabindex="-1" aria-label="Link to Production optimizations" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9wwt99gu4am1wtjrx7zj40993">为生产环境优化</a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="easdwcam9pb1ahwklwy2yyn1o"><code>ng build</code> 使用 
<code>production</code> 配置（除非另行配置）。此配置启用了以下构建优化特性。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left" data-ng_translator_product="100" data-ng_translator_ref_id="920kaz2p0y1fs418qurz1o45h">特性</th>
<th align="left" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3prlgfrx5eo2xqncnnob4crxu">详情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><a href="tools/cli/aot-compiler" data-ng_translator_product="100" data-ng_translator_ref_id="e14if6pw8mdi9w24r9wt4z3ni">预先编译 (AOT)</a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="8yb8zz8ddt7tdwji6yyvyaph">预编译 Angular 组件模板。</td>
</tr>
<tr>
<td align="left"><a href="tools/cli/deployment#development-only-features" data-ng_translator_product="100" data-ng_translator_ref_id="2w4qyyd6wzn7i56388i5xt047">生产模式</a></td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="e9f0v26zrjobww0yt7oyc84vf">优化应用以获得最佳运行时性能</td>
</tr>
<tr>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="8qvpxlyam835o3zcyin4x0ddo">打捆</td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="7k67bs17gkmf9mtnldfvok7a6">将多个应用和库文件连接为最少数量的部署文件。</td>
</tr>
<tr>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="ek5u9nqf8h8b8uzwnu5ybna0y">最小化</td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="a55ozwq9oql8f3dbm49k0nzzo">移除多余的空白、注释和可选标记。</td>
</tr>
<tr>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="bwb03r7q54uuccpq2jknx6q0p">混淆</td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="5c7zcnbyw75hh51gynh2heaw3">将函数、类和变量重命名为更短的任意标识符。</td>
</tr>
<tr>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="2wp9k2dwc9z66yx7vn2f3185d">消除无用代码</td>
<td align="left" data-ng_translator_product="100" data-ng_translator_ref_id="3gww0ojtljtd62cz48h89947k">移除未引用的模块和未使用的代码。</td>
</tr>

      </tbody>
    </table>
  </div>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="7o8jqh5oox7ekv2jtb6w370gy">有关更多 CLI 构建选项及其效果，请参见 
<a href="cli/build"><code>ng build</code></a>。</p>

  <h3 id="development-only-features">
    <a href="#development-only-features" class="docs-anchor" tabindex="-1" aria-label="Link to Development-only features" data-ng_translator_product="100" data-ng_translator_ref_id="d3b1hnzwscogilc3zajlofeay">仅开发特性</a>
  </h3>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="df9xiqk29estzinw3xa03ngbj">当你使用 
<code>ng serve</code> 在本地运行应用时，Angular 会在运行时使用开发配置，启用以下功能：</p>

  <ul class="docs-list">
    <li data-ng_translator_product="100" data-ng_translator_ref_id="1742qkpgez5cxry4fxs84kl1h">额外的安全检查（如 
<a href="errors/NG0100"><code>expression-changed-after-checked</code></a> 检测）。</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="7w1usc5mfiajgsproqi1u265z">更详细的错误信息。</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="cuhyix21lewnrjtz7yw19wxod">额外的调试工具，比如全局 
<code>ng</code> 变量和 
<a href="tools/devtools">Angular DevTools</a> 支持。</li>

  </ul>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="c0gsu00u32aexg2toiaj2yzl0">这些特性在开发过程中非常有用，但它们需要在应用中增加额外的代码，这在生产环境中是不合适的。为了确保这些特性不会对最终用户的捆绑包大小产生负面影响，Angular CLI 在为生产环境构建时会从捆绑包中移除仅用于开发的代码。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="c6nuu8wz8psdb24oway5fitey">使用 
<code>ng build</code> 构建你的应用时，默认使用 
<code>production</code> 配置，该配置会从输出中移除这些特性，以获得最佳捆绑包大小。</p>

  <h2 id="--deploy-url">
    <a href="#--deploy-url" class="docs-anchor" tabindex="-1" aria-label="Link to <code>--deploy-url</code>"><code>--deploy-url</code></a>
  </h2>
  <p data-ng_translator_product="100" data-ng_translator_ref_id="dvz2jmhj1houa8kzdjs6225um"><code>--deploy-url</code> 是一个命令行选项，用于指定在 
<em>编译</em> 时解析资产（如图像、脚本和样式表）相对 URL 的基本路径。</p>
<div class="docs-code shell">
    
    <pre class="docs-mini-scroll-track">      <code><div class="hljs-ln-line">ng build --deploy-url /my/assets</div></code>
    </pre>
  </div><p data-ng_translator_product="100" data-ng_translator_ref_id="94jnr5ynkg45atga3mcp0m0xq"><code>--deploy-url</code> 的效果和目的与 
<a href="guide/routing/common-router-tasks"><code>&lt;base href&gt;</code></a> 有重叠。两者都可以用于初始脚本、样式表、延迟脚本和 css 资源。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="8vh3jsk0v11ydnlne6t8cdp88">与 
<code>&lt;base href&gt;</code> 可在运行时在单个位置定义不同，
<code>--deploy-url</code> 需要在构建时硬编码到应用中。尽量使用 
<code>&lt;base href&gt;</code>。</p>
