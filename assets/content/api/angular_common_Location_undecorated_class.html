<div class="api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/common</span><div class="docs-reference-title"><div><h1 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="c7t6pix3w1vcsyn4xcsogvpsl">位置</h1><div class="docs-api-item-label" data-mode="full" data-type="undecorated_class">Class</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/common/src/location/location.ts#L51-L301" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">code</i></a></div><p class="docs-reference-description"></p><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5gqkmtby184tdetdyjbp07b33">一个服务，应用可以用它来与浏览器的 URL 互动。</p><p></p></header><div data-tab="API" data-tab-url="api"><div class="docs-reference-api-tab"><div class="docs-code"><pre class="docs-mini-scroll-track"><code><div class="hljs-ln-line "><span class="hljs-keyword">class</span> <span class="hljs-title class_">Location</span> {</div><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="path">  <span class="hljs-title function_">path</span>(includeHash?: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">string</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="getState">  <span class="hljs-title function_">getState</span>(): <span class="hljs-built_in">unknown</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="isCurrentPathEqualTo">  <span class="hljs-title function_">isCurrentPathEqualTo</span>(<span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>, query?: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="normalize">  <span class="hljs-title function_">normalize</span>(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="prepareExternalUrl">  <span class="hljs-title function_">prepareExternalUrl</span>(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="go">  <span class="hljs-title function_">go</span>(<span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>, query?: <span class="hljs-built_in">string</span>, state?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="replaceState">  <span class="hljs-title function_">replaceState</span>(<span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>, query?: <span class="hljs-built_in">string</span>, state?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="forward">  <span class="hljs-title function_">forward</span>(): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="back">  <span class="hljs-title function_">back</span>(): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="historyGo">  <span class="hljs-title function_">historyGo</span>(relativePosition?: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="onUrlChange">  <span class="hljs-title function_">onUrlChange</span>(<span class="hljs-attr">fn</span>: <span class="hljs-function">(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, state: <span class="hljs-built_in">unknown</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">VoidFunction</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="subscribe">  <span class="hljs-title function_">subscribe</span>(<span class="hljs-attr">onNext</span>: <span class="hljs-function">(<span class="hljs-params">value: PopStateEvent</span>) =&gt;</span> <span class="hljs-built_in">void</span>, onThrow?: <span class="hljs-function">(<span class="hljs-params">exception: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>, onReturn?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>): <span class="hljs-title class_">SubscriptionLike</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="normalizeQueryParams">  <span class="hljs-keyword">static</span> <span class="hljs-attr">normalizeQueryParams</span>: <span class="hljs-function">(<span class="hljs-params">params: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">string</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="joinWithSlash">  <span class="hljs-keyword">static</span> <span class="hljs-attr">joinWithSlash</span>: <span class="hljs-function">(<span class="hljs-params">start: <span class="hljs-built_in">string</span>, end: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">string</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="stripTrailingSlash">  <span class="hljs-keyword">static</span> <span class="hljs-attr">stripTrailingSlash</span>: <span class="hljs-function">(<span class="hljs-params">url: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">string</span>;</button><div class="hljs-ln-line ">}</div></code></pre></div></div></div><div data-tab="说明" data-tab-url="description"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5gqkmtby184tdetdyjbp07b33">一个服务，应用可以用它来与浏览器的 URL 互动。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="58go8gva3wqvx3if69jz3na8j">根据所使用的 
<code>LocationStrategy</code>，
<code>Location</code> 会保存在 URL 的路径或 URL 的哈希段。</p></div></div><div data-tab="用法说明" data-tab-url="usage-notes"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="66l03jyc1zal1krb1zp04tmr1">最好使用 
<code>Router.navigate()</code> 服务来触发路由更改。仅在需要在路由之外与规范化的 URL 进行交互或创建时使用 
<code>Location</code>。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="71imor004bziay8u0ndx0ek8i"><code>Location</code> 负责根据应用的基 href 规范化 URL。规范化的 URL 是从 URL 主机绝对路径开始的，包括应用的基 href，并且没有尾部斜杠：</p>

    <ul class="docs-list">
      <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bs7a9p5kf3w1zb8mu48lld7az"><code>/my/app/user/123</code> 是标准化的</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="9w4u283fpk8ir2h9nyi6gp335"><code>my/app/user/123</code> 
<strong>不是</strong>规范化的</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="darf8cyvqzed6j2u9aag7v2zt"><code>/my/app/user/123/</code> 
<strong>不是</strong>规范化的</li>

    </ul>
    <h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="lzz2v4ucg07faxnpe2bu1wa1">范例</h3>
<p><code-example path="common/location/ts/path_location_component.ts" region="LocationComponent"></code-example></p>
</div></div><div class="docs-reference-members-container"><div class="docs-reference-members"><div id="path" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>path</h3><div><code>string</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="48l0oy8auxojjobwl0wz7jwzz">返回标准化之后的 URL 路径</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">includeHash</span><code>boolean</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4dhp0957egezfamvxfcm9ernk">路径中是否包含一个锚点片段（Anchor fragment）。</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>string</code></div></div></div></div><div id="getState" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>getState</h3><div><code>unknown</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="af7xtayqyr9zm6qlhffnagjeb">报告位置历史记录的当前状态。</p></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>unknown</code></div></div></div></div><div id="isCurrentPathEqualTo" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>isCurrentPathEqualTo</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="86yrrpo5zesjchs5ds9tvhiq5">对指定的路径进行标准化，并和当前的标准化路径进行比较。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">path</span><code>string</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="854ekaocxew68w840f6nlxxw1">指定的 URL 路径。</p></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">query</span><code>string</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8j9gxgtmr0v6aaqscfcrpbtpe">查询参数。</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>boolean</code></div></div></div></div><div id="normalize" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>normalize</h3><div><code>string</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="40ylcw1hn4vq07c8k60zwjenn">给出一个字符串形式的 URL，返回一个去掉末尾斜杠之后的 URL 路径。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">url</span><code>string</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="d27jdmenrtd56wb9087n1n9z">表示一个 URL。</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>string</code></div></div></div></div><div id="prepareExternalUrl" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>prepareExternalUrl</h3><div><code>string</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_ref_id="9p10dmonngfa5r6vffwhh8xxn">规范化外部 URL 路径。如果给定的 URL 不是以斜杠 (
<code>'/'</code>) 开始，则在规范化之前添加一个斜杠。如果使用 
<code>HashLocationStrategy</code>，则添加哈希；如果使用 
<code>PathLocationStrategy</code>，则添加 
<code>APP_BASE_HREF</code>。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">url</span><code>string</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="d27jdmenrtd56wb9087n1n9z">表示一个 URL。</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>string</code></div></div></div></div><div id="go" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>go</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9oiirnj42uta2mmxlq4ascoxd">把浏览器的 URL 修改为指定 URL 的标准化版本，并往所属平台（如浏览器）的历史堆栈中追加一个新条目。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">path</span><code>string</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="zxr26dex8a0oe3l36e7ubpni">要标准化的路径。</p></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">query</span><code>string</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8j9gxgtmr0v6aaqscfcrpbtpe">查询参数。</p></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">state</span><code>any</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dj34eb2ji6w08bsn8smkln40g">历史状态。</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="replaceState" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>replaceState</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="c3b77jaro3vhuzm1i1blil1r2">把浏览器的 URL 修改为指定 URL 的标准化版本，并替换所属平台（如浏览器）的历史堆栈的顶部条目。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">path</span><code>string</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="zxr26dex8a0oe3l36e7ubpni">要标准化的路径。</p></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">query</span><code>string</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8j9gxgtmr0v6aaqscfcrpbtpe">查询参数。</p></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">state</span><code>any</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dj34eb2ji6w08bsn8smkln40g">历史状态。</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="forward" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>forward</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="18lw1ijxy5ulqxcg35w4z5x7s">在所属平台（如浏览器）的历史堆栈中前进一步。</p></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="back" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>back</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="b0hwpqzt41x8vdmw514jx9h2w">在所属平台（如浏览器）的历史堆栈中后退一步。</p></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="historyGo" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>historyGo</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6d6zfnv5q3aghlrs5unrwj7b4">从会话历史记录导航到特定页面，由其与当前页面的相对位置标识。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">relativePosition</span><code>number</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_ref_id="49o2wcq93f5muekac916xoal7">目标页面在历史记录中相对于当前页面的位置。负值表示向后移动，正值表示向前移动，例如 
<code>location.historyGo(2)</code> 向前移动两页，
<code>location.historyGo(-2)</code> 向后移动两页。当我们尝试超出存储在历史会话中的记录时，会停留在当前页面。
<code>relativePosition</code> 等于 0 时也会出现相同的行为。</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="onUrlChange" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>onUrlChange</h3><div><code>VoidFunction</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cmvbdihaolu6aelppzecwewlr">注册 URL 更改监听器。被 Angular 框架用于捕获那些无法通过 “popstate” 或 “hashchange” 事件检测到的更新。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">fn</span><code>(url: string, state: unknown) =&gt; void</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2hkqsbezr9p3us8t0ajf91ayi">更改处理器函数，接受 URL 和位置历史记录的状态。</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>VoidFunction</code></div></div></div></div><div id="subscribe" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>subscribe</h3><div><code>SubscriptionLike</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="d7z2bwgwpuvjohj4gsng8c4ry">订阅所属平台（如浏览器）的 <code>popState</code> 事件。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="268bhok84b2r0vp0640khfguc">注意：
<code>Location.go()</code> 不会在浏览器中触发 
<code>popState</code> 事件。请改用 
<code>Location.onUrlChange()</code> 订阅 URL 更改。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">onNext</span><code>(value: PopStateEvent) =&gt; void</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">onThrow</span><code>(exception: any) =&gt; void</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">onReturn</span><code>() =&gt; void</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>SubscriptionLike</code></div></div></div></div><div id="normalizeQueryParams" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>normalizeQueryParams</h3><div><code>(params: string) =&gt; string</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="1nq641307exa5mdi1jj8i93ic">通过在需要时添加 
<code>?</code> 来规范化 URL 参数。</p></div></div></div></div><div id="joinWithSlash" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>joinWithSlash</h3><div><code>(start: string, end: string) =&gt; string</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="gn8m3pt2z9ax3ypnuvj9vfb9">给定 url 的两个部分，把它们连接（join）在一起，如有必要则添加一个斜杠。</p></div></div></div></div><div id="stripTrailingSlash" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>stripTrailingSlash</h3><div><code>(url: string) =&gt; string</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="5g3t6k28x9oplbc24la5xc0qq">在需要时从 URL 字符串中删除尾随斜杠。查找第一个出现的 
<code>#</code>、
<code>?</code> 或行尾作为 
<code>/</code> 字符的标志，并在存在尾随斜杠时将其删除。</p></div></div></div></div></div></div></div>