<div class="api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/router</span><div class="docs-reference-title"><div><h1>ExtraOptions</h1><div class="docs-api-item-label" data-mode="full" data-type="interface">interface</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/router/src/router_config.ts#L188-L258" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">code</i></a></div><p class="docs-reference-description"></p><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="ajmkkg6a2ihjg0uruoreb55q2">路由器模块的一组配置选项，在 <code>forRoot()</code> 方法中提供。</p><p></p><nav class="docs-pill-row"><a class="docs-pill" href="api/router/forRoot">()</a></nav></header><div data-tab="API" data-tab-url="api"><div class="docs-reference-api-tab"><div class="docs-code"><pre class="docs-mini-scroll-track"><code><div class="hljs-ln-line "><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ExtraOptions</span> {</div><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="enableTracing">  enableTracing?: <span class="hljs-built_in">boolean</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="useHash">  useHash?: <span class="hljs-built_in">boolean</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="initialNavigation">  initialNavigation?: <span class="hljs-title class_">InitialNavigation</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="bindToComponentInputs">  bindToComponentInputs?: <span class="hljs-built_in">boolean</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="enableViewTransitions">  enableViewTransitions?: <span class="hljs-built_in">boolean</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line hljs-ln-line-deprecated" member-id="errorHandler">  errorHandler?: <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">any</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="preloadingStrategy">  preloadingStrategy?: <span class="hljs-built_in">any</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="scrollOffset">  scrollOffset?: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>] | (<span class="hljs-function">() =&gt;</span> [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>]);</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="anchorScrolling">  <span class="hljs-keyword">override</span> anchorScrolling?: <span class="hljs-string">"disabled"</span> | <span class="hljs-string">"enabled"</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="scrollPositionRestoration">  <span class="hljs-keyword">override</span> scrollPositionRestoration?: <span class="hljs-string">"disabled"</span> | <span class="hljs-string">"enabled"</span> | <span class="hljs-string">"top"</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="canceledNavigationResolution">  <span class="hljs-keyword">override</span> canceledNavigationResolution?: <span class="hljs-string">"replace"</span> | <span class="hljs-string">"computed"</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="onSameUrlNavigation">  <span class="hljs-keyword">override</span> onSameUrlNavigation?: <span class="hljs-title class_">OnSameUrlNavigation</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="paramsInheritanceStrategy">  <span class="hljs-keyword">override</span> paramsInheritanceStrategy?: <span class="hljs-string">"emptyOnly"</span> | <span class="hljs-string">"always"</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="urlUpdateStrategy">  <span class="hljs-keyword">override</span> urlUpdateStrategy?: <span class="hljs-string">"deferred"</span> | <span class="hljs-string">"eager"</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="resolveNavigationPromiseOnError">  <span class="hljs-keyword">override</span> resolveNavigationPromiseOnError?: <span class="hljs-built_in">boolean</span>;</button><div class="hljs-ln-line ">}</div></code></pre></div></div></div><div class="docs-reference-members-container"><div class="docs-reference-members"><div id="enableTracing" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>enableTracing</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dflinuv4h9sqeplt939y9aisi">如果为 true，则将所有内部导航事件记录到控制台。用于调试。</p></div></div></div></div><div id="useHash" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>useHash</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="96afk7jy9l6v1jcyfueis3ah3">若为真，则启用使用 URL 片段而不是历史记录 API 的定位策略。</p></div></div></div></div><div id="initialNavigation" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>initialNavigation</h3><div><code>InitialNavigation</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="uzxza96jdkyv0zpdmnpk7ala">其中一个值：
<code>enabled</code>、
<code>enabledBlocking</code>、
<code>enabledNonBlocking</code> 或 
<code>disabled</code>。当设置为 
<code>enabled</code> 或 
<code>enabledBlocking</code> 时，初始导航在根组件创建之前启动。启动被阻塞，直到初始导航完成。此值是 
<a href="guide/ssr">服务器端渲染</a>工作所必需的。当设置为 
<code>enabledNonBlocking</code> 时，初始导航在根组件创建之后启动。启动不会因初始导航的完成而被阻塞。当设置为 
<code>disabled</code> 时，不执行初始导航。在根组件创建之前设置位置监听器。如果由于某些复杂的初始化逻辑而需要对路由器何时开始其初始导航有更多控制，则使用此选项。</p></div></div></div></div><div id="bindToComponentInputs" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>bindToComponentInputs</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="88yeyt5msgdrshbh2o9ehl5mv">当为 true 时，启用将 
<code>Router</code> 状态中的信息直接绑定到 
<code>Route</code> 配置中的组件输入。</p></div></div></div></div><div id="enableViewTransitions" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>enableViewTransitions</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="70j6rflronc5rss500zfjarf5">当为 true 时，通过在 
<code>document.startViewTransition</code> 内运行路由激活和停用，启用路由器中的视图过渡。</p></div></div></div></div><div id="errorHandler" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>errorHandler</h3><div><code>(error: any) =&gt; any</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div class="docs-deprecation-message"><span class="docs-param-keyword docs-deprecated">@deprecated</span><span><p data-ng_translator_product="100" data-ng_translator_ref_id="7z4jwn5iqeku5kf77znvd3sbk">改为订阅 
<code>Router</code> 事件并监视 
<code>NavigationError</code>。如果使用 ErrorHandler 以防止导航错误时出现未处理的 Promise 拒绝，请改用 
<code>resolveNavigationPromiseOnError</code> 选项。</p>
</span></div><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3rag64di6aq5yr9y6roc8m9hf">导航失败的自定义错误处理器。如果处理器返回一个值，则导航的 Promise 将使用该值进行解析。如果处理器引发异常，则导航 Promise 将被拒绝，并带有该异常。</p></div></div></div></div><div id="preloadingStrategy" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>preloadingStrategy</h3><div><code>any</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="bnl06z8drnzczlxkju0po246n">配置预加载策略。其中一个值：
<code>PreloadAllModules</code> 或 
<code>NoPreloading</code>（默认）。</p></div></div></div></div><div id="scrollOffset" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>scrollOffset</h3><div><code>[number, number] | (() =&gt; [number, number])</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7pqy5gq8aq7zfmsfzrq2lz96f">配置当滚动到一个元素时，路由器使用的滚动偏移。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="ad1p7hp2n3nq9ziqrp41j8nnx">当给出两个数字时，路由器总会使用它们。当给出一个函数时，路由器每当要恢复滚动位置时，都会调用该函数。</p></div></div></div></div><div id="anchorScrolling" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>anchorScrolling</h3><div><code>"disabled" | "enabled"</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3iycgdka329qvzy2n87wr9ned">设置为 “enabled” 时，如果 URL 有一个片段，就滚动到锚点元素。默认情况下，锚定滚动是禁用的。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="25klvzuefrk045w0d4syorrcl">锚点滚动不会在 “popstate” 上发生。相反，我们会恢复存储的位置或滚动到顶部。</p></div></div></div></div><div id="scrollPositionRestoration" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>scrollPositionRestoration</h3><div><code>"disabled" | "enabled" | "top"</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="43gk3wgynamjc67yoyatvrlmx">配置是否需要在导航回来的时候恢复滚动位置。</p>

    <ul class="docs-list">
      <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="b4rnssawhbhjdtvlmlkki5b8z">'disabled' - 什么也不做（默认）。在导航时，会自动维护滚动位置。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="d50llwu19ns9i4v88xmmnnsk">'top' - 在任何一次导航中都把滚动位置设置为 x=0, y=0。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="tuh6jjq2xbesqln7jf3bxzf0">'enabled' —— 当向后导航时，滚动到以前的滚动位置。当向前导航时，如果提供了锚点，则自动滚动到那个锚点，否则把滚动位置设置为 [0, 0]。该选项将来会变成默认值。</li>

    </ul>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9u8k17y030c7usclpwztx9xhe">你可以像下面的例子一样适配它启用时的行为，来自定义恢复滚动位置的策略：。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppComponent</span> {</span><span class="hljs-ln-line">  <span class="hljs-attr">movieData</span>: <span class="hljs-built_in">any</span>;</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> router: Router, <span class="hljs-keyword">private</span> viewportScroller: ViewportScroller,</span><span class="hljs-ln-line">changeDetectorRef: ChangeDetectorRef</span>) {</span><span class="hljs-ln-line">  router.<span class="hljs-property">events</span>.<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">filter</span>((<span class="hljs-attr">event</span>: <span class="hljs-title class_">Event</span>): event is <span class="hljs-title class_">Scroll</span> =&gt; event <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Scroll</span>)</span><span class="hljs-ln-line">    ).<span class="hljs-title function_">subscribe</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {</span><span class="hljs-ln-line">      <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'http://example.com/movies.json'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {</span><span class="hljs-ln-line">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">movieData</span> = response.<span class="hljs-title function_">json</span>();</span><span class="hljs-ln-line">        <span class="hljs-comment">// update the template with the data before restoring scroll</span></span><span class="hljs-ln-line">        changeDetectorRef.<span class="hljs-title function_">detectChanges</span>();</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">        <span class="hljs-keyword">if</span> (e.<span class="hljs-property">position</span>) {</span><span class="hljs-ln-line">          viewportScroller.<span class="hljs-title function_">scrollToPosition</span>(e.<span class="hljs-property">position</span>);</span><span class="hljs-ln-line">        }</span><span class="hljs-ln-line">      });</span><span class="hljs-ln-line">    });</span><span class="hljs-ln-line">  }</span><span class="hljs-ln-line">}</span>
          </code>
        </pre>
      </div></div></div></div></div><div id="canceledNavigationResolution" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>canceledNavigationResolution</h3><div><code>"replace" | "computed"</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="c6j12kmrg5nhgnm82fm3bqumh">配置在取消导航时路由器如何尝试恢复状态。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2emdyon6ztttor9x93usbkube">'replace' - 始终使用 <code>location.replaceState</code> 将浏览器状态设置为导航开始前的路由器状态。这意味着如果浏览器的 URL 在取消导航 <em> 之前 </em> 更新，则路由器将简单地替换历史记录中的项目，而不是尝试恢复到会话历史记录中的先前位置。这种情况最常发生在 <code>urlUpdateStrategy: 'eager'</code> 和使用浏览器后退/前进按钮的导航中。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="37kt6dw8stne9nzzgwcws8q43">“comped” - 当导航被取消时，将尝试返回会话历史记录中与 Angular 路由对应的同一个索引。例如，如果单击浏览器后退按钮并取消导航，则路由器将触发向前导航，反之亦然。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="7n90guvt39xdvtp6pewcdu58e">注意：'computed' 选项与任何只处理部分 URL 的 
<code>UrlHandlingStrategy</code> 不兼容，因为历史记录恢复会导航到浏览器历史记录中的上一个位置，而不是简单地重置部分 URL。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="at2ua60b8iahfznkbfkrl3kua">默认值是未设置时的 <code>replace</code>。</p></div></div></div></div><div id="onSameUrlNavigation" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>onSameUrlNavigation</h3><div><code>OnSameUrlNavigation</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7so56rifnf8llmq16blem1hy1">配置处理对当前 URL 的导航请求的默认值。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="6jdbx3bvyowfcig62kwarzaqw">如果未设置，
<code>Router</code> 将使用 
<code>'ignore'</code>。</p></div></div></div></div><div id="paramsInheritanceStrategy" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>paramsInheritanceStrategy</h3><div><code>"emptyOnly" | "always"</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="b93skb64dc8wk430ynnvtelj2">定义路由器如何将参数、数据和已求解的数据从父路由合并到子路由。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="acaxc7lhq8yu2givkw88nh7kt">默认情况下（'emptyOnly'），当路由本身具有空路径（即配置为 path: ''）或父路由未设置任何组件时，路由继承父路由的参数。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9aw4h2a4rlvv4btso3925pc7d">设置为 “always” 时会始终启用父参数的无条件继承。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="90pkx8lky26minbcoz5wf5qsl">请注意，在处理矩阵参数时，「parent」指的是父 
<code>Route</code> 配置，不一定意味着「左侧的 URL 段」。当 
<code>Route</code> 的 
<code>path</code> 包含多个段时，矩阵参数必须出现在最后一个段。例如，
<code>{path: 'a/b', component: MyComp}</code> 的矩阵参数应显示为 
<code>a/b;foo=bar</code>，而不是 
<code>a;foo=bar/b</code>。</p></div></div></div></div><div id="urlUpdateStrategy" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>urlUpdateStrategy</h3><div><code>"deferred" | "eager"</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bpvt1lqpdr4h9hmq9uklyg9uc">定义路由器要何时更新浏览器 URL。默认情况下（“deferred”），在成功导航后进行更新。如果希望在导航开始时更新 URL，则设置为 “eager”。以便早期更新 URL，这样可以通过显示带有失败 URL 的错误消息来处理导航失败。</p></div></div></div></div><div id="resolveNavigationPromiseOnError" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>resolveNavigationPromiseOnError</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="ccrakk592ygxkbeq1dk2cudv7">当为 
<code>true</code> 时，
<code>Promise</code> 将求解为 
<code>false</code>，就像其他失败的导航（例如，守卫被拒绝时）一样。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="44oapm3zr0bu0elph6zlbpc9b">否则，如果发生错误，路由器导航返回的 
<code>Promise</code> 将被拒绝。</p></div></div></div></div></div></div></div>