<div class="api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/router</span><div class="docs-reference-title"><div><h1>NavigationExtras</h1><div class="docs-api-item-label" data-mode="full" data-type="interface">interface</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/router/src/navigation_transition.ts#L214-L214" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">code</i></a></div><p class="docs-reference-description"></p><p data-ng_translator_product="100" data-ng_translator_ref_id="2y40hsqxeb2tdjlu1pv1f4fpe">修改 
<code>Router</code> 导航策略的选项。将包含这些属性的对象提供给 
<code>Router</code> 导航函数，以控制目标 URL 如何构建或解释。</p><p></p><nav class="docs-pill-row"><a class="docs-pill" href="api/router/Routernavigate" data-ng_translator_product="100" data-ng_translator_ref_id="38wzlicxpy2d7123t2w3lgarr">路由导航</a><a class="docs-pill" href="api/router/RouternavigateByUrl">RouternavigateByUrl</a><a class="docs-pill" href="api/router/Routercreateurltree" data-ng_translator_product="100" data-ng_translator_ref_id="4tppm90b1f6pq49ew31rgguvm">创建 URL 树</a><a class="docs-pill" href="guide/routing/common-router-tasks" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="c44kaf0ndv2lwkvg82qm58jsh">路由和导航指南</a><a class="docs-pill" href="api/router/UrlCreationOptions">UrlCreationOptions</a><a class="docs-pill" href="api/router/NavigationBehaviorOptions">NavigationBehaviorOptions</a></nav></header><div data-tab="API" data-tab-url="api"><div class="docs-reference-api-tab"><div class="docs-code"><pre class="docs-mini-scroll-track"><code><div class="hljs-ln-line "><span class="hljs-keyword">interface</span> <span class="hljs-title class_">NavigationExtras</span> {</div><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="relativeTo">  <span class="hljs-keyword">override</span> relativeTo?: <span class="hljs-title class_">ActivatedRoute</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="queryParams">  <span class="hljs-keyword">override</span> queryParams?: <span class="hljs-title class_">Params</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="fragment">  <span class="hljs-keyword">override</span> fragment?: <span class="hljs-built_in">string</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="queryParamsHandling">  <span class="hljs-keyword">override</span> queryParamsHandling?: <span class="hljs-title class_">QueryParamsHandling</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="preserveFragment">  <span class="hljs-keyword">override</span> preserveFragment?: <span class="hljs-built_in">boolean</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="onSameUrlNavigation">  <span class="hljs-keyword">override</span> onSameUrlNavigation?: <span class="hljs-title class_">OnSameUrlNavigation</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="skipLocationChange">  <span class="hljs-keyword">override</span> skipLocationChange?: <span class="hljs-built_in">boolean</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="replaceUrl">  <span class="hljs-keyword">override</span> replaceUrl?: <span class="hljs-built_in">boolean</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="state">  <span class="hljs-keyword">override</span> state?: { [<span class="hljs-attr">k</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>; };</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="info">  <span class="hljs-keyword">readonly</span> <span class="hljs-keyword">override</span> info?: <span class="hljs-built_in">unknown</span>;</button><div class="hljs-ln-line ">}</div></code></pre></div></div></div><div class="docs-reference-members-container"><div class="docs-reference-members"><div id="relativeTo" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>relativeTo</h3><div><code>ActivatedRoute</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cwgq3c4y4u3fsnnol0dctuliz">允许从当前激活的路由进行相对导航。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="88qjgokstzv274kb00q4r95wj">比如，考虑下列路由器配置，parent 路由拥有两个子路由。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line">[{</span><span class="hljs-ln-line">  path: <span class="hljs-symbol">'parent</span>',</span><span class="hljs-ln-line">  component: ParentComponent,</span><span class="hljs-ln-line">  children: [{</span><span class="hljs-ln-line">    path: <span class="hljs-symbol">'list</span>',</span><span class="hljs-ln-line">    component: ListComponent</span><span class="hljs-ln-line">  },{</span><span class="hljs-ln-line">    path: <span class="hljs-symbol">'child</span>',</span><span class="hljs-ln-line">    component: ChildComponent</span><span class="hljs-ln-line">  }]</span><span class="hljs-ln-line">}]</span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3366wzi9f4j31cjhklc23pcwf">下面的 <code>go()</code> 函数会把目标 URI 解释为相对于已激活路由 <code>child</code> 的，从而导航到 <code>list</code> 路由。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"> <span class="hljs-meta">@Component({...})</span></span><span class="hljs-ln-line"> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChildComponent</span> {</span><span class="hljs-ln-line">   <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">private</span> router: Router, <span class="hljs-keyword">private</span> route: ActivatedRoute) {}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">   go() {</span><span class="hljs-ln-line">     router.navigate([<span class="hljs-string">'../list'</span>], { relativeTo: <span class="hljs-keyword">this</span>.route });</span><span class="hljs-ln-line">   }</span><span class="hljs-ln-line"> }</span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="a6xk6c7a6icbdzxznq12a6dyz">值为 <code>null</code> 或 <code>undefined</code> 表明导航命令应该相对于根应用。</p></div></div></div></div><div id="queryParams" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>queryParams</h3><div><code>Params</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bxutb7mlrutj40hzaio3es35z">设置 URL 的查询参数。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-comment">// Navigate to /results?page=1</span></span><span class="hljs-ln-line">router.<span class="hljs-title function_ invoke__">navigate</span>([<span class="hljs-string">'/results'</span>], { <span class="hljs-attr">queryParams</span>: { <span class="hljs-attr">page</span>: <span class="hljs-number">1</span> } });</span>
          </code>
        </pre>
      </div></div></div></div></div><div id="fragment" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>fragment</h3><div><code>string</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="2f55sjprjkssplqd60m5tuwzf">设置 URL 的哈希片段。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line">// Navigate <span class="hljs-selector-tag">to</span> /results<span class="hljs-selector-id">#top</span></span><span class="hljs-ln-line">router<span class="hljs-selector-class">.navigate</span>(<span class="hljs-selector-attr">[<span class="hljs-string">'/results'</span>]</span>, { fragment: <span class="hljs-string">'top'</span> });</span>
          </code>
        </pre>
      </div></div></div></div></div><div id="queryParamsHandling" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>queryParamsHandling</h3><div><code>QueryParamsHandling</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bm6s53hjdlszvbafm05s0s134">如何在路由器链接中处理查询参数以进行下一个导航。为下列值之一：</p>

    <ul class="docs-list">
      <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6o8pl0g3jx7tqdhl30b90s2fu"><code>preserve</code> ：保留当前参数。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9b0gr6f0ny355jzpitwj2xis9"><code>merge</code> ：合并新的当前参数。</li>

    </ul>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="2nnfwivmg0jt2zg7h3133x58u">“preserve” 选项将放弃所有新的查询参数：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-comment">// from /view1?page=1 to/view2?page=1</span></span><span class="hljs-ln-line">router.<span class="hljs-title function_ invoke__">navigate</span>([<span class="hljs-string">'/view2'</span>], { <span class="hljs-attr">queryParams</span>: { <span class="hljs-attr">page</span>: <span class="hljs-number">2</span> },  <span class="hljs-attr">queryParamsHandling</span>: <span class="hljs-string">"preserve"</span></span><span class="hljs-ln-line">});</span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="d23n0mffor76rdtnq1jvfih2b">“merge” 选项会将新的查询参数附加到当前 URL 的参数中：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-comment">// from /view1?page=1 to/view2?page=1&amp;otherKey=2</span></span><span class="hljs-ln-line">router.<span class="hljs-title function_ invoke__">navigate</span>([<span class="hljs-string">'/view2'</span>], { <span class="hljs-attr">queryParams</span>: { <span class="hljs-attr">otherKey</span>: <span class="hljs-number">2</span> },  <span class="hljs-attr">queryParamsHandling</span>: <span class="hljs-string">"merge"</span></span><span class="hljs-ln-line">});</span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3rg23n2h513etlsk6jf9lwjde"><code>queryParams</code> 对象中的参数之间发生键名冲突，则使用新值。</p></div></div></div></div><div id="preserveFragment" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>preserveFragment</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="bsdf2l78r8nvnb9sfbkanogji">为 true 时，保留下次导航的 URL 片段。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line">// Preserve fragment <span class="hljs-selector-tag">from</span> /results<span class="hljs-selector-id">#top</span> <span class="hljs-selector-tag">to</span> /view<span class="hljs-selector-id">#top</span></span><span class="hljs-ln-line">router<span class="hljs-selector-class">.navigate</span>(<span class="hljs-selector-attr">[<span class="hljs-string">'/view'</span>]</span>, { preserveFragment: true });</span>
          </code>
        </pre>
      </div></div></div></div></div><div id="onSameUrlNavigation" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>onSameUrlNavigation</h3><div><code>OnSameUrlNavigation</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5xracaoybw9k34py2t0dlmo19">如何处理对当前 URL 的导航请求。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="bok10lqwwmdx23y5tl3onlagk">此值是 
<code>OnSameUrlNavigation</code> 中可用选项的子集，并且将优先于为 
<code>Router</code> 设置的默认值。</p></div></div></div></div><div id="skipLocationChange" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>skipLocationChange</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="1we32odcilob1f5oc8odmz97f">导航时不要把新状态记入历史</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-comment">// Navigate silently to /view</span></span><span class="hljs-ln-line"><span class="hljs-keyword">this</span>.router.navigate([<span class="hljs-string">'/view'</span>], { skipLocationChange: <span class="hljs-literal">true</span> });</span>
          </code>
        </pre>
      </div></div></div></div></div><div id="replaceUrl" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>replaceUrl</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6ybfu3jbxwv47l4yvg9lzen25">导航时不要把当前状态记入历史</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-comment">// Navigate to /view</span></span><span class="hljs-ln-line"><span class="hljs-keyword">this</span>.router.navigate([<span class="hljs-string">'/view'</span>], { replaceUrl: <span class="hljs-literal">true</span> });</span>
          </code>
        </pre>
      </div></div></div></div></div><div id="state" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>state</h3><div><code>{ [k: string]: any; }</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bmgh8klnsxqcnkmts7x8e17sa">由开发人员定义的状态，可以传递给任何导航。当执行导航时会通过由 <a href="api/router/Router#getcurrentnavigation">Router.getCurrentNavigation() 方法</a>返回的 <code>Navigation.extras</code> 对象来访问此值。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="3yn7u4vjkuglny815ih9qgp64">导航完成后，路由器将包含此值和 
<code>navigationId</code> 的对象写入 
<code>history.state</code>。在激活此路由之前，调用 
<code>location.go()</code> 或 
<code>location.replaceState()</code> 时写入该值。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="c7nrasxezigsju11luo2l35ov">请注意，<code>history.state</code> 不会通过对象相等测试，因为路由器会在每个 <code>navigationId</code> 上添加 NavigationId。</p></div></div></div></div><div id="info" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>info</h3><div><code>unknown</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="37le1kx6r0w15ltj9bep8bev">使用这个对象来传递关于此特定导航的临时信息，例如它是如何发生的。这样，它与会被设置到 
<code>history.state</code> 的持久化值 
<code>state</code> 不同。此对象直接赋值给 Router 的当前 
<code>Navigation</code>（不会被复制或克隆），所以应谨慎修改它。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="dutsjb5ro9ot046ay91pm1idr">一个可能的使用例子是根据某个路由的到达方式触发不同的单页导航动画。例如，考虑一个照片图库应用，你可以通过各种路由到达同一个照片 URL 和状态：</p>

    <ul class="docs-list">
      <li data-ng_translator_product="100" data-ng_translator_ref_id="48rakg3y8gzypie48bcdb88k9">在图库视图中点击它</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3xzyzhgy3ao0qjsswmxwjfnz0">点击</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="8v6cqzqx6jcwrssb805ohjafw">当查看相册中的另一张照片时点击“下一张”或“上一张”</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="f4usg5921sd9xfi6maonb0ozt">等等。</li>

    </ul>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="6qe4d1c3336h1kd1dhfi85ces">这些情况每个都需要在导航时使用不同的动画。这些信息不适合存储在持久化的 URL 或历史条目状态中，但仍然需要从应用的其他部分传递到 Router 中。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="49tf01jut1ke6v4d3fmhgt8yh">这些信息可以与 View Transitions 特性和 
<code>onViewTransitionCreated</code> 回调配合使用。这些信息可以在回调中用于设置文档上的类，以控制过渡动画，并在动画完成时移除这些类。</p></div></div></div></div></div></div></div>