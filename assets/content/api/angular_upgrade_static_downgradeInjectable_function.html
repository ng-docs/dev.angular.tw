<div class="api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/upgrade/static</span><div class="docs-reference-title"><div><h1>downgradeInjectable</h1><div class="docs-api-item-label" data-mode="full" data-type="function">function</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/upgrade/src/common/src/downgrade_injectable.ts#L75-L93" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">code</i></a></div><p class="docs-reference-description"></p><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dllapl0npt5vjs1rtero1spti">允许从 AngularJS 访问 Angular 服务的帮助器函数。</p><p></p></header><div data-tab="API" data-tab-url="api"><div class="docs-reference-api-tab"><div class="docs-code"><pre class="docs-mini-scroll-track"><code><div class="hljs-ln-line "><span class="hljs-title function_">downgradeInjectable</span>(</div><div class="hljs-ln-line ">  <span class="hljs-attr">token</span>: <span class="hljs-built_in">any</span>,</div><div class="hljs-ln-line ">  downgradedModule?: <span class="hljs-built_in">string</span></div><div class="hljs-ln-line ">): <span class="hljs-title class_">Function</span>;</div></code></pre></div></div></div><div data-tab="说明" data-tab-url="description"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dllapl0npt5vjs1rtero1spti">允许从 AngularJS 访问 Angular 服务的帮助器函数。</p>
<p><em data-ng_translator_product="100" data-ng_translator_ref_id="2x41rj6volmde5pf0v2if4c12">属于 
<a href="api?query=upgrade%2Fstatic">upgrade/static</a> 库的一部分，用于支持 AOT 编译的混合升级应用。</em></p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="398wdoyqdf1og6zklraft8b64">此帮助器函数返回一个工厂函数，该函数提供对 <code>token</code> 参数标识的 Angular 服务的访问。</p></div></div><div data-tab="用法说明" data-tab-url="usage-notes"><div><h3 data-ng_translator_product="100" data-ng_translator_ref_id="f4iecnoqh39op5dvxqr6b3gip">例子</h3>
<p data-ng_translator_product="100" data-ng_translator_ref_id="89ni9cgmsab7i9zecmms1k53x">首先确保要降级的服务在将成为升级应用一部分的 
<code>NgModule</code> 中提供。例如，假设我们定义了 
<code>HeroesService</code></p>
<code-example path="upgrade/static/ts/full/module.ts" region="ng2-heroes-service" />

<p data-ng_translator_product="100" data-ng_translator_ref_id="w7omjv5vl018shv3pulfuo5i">并且我们已将其包含在我们的升级应用 
<code>NgModule</code> 中</p>
<code-example path="upgrade/static/ts/full/module.ts" region="ng2-module" />

<p data-ng_translator_product="100" data-ng_translator_ref_id="dndys9401wzm1sgp1y8op7qib">现在我们可以在 AngularJS 模块上为服务注册 
<code>downgradeInjectable</code> 工厂函数。</p>
<code-example path="upgrade/static/ts/full/module.ts" region="downgrade-ng2-heroes-service" />

<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dqdbydrg8w5h5714dlqw4laff">在 AngularJS 组件的控制器中，我们可以通过我们在降级时提供的名称来获取降级后的服务。</p>
<code-example path="upgrade/static/ts/full/module.ts" region="example-app" />

<div class="alert is-important">

<p data-ng_translator_product="100" data-ng_translator_ref_id="rykr7kef8fhpicm6radkhxz5">使用 
<code>downgradeModule()</code> 时，降级后的可注入对象在提供它们的 Angular 模块实例化之前不可用。为了安全起见，需要确保降级后的可注入对象不在应用的<em>其他部分</em>使用，而是在保证其模块已实例化的部分使用。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="bwrn8pvxb4n2fehndt6z44qpz">例如，在仅由同一 Angular 模块提供的降级 Angular 组件中使用降级服务是<em>可以</em>的，但在可能独立于 Angular 使用的 AngularJS 组件中或在不同模块的降级 Angular 组件中使用它是<em>不可以</em>的。</p>
</div></div></div><div class="docs-reference-members-container"><div class="docs-reference-members"><div class="docs-reference-member-card"><header><div class="docs-reference-header"><h3>downgradeInjectable</h3><div><code>Function</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dllapl0npt5vjs1rtero1spti">允许从 AngularJS 访问 Angular 服务的帮助器函数。</p>
<p><em data-ng_translator_product="100" data-ng_translator_ref_id="2x41rj6volmde5pf0v2if4c12">属于 
<a href="api?query=upgrade%2Fstatic">upgrade/static</a> 库的一部分，用于支持 AOT 编译的混合升级应用。</em></p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="398wdoyqdf1og6zklraft8b64">此帮助器函数返回一个工厂函数，该函数提供对 <code>token</code> 参数标识的 Angular 服务的访问。</p></div><div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">token</span><code>any</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_ref_id="4k6fr2no64atvk0u8usrmfrf9">标识由 Angular 提供的服务的 
<code>InjectionToken</code>。</p></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">downgradedModule</span><code>string</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_ref_id="15qa481ca0cj7xe80p31ej8zp">此可注入对象『所属』的降级模块（如果有）的名称，由调用 
<code>downgradeModule()</code> 返回。将使用其注入器实例化可注入对象。
<br> （此选项仅在使用 
<code>downgradeModule()</code> 降级多个 Angular 模块时才需要。）</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>Function</code></div><div class="docs-usage-notes"><span class="docs-param-keyword">Usage notes</span><div><h3 data-ng_translator_product="100" data-ng_translator_ref_id="f4iecnoqh39op5dvxqr6b3gip">例子</h3>
<p data-ng_translator_product="100" data-ng_translator_ref_id="89ni9cgmsab7i9zecmms1k53x">首先确保要降级的服务在将成为升级应用一部分的 
<code>NgModule</code> 中提供。例如，假设我们定义了 
<code>HeroesService</code></p>
<code-example path="upgrade/static/ts/full/module.ts" region="ng2-heroes-service" />

<p data-ng_translator_product="100" data-ng_translator_ref_id="w7omjv5vl018shv3pulfuo5i">并且我们已将其包含在我们的升级应用 
<code>NgModule</code> 中</p>
<code-example path="upgrade/static/ts/full/module.ts" region="ng2-module" />

<p data-ng_translator_product="100" data-ng_translator_ref_id="dndys9401wzm1sgp1y8op7qib">现在我们可以在 AngularJS 模块上为服务注册 
<code>downgradeInjectable</code> 工厂函数。</p>
<code-example path="upgrade/static/ts/full/module.ts" region="downgrade-ng2-heroes-service" />

<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dqdbydrg8w5h5714dlqw4laff">在 AngularJS 组件的控制器中，我们可以通过我们在降级时提供的名称来获取降级后的服务。</p>
<code-example path="upgrade/static/ts/full/module.ts" region="example-app" />

<div class="alert is-important">

<p data-ng_translator_product="100" data-ng_translator_ref_id="rykr7kef8fhpicm6radkhxz5">使用 
<code>downgradeModule()</code> 时，降级后的可注入对象在提供它们的 Angular 模块实例化之前不可用。为了安全起见，需要确保降级后的可注入对象不在应用的<em>其他部分</em>使用，而是在保证其模块已实例化的部分使用。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="bwrn8pvxb4n2fehndt6z44qpz">例如，在仅由同一 Angular 模块提供的降级 Angular 组件中使用降级服务是<em>可以</em>的，但在可能独立于 Angular 使用的 AngularJS 组件中或在不同模块的降级 Angular 组件中使用它是<em>不可以</em>的。</p>
</div></div></div></div></div></div></div></div></div>