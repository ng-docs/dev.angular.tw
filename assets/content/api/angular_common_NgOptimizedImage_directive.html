<div class="docs-api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/common</span><div class="docs-reference-title"><div><h1>NgOptimizedImage</h1><div class="docs-api-item-label type-directive full">指令</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/common/src/directives/ng_optimized_image/ng_optimized_image.ts#L271-L733" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">程式碼</i></a></div><section class="docs-reference-description"><p>該指令透過強制執行最佳實踐來提高圖片載入效能。</p></section></header><div class="docs-reference-section docs-reference-api-section"><h2 id="api" class="docs-reference-section-heading"><a href="#api" aria-label="Link to API section" tabindex="-1">API</a></h2><div class="docs-code"><pre class="docs-mini-scroll-track"><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0">  <code>
    <span class="line "><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/common/NgOptimizedImage">NgOptimizedImage</a></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/OnInit">OnInit</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/OnChanges">OnChanges</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><button aria-describedby="jump-msg" type="button" class="line " member-id="constructor"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/common/NgOptimizedImage">NgOptimizedImage</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="ngSrc"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ngSrc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="ngSrcset"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ngSrcset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="sizes"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">sizes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="width"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">width</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="height"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> number</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="loading"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">loading</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "auto"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "lazy"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "eager"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="priority"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">priority</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="loaderParams"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">loaderParams</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { [</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="disableOptimizedSrcset"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">disableOptimizedSrcset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="fill"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">fill</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="placeholder"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">placeholder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="placeholderConfig"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">placeholderConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/common/ImagePlaceholderConfig">ImagePlaceholderConfig</a></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><span class="line "><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
  </code>
  </pre></pre></div></div><div class="docs-reference-members"><div class="docs-reference-members"><div id="constructor" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>constructor</h3><code><a href="/api/common/NgOptimizedImage">NgOptimizedImage</a></code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code><a href="/api/common/NgOptimizedImage">NgOptimizedImage</a></code></div></div></div></div><div id="ngSrc" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>ngSrc</h3><code>string</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>源圖片名稱。
圖片名稱將由圖片載入器處理，最終的 URL 將作為圖片的 <code>src</code> 屬性賦予。</p></div></div></div></div><div id="ngSrcset" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>ngSrcset</h3><code>string</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>以逗號分隔的寬度或密度描述符清單。
圖片名稱將取自 <code>ngSrc</code>，並與寬度或密度描述符清單組合，以生成圖片的最終 <code>srcset</code> 屬性。</p>
<p>範例：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">          <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hello.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrcset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"100w, 200w"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;  =&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"path/hello.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> srcset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"path/hello.jpg?w=100 100w, path/hello.jpg?w=200 200w"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;</span></span></code></pre>
        </pre>
      </div></div></div></div></div><div id="sizes" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>sizes</h3><code>string | undefined</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>傳遞到 <code>&lt;img&gt;</code> 元素的基本 <code>sizes</code> 屬性。
提供 sizes 會使影象建立自動回應式 srcset。</p></div></div></div></div><div id="width" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>width</h3><code>number | undefined</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>對於回應式圖片：圖片固有的寬度（以畫素為單位）。
對於固定尺寸圖片：圖片期望的渲染寬度（以畫素為單位）。</p></div></div></div></div><div id="height" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>height</h3><code>number | undefined</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>對於回應式圖片：圖片固有的高度（以畫素為單位）。
對於固定尺寸圖片：圖片期望的渲染高度（以畫素為單位）。</p></div></div></div></div><div id="loading" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>loading</h3><code>"auto" | "lazy" | "eager" | undefined</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>期望的載入行為（惰性、急性或自動）。預設為 <code>lazy</code>，
建議大多數圖片使用此設定。</p>
<p>警告：將圖片設定為 loading="eager" 或 loading="auto" 會將其標記
為非優先圖片，並可能損害載入效能。對於可能是 LCP 元素的圖片，請使用 <code>priority</code> 屬性而不是 <code>loading</code>。</p></div></div></div></div><div id="priority" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>priority</h3><code>boolean</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>指示此圖片是否應具有高優先級。</p></div></div></div></div><div id="loaderParams" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>loaderParams</h3><code>{ [key: string]: any; } | undefined</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>要傳遞給自定義載入器的資料。</p></div></div></div></div><div id="disableOptimizedSrcset" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>disableOptimizedSrcset</h3><code>boolean</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>停用此圖片的自動 srcset 生成。</p></div></div></div></div><div id="fill" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>fill</h3><code>boolean</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>將圖片設定為『填充模式』，這將消除高度/寬度要求並新增
樣式，以便圖片填充其包含元素。</p></div></div></div></div><div id="placeholder" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>placeholder</h3><code>string | boolean | undefined</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>用作佔位符的圖片的 URL 或資料 URL，在此圖片載入時顯示。</p></div></div></div></div><div id="placeholderConfig" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>placeholderConfig</h3><code><a href="/api/common/ImagePlaceholderConfig">ImagePlaceholderConfig</a> | undefined</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>佔位符設定的設定物件。選項：</p>

    <ul class="docs-list">
      <li>blur：設定為 false 可停用自動 CSS 模糊。</li>

    </ul></div></div></div></div><div id="ngOnInit" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>ngOnInit</h3><code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="ngOnChanges" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>ngOnChanges</h3><code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">changes</span><code><a href="/api/core/SimpleChanges">SimpleChanges</a></code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div></div></div><div class="docs-reference-section"><h2 id="description" class="docs-reference-section-heading"><a href="#description" aria-label="Link to Description section" tabindex="-1">描述</a></h2><div><p>該指令透過強制執行最佳實踐來提高圖片載入效能。</p>
<p><code><a href="/api/common/NgOptimizedImage">NgOptimizedImage</a></code> 透過以下方式確保 Largest Contentful Paint (LCP) 圖片的載入具有優先權：</p>

    <ul class="docs-list">
      <li>自動在 <code>&lt;img&gt;</code> 標籤上設定 <code>fetchpriority</code> 屬性</li>
<li>預設情況下延遲載入非優先圖片</li>
<li>在文件頭部自動生成預連線 link 標籤</li>

    </ul>
    <p>此外，該指令還具有以下功能：</p>

    <ul class="docs-list">
      <li>如果提供了相應的 <code><a href="/api/common/ImageLoader">ImageLoader</a></code> 函式，則生成適當的資產 URL</li>
<li>自動生成 srcset</li>
<li>要求設定 <code>width</code> 和 <code>height</code></li>
<li>如果 <code>width</code> 或 <code>height</code> 設定不正確，則發出警告</li>
<li>如果圖片在渲染時會出現視覺失真，則發出警告</li>

    </ul></div></div><div class="docs-reference-section"><h2 id="usage-notes" class="docs-reference-section-heading"><a href="#usage-notes" aria-label="Link to Usage Notes section" tabindex="-1">用法說明</a></h2><div><p><code><a href="/api/common/NgOptimizedImage">NgOptimizedImage</a></code> 指令被標記為<a href="guide/components/importing">獨立的</a>，可以直接匯入。</p>
<p>請按照以下步驟啟用和使用該指令：</p>

      <ol class="docs-ordered-list">
        <li>將其匯入到必要的 NgModule 或獨立的 Component 中。</li>
<li>如果您使用圖片託管服務，可以選擇性地提供 <code><a href="/api/common/ImageLoader">ImageLoader</a></code>。</li>
<li>更新範本中必要的 <code>&lt;img&gt;</code> 標籤，並將 <code>src</code> 屬性替換為 <code>ngSrc</code>。使用 <code>ngSrc</code> 允許指令控制 <code>src</code> 何時設定，從而觸發圖片下載。</li>

      </ol>
      <p>步驟 1：匯入 <code><a href="/api/common/NgOptimizedImage">NgOptimizedImage</a></code> 指令。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">          <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { NgOptimizedImage } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/common'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Include it into the necessary NgModule</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/NgModule">NgModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  imports: [NgOptimizedImage],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> AppModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ... or a standalone Component</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  imports: [NgOptimizedImage],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MyStandaloneComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {}</span></span></code></pre>
        </pre>
      </div>
    <p>步驟 2：設定載入器。</p>
<p>要使用<strong>預設載入器</strong>：無需進行額外的程式碼更改。通用載入器回傳的 URL 將始終與 "src" 的值對應。換句話說，此載入器不對資源 URL 應用任何轉換，並且 <code>ngSrc</code> 屬性的值將按原樣使用。</p>
<p>要為<strong>第三方圖片服務</strong>使用現有載入器：將您選擇的服務的提供者工廠新增到 <code>providers</code> 陣列。在下面的範例中，使用了 Imgix 載入器：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">          <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {provideImgixLoader} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/common'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Call the function and add the result to the `providers` array:</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  <a href="/api/common/provideImgixLoader">provideImgixLoader</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"https://my.base.url/"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span></code></pre>
        </pre>
      </div>
    <p><code><a href="/api/common/NgOptimizedImage">NgOptimizedImage</a></code> 指令提供以下功能：</p>

    <ul class="docs-list">
      <li><code><a href="/api/common/provideCloudflareLoader">provideCloudflareLoader</a></code></li>
<li><code><a href="/api/common/provideCloudinaryLoader">provideCloudinaryLoader</a></code></li>
<li><code><a href="/api/common/provideImageKitLoader">provideImageKitLoader</a></code></li>
<li><code><a href="/api/common/provideImgixLoader">provideImgixLoader</a></code></li>

    </ul>
    <p>如果您使用其他圖片提供商，則可以按照下述方式建立自定義載入器函式。</p>
<p>要使用<strong>自定義載入器</strong>：請將您的載入器函式作為 <code><a href="/api/common/IMAGE_LOADER">IMAGE_LOADER</a></code> DI 令牌的值提供。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">          <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {IMAGE_LOADER, ImageLoaderConfig} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/common'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Configure the loader using the `IMAGE_LOADER` token.</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">     provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"><a href="/api/common/IMAGE_LOADER">IMAGE_LOADER</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">     useValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/common/ImageLoaderConfig">ImageLoaderConfig</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">       return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `https://example.com/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}-${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">width</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}.jpg`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">     }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span></code></pre>
        </pre>
      </div>
    <p>步驟 3：更新範本中的 <code>&lt;img&gt;</code> 標籤以使用 <code>ngSrc</code> 而不是 <code>src</code>。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">          <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"logo.png"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"200"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"100"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
        </pre>
      </div>
    </div></div></div>