<div class="api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/common/http/testing</span><div class="docs-reference-title"><div><h1>TestRequest</h1><div class="docs-api-item-label" data-mode="full" data-type="undecorated_class">Class</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/common/http/testing/src/request.ts#L37-L146" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">code</i></a></div><p class="docs-reference-description"></p><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="b607s79wjtak912qywvhisvkn">已收到并准备好进行应答的模拟请求。</p><p></p></header><div data-tab="API" data-tab-url="api"><div class="docs-reference-api-tab"><div class="docs-code"><pre class="docs-mini-scroll-track"><code><div class="hljs-ln-line "><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestRequest</span> {</div><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="cancelled">  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">cancelled</span>: <span class="hljs-built_in">boolean</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="flush">  <span class="hljs-title function_">flush</span>(<span class="hljs-attr">body</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span> | <span class="hljs-title class_">Object</span> | <span class="hljs-title class_">ArrayBuffer</span> | <span class="hljs-title class_">Blob</span> | (<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span> | <span class="hljs-title class_">Object</span>)[], opts?: { headers?: <span class="hljs-built_in">any</span>; status?: <span class="hljs-built_in">number</span>; statusText?: <span class="hljs-built_in">string</span>; }): <span class="hljs-built_in">void</span>;</button><div class="hljs-ln-group"><button aria-describedby="jump-msg" type="button" class="hljs-ln-line hljs-ln-line-deprecated" member-id="error">  <span class="hljs-title function_">error</span>(<span class="hljs-attr">error</span>: <span class="hljs-title class_">ErrorEvent</span>, opts?: <span class="hljs-title class_">TestRequestErrorOptions</span>): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="error">  <span class="hljs-title function_">error</span>(<span class="hljs-attr">error</span>: <span class="hljs-title class_">ProgressEvent</span>&lt;<span class="hljs-title class_">EventTarget</span>&gt;, opts?: <span class="hljs-title class_">TestRequestErrorOptions</span>): <span class="hljs-built_in">void</span>;</button></div><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="event">  <span class="hljs-title function_">event</span>(<span class="hljs-attr">event</span>: <span class="hljs-title class_">HttpEvent</span>&lt;<span class="hljs-built_in">any</span>&gt;): <span class="hljs-built_in">void</span>;</button><div class="hljs-ln-line ">}</div></code></pre></div></div></div><div data-tab="说明" data-tab-url="description"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="b607s79wjtak912qywvhisvkn">已收到并准备好进行应答的模拟请求。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="abkfmhd2q3jj7d7yh3y4v4dux">此接口允许访问底层的 
<code>HttpRequest</code>，并允许用 
<code>HttpEvent</code> 或 
<code>HttpErrorResponse</code> 进行响应。</p></div></div><div class="docs-reference-members-container"><div class="docs-reference-members"><div id="cancelled" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>cancelled</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9pp9xhyf2kwj1v4fy5fr5fyot">请求在发送后是否已被取消。</p></div></div></div></div><div id="flush" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>flush</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4nh3d37zciu2ddw0ydft0r0d">通过返回 body 以及其他 HTTP 信息（比如响应标头）（如果提供过）来解析请求。如果请求指定了预期的 body 类型，则将 body 转换为所请求的类型。否则，body 在默认情况下转换成 <code>JSON</code>。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="3gxk1hto8zqlsojx8lgbb5t9m">成功和失败的响应都可以通过 
<code>flush()</code> 传递。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">body</span><code>string | number | boolean | Object | ArrayBuffer | Blob | (string | number | boolean | Object)[]</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">opts</span><code>{ headers?: any; status?: number; statusText?: string; }</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="error" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>error</h3><div><span>2 overloads</span></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item docs-reference-card-item-deprecated"><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3r775z7z6v5adm5fwpmiyvn3n">通过返回 <code>ErrorEvent</code> （比如，模拟网络故障）来解决请求。</p></div><div><div class="docs-deprecation-message"><span class="docs-param-keyword docs-deprecated">@deprecated</span><span><p data-ng_translator_product="100" data-ng_translator_ref_id="40ssh1g8xzw53r6gwg7dljnkl">Http 请求从不发出 
<code>ErrorEvent</code>。请指定 
<code>ProgressEvent</code>。</p>
</span></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">error</span><code>ErrorEvent</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">opts</span><code>TestRequestErrorOptions</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3crhlju6c470tlfatgxarql2i">通过返回 <code>ProgressEvent</code> 来解决请求（例如模拟网络故障）。</p></div><div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">error</span><code>ProgressEvent&lt;EventTarget&gt;</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">opts</span><code>TestRequestErrorOptions</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="event" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>event</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_ref_id="cl5o0s46k8kf5hkkn59fe2kp8">在响应流中为此请求传递一个任意的 
<code>HttpEvent</code>（如进度事件）。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">event</span><code>HttpEvent&lt;any&gt;</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div></div></div></div>