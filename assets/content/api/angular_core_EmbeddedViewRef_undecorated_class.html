<div class="api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/core</span><div class="docs-reference-title"><div><h1>EmbeddedViewRef</h1><div class="docs-api-item-label" data-mode="full" data-type="undecorated_class">Class</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/core/src/linker/view_ref.ts#L92-L102" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">code</i></a></div><p class="docs-reference-description"></p><p data-ng_translator_product="100" data-ng_translator_ref_id="2gkqlwanz3adt31md23u5yu3w">表示视图容器中的一个 Angular 视图。嵌入视图可以从定义其模板的宿主组件以外的组件引用，或由 
<code>TemplateRef</code> 独立定义。</p><p></p><nav class="docs-pill-row"><a class="docs-pill" href="api/core/ViewContainerRef">ViewContainerRef</a></nav></header><div data-tab="API" data-tab-url="api"><div class="docs-reference-api-tab"><div class="docs-code"><pre class="docs-mini-scroll-track"><code><div class="hljs-ln-line "><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmbeddedViewRef</span> {</div><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="context">  <span class="hljs-keyword">abstract</span> <span class="hljs-attr">context</span>: C;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="rootNodes">  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">rootNodes</span>: <span class="hljs-built_in">any</span>[];</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="destroy">  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-title function_">destroy</span>(): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="destroyed">  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">destroyed</span>: <span class="hljs-built_in">boolean</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="onDestroy">  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-title function_">onDestroy</span>(<span class="hljs-attr">callback</span>: <span class="hljs-title class_">Function</span>): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="markForCheck">  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-title function_">markForCheck</span>(): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="detach">  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-title function_">detach</span>(): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="detectChanges">  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-title function_">detectChanges</span>(): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line hljs-ln-line-deprecated" member-id="checkNoChanges">  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-title function_">checkNoChanges</span>(): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="reattach">  <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">override</span> <span class="hljs-title function_">reattach</span>(): <span class="hljs-built_in">void</span>;</button><div class="hljs-ln-line ">}</div></code></pre></div></div></div><div data-tab="说明" data-tab-url="description"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="2gkqlwanz3adt31md23u5yu3w">表示视图容器中的一个 Angular 视图。嵌入视图可以从定义其模板的宿主组件以外的组件引用，或由 
<code>TemplateRef</code> 独立定义。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="a7v00i23rnsm37sr46mkylg8">视图中元素的属性可以更改，但是视图中元素的结构（数量和顺序）不能更改。通过在视图容器中插入，移动或删除嵌套视图来更改元素的结构。</p></div></div><div data-tab="用法说明" data-tab-url="usage-notes"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="4r9mdoqd7o0zaxtwyu2y5tqfi">以下模板分解为两个独立的 
<code>TemplateRef</code> 实例，一个外部的和一个内部的。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="language-xml">Count: </span><span class="hljs-template-variable">{{<span class="hljs-name">items.length</span>}}</span><span class="language-xml"></span><span class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><span class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> *<span class="hljs-attr">ngFor</span>=<span class="hljs-string">"let  item of items"</span>&gt;</span></span><span class="hljs-template-variable">{{<span class="hljs-name">item</span>}}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span><span class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span></span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="f1u7wj6uympug3e5ro97rj1pe">这是外部的 
<code>TemplateRef</code>：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="language-xml">Count: </span><span class="hljs-template-variable">{{<span class="hljs-name">items.length</span>}}</span><span class="language-xml"></span><span class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><span class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">ng-template</span> <span class="hljs-attr">ngFor</span> <span class="hljs-attr">let-item</span> [<span class="hljs-attr">ngForOf</span>]=<span class="hljs-string">"items"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ng-template</span>&gt;</span></span><span class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span></span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="bfza3em42gnkdaa5h7qoewl68">这是内部的 
<code>TemplateRef</code>：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><span class="hljs-template-variable">{{<span class="hljs-name">item</span>}}</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span></span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="16w46lyuh2n1mqi9mlm8008p6">外部和内部的 
<code>TemplateRef</code> 实例按如下方式组装为视图：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-comment">&lt;!-- ViewRef: outer-0 --&gt;</span></span><span class="hljs-ln-line">Count: 2</span><span class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span></span><span class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">ng-template</span> <span class="hljs-attr">view-container-ref</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ng-template</span>&gt;</span></span><span class="hljs-ln-line">  <span class="hljs-comment">&lt;!-- ViewRef: inner-1 --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>first<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-comment">&lt;!-- /ViewRef: inner-1 --&gt;</span></span><span class="hljs-ln-line">  <span class="hljs-comment">&lt;!-- ViewRef: inner-2 --&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>second<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-comment">&lt;!-- /ViewRef: inner-2 --&gt;</span></span><span class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span><span class="hljs-ln-line"><span class="hljs-comment">&lt;!-- /ViewRef: outer-0 --&gt;</span></span>
          </code>
        </pre>
      </div>
    </div></div><div class="docs-reference-members-container"><div class="docs-reference-members"><div id="context" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>context</h3><div><code>C</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="ctbnmbwifgz5cetooa7jww4mb">该视图的上下文，继承自锚点元素。</p></div></div></div></div><div id="rootNodes" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>rootNodes</h3><div><code>any[]</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6wno0mn3aj65tgpf8stujurm4">此嵌入式视图的根节点。</p></div></div></div></div><div id="destroy" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>destroy</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5w574y5old1sys71wqkchltdi">销毁该视图以及与之关联的所有数据结构。</p></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="destroyed" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>destroyed</h3><div><code>boolean</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="1wc17qlwtdugxs15fq8ql8612">报告此视图是否已被销毁。</p></div></div></div></div><div id="onDestroy" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>onDestroy</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="d5kc96l4hh15a3cdzy0tiao1o">生命周期钩子，为视图提供其他由开发人员定义的清理功能。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">callback</span><code>Function</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="a7xwqb4wjcht3duw3drdwykzc">处理函数，用于清理与视图关联的由开发人员定义的数据。在调用 <code>destroy()</code> 方法时调用。</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="markForCheck" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>markForCheck</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_ref_id="8lxgtt99hrvy6715zvfc7ru5f">当一个视图使用 
<a href="api/core/ChangeDetectionStrategyOnPush "><code>ChangeDetectionStrategyOnPush </code></a>（checkOnce）变更检测策略时，会显式地将视图标记为已更改，以便可以再次检查。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="93plg3pru4hskvn8r4sak2tm1">当输入已更改或视图中发生了事件时，组件通常会标记为脏的（需要重新渲染）。调用此方法会确保即使那些触发器没有被触发，也仍然检查该组件。</p>
<!-- TODO: Add a link to a chapter on OnPush components --></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="detach" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>detach</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="a05i3bq8rqn6r00ts1xirkyqr">从变更检测树中分离开视图。
已分离的视图在重新附加上去之前不会被检查。
与 <code>detectChanges()</code> 结合使用，可以实现局部变更检测。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="16sa1h9x8clcdzbrl65li8t6h">即使已分离的视图已标记为脏的，它们在重新附加上去之前也不会被检查。</p>
<!-- TODO: Add a link to a chapter on detach/reattach/local digest -->
<!-- TODO: Add a live demo once ref.detectChanges is merged into master --></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="detectChanges" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>detectChanges</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_ref_id="4g2rsxppy8mc7v2zpjijj6lr2">检查此视图及其子视图。与 
<a href="api/core/ChangeDetectorRefdetach "><code>ChangeDetectorRefdetach </code></a> 结合使用，以实现局部变更检测检查。</p>
<!-- TODO: Add a link to a chapter on detach/reattach/local digest -->
<!-- TODO: Add a live demo once ref.detectChanges is merged into master --></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="checkNoChanges" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>checkNoChanges</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item docs-reference-card-item-deprecated"><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="32wevngxbqanb7kg8cuxvx7y1">检查变更检测器及其子检测器，如果检测到任何更改，则抛出异常。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="c3jozxoxehphibqhxyzttmua3">在开发模式下可用来验证正在运行的变更检测器是否引入了其它变更。在生产模式下调用它时没有任何效果。</p></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="reattach" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>reattach</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="76h2kc17jby0luj8z9ueeqohe">把以前分离开的视图重新附加到变更检测树上。
视图会被默认附加到这棵树上。</p>
<!-- TODO: Add a link to a chapter on detach/reattach/local digest --></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div></div></div></div>