<div class="api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/common/http</span><div class="docs-reference-title"><div><h1>HttpInterceptorFn</h1><div class="docs-api-item-label" data-mode="full" data-type="type_alias">Type Alias</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/common/http/src/interceptor.ts#L132-L135" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">code</i></a></div><p class="docs-reference-description"></p><p data-ng_translator_product="100" data-ng_translator_ref_id="6e96zfsza2efgfrz6ifhdnlg4">一个用于通过
<code>HttpClient</code>发出的 HTTP 请求的拦截器。</p><p></p><nav class="docs-pill-row"><a class="docs-pill" href="guide/http/interceptors" data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6e11p1lwup2y40x7ouwzkuh89">HTTP 指南</a><a class="docs-pill" href="api/common/http/withInterceptors">withInterceptors</a></nav></header><div data-tab="API" data-tab-url="api"><div class="docs-reference-api-tab"><div class="docs-code"><pre class="docs-mini-scroll-track"><code><div class="hljs-ln-line "><span class="hljs-keyword">type</span> <span class="hljs-title class_">HttpInterceptorFn</span> = <span class="hljs-function">(<span class="hljs-params"></span></span></div><div class="hljs-ln-line ">  req: HttpRequest&lt;<span class="hljs-built_in">unknown</span>&gt;,</div><div class="hljs-ln-line ">  next: HttpHandlerFn,</div><div class="hljs-ln-line ">) =&gt; <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-title class_">HttpEvent</span>&lt;<span class="hljs-built_in">unknown</span>&gt;&gt;</div></code></pre></div></div></div><div data-tab="说明" data-tab-url="description"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="6e96zfsza2efgfrz6ifhdnlg4">一个用于通过
<code>HttpClient</code>发出的 HTTP 请求的拦截器。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="503i0g34nul5uvp3ky3g6tjsh"><code>HttpInterceptorFn</code>是中间件函数，当请求发出时
<code>HttpClient</code>会调用这些函数。它们有机会修改发出的请求或返回的任何响应，还可以阻止、重定向或以其他方式更改请求或响应的语义。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="7bpdh7ttpe9xvg2de56tfgtxc">提供代表下一个拦截器（或将发出真实 HTTP 请求的后端）的
<code>HttpHandlerFn</code>。大多数拦截器会委派给这个函数，但这不是必须的（详见
<code>HttpHandlerFn</code>）。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="7fd2237orcb8rgg2mc0c1ovou"><code>HttpInterceptorFn</code> 会在 
<a href="guide/di/dependency-injection-context">注入上下文</a> 中执行。 它们可以通过配置它们的 
<code>EnvironmentInjector</code> 来访问 
<code>inject()</code>。</p></div></div><div data-tab="用法说明" data-tab-url="usage-notes"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="5qesrtjogzyl3b4ste9y2natx">这是一个不做任何操作的拦截器，它不修改请求就将其传递过去：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">noopInterceptor</span>: <span class="hljs-title class_">HttpInterceptorFn</span> = <span class="hljs-function">(<span class="hljs-params">req: HttpRequest&lt;<span class="hljs-built_in">unknown</span>&gt;, next:</span><span class="hljs-ln-line">HttpHandlerFn</span>) =&gt;</span> {</span><span class="hljs-ln-line">  <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>(modifiedReq);</span><span class="hljs-ln-line">};</span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="elifnpmrrjmv6wrsdu0i3uitt">如果你想修改请求，首先要克隆它，然后修改克隆的副本，再将其传递给 
<code>next()</code> 处理函数。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="5o5di87fsk2u6bhs067v51jg5">这是一个基本的拦截器，它向标头添加了一个持有者令牌：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">authenticationInterceptor</span>: <span class="hljs-title class_">HttpInterceptorFn</span> = <span class="hljs-function">(<span class="hljs-params">req: HttpRequest&lt;<span class="hljs-built_in">unknown</span>&gt;, next:</span><span class="hljs-ln-line">HttpHandlerFn</span>) =&gt;</span> {</span><span class="hljs-ln-line">   <span class="hljs-keyword">const</span> userToken = <span class="hljs-string">'MY_TOKEN'</span>; <span class="hljs-keyword">const</span> modifiedReq = req.<span class="hljs-title function_">clone</span>({</span><span class="hljs-ln-line">     <span class="hljs-attr">headers</span>: req.<span class="hljs-property">headers</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'Authorization'</span>, <span class="hljs-string">`Bearer <span class="hljs-subst">${userToken}</span>`</span>),</span><span class="hljs-ln-line">   });</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">   <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>(modifiedReq);</span><span class="hljs-ln-line">};</span>
          </code>
        </pre>
      </div>
    </div></div></div>