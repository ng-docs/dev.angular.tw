<div class="api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/upgrade</span><div class="docs-reference-title"><div><h1>UpgradeAdapter</h1><div class="docs-api-item-label" data-mode="full" data-type="undecorated_class">Class</div><div class="docs-api-item-label" data-mode="full" data-type="deprecated">Deprecated</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/upgrade/src/dynamic/src/upgrade_adapter.ts#L143-L685" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">code</i></a></div><p class="docs-reference-description"></p><p data-ng_translator_product="100" data-ng_translator_ref_id="ew248b0t4l6sylip5uai91t1i">使用 
<code>UpgradeAdapter</code> 允许 AngularJS 和 Angular 在单个应用中共存。</p><p></p></header><div data-tab="API" data-tab-url="api"><div class="docs-reference-api-tab"><div class="docs-code"><pre class="docs-mini-scroll-track"><code><div class="hljs-ln-line "><span class="hljs-keyword">class</span> <span class="hljs-title class_">UpgradeAdapter</span> {</div><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="downgradeNg2Component">  <span class="hljs-title function_">downgradeNg2Component</span>(<span class="hljs-attr">component</span>: <span class="hljs-title class_">Type</span>&lt;<span class="hljs-built_in">any</span>&gt;): <span class="hljs-title class_">Function</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="upgradeNg1Component">  <span class="hljs-title function_">upgradeNg1Component</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Type</span>&lt;<span class="hljs-built_in">any</span>&gt;;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="registerForNg1Tests">  <span class="hljs-title function_">registerForNg1Tests</span>(modules?: <span class="hljs-built_in">string</span>[]): <span class="hljs-title class_">UpgradeAdapterRef</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="bootstrap">  <span class="hljs-title function_">bootstrap</span>(<span class="hljs-attr">element</span>: <span class="hljs-title class_">Element</span>, modules?: <span class="hljs-built_in">any</span>[], config?: <span class="hljs-title class_">IAngularBootstrapConfig</span>): <span class="hljs-title class_">UpgradeAdapterRef</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="upgradeNg1Provider">  <span class="hljs-title function_">upgradeNg1Provider</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, options?: { <span class="hljs-attr">asToken</span>: <span class="hljs-built_in">any</span>; }): <span class="hljs-built_in">void</span>;</button><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="downgradeNg2Provider">  <span class="hljs-title function_">downgradeNg2Provider</span>(<span class="hljs-attr">token</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Function</span>;</button><div class="hljs-ln-line ">}</div></code></pre></div></div></div><div data-tab="说明" data-tab-url="description"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="ew248b0t4l6sylip5uai91t1i">使用 
<code>UpgradeAdapter</code> 允许 AngularJS 和 Angular 在单个应用中共存。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="ahsklzcxcd59eqp9she2zphes"><code>UpgradeAdapter</code> 允许：</p>

      <ol class="docs-ordered-list">
        <li data-ng_translator_product="100" data-ng_translator_ref_id="c205vqfaa2izancvsflmgfxzn">从 AngularJS 组件指令创建 Angular 组件 （参见 
<a href="api/upgrade/UpgradeAdapterupgradeNg1Component "><code>UpgradeAdapterupgradeNg1Component </code></a>）</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="2fzzd6mw8uksmqwr6wikj1bic">从 Angular 组件创建 AngularJS 指令。 （参见 {@link UpgradeAdapterdowngradeNg2Component }）</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dqqinnlzgekuqarb7donpplmp">混合 Angular 应用程序的引导，该应用程序包含在单个应用程序中共存的两个框架。</li>

      </ol></div></div><div data-tab="用法说明" data-tab-url="usage-notes"><div><h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6vtkv13e1pzp7s84dv6xy0vzc">心理模型</h3>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8ngenqmeaov43gu5hpg8syap4">在推理混合应用程序的工作方式时，有一个心智模型会很有用，它可以描述正在发生的事情并在最低级别解释正在发生的事情。</p>

      <ol class="docs-ordered-list">
        <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="87im8nbyy8wpshz9p3hc6g0u5">在单个应用程序中运行有两个独立的框架，每个框架都将另一个框架视为黑盒。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="cyhmb0xnpf0fx97at4zbxz0bb">页面上的每个 DOM 元素都归一个框架所有。无论哪个框架实例化此元素，都是所有者。每个框架都只更新自己的 DOM 元素/交互，而忽略其他框架。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="ew3daj7g3panwgqs0badvl780">AngularJS 指令始终在 AngularJS 框架代码库中执行，无论它们是在哪里实例化的。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3ujjhphefr6z567yvf2g9nvmj">Angular 组件始终在 Angular 框架代码库中执行，无论它们在哪里实例化。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3bc9z6doq8gslc4ed13ch105u">AngularJS 组件可以升级为 Angular 组件。这会创建一个 Angular 指令，它会引导该位置的 AngularJS 组件指令。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="f27mtimikjdonkp91sxxo522a">Angular 组件可以降级为 AngularJS 组件指令。这会创建一个 AngularJS 指令，该指令会引导该位置的 Angular 组件。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="47tv0pp0qpegrunqu6tv0eupn">每当实例化适配器组件时，宿主元素都归进行实例化的框架所有。然后，另一个框架会实例化并拥有该组件的视图。这意味着组件绑定将始终遵循实例化框架的语义。语法始终是 Angular 语法。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="39s62dj0qbbmrnit038gvnxp3">AngularJS 始终首先引导并拥有最底部的视图。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="26upqrtaxk0d98w92y6x1ejjb">新应用程序在 Angular 区域中运行，因此它不再需要调用 <code>$apply()</code>。</li>

      </ol>
      <h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="lzz2v4ucg07faxnpe2bu1wa1">范例</h3>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-keyword">const</span> adapter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpgradeAdapter</span>(<span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">MyNg2Module</span>), myCompilerOptions);</span><span class="hljs-ln-line"><span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = angular.<span class="hljs-title function_">module</span>(<span class="hljs-string">'myExample'</span>, []);</span><span class="hljs-ln-line"><span class="hljs-variable language_">module</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'ng2Comp'</span>, adapter.<span class="hljs-title function_">downgradeNg2Component</span>(<span class="hljs-title class_">Ng2Component</span>));</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-variable language_">module</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'ng1Hello'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span><span class="hljs-ln-line">  <span class="hljs-keyword">return</span> {</span><span class="hljs-ln-line">     <span class="hljs-attr">scope</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'='</span> },</span><span class="hljs-ln-line">     <span class="hljs-attr">template</span>: <span class="hljs-string">'ng1[Hello {{title}}!](&lt;span ng-transclude&gt;&lt;/span&gt;)'</span></span><span class="hljs-ln-line">  };</span><span class="hljs-ln-line">});</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"></span><span class="hljs-ln-line">@<span class="hljs-title class_">Component</span>({</span><span class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'ng2-comp'</span>,</span><span class="hljs-ln-line">  <span class="hljs-attr">inputs</span>: [<span class="hljs-string">'name'</span>],</span><span class="hljs-ln-line">  <span class="hljs-attr">template</span>: <span class="hljs-string">'ng2[&lt;ng1-hello [title]="name"&gt;transclude&lt;/ng1-hello&gt;](&lt;ng-content&gt;&lt;/ng-content&gt;)'</span>,</span><span class="hljs-ln-line">  <span class="hljs-attr">directives</span>:</span><span class="hljs-ln-line">})</span><span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ng2Component</span> {</span><span class="hljs-ln-line">}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">@<span class="hljs-title class_">NgModule</span>({</span><span class="hljs-ln-line">  <span class="hljs-attr">declarations</span>: [<span class="hljs-title class_">Ng2Component</span>, adapter.<span class="hljs-title function_">upgradeNg1Component</span>(<span class="hljs-string">'ng1Hello'</span>)],</span><span class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">BrowserModule</span>]</span><span class="hljs-ln-line">})</span><span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNg2Module</span> {}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;ng2-comp name="World"&gt;project&lt;/ng2-comp&gt;'</span>;</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">adapter.<span class="hljs-title function_">bootstrap</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>, [<span class="hljs-string">'myExample'</span>]).<span class="hljs-title function_">ready</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span><span class="hljs-ln-line">  <span class="hljs-title function_">expect</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">textContent</span>).<span class="hljs-title function_">toEqual</span>(</span><span class="hljs-ln-line">      <span class="hljs-string">"ng2[ng1[Hello World!](transclude)](project)"</span>);</span><span class="hljs-ln-line">});</span><span class="hljs-ln-line"></span>
          </code>
        </pre>
      </div>
    </div></div><div class="docs-reference-members-container"><div class="docs-reference-members"><div id="downgradeNg2Component" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>downgradeNg2Component</h3><div><code>Function</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3diaew6qli6j5il9mmmbtjkdt">允许从 AngularJS 使用 Angular 组件。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7mcthqd8j897hwqyfevkh8db7">使用 <code>downgradeNg2Component</code> 从 Angular 组件创建 AngularJS 指令定义工厂。适配器将从 AngularJS 模板中引导 Angular 组件。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">component</span><code>Type&lt;any&gt;</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>Function</code></div><div class="docs-usage-notes"><span class="docs-param-keyword">Usage notes</span><div><h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6vtkv13e1pzp7s84dv6xy0vzc">心理模型</h3>

      <ol class="docs-ordered-list">
        <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6s95r7qfboydjgj4ru9gxn2uv">该组件是通过在 AngularJS 模板中列出来实例化的。这意味着宿主元素由 AngularJS 控制，但组件的视图将由 Angular 控制。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="d22dw8ey342kthi3220aujazd">即使组件是在 AngularJS 中实例化的，它也将使用 Angular 语法。必须这样做，因为我们必须遵循 Angular 组件，而不是声明应该如何解释属性。</li>
<li data-ng_translator_product="100" data-ng_translator_ref_id="6v7r7sbmmtho22p8s0filt8z2"><code>ng-model</code> 由 AngularJS 控制，并通过 
<code>ControlValueAccessor</code> 接口与降级的 Angular 组件通信</li>

      </ol>
      </div></div></div></div></div><div id="upgradeNg1Component" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>upgradeNg1Component</h3><div><code>Type&lt;any&gt;</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4dk768m2lc8vh5a2gwwm40osn">允许从 Angular 使用 AngularJS 组件。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="eyelzo2xi01w6fd3yro8t3f54">使用 <code>upgradeNg1Component</code> 从 AngularJS Component 指令创建一个 Angular 组件。适配器将从 Angular 模板中引导 AngularJS 组件。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">name</span><code>string</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>Type&lt;any&gt;</code></div><div class="docs-usage-notes"><span class="docs-param-keyword">Usage notes</span><div><h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6vtkv13e1pzp7s84dv6xy0vzc">心理模型</h3>

      <ol class="docs-ordered-list">
        <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="49gitefybf2qnpirb006f4v8q">该组件是通过在 Angular 模板中列出来实例化的。这意味着宿主元素由 Angular 控制，但组件的视图将由 AngularJS 控制。</li>

      </ol>
      <h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="9mwjkhs8ndhd0buvslu47xp71">支持的特性</h3>

    <ul class="docs-list">
      <li>Bindings:
    <ul class="docs-list">
      <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5xcw79p3mdzmpmnoy5ms9fsae">属性：<code>&lt;comp name="World"&gt;</code></li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6yhtp7qz6xz3m131qv4bj8y8t">插值：<code>&lt;comp greeting="Hello {{name}}!"&gt;</code></li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="abwl1ow0nawt7f58pszuvoozm">表达式：<code>&lt;comp [name]="username"&gt;</code></li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="959uqzti792uaf2u24lt8r5ih">事件：<code>&lt;comp (close)="doSomething()"&gt;</code></li>

    </ul>
    </li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="8k5akwj736frnoeisrja0nl38">透传：是</li>
<li>Only some of the features of
<a href="https://docs.angularjs.org/api/ng/service/$compile">Directive Definition Object</a> are
supported:
    <ul class="docs-list">
      <li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bofugfvww73p2uevu7altqgfm"><code>compile</code>：不支持，因为宿主元素归 Angular 所有，它不允许在编译期间修改 DOM 结构。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="44iki1b7pm60dtftafaulxrqd"><code>controller</code>：支持。（注意：不支持注入 <code>$attrs</code> 和 <code>$transclude</code>。）</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="85mu6ooou32an1svmbducq06b"><code>controllerAs</code>：支持。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="k8icabvt6yndcr9iap4p6bju"><code>bindToController</code>：支持。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="3jsvgowvxt5r7ulljghg5is69"><code>link</code>：支持。（注意：仅支持预链接功能。）</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="a83cpzj3riomltkdlpqrx8m5s"><code>name</code>：支持。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4qawlpvnj2zg7jj9yweqfmrsy"><code>priority</code>：忽略。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="22c9uo49b41lorch2rtwgg04w"><code>replace</code>：不支持。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="dib79jf36uzg3n09gtd9zahhd"><code>require</code>：支持。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4i0506rwg8q2v6bnuw7c3x9pv"><code>restrict</code>：必须设置为 'E'。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="euk2ldq80afqrbwlbcuxlh2y8"><code>scope</code>：支持。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4jynm1294hcn9hu5ioswa0lrb"><code>template</code>：支持。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="5tssgvuee7xt0xtilvfg6im9y"><code>templateUrl</code>：支持。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6rbmusf26zcprzemtiphwbzej"><code>terminal</code>：被忽略。</li>
<li data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="10ie89lcrg6el040htly3hmsq"><code>transclude</code>：支持。</li>

    </ul>
    </li>

    </ul>
    <h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="lzz2v4ucg07faxnpe2bu1wa1">范例</h3>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-keyword">const</span> adapter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpgradeAdapter</span>(<span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">MyNg2Module</span>));</span><span class="hljs-ln-line"><span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = angular.<span class="hljs-title function_">module</span>(<span class="hljs-string">'myExample'</span>, []);</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-variable language_">module</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'greet'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span><span class="hljs-ln-line">  <span class="hljs-keyword">return</span> {</span><span class="hljs-ln-line">    <span class="hljs-attr">scope</span>: {<span class="hljs-attr">salutation</span>: <span class="hljs-string">'='</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'='</span> },</span><span class="hljs-ln-line">    <span class="hljs-attr">template</span>: <span class="hljs-string">'{{salutation}} {{name}}! - &lt;span ng-transclude&gt;&lt;/span&gt;'</span></span><span class="hljs-ln-line">  };</span><span class="hljs-ln-line">});</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-variable language_">module</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'ng2'</span>, adapter.<span class="hljs-title function_">downgradeNg2Component</span>(<span class="hljs-title class_">Ng2Component</span>));</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">@<span class="hljs-title class_">Component</span>({</span><span class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'ng2'</span>,</span><span class="hljs-ln-line">  <span class="hljs-attr">template</span>: <span class="hljs-string">'ng2 template: &lt;greet salutation="Hello" [name]="world"&gt;text&lt;/greet&gt;'</span></span><span class="hljs-ln-line">})</span><span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ng2Component</span> {</span><span class="hljs-ln-line">}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">@<span class="hljs-title class_">NgModule</span>({</span><span class="hljs-ln-line">  <span class="hljs-attr">declarations</span>: [<span class="hljs-title class_">Ng2Component</span>, adapter.<span class="hljs-title function_">upgradeNg1Component</span>(<span class="hljs-string">'greet'</span>)],</span><span class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">BrowserModule</span>]</span><span class="hljs-ln-line">})</span><span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNg2Module</span> {}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;ng2&gt;&lt;/ng2&gt;'</span>;</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">adapter.<span class="hljs-title function_">bootstrap</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>, [<span class="hljs-string">'myExample'</span>]).<span class="hljs-title function_">ready</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span><span class="hljs-ln-line">  <span class="hljs-title function_">expect</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">textContent</span>).<span class="hljs-title function_">toEqual</span>(<span class="hljs-string">"ng2 template: Hello world! - text"</span>);</span><span class="hljs-ln-line">});</span>
          </code>
        </pre>
      </div>
    </div></div></div></div></div><div id="registerForNg1Tests" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>registerForNg1Tests</h3><div><code>UpgradeAdapterRef</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4hks4gigf5ehb9voawoibevb0">注册适配器的 AngularJS 升级模块以在 AngularJS 中进行单元测试。使用它而不是 <code>angular.mock.module()</code> 将升级模块加载到 AngularJS 测试注入器中。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">modules</span><code>string[]</code><div class="docs-parameter-description"><p data-ng_translator_product="100" data-ng_translator_ref_id="d5p7jbpqedrkeiwsuude4zwzl">升级模块应依赖的任何 AngularJS 模块</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>UpgradeAdapterRef</code></div><div class="docs-usage-notes"><span class="docs-param-keyword">Usage notes</span><div><h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="lzz2v4ucg07faxnpe2bu1wa1">范例</h3>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line">const upgradeAdapter = <span class="hljs-keyword">new</span> <span class="hljs-type">UpgradeAdapter</span>(MyNg2Module);</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-comment">// configure the adapter with upgrade/downgrade components and services</span></span><span class="hljs-ln-line">upgradeAdapter.downgradeNg2Component(MyComponent);</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">let upgradeAdapterRef: <span class="hljs-type">UpgradeAdapterRef</span>;</span><span class="hljs-ln-line">let <span class="hljs-variable">$compile</span>, <span class="hljs-variable">$rootScope</span>;</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-comment">// We must register the adapter before any calls to `inject()`</span></span><span class="hljs-ln-line">beforeEach(() =&gt; {</span><span class="hljs-ln-line">  upgradeAdapterRef = upgradeAdapter.registerForNg1Tests([<span class="hljs-string">'heroApp'</span>]);</span><span class="hljs-ln-line">});</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">beforeEach(inject((<span class="hljs-literal">_</span><span class="hljs-variable">$compile_</span>, <span class="hljs-literal">_</span><span class="hljs-variable">$rootScope_</span>) =&gt; {</span><span class="hljs-ln-line">  <span class="hljs-variable">$compile</span> = <span class="hljs-literal">_</span><span class="hljs-variable">$compile_</span>;</span><span class="hljs-ln-line">  <span class="hljs-variable">$rootScope</span> = <span class="hljs-literal">_</span><span class="hljs-variable">$rootScope_</span>;</span><span class="hljs-ln-line">}));</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">it(<span class="hljs-string">"says hello"</span>, (done) =&gt; {</span><span class="hljs-ln-line">  upgradeAdapterRef.ready(() =&gt; {</span><span class="hljs-ln-line">    const element = <span class="hljs-variable">$compile</span>(<span class="hljs-string">"&lt;my-component&gt;&lt;/my-component&gt;"</span>)(<span class="hljs-variable">$rootScope</span>);</span><span class="hljs-ln-line">    <span class="hljs-variable">$rootScope</span>.<span class="hljs-variable">$apply</span>();</span><span class="hljs-ln-line">    expect(element.html()).toContain(<span class="hljs-string">"Hello World"</span>);</span><span class="hljs-ln-line">    done();</span><span class="hljs-ln-line">  })</span><span class="hljs-ln-line">});</span><span class="hljs-ln-line"></span>
          </code>
        </pre>
      </div>
    </div></div></div></div></div><div id="bootstrap" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>bootstrap</h3><div><code>UpgradeAdapterRef</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="4b9kx58nkmzeish0878w6cmcz">引导混合 AngularJS / Angular 应用程序。</p>
<p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="295ef8rspizz2gi6bxa6bag80">此 <code>bootstrap</code> 方法是 AngularJS <a href="https://docs.angularjs.org/api/ng/function/angular.bootstrap"><code>bootstrap</code></a>方法的直接替换（采用相同的参数）。与 AngularJS 不同，此引导程序是异步的。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">element</span><code>Element</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">modules</span><code>any[]</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">config</span><code>IAngularBootstrapConfig</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>UpgradeAdapterRef</code></div><div class="docs-usage-notes"><span class="docs-param-keyword">Usage notes</span><div><h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="lzz2v4ucg07faxnpe2bu1wa1">范例</h3>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-keyword">const</span> adapter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpgradeAdapter</span>(<span class="hljs-title class_">MyNg2Module</span>);</span><span class="hljs-ln-line"><span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = angular.<span class="hljs-title function_">module</span>(<span class="hljs-string">'myExample'</span>, []);</span><span class="hljs-ln-line"><span class="hljs-variable language_">module</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'ng2'</span>, adapter.<span class="hljs-title function_">downgradeNg2Component</span>(<span class="hljs-title class_">Ng2</span>));</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-variable language_">module</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'ng1'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span><span class="hljs-ln-line">  <span class="hljs-keyword">return</span> {</span><span class="hljs-ln-line">     <span class="hljs-attr">scope</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">'='</span> },</span><span class="hljs-ln-line">     <span class="hljs-attr">template</span>: <span class="hljs-string">'ng1[Hello {{title}}!](&lt;span ng-transclude&gt;&lt;/span&gt;)'</span></span><span class="hljs-ln-line">  };</span><span class="hljs-ln-line">});</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"></span><span class="hljs-ln-line">@<span class="hljs-title class_">Component</span>({</span><span class="hljs-ln-line">  <span class="hljs-attr">selector</span>: <span class="hljs-string">'ng2'</span>,</span><span class="hljs-ln-line">  <span class="hljs-attr">inputs</span>: [<span class="hljs-string">'name'</span>],</span><span class="hljs-ln-line">  <span class="hljs-attr">template</span>: <span class="hljs-string">'ng2[&lt;ng1 [title]="name"&gt;transclude&lt;/ng1&gt;](&lt;ng-content&gt;&lt;/ng-content&gt;)'</span></span><span class="hljs-ln-line">})</span><span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ng2</span> {</span><span class="hljs-ln-line">}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">@<span class="hljs-title class_">NgModule</span>({</span><span class="hljs-ln-line">  <span class="hljs-attr">declarations</span>: [<span class="hljs-title class_">Ng2</span>, adapter.<span class="hljs-title function_">upgradeNg1Component</span>(<span class="hljs-string">'ng1'</span>)],</span><span class="hljs-ln-line">  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">BrowserModule</span>]</span><span class="hljs-ln-line">})</span><span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNg2Module</span> {}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;ng2 name="World"&gt;project&lt;/ng2&gt;'</span>;</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">adapter.<span class="hljs-title function_">bootstrap</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>, [<span class="hljs-string">'myExample'</span>]).<span class="hljs-title function_">ready</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span><span class="hljs-ln-line">  <span class="hljs-title function_">expect</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">textContent</span>).<span class="hljs-title function_">toEqual</span>(</span><span class="hljs-ln-line">      <span class="hljs-string">"ng2[ng1[Hello World!](transclude)](project)"</span>);</span><span class="hljs-ln-line">});</span>
          </code>
        </pre>
      </div>
    </div></div></div></div></div><div id="upgradeNg1Provider" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>upgradeNg1Provider</h3><div><code>void</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="e1ou80x7ru0tcyz5mheqn66pk">允许从 Angular 访问 AngularJS 服务。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">name</span><code>string</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">options</span><code>{ asToken: any; }</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div><div class="docs-usage-notes"><span class="docs-param-keyword">Usage notes</span><div><h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="lzz2v4ucg07faxnpe2bu1wa1">范例</h3>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Login</span> { ... }</span><span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Server</span> { ... }</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-meta">@Injectable</span>()</span><span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> {</span><span class="hljs-ln-line">  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-meta">@Inject</span>(<span class="hljs-string">'server'</span>) server, login: Login</span>) {</span><span class="hljs-ln-line">    ...</span><span class="hljs-ln-line">  }</span><span class="hljs-ln-line">}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = angular.<span class="hljs-title function_">module</span>(<span class="hljs-string">'myExample'</span>, []);</span><span class="hljs-ln-line"><span class="hljs-variable language_">module</span>.<span class="hljs-title function_">service</span>(<span class="hljs-string">'server'</span>, <span class="hljs-title class_">Server</span>);</span><span class="hljs-ln-line"><span class="hljs-variable language_">module</span>.<span class="hljs-title function_">service</span>(<span class="hljs-string">'login'</span>, <span class="hljs-title class_">Login</span>);</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-keyword">const</span> adapter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpgradeAdapter</span>(<span class="hljs-title class_">MyNg2Module</span>);</span><span class="hljs-ln-line">adapter.<span class="hljs-title function_">upgradeNg1Provider</span>(<span class="hljs-string">'server'</span>);</span><span class="hljs-ln-line">adapter.<span class="hljs-title function_">upgradeNg1Provider</span>(<span class="hljs-string">'login'</span>, {<span class="hljs-attr">asToken</span>: <span class="hljs-title class_">Login</span>});</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">adapter.<span class="hljs-title function_">bootstrap</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>, [<span class="hljs-string">'myExample'</span>]).<span class="hljs-title function_">ready</span>(<span class="hljs-function">(<span class="hljs-params">ref</span>) =&gt;</span> {</span><span class="hljs-ln-line">  <span class="hljs-keyword">const</span> <span class="hljs-attr">example</span>: <span class="hljs-title class_">Example</span> = ref.<span class="hljs-property">ng2Injector</span>.<span class="hljs-title function_">get</span>(<span class="hljs-title class_">Example</span>);</span><span class="hljs-ln-line">});</span><span class="hljs-ln-line"></span>
          </code>
        </pre>
      </div>
    </div></div></div></div></div><div id="downgradeNg2Provider" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>downgradeNg2Provider</h3><div><code>Function</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="a3qd3unz1l65dqqarhgbw88lr">允许从 AngularJS 访问 Angular 服务。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">token</span><code>any</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>Function</code></div><div class="docs-usage-notes"><span class="docs-param-keyword">Usage notes</span><div><h3 data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="lzz2v4ucg07faxnpe2bu1wa1">范例</h3>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Example</span> {</span><span class="hljs-ln-line">}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-keyword">const</span> adapter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpgradeAdapter</span>(<span class="hljs-title class_">MyNg2Module</span>);</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = angular.<span class="hljs-title function_">module</span>(<span class="hljs-string">'myExample'</span>, []);</span><span class="hljs-ln-line"><span class="hljs-variable language_">module</span>.<span class="hljs-title function_">factory</span>(<span class="hljs-string">'example'</span>, adapter.<span class="hljs-title function_">downgradeNg2Provider</span>(<span class="hljs-title class_">Example</span>));</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">adapter.<span class="hljs-title function_">bootstrap</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>, [<span class="hljs-string">'myExample'</span>]).<span class="hljs-title function_">ready</span>(<span class="hljs-function">(<span class="hljs-params">ref</span>) =&gt;</span> {</span><span class="hljs-ln-line">  <span class="hljs-keyword">const</span> <span class="hljs-attr">example</span>: <span class="hljs-title class_">Example</span> = ref.<span class="hljs-property">ng1Injector</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'example'</span>);</span><span class="hljs-ln-line">});</span><span class="hljs-ln-line"></span>
          </code>
        </pre>
      </div>
    </div></div></div></div></div></div></div></div>