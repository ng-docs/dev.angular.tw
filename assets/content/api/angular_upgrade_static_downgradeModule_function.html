<div class="docs-api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/upgrade/static</span><div class="docs-reference-title"><div><h1>downgradeModule</h1><div class="docs-api-item-label type-function full">函式</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/upgrade/static/src/downgrade_module.ts#L139-L141" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">程式碼</i></a></div><section class="docs-reference-description"><p>一個輔助函式，用於建立一個 AngularJS 模組，該模組可以在需要實例化 <a href="/api/upgrade/static/downgradeComponent"><code>降級元件</code></a> 時『按需』（可能是惰性地）引導 Angular 模組。</p></section></header><div class="docs-reference-section docs-reference-api-section"><h2 id="api" class="docs-reference-section-heading"><a href="#api" aria-label="Link to API section" tabindex="-1">API</a></h2><div class="docs-code"><pre class="docs-mini-scroll-track"><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0">  <code>
    <button aria-describedby="jump-msg" type="button" class="line " member-id="downgradeModule_0"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/Type">Type</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/StaticProvider">StaticProvider</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/NgModuleRef">NgModuleRef</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt;))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line shiki-deprecated" member-id="downgradeModule_1"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/NgModuleFactory">NgModuleFactory</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button>
  </code>
  </pre></pre></div></div><div class="docs-reference-members"><div id="downgradeModule_0" class="docs-reference-member-card"><header class="docs-reference-card-header"><code><div><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> downgradeModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> StaticProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">NgModuleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt;))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre></div></code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p>一個輔助函式，用於建立一個 AngularJS 模組，該模組可以在需要實例化 <a href="/api/upgrade/static/downgradeComponent"><code>降級元件</code></a> 時『按需』（可能是惰性地）引導 Angular 模組。</p>
<p><em>用於支援預先編譯的混合升級應用的 <a href="api?query=upgrade/static">upgrade/static</a> 函式庫的一部分。</em></p>
<p>它允許惰性地載入/引導混合應用的 Angular 部分，而無需預先支付成本。例如，你可以擁有一個 AngularJS 應用，該應用對特定路由使用 Angular，並且僅在使用者訪問這些路由之一時才實例化 Angular 模組。</p>
<p>Angular 模組將引導一次（首次請求時），並且從那時起將使用相同的引用。</p>
<p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 需要 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>、<code><a href="/api/core/NgModule">NgModule</a></code> 類別或函式：</p>

    <ul class="docs-list">
      <li><code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>：如果傳遞 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>，它將用於實例化一個模組，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModuleFactory"><code>bootstrapModuleFactory()</code></a>。
注意：此引數型別已棄用。請提供 <code><a href="/api/core/NgModule">NgModule</a></code> 類別或引導函式來代替。</li>
<li><code><a href="/api/core/NgModule">NgModule</a></code> 類別：如果傳遞 NgModule 類別，它將用於實例化一個模組，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModule"><code>bootstrapModule()</code></a>。</li>
<li><code>Function</code>：如果傳遞一個函式，則期望它回傳一個 Promise，求解為 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code>。呼叫該函式時會傳入一個額外的 <a href="/api/core/StaticProvider"><code>Providers</code></a> 陣列，這些提供者應可從回傳的 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code> 的 <code><a href="/api/core/Injector">Injector</a></code> 中獲得。</li>

    </ul>
    <p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 回傳所建立的 AngularJS 套件裝器模組的名稱。你可以使用它在你的主 AngularJS 模組中宣告依賴。</p>
<p>{@example upgrade/static/ts/lite/module.ts region="basic-how-to"}</p>
<p>有關如何使用 <code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 的更多詳細訊息，請參閱<a href="https://angular.io/guide/upgrade">升級以獲得性能</a>。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">moduleOrBootstrapFn</span><code><a href="/api/core/Type">Type</a>&lt;T&gt; | ((extraProviders: <a href="/api/core/StaticProvider">StaticProvider</a>[]) =&gt; Promise&lt;<a href="/api/core/NgModuleRef">NgModuleRef</a>&lt;T&gt;&gt;)</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>string</code></div></div></div></div><div id="downgradeModule_1" class="docs-reference-member-card"><header class="docs-reference-card-header"><code><div><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> downgradeModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> NgModuleFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre></div></code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item docs-reference-card-item-deprecated"><div class="docs-function-definition"><p>一個輔助函式，用於建立一個 AngularJS 模組，該模組可以在需要實例化 <a href="/api/upgrade/static/downgradeComponent"><code>降級元件</code></a> 時『按需』（可能是惰性地）引導 Angular 模組。</p>
<p><em>用於支援預先編譯的混合升級應用的 <a href="api?query=upgrade/static">upgrade/static</a> 函式庫的一部分。</em></p>
<p>它允許惰性地載入/引導混合應用的 Angular 部分，而無需預先支付成本。例如，你可以擁有一個 AngularJS 應用，該應用對特定路由使用 Angular，並且僅在使用者訪問這些路由之一時才實例化 Angular 模組。</p>
<p>Angular 模組將引導一次（首次請求時），並且從那時起將使用相同的引用。</p>
<p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 需要 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>、<code><a href="/api/core/NgModule">NgModule</a></code> 類別或函式：</p>

    <ul class="docs-list">
      <li><code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>：如果傳遞 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>，它將用於實例化一個模組，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModuleFactory"><code>bootstrapModuleFactory()</code></a>。
注意：此引數型別已棄用。請提供 <code><a href="/api/core/NgModule">NgModule</a></code> 類別或引導函式來代替。</li>
<li><code><a href="/api/core/NgModule">NgModule</a></code> 類別：如果傳遞 NgModule 類別，它將用於實例化一個模組，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModule"><code>bootstrapModule()</code></a>。</li>
<li><code>Function</code>：如果傳遞一個函式，則期望它回傳一個 Promise，求解為 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code>。呼叫該函式時會傳入一個額外的 <a href="/api/core/StaticProvider"><code>Providers</code></a> 陣列，這些提供者應可從回傳的 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code> 的 <code><a href="/api/core/Injector">Injector</a></code> 中獲得。</li>

    </ul>
    <p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 回傳所建立的 AngularJS 套件裝器模組的名稱。你可以使用它在你的主 AngularJS 模組中宣告依賴。</p>
<p>{@example upgrade/static/ts/lite/module.ts region="basic-how-to"}</p>
<p>有關如何使用 <code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 的更多詳細訊息，請參閱<a href="https://angular.io/guide/upgrade">升級以獲得性能</a>。</p></div><div><div class="docs-deprecation-message"><span class="docs-param-keyword docs-deprecated">@deprecated</span><span><p>不建議將 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code> 作為 <code><a href="/api/upgrade/static/downgradeModule">downgradeModule</a></code> 函式引數傳遞，請改為傳遞 NgModule 類別引用。</p>
</span></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">moduleOrBootstrapFn</span><code><a href="/api/core/NgModuleFactory">NgModuleFactory</a>&lt;T&gt;</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>string</code></div></div></div></div></div><div class="docs-reference-section"><h2 id="description" class="docs-reference-section-heading"><a href="#description" aria-label="Link to Description section" tabindex="-1">說明</a></h2><div><p>一個輔助函式，用於建立一個 AngularJS 模組，該模組可以在需要實例化 <a href="/api/upgrade/static/downgradeComponent"><code>降級元件</code></a> 時『按需』（可能是惰性地）引導 Angular 模組。</p>
<p><em>用於支援預先編譯的混合升級應用的 <a href="api?query=upgrade/static">upgrade/static</a> 函式庫的一部分。</em></p>
<p>它允許惰性地載入/引導混合應用的 Angular 部分，而無需預先支付成本。例如，你可以擁有一個 AngularJS 應用，該應用對特定路由使用 Angular，並且僅在使用者訪問這些路由之一時才實例化 Angular 模組。</p>
<p>Angular 模組將引導一次（首次請求時），並且從那時起將使用相同的引用。</p>
<p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 需要 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>、<code><a href="/api/core/NgModule">NgModule</a></code> 類別或函式：</p>

    <ul class="docs-list">
      <li><code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>：如果傳遞 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>，它將用於實例化一個模組，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModuleFactory"><code>bootstrapModuleFactory()</code></a>。
注意：此引數型別已棄用。請提供 <code><a href="/api/core/NgModule">NgModule</a></code> 類別或引導函式來代替。</li>
<li><code><a href="/api/core/NgModule">NgModule</a></code> 類別：如果傳遞 NgModule 類別，它將用於實例化一個模組，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModule"><code>bootstrapModule()</code></a>。</li>
<li><code>Function</code>：如果傳遞一個函式，則期望它回傳一個 Promise，求解為 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code>。呼叫該函式時會傳入一個額外的 <a href="/api/core/StaticProvider"><code>Providers</code></a> 陣列，這些提供者應可從回傳的 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code> 的 <code><a href="/api/core/Injector">Injector</a></code> 中獲得。</li>

    </ul>
    <p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 回傳所建立的 AngularJS 套件裝器模組的名稱。你可以使用它在你的主 AngularJS 模組中宣告依賴。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">          <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {platformBrowserDynamic} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/platform-browser-dynamic'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {downgradeComponent, downgradeModule, UpgradeComponent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/upgrade/static'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// The function that will bootstrap the Angular module (when/if necessary).</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// (This would be omitted if we provided an `NgModuleFactory` directly.)</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ng2BootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/StaticProvider">StaticProvider</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  platformBrowserDynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(extraProviders).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">bootstrapModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(MyLazyAngularModule);</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// This AngularJS module represents the AngularJS pieces of the application.</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> myMainAngularJsModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> angular.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'myMainAngularJsModule'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // We declare a dependency on the "downgraded" Angular module.</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ng2BootstrapFn),</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // or</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // downgradeModule(MyLazyAngularModuleFactory)</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);</span></span></code></pre>
        </pre>
      </div>
    <p>有關如何使用 <code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 的更多詳細訊息，請參閱<a href="https://angular.io/guide/upgrade">升級以獲得性能</a>。</p></div></div><div class="docs-reference-section"><h2 id="usage-notes" class="docs-reference-section-heading"><a href="#usage-notes" aria-label="Link to Usage Notes section" tabindex="-1">用法說明</a></h2><div><p>除了 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 之外，你可以像往常一樣使用 <code>upgrade/static</code> 助手的其餘部分來建立混合應用。請注意，在降級模組引導之前（即透過實例化降級元件），Angular 部分（例如，降級服務）將不可用。</p>
<div class="docs-alert docs-alert-important">

<p>你不能在同一個混合應用中使用 <code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 和 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code>。<br>
  請使用其中之一。</p>
</div>


      <h3 id="differences-with-upgrademodule" class="docs-reference-section-heading docs-reference-section-heading--sub">
        <a href="#differences-with-upgrademodule" aria-label="Link to Differences with `UpgradeModule` section" tabindex="-1">與 <code data-skip-anchor>UpgradeModule</code> 的區別
        </a>
      </h3>
    <p>除了它們不同的 API 之外，<code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 和 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 之間還有兩個重要的內部區別，這些區別會影響混合應用的表現：</p>

      <ol class="docs-ordered-list">
        <li>與 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 不同，<code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 不會在 <a href="/api/core/NgZone"><code>Angular Zone</code></a> 內引導主 AngularJS 模組。</li>
<li>與 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 不同，當在應用的 Angular 部分檢測到更改時，<code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 不會自動執行 <a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest">$digest()</a>。</li>

      </ol>
      <p>這意味著使用 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 的應用將更頻繁地執行變更檢測，以確保兩個框架都得到關於可能更改的正確通知。這將不可避免地導致比必要的更多的變更檢測執行。</p>
<p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 另一方面，並沒有嘗試將兩個變更檢測體系緊密地聯絡在一起，而是將顯式的變更檢測執行限制在它認為必要的情況下（例如，當降級元件的輸入發生更改時）。這提高了效能，尤其是在變更檢測密集型應用中，但需要開發人員根據需要手動通知每個框架。</p>
<p>有關差異及其影響的更詳細討論，請參閱 <a href="https://angular.io/guide/upgrade">升級以獲得性能</a>。</p>
<div class="docs-alert docs-alert-helpful">

<p>你可以使用 <a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$apply">scope.$apply(...)</a> 或 <a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest">$rootScope.$digest()</a> 在 AngularJS 中手動觸發變更檢測執行。</p>
<p>你可以使用 <a href="/api/core/NgZone#run"><code>* ngZone.run(...)</code></a> 在 Angular 中手動觸發變更檢測執行。</p>
</div>


      <h3 id="downgrading-multiple-modules" class="docs-reference-section-heading docs-reference-section-heading--sub">
        <a href="#downgrading-multiple-modules" aria-label="Link to Downgrading multiple modules section" tabindex="-1">降級多個模組</a>
      </h3>
    <p>可以降級多個模組並將它們包含在 AngularJS 應用中。在這種情況下，當需要實例化關聯的降級元件或可注入物件時，將引導每個降級模組。</p>
<p>降級多個模組時要記住的事項：</p>

    <ul class="docs-list">
      <li><p>每個降級的元件/可注入物件都需要顯式地與一個降級的模組關聯。有關更多詳細訊息，請參閱 <code><a href="/api/upgrade/static/downgradeComponent()">downgradeComponent()</a></code> 和 <code><a href="/api/upgrade/static/downgradeInjectable()">downgradeInjectable()</a></code>。</p>
</li>
<li><p>如果希望在所有降級模組之間共享某些可注入物件，則可以在建立 <code><a href="/api/core/PlatformRef">PlatformRef</a></code> 時將它們作為 <code><a href="/api/core/StaticProvider">StaticProvider</a></code> 提供（例如，透過 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 或 <code>platformBrowserDynamic</code>）。</p>
</li>
<li><p>當使用 <a href="/api/core/PlatformRef#bootstrapmodule"><code><code>bootstrapModule()</code></code></a> 或 <a href="/api/core/PlatformRef#bootstrapmodulefactory"><code><code>bootstrapModuleFactory()</code></code></a> 引導降級模組時，每個模組都被視為『根』模組。因此，將為在 <code>"root"</code> 中提供的每個可注入物件建立一個新實例（透過 <a href="/api/core/Injectable#providedIn"><code>providedIn</code></a>）。如果這不是你的本意，你可以擁有一個共享模組（它將充當『根』模組），並使用該模組的注入器建立所有降級模組：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">          <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"></span></code></pre>
        </pre>
      </div>
    </li>

    </ul>
    <p>let rootInjectorPromise: Promise<injector>| null = null;
const getRootInjector = (extraProviders: StaticProvider[]) =&gt; {
  if (!rootInjectorPromise) {
    rootInjectorPromise = platformBrowserDynamic(extraProviders)
      .bootstrapModule(Ng2RootModule)
      .then((moduleRef) =&gt; moduleRef.injector);
  }
  return rootInjectorPromise;
};</injector></p>
<p>const downgradedNg2AModule = downgradeModule(async (extraProviders: StaticProvider[]) =&gt; {
  const rootInjector = await getRootInjector(extraProviders);
  const moduleAFactory = await rootInjector.get(Compiler).compileModuleAsync(Ng2AModule);
  return moduleAFactory.create(rootInjector);
});
const downgradedNg2BModule = downgradeModule(async (extraProviders: StaticProvider[]) =&gt; {
  const rootInjector = await getRootInjector(extraProviders);
  const moduleBFactory = await rootInjector.get(Compiler).compileModuleAsync(Ng2BModule);
  return moduleBFactory.create(rootInjector);
});
const appModule = angular
  .module('exampleAppModule', [downgradedNg2AModule, downgradedNg2BModule, downgradedNg2CModule])
```</p>
</div></div></div>