<div class="api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/router</span><div class="docs-reference-title"><div><h1 data-ng_translator_product="100" data-ng_translator_ref_id="cep7zs1bt03tuk131vqcy9d9">求解</h1><div class="docs-api-item-label" data-mode="full" data-type="interface">interface</div><div class="docs-api-item-label" data-mode="full" data-type="deprecated">Deprecated</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/router/src/models.ts#L1235-L1237" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">code</i></a></div><p class="docs-reference-description"></p><p data-ng_translator_product="100" data-ng_translator_ref_id="7yz8yf7d5x0oq4fcfkyhhxq7z">类可以实现的接口，以成为数据提供者。 数据提供者类可以与路由器一起使用，以在导航期间解析数据。 此接口定义了一个 
<code>resolve()</code> 方法，该方法在 
<code>ResolveStart</code> 路由事件之后立即调用。路由器在路由最终激活之前等待数据解析完成。</p><p></p><nav class="docs-pill-row"><a class="docs-pill" href="api/router/ResolveFn">ResolveFn</a></nav></header><div data-tab="API" data-tab-url="api"><div class="docs-reference-api-tab"><div class="docs-code"><pre class="docs-mini-scroll-track"><code><div class="hljs-ln-line "><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Resolve</span> {</div><button aria-describedby="jump-msg" type="button" class="hljs-ln-line " member-id="resolve">  <span class="hljs-title function_">resolve</span>(<span class="hljs-attr">route</span>: <span class="hljs-title class_">ActivatedRouteSnapshot</span>, <span class="hljs-attr">state</span>: <span class="hljs-title class_">RouterStateSnapshot</span>): <span class="hljs-title class_">MaybeAsync</span>&lt;T&gt;;</button><div class="hljs-ln-line ">}</div></code></pre></div></div></div><div data-tab="说明" data-tab-url="description"><div><p data-ng_translator_product="100" data-ng_translator_ref_id="7yz8yf7d5x0oq4fcfkyhhxq7z">类可以实现的接口，以成为数据提供者。 数据提供者类可以与路由器一起使用，以在导航期间解析数据。 此接口定义了一个 
<code>resolve()</code> 方法，该方法在 
<code>ResolveStart</code> 路由事件之后立即调用。路由器在路由最终激活之前等待数据解析完成。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="2nz6ep7llef9a0aabp039vshw">下面的例子实现了一个 
<code>resolve()</code> 方法，用于检索激活所请求路由所需的数据。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-meta">@Injectable({ providedIn: <span class="hljs-string">'root'</span> })</span></span><span class="hljs-ln-line">export <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeroResolver</span> <span class="hljs-title">implements</span> <span class="hljs-title">Resolve</span>&lt;<span class="hljs-type">Hero</span>&gt; {</span><span class="hljs-ln-line">  <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">private</span> service: HeroService) {}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">  resolve(</span><span class="hljs-ln-line">    route: ActivatedRouteSnapshot,</span><span class="hljs-ln-line">    state: RouterStateSnapshot</span><span class="hljs-ln-line">  ): Observable&lt;Hero&gt;|Promise&lt;Hero&gt;|Hero {</span><span class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.service.getHero(route.paramMap.<span class="hljs-keyword">get</span>(<span class="hljs-string">'id'</span>));</span><span class="hljs-ln-line">  }</span><span class="hljs-ln-line">}</span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_ref_id="4bjkvziijpr9tpinod85espor">这里，定义的 
<code>resolve()</code> 函数作为路由器配置中的 
<code>Route</code> 对象的一部分提供：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"></span><span class="hljs-ln-line"><span class="hljs-variable">@NgModule</span>({</span><span class="hljs-ln-line">  <span class="hljs-attribute">imports</span>: [</span><span class="hljs-ln-line">    RouterModule.<span class="hljs-built_in">forRoot</span>([</span><span class="hljs-ln-line">      {</span><span class="hljs-ln-line">        <span class="hljs-attribute">path</span>: <span class="hljs-string">'detail/:id'</span>,</span><span class="hljs-ln-line">        <span class="hljs-attribute">component</span>: HeroDetailComponent,</span><span class="hljs-ln-line">        <span class="hljs-attribute">resolve</span>: {</span><span class="hljs-ln-line">          <span class="hljs-attribute">hero</span>: HeroResolver</span><span class="hljs-ln-line">        }</span><span class="hljs-ln-line">      }</span><span class="hljs-ln-line">    ])</span><span class="hljs-ln-line">  ],</span><span class="hljs-ln-line">  <span class="hljs-attribute">exports</span>: [RouterModule]</span><span class="hljs-ln-line">})</span><span class="hljs-ln-line">export class AppRoutingModule {}</span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="7szlv2a857quias6qs3q1miu4">你可以从 <code>HeroComponent</code> 访问你解析的数据：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line"><span class="hljs-meta">@Component</span>({</span><span class="hljs-ln-line"> <span class="hljs-attr">selector</span>: <span class="hljs-string">"app-hero"</span>,</span><span class="hljs-ln-line"> <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">"hero.component.html"</span>,</span><span class="hljs-ln-line">})</span><span class="hljs-ln-line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeroComponent</span> {</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> activatedRoute: ActivatedRoute</span>) {}</span><span class="hljs-ln-line"></span><span class="hljs-ln-line"> <span class="hljs-title function_">ngOnInit</span>(<span class="hljs-params"></span>) {</span><span class="hljs-ln-line">   <span class="hljs-variable language_">this</span>.<span class="hljs-property">activatedRoute</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">{ hero }</span>) =&gt;</span> {</span><span class="hljs-ln-line">     <span class="hljs-comment">// do something with your resolved data ...</span></span><span class="hljs-ln-line">   })</span><span class="hljs-ln-line"> }</span><span class="hljs-ln-line"></span><span class="hljs-ln-line">}</span>
          </code>
        </pre>
      </div></div></div><div data-tab="用法说明" data-tab-url="usage-notes"><div><p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="bwzfofua34zjm2xepobawnbg5">如果同时指定了守卫和解析器，则直到所有守卫都运行并成功后，解析器才会执行。比如，考虑以下路由配置：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">
          <code>
            <span class="hljs-ln-line">{</span><span class="hljs-ln-line"> <span class="hljs-attr">path:</span> <span class="hljs-string">'base'</span></span><span class="hljs-ln-line"> <span class="hljs-attr">canActivate:</span> [<span class="hljs-string">BaseGuard</span>],</span><span class="hljs-ln-line"> <span class="hljs-attr">resolve:</span> {<span class="hljs-attr">data:</span> <span class="hljs-string">BaseDataResolver</span>}</span><span class="hljs-ln-line"> <span class="hljs-attr">children:</span> [</span><span class="hljs-ln-line">  {</span><span class="hljs-ln-line">    <span class="hljs-attr">path:</span> <span class="hljs-string">'child'</span>,</span><span class="hljs-ln-line">    <span class="hljs-attr">guards:</span> [<span class="hljs-string">ChildGuard</span>],</span><span class="hljs-ln-line">    <span class="hljs-attr">component:</span> <span class="hljs-string">ChildComponent</span>,</span><span class="hljs-ln-line">    <span class="hljs-attr">resolve:</span> {<span class="hljs-attr">childData:</span> <span class="hljs-string">ChildDataResolver</span>}</span><span class="hljs-ln-line">   }</span><span class="hljs-ln-line"> ]</span><span class="hljs-ln-line">}</span>
          </code>
        </pre>
      </div>
    <p data-ng_translator_product="100" data-ng_translator_confirmed data-ng_translator_ref_id="6o83yyhx9u0pta5ru6hqi6p8r">执行顺序为：BaseGuard、ChildGuard、BaseDataResolver、ChildDataResolver。</p>
</div></div><div class="docs-reference-members-container"><div class="docs-reference-members"><div id="resolve" class="docs-reference-member-card" tabindex="-1"><header><div class="docs-reference-header"><h3>resolve</h3><div><code>MaybeAsync&lt;T&gt;</code></div></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">route</span><code>ActivatedRouteSnapshot</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">state</span><code>RouterStateSnapshot</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>MaybeAsync&lt;T&gt;</code></div></div></div></div></div></div></div>